"use strict";function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get;}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver);}return desc.value;};}return _get(target,property,receiver||target);}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break;}return object;}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i["return"]!=null)_i["return"]();}finally{if(_d)throw _e;}}return _arr;}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function _createForOfIteratorHelper(o,allowArrayLike){var it;if(typeof Symbol==="undefined"||o[Symbol.iterator]==null){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e334){throw _e334;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=o[Symbol.iterator]();},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e335){didErr=true;err=_e335;},f:function f(){try{if(!normalCompletion&&it["return"]!=null)it["return"]();}finally{if(didErr)throw err;}}};}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread();}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter);}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map():undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function");}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper);}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor);}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class);};return _wrapNativeSuper(Class);}function _construct(Parent,args,Class){if(_isNativeReflectConstruct()){_construct=Reflect.construct;}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor();if(Class)_setPrototypeOf(instance,Class.prototype);return instance;};}return _construct.apply(null,arguments);}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1;}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}!function(t){var e=t.en=t.en||{};e.dictionary=Object.assign(e.dictionary||{},{"%0 of %1":"%0 of %1","Align center":"Align center","Align left":"Align left","Align right":"Align right",Big:"Big","Block quote":"Block quote",Bold:"Bold","Bulleted List":"Bulleted List","Bulleted list styles toolbar":"Bulleted list styles toolbar",Cancel:"Cancel","Cannot upload file:":"Cannot upload file:","Centered image":"Centered image","Change image text alternative":"Change image text alternative","Choose heading":"Choose heading",Circle:"Circle",Code:"Code",Column:"Column","Could not insert image at the current position.":"Could not insert image at the current position.","Could not obtain resized image URL.":"Could not obtain resized image URL.",Decimal:"Decimal","Decimal with leading zero":"Decimal with leading zero","Decrease indent":"Decrease indent",Default:"Default","Delete column":"Delete column","Delete row":"Delete row",Disc:"Disc",Downloadable:"Downloadable","Dropdown toolbar":"Dropdown toolbar","Edit link":"Edit link","Editor toolbar":"Editor toolbar","Enter image caption":"Enter image caption","Font Family":"Font Family","Font Size":"Font Size","Full size image":"Full size image","Header column":"Header column","Header row":"Header row",Heading:"Heading","Heading 1":"Heading 1","Heading 2":"Heading 2","Heading 3":"Heading 3","Heading 4":"Heading 4","Heading 5":"Heading 5","Heading 6":"Heading 6",Huge:"Huge","Image toolbar":"Image toolbar","image widget":"image widget","Increase indent":"Increase indent","Insert column left":"Insert column left","Insert column right":"Insert column right","Insert image":"Insert image","Insert image or file":"Insert image or file","Insert media":"Insert media","Insert paragraph after block":"Insert paragraph after block","Insert paragraph before block":"Insert paragraph before block","Insert row above":"Insert row above","Insert row below":"Insert row below","Insert table":"Insert table","Inserting image failed":"Inserting image failed",Italic:"Italic",Justify:"Justify","Left aligned image":"Left aligned image",Link:"Link","Link URL":"Link URL","Lower-latin":"Lower-latin","Lower–roman":"Lower–roman","Media URL":"Media URL","media widget":"media widget","Merge cell down":"Merge cell down","Merge cell left":"Merge cell left","Merge cell right":"Merge cell right","Merge cell up":"Merge cell up","Merge cells":"Merge cells",Next:"Next","Numbered List":"Numbered List","Numbered list styles toolbar":"Numbered list styles toolbar","Open in a new tab":"Open in a new tab","Open link in new tab":"Open link in new tab",Paragraph:"Paragraph","Paste the media URL in the input.":"Paste the media URL in the input.",Previous:"Previous",Redo:"Redo","Rich Text Editor":"Rich Text Editor","Rich Text Editor, %0":"Rich Text Editor, %0","Right aligned image":"Right aligned image",Row:"Row",Save:"Save","Saving changes":"Saving changes","Select all":"Select all","Select column":"Select column","Select row":"Select row","Selecting resized image failed":"Selecting resized image failed","Show more items":"Show more items","Side image":"Side image",Small:"Small","Split cell horizontally":"Split cell horizontally","Split cell vertically":"Split cell vertically",Square:"Square","Table toolbar":"Table toolbar","Text alignment":"Text alignment","Text alignment toolbar":"Text alignment toolbar","Text alternative":"Text alternative","The URL must not be empty.":"The URL must not be empty.","This link has no URL":"This link has no URL","This media URL is not supported.":"This media URL is not supported.",Tiny:"Tiny","Tip: Paste the URL into the content to embed faster.":"Tip: Paste the URL into the content to embed faster.","Toggle the circle list style":"Toggle the circle list style","Toggle the decimal list style":"Toggle the decimal list style","Toggle the decimal with leading zero list style":"Toggle the decimal with leading zero list style","Toggle the disc list style":"Toggle the disc list style","Toggle the lower–latin list style":"Toggle the lower–latin list style","Toggle the lower–roman list style":"Toggle the lower–roman list style","Toggle the square list style":"Toggle the square list style","Toggle the upper–latin list style":"Toggle the upper–latin list style","Toggle the upper–roman list style":"Toggle the upper–roman list style",Underline:"Underline",Undo:"Undo",Unlink:"Unlink","Upload failed":"Upload failed","Upload in progress":"Upload in progress","Upper-latin":"Upper-latin","Upper-roman":"Upper-roman","Widget toolbar":"Widget toolbar"});}(window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={})),function(t,e){"object"==(typeof exports==="undefined"?"undefined":_typeof(exports))&&"object"==(typeof module==="undefined"?"undefined":_typeof(module))?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==(typeof exports==="undefined"?"undefined":_typeof(exports))?exports.ClassicEditor=e():t.ClassicEditor=e();}(window,function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports;}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n});},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0});},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==_typeof(t)&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t){i.d(n,o,function(e){return t[e];}.bind(null,o));}return n;},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"];}:function(){return t;};return i.d(e,"a",e),e;},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e);},i.p="",i(i.s=108);}([function(t,e,i){"use strict";i.d(e,"a",function(){return n;}),i.d(e,"c",function(){return o;}),i.d(e,"b",function(){return r;});var n=/*#__PURE__*/function(_Error){_inherits(n,_Error);var _super=_createSuper(n);function n(t,e,i){var _this;_classCallCheck(this,n);_this=_super.call(this,"".concat(t).concat(i?" "+JSON.stringify(i):"").concat(s(t))),_this.name="CKEditorError",_this.context=e,_this.data=i;return _this;}_createClass(n,[{key:"is",value:function is(t){return"CKEditorError"===t;}}],[{key:"rethrowUnexpectedError",value:function rethrowUnexpectedError(t,e){if(t.is&&t.is("CKEditorError"))throw t;var i=new n(t.message,e);throw i.stack=t.stack,i;}}]);return n;}(/*#__PURE__*/_wrapNativeSuper(Error));function o(t,e){var _console;(_console=console).warn.apply(_console,_toConsumableArray(a(t,e)));}function r(t,e){var _console2;(_console2=console).error.apply(_console2,_toConsumableArray(a(t,e)));}function s(t){return"\nRead more: https://ckeditor.com/docs/ckeditor5/latest/framework/guides/support/error-codes.html#error-"+t;}function a(t,e){var i=s(t);return e?[t,e,i]:[t,i];}},function(t,e,i){"use strict";var n,o=function o(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n;},r=function(){var t={};return function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head;}catch(t){i=null;}t[e]=i;}return t[e];};}(),s=[];function a(t){for(var e=-1,i=0;i<s.length;i++){if(s[i].identifier===t){e=i;break;}}return e;}function c(t,e){for(var i={},n=[],o=0;o<t.length;o++){var r=t[o],c=e.base?r[0]+e.base:r[0],l=i[c]||0,d="".concat(c," ").concat(l);i[c]=l+1;var u=a(d),h={css:r[1],media:r[2],sourceMap:r[3]};-1!==u?(s[u].references++,s[u].updater(h)):s.push({identifier:d,updater:p(h,e),references:1}),n.push(d);}return n;}function l(t){var e=document.createElement("style"),n=t.attributes||{};if(void 0===n.nonce){var o=i.nc;o&&(n.nonce=o);}if(Object.keys(n).forEach(function(t){e.setAttribute(t,n[t]);}),"function"==typeof t.insert)t.insert(e);else{var s=r(t.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(e);}return e;}var d,u=(d=[],function(t,e){return d[t]=e,d.filter(Boolean).join("\n");});function h(t,e,i,n){var o=i?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(t.styleSheet)t.styleSheet.cssText=u(e,o);else{var r=document.createTextNode(o),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(r,s[e]):t.appendChild(r);}}function f(t,e,i){var n=i.css,o=i.media,r=i.sourceMap;if(o?t.setAttribute("media",o):t.removeAttribute("media"),r&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;){t.removeChild(t.firstChild);}t.appendChild(document.createTextNode(n));}}var m=null,g=0;function p(t,e){var i,n,o;if(e.singleton){var r=g++;i=m||(m=l(e)),n=h.bind(null,i,r,!1),o=h.bind(null,i,r,!0);}else i=l(e),n=f.bind(null,i,e),o=function o(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);}(i);};return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e);}else o();};}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=o());var i=c(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var n=0;n<i.length;n++){var o=a(i[n]);s[o].references--;}for(var r=c(t,e),l=0;l<i.length;l++){var d=a(i[l]);0===s[d].references&&(s[d].updater(),s.splice(d,1));}i=r;}};};},,function(t,e,i){"use strict";var n=i(8),o="object"==(typeof self==="undefined"?"undefined":_typeof(self))&&self&&self.Object===Object&&self,r=n.a||o||Function("return this")();e.a=r;},function(t,e,i){"use strict";(function(t){var n=i(3),o=i(14),r="object"==(typeof exports==="undefined"?"undefined":_typeof(exports))&&exports&&!exports.nodeType&&exports,s=r&&"object"==_typeof(t)&&t&&!t.nodeType&&t,a=s&&s.exports===r?n.a.Buffer:void 0,c=(a?a.isBuffer:void 0)||o.a;e.a=c;}).call(this,i(10)(t));},function(t,e,i){"use strict";(function(t){var n=i(8),o="object"==(typeof exports==="undefined"?"undefined":_typeof(exports))&&exports&&!exports.nodeType&&exports,r=o&&"object"==_typeof(t)&&t&&!t.nodeType&&t,s=r&&r.exports===o&&n.a.process,a=function(){try{var t=r&&r.require&&r.require("util").types;return t||s&&s.binding&&s.binding("util");}catch(t){}}();e.a=a;}).call(this,i(10)(t));},function(t,e,i){"use strict";(function(t){var e=i(0);var n="object"==(typeof window==="undefined"?"undefined":_typeof(window))?window:t;if(n.CKEDITOR_VERSION)throw new e.a("ckeditor-duplicated-modules",null);n.CKEDITOR_VERSION="25.0.0";}).call(this,i(11));},function(t,e,i){var n=i(1),o=i(61);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[t.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);t.exports=o.locals||{};},function(t,e,i){"use strict";(function(t){var i="object"==_typeof(t)&&t&&t.Object===Object&&t;e.a=i;}).call(this,i(11));},function(t,e,i){"use strict";(function(t){var n=i(3),o="object"==(typeof exports==="undefined"?"undefined":_typeof(exports))&&exports&&!exports.nodeType&&exports,r=o&&"object"==_typeof(t)&&t&&!t.nodeType&&t,s=r&&r.exports===o?n.a.Buffer:void 0,a=s?s.allocUnsafe:void 0;e.a=function(t,e){if(e)return t.slice();var i=t.length,n=a?a(i):new t.constructor(i);return t.copy(n),n;};}).call(this,i(10)(t));},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function get(){return e.l;}}),Object.defineProperty(e,"id",{enumerable:!0,get:function get(){return e.i;}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1;}return e;};},function(t,e){var i;i=function(){return this;}();try{i=i||new Function("return this")();}catch(t){"object"==(typeof window==="undefined"?"undefined":_typeof(window))&&(i=window);}t.exports=i;},function(t,e,i){var n=i(1),o=i(74);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[t.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);t.exports=o.locals||{};},function(t,e,i){var n=i(1),o=i(107);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[t.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);t.exports=o.locals||{};},function(t,e,i){"use strict";e.a=function(){return!1;};},function(t,e,i){var n=i(1),o=i(16);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[t.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);t.exports=o.locals||{};},function(t,e){t.exports=".ck.ck-placeholder,.ck .ck-placeholder{position:relative}.ck.ck-placeholder:before,.ck .ck-placeholder:before{position:absolute;left:0;right:0;content:attr(data-placeholder);pointer-events:none}.ck.ck-read-only .ck-placeholder:before{display:none}.ck.ck-placeholder:before,.ck .ck-placeholder:before{cursor:text;color:var(--ck-color-engine-placeholder-text)}";},function(t,e,i){var n=i(1),o=i(18);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[t.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);t.exports=o.locals||{};},function(t,e){t.exports=".ck-hidden{display:none!important}.ck.ck-reset,.ck.ck-reset_all,.ck.ck-reset_all *{box-sizing:border-box;width:auto;height:auto;position:static}:root{--ck-z-default:1;--ck-z-modal:calc(var(--ck-z-default) + 999)}.ck-transitions-disabled,.ck-transitions-disabled *{transition:none!important}:root{--ck-color-base-foreground:#fafafa;--ck-color-base-background:#fff;--ck-color-base-border:#c4c4c4;--ck-color-base-action:#61b045;--ck-color-base-focus:#6cb5f9;--ck-color-base-text:#333;--ck-color-base-active:#198cf0;--ck-color-base-active-focus:#0e7fe1;--ck-color-base-error:#db3700;--ck-color-focus-border-coordinates:208,79%,51%;--ck-color-focus-border:hsl(var(--ck-color-focus-border-coordinates));--ck-color-focus-outer-shadow:#bcdefb;--ck-color-focus-disabled-shadow:rgba(119,186,248,0.3);--ck-color-focus-error-shadow:rgba(255,64,31,0.3);--ck-color-text:var(--ck-color-base-text);--ck-color-shadow-drop:rgba(0,0,0,0.15);--ck-color-shadow-drop-active:rgba(0,0,0,0.2);--ck-color-shadow-inner:rgba(0,0,0,0.1);--ck-color-button-default-background:transparent;--ck-color-button-default-hover-background:#e6e6e6;--ck-color-button-default-active-background:#d9d9d9;--ck-color-button-default-active-shadow:#bfbfbf;--ck-color-button-default-disabled-background:transparent;--ck-color-button-on-background:#dedede;--ck-color-button-on-hover-background:#c4c4c4;--ck-color-button-on-active-background:#bababa;--ck-color-button-on-active-shadow:#a1a1a1;--ck-color-button-on-disabled-background:#dedede;--ck-color-button-action-background:var(--ck-color-base-action);--ck-color-button-action-hover-background:#579e3d;--ck-color-button-action-active-background:#53973b;--ck-color-button-action-active-shadow:#498433;--ck-color-button-action-disabled-background:#7ec365;--ck-color-button-action-text:var(--ck-color-base-background);--ck-color-button-save:#008a00;--ck-color-button-cancel:#db3700;--ck-color-switch-button-off-background:#b0b0b0;--ck-color-switch-button-off-hover-background:#a3a3a3;--ck-color-switch-button-on-background:var(--ck-color-button-action-background);--ck-color-switch-button-on-hover-background:#579e3d;--ck-color-switch-button-inner-background:var(--ck-color-base-background);--ck-color-switch-button-inner-shadow:rgba(0,0,0,0.1);--ck-color-dropdown-panel-background:var(--ck-color-base-background);--ck-color-dropdown-panel-border:var(--ck-color-base-border);--ck-color-input-background:var(--ck-color-base-background);--ck-color-input-border:#c7c7c7;--ck-color-input-error-border:var(--ck-color-base-error);--ck-color-input-text:var(--ck-color-base-text);--ck-color-input-disabled-background:#f2f2f2;--ck-color-input-disabled-border:#c7c7c7;--ck-color-input-disabled-text:#757575;--ck-color-list-background:var(--ck-color-base-background);--ck-color-list-button-hover-background:var(--ck-color-button-default-hover-background);--ck-color-list-button-on-background:var(--ck-color-base-active);--ck-color-list-button-on-background-focus:var(--ck-color-base-active-focus);--ck-color-list-button-on-text:var(--ck-color-base-background);--ck-color-panel-background:var(--ck-color-base-background);--ck-color-panel-border:var(--ck-color-base-border);--ck-color-toolbar-background:var(--ck-color-base-foreground);--ck-color-toolbar-border:var(--ck-color-base-border);--ck-color-tooltip-background:var(--ck-color-base-text);--ck-color-tooltip-text:var(--ck-color-base-background);--ck-color-engine-placeholder-text:#707070;--ck-color-upload-bar-background:#6cb5f9;--ck-color-link-default:#0000f0;--ck-color-link-selected-background:rgba(31,177,255,0.1);--ck-color-link-fake-selection:rgba(31,177,255,0.3);--ck-disabled-opacity:.5;--ck-focus-outer-shadow-geometry:0 0 0 3px;--ck-focus-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-outer-shadow);--ck-focus-disabled-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-disabled-shadow);--ck-focus-error-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-error-shadow);--ck-focus-ring:1px solid var(--ck-color-focus-border);--ck-font-size-base:13px;--ck-line-height-base:1.84615;--ck-font-face:Helvetica,Arial,Tahoma,Verdana,Sans-Serif;--ck-font-size-tiny:0.7em;--ck-font-size-small:0.75em;--ck-font-size-normal:1em;--ck-font-size-big:1.4em;--ck-font-size-large:1.8em;--ck-ui-component-min-height:2.3em}.ck.ck-reset,.ck.ck-reset_all,.ck.ck-reset_all *{margin:0;padding:0;border:0;background:transparent;text-decoration:none;vertical-align:middle;transition:none;word-wrap:break-word}.ck.ck-reset_all,.ck.ck-reset_all *{border-collapse:collapse;font:normal normal normal var(--ck-font-size-base)/var(--ck-line-height-base) var(--ck-font-face);color:var(--ck-color-text);text-align:left;white-space:nowrap;cursor:auto;float:none}.ck.ck-reset_all .ck-rtl *{text-align:right}.ck.ck-reset_all iframe{vertical-align:inherit}.ck.ck-reset_all textarea{white-space:pre-wrap}.ck.ck-reset_all input[type=password],.ck.ck-reset_all input[type=text],.ck.ck-reset_all textarea{cursor:text}.ck.ck-reset_all input[type=password][disabled],.ck.ck-reset_all input[type=text][disabled],.ck.ck-reset_all textarea[disabled]{cursor:default}.ck.ck-reset_all fieldset{padding:10px;border:2px groove #dfdee3}.ck.ck-reset_all button::-moz-focus-inner{padding:0;border:0}.ck[dir=rtl],.ck[dir=rtl] .ck{text-align:right}:root{--ck-border-radius:2px;--ck-inner-shadow:2px 2px 3px var(--ck-color-shadow-inner) inset;--ck-drop-shadow:0 1px 2px 1px var(--ck-color-shadow-drop);--ck-drop-shadow-active:0 3px 6px 1px var(--ck-color-shadow-drop-active);--ck-spacing-unit:0.6em;--ck-spacing-large:calc(var(--ck-spacing-unit)*1.5);--ck-spacing-standard:var(--ck-spacing-unit);--ck-spacing-medium:calc(var(--ck-spacing-unit)*0.8);--ck-spacing-small:calc(var(--ck-spacing-unit)*0.5);--ck-spacing-tiny:calc(var(--ck-spacing-unit)*0.3);--ck-spacing-extra-tiny:calc(var(--ck-spacing-unit)*0.16)}";},function(t,e,i){var n=i(1),o=i(20);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[t.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);t.exports=o.locals||{};},function(t,e){t.exports=":root{--ck-color-editable-blur-selection:#d9d9d9}.ck.ck-editor__editable:not(.ck-editor__nested-editable){border-radius:0}.ck-rounded-corners .ck.ck-editor__editable:not(.ck-editor__nested-editable),.ck.ck-editor__editable:not(.ck-editor__nested-editable).ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-editor__editable:not(.ck-editor__nested-editable).ck-focused{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0}.ck.ck-editor__editable_inline{overflow:auto;padding:0 var(--ck-spacing-standard);border:1px solid transparent}.ck.ck-editor__editable_inline[dir=ltr]{text-align:left}.ck.ck-editor__editable_inline[dir=rtl]{text-align:right}.ck.ck-editor__editable_inline>:first-child{margin-top:var(--ck-spacing-large)}.ck.ck-editor__editable_inline>:last-child{margin-bottom:var(--ck-spacing-large)}.ck.ck-editor__editable_inline.ck-blurred ::selection{background:var(--ck-color-editable-blur-selection)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_n]:after{border-bottom-color:var(--ck-color-base-foreground)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_s]:after{border-top-color:var(--ck-color-base-foreground)}";},function(t,e,i){var n=i(1),o=i(22);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[t.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);t.exports=o.locals||{};},function(t,e){t.exports=".ck.ck-label{display:block}.ck.ck-voice-label{display:none}.ck.ck-label{font-weight:700}";},function(t,e,i){var n=i(1),o=i(24);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[t.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);t.exports=o.locals||{};},function(t,e){t.exports=".ck.ck-sticky-panel .ck-sticky-panel__content_sticky{z-index:var(--ck-z-modal);position:fixed;top:0}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky_bottom-limit{top:auto;position:absolute}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky{box-shadow:var(--ck-drop-shadow),0 0;border-width:0 1px 1px;border-top-left-radius:0;border-top-right-radius:0}";},function(t,e,i){var n=i(1),o=i(26);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[t.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);t.exports=o.locals||{};},function(t,e){t.exports=":root{--ck-dropdown-max-width:75vw}.ck.ck-dropdown{display:inline-block;position:relative}.ck.ck-dropdown .ck-dropdown__arrow{pointer-events:none;z-index:var(--ck-z-default)}.ck.ck-dropdown .ck-button.ck-dropdown__button{width:100%}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on .ck-tooltip{display:none}.ck.ck-dropdown .ck-dropdown__panel{-webkit-backface-visibility:hidden;display:none;z-index:var(--ck-z-modal);max-width:var(--ck-dropdown-max-width);position:absolute}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel-visible{display:inline-block}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_n,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nme,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nmw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw{bottom:100%}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_s,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sme,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_smw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw{top:100%;bottom:auto}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se{left:0}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw{right:0}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_n,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_s{left:50%;transform:translateX(-50%)}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nmw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_smw{left:75%;transform:translateX(-75%)}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nme,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sme{left:25%;transform:translateX(-25%)}.ck.ck-toolbar .ck-dropdown__panel{z-index:calc(var(--ck-z-modal) + 1)}:root{--ck-dropdown-arrow-size:calc(var(--ck-icon-size)*0.5)}.ck.ck-dropdown{font-size:inherit}.ck.ck-dropdown .ck-dropdown__arrow{width:var(--ck-dropdown-arrow-size)}[dir=ltr] .ck.ck-dropdown .ck-dropdown__arrow{right:var(--ck-spacing-standard);margin-left:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-dropdown .ck-dropdown__arrow{left:var(--ck-spacing-standard);margin-right:var(--ck-spacing-small)}.ck.ck-dropdown.ck-disabled .ck-dropdown__arrow{opacity:var(--ck-disabled-opacity)}[dir=ltr] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-left:var(--ck-spacing-small)}[dir=rtl] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-right:var(--ck-spacing-small)}.ck.ck-dropdown .ck-button.ck-dropdown__button .ck-button__label{width:7em;overflow:hidden;text-overflow:ellipsis}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on{border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-dropdown__button_label-width_auto .ck-button__label{width:auto}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-off:active,.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on:active{box-shadow:none}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-off:active:focus,.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on:active:focus{box-shadow:var(--ck-focus-outer-shadow),0 0}.ck.ck-dropdown__panel{border-radius:0}.ck-rounded-corners .ck.ck-dropdown__panel,.ck.ck-dropdown__panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-dropdown__panel{box-shadow:var(--ck-drop-shadow),0 0;background:var(--ck-color-dropdown-panel-background);border:1px solid var(--ck-color-dropdown-panel-border);bottom:0;min-width:100%}.ck.ck-dropdown__panel.ck-dropdown__panel_se{border-top-left-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_sw{border-top-right-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_ne{border-bottom-left-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_nw{border-bottom-right-radius:0}";},function(t,e,i){var n=i(1),o=i(28);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[t.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);t.exports=o.locals||{};},function(t,e){t.exports=".ck.ck-icon{vertical-align:middle}:root{--ck-icon-size:calc(var(--ck-line-height-base)*var(--ck-font-size-normal))}.ck.ck-icon{width:var(--ck-icon-size);height:var(--ck-icon-size);font-size:.8333350694em;will-change:transform}.ck.ck-icon,.ck.ck-icon *{color:inherit;cursor:inherit}.ck.ck-icon :not([fill]){fill:currentColor}";},function(t,e,i){var n=i(1),o=i(30);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[t.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);t.exports=o.locals||{};},function(t,e){t.exports='.ck.ck-tooltip,.ck.ck-tooltip .ck-tooltip__text:after{position:absolute;pointer-events:none;-webkit-backface-visibility:hidden}.ck.ck-tooltip{visibility:hidden;opacity:0;display:none;z-index:var(--ck-z-modal)}.ck.ck-tooltip .ck-tooltip__text{display:inline-block}.ck.ck-tooltip .ck-tooltip__text:after{content:"";width:0;height:0}:root{--ck-tooltip-arrow-size:5px}.ck.ck-tooltip{left:50%;top:0;transition:opacity .2s ease-in-out .2s}.ck.ck-tooltip .ck-tooltip__text{border-radius:0}.ck-rounded-corners .ck.ck-tooltip .ck-tooltip__text,.ck.ck-tooltip .ck-tooltip__text.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-tooltip .ck-tooltip__text{font-size:.9em;line-height:1.5;color:var(--ck-color-tooltip-text);padding:var(--ck-spacing-small) var(--ck-spacing-medium);background:var(--ck-color-tooltip-background);position:relative;left:-50%}.ck.ck-tooltip .ck-tooltip__text:after{transition:opacity .2s ease-in-out .2s;border-style:solid;left:50%}.ck.ck-tooltip.ck-tooltip_s,.ck.ck-tooltip.ck-tooltip_se,.ck.ck-tooltip.ck-tooltip_sw{bottom:calc(var(--ck-tooltip-arrow-size)*-1);transform:translateY(100%)}.ck.ck-tooltip.ck-tooltip_s .ck-tooltip__text:after,.ck.ck-tooltip.ck-tooltip_se .ck-tooltip__text:after,.ck.ck-tooltip.ck-tooltip_sw .ck-tooltip__text:after{top:calc(var(--ck-tooltip-arrow-size)*-1 + 1px);transform:translateX(-50%);border-left-color:transparent;border-bottom-color:var(--ck-color-tooltip-background);border-right-color:transparent;border-top-color:transparent;border-left-width:var(--ck-tooltip-arrow-size);border-bottom-width:var(--ck-tooltip-arrow-size);border-right-width:var(--ck-tooltip-arrow-size);border-top-width:0}.ck.ck-tooltip.ck-tooltip_sw{right:50%;left:auto}.ck.ck-tooltip.ck-tooltip_sw .ck-tooltip__text{left:auto;right:calc(var(--ck-tooltip-arrow-size)*-2)}.ck.ck-tooltip.ck-tooltip_sw .ck-tooltip__text:after{left:auto;right:0}.ck.ck-tooltip.ck-tooltip_se{left:50%;right:auto}.ck.ck-tooltip.ck-tooltip_se .ck-tooltip__text{right:auto;left:calc(var(--ck-tooltip-arrow-size)*-2)}.ck.ck-tooltip.ck-tooltip_se .ck-tooltip__text:after{right:auto;left:0;transform:translateX(50%)}.ck.ck-tooltip.ck-tooltip_n{top:calc(var(--ck-tooltip-arrow-size)*-1);transform:translateY(-100%)}.ck.ck-tooltip.ck-tooltip_n .ck-tooltip__text:after{bottom:calc(var(--ck-tooltip-arrow-size)*-1);transform:translateX(-50%);border-left-color:transparent;border-bottom-color:transparent;border-right-color:transparent;border-top-color:var(--ck-color-tooltip-background);border-left-width:var(--ck-tooltip-arrow-size);border-bottom-width:0;border-right-width:var(--ck-tooltip-arrow-size);border-top-width:var(--ck-tooltip-arrow-size)}.ck.ck-tooltip.ck-tooltip_e{left:calc(100% + var(--ck-tooltip-arrow-size));top:50%}.ck.ck-tooltip.ck-tooltip_e .ck-tooltip__text{left:0;transform:translateY(-50%)}.ck.ck-tooltip.ck-tooltip_e .ck-tooltip__text:after{left:calc(var(--ck-tooltip-arrow-size)*-1);top:calc(50% - var(--ck-tooltip-arrow-size)*1);border-left-color:transparent;border-bottom-color:transparent;border-right-color:var(--ck-color-tooltip-background);border-top-color:transparent;border-left-width:0;border-bottom-width:var(--ck-tooltip-arrow-size);border-right-width:var(--ck-tooltip-arrow-size);border-top-width:var(--ck-tooltip-arrow-size)}.ck.ck-tooltip.ck-tooltip_w{right:calc(100% + var(--ck-tooltip-arrow-size));left:auto;top:50%}.ck.ck-tooltip.ck-tooltip_w .ck-tooltip__text{left:0;transform:translateY(-50%)}.ck.ck-tooltip.ck-tooltip_w .ck-tooltip__text:after{left:100%;top:calc(50% - var(--ck-tooltip-arrow-size)*1);border-left-color:var(--ck-color-tooltip-background);border-bottom-color:transparent;border-right-color:transparent;border-top-color:transparent;border-left-width:var(--ck-tooltip-arrow-size);border-bottom-width:var(--ck-tooltip-arrow-size);border-right-width:0;border-top-width:var(--ck-tooltip-arrow-size)}';},function(t,e,i){var n=i(1),o=i(32);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[t.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);t.exports=o.locals||{};},function(t,e){t.exports=".ck.ck-button,a.ck.ck-button{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.ck.ck-button .ck-tooltip,a.ck.ck-button .ck-tooltip{display:block}@media (hover:none){.ck.ck-button .ck-tooltip,a.ck.ck-button .ck-tooltip{display:none}}.ck.ck-button,a.ck.ck-button{position:relative;display:inline-flex;align-items:center;justify-content:left}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{display:none}.ck.ck-button.ck-button_with-text .ck-button__label,a.ck.ck-button.ck-button_with-text .ck-button__label{display:inline-block}.ck.ck-button:not(.ck-button_with-text),a.ck.ck-button:not(.ck-button_with-text){justify-content:center}.ck.ck-button:hover .ck-tooltip,a.ck.ck-button:hover .ck-tooltip{visibility:visible;opacity:1}.ck.ck-button:focus:not(:hover) .ck-tooltip,a.ck.ck-button:focus:not(:hover) .ck-tooltip{display:none}.ck.ck-button,a.ck.ck-button{background:var(--ck-color-button-default-background)}.ck.ck-button:not(.ck-disabled):hover,a.ck.ck-button:not(.ck-disabled):hover{background:var(--ck-color-button-default-hover-background)}.ck.ck-button:not(.ck-disabled):active,a.ck.ck-button:not(.ck-disabled):active{background:var(--ck-color-button-default-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-default-active-shadow)}.ck.ck-button.ck-disabled,a.ck.ck-button.ck-disabled{background:var(--ck-color-button-default-disabled-background)}.ck.ck-button,a.ck.ck-button{border-radius:0}.ck-rounded-corners .ck.ck-button,.ck-rounded-corners a.ck.ck-button,.ck.ck-button.ck-rounded-corners,a.ck.ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-button,a.ck.ck-button{white-space:nowrap;cursor:default;vertical-align:middle;padding:var(--ck-spacing-tiny);text-align:center;min-width:var(--ck-ui-component-min-height);min-height:var(--ck-ui-component-min-height);line-height:1;font-size:inherit;border:1px solid transparent;transition:box-shadow .2s ease-in-out,border .2s ease-in-out;-webkit-appearance:none}.ck.ck-button:active,.ck.ck-button:focus,a.ck.ck-button:active,a.ck.ck-button:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0}.ck.ck-button .ck-button__icon use,.ck.ck-button .ck-button__icon use *,a.ck.ck-button .ck-button__icon use,a.ck.ck-button .ck-button__icon use *{color:inherit}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{font-size:inherit;font-weight:inherit;color:inherit;cursor:inherit;vertical-align:middle}[dir=ltr] .ck.ck-button .ck-button__label,[dir=ltr] a.ck.ck-button .ck-button__label{text-align:left}[dir=rtl] .ck.ck-button .ck-button__label,[dir=rtl] a.ck.ck-button .ck-button__label{text-align:right}.ck.ck-button .ck-button__keystroke,a.ck.ck-button .ck-button__keystroke{color:inherit}[dir=ltr] .ck.ck-button .ck-button__keystroke,[dir=ltr] a.ck.ck-button .ck-button__keystroke{margin-left:var(--ck-spacing-large)}[dir=rtl] .ck.ck-button .ck-button__keystroke,[dir=rtl] a.ck.ck-button .ck-button__keystroke{margin-right:var(--ck-spacing-large)}.ck.ck-button .ck-button__keystroke,a.ck.ck-button .ck-button__keystroke{font-weight:700;opacity:.7}.ck.ck-button.ck-disabled:active,.ck.ck-button.ck-disabled:focus,a.ck.ck-button.ck-disabled:active,a.ck.ck-button.ck-disabled:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),0 0}.ck.ck-button.ck-disabled .ck-button__icon,a.ck.ck-button.ck-disabled .ck-button__icon{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-disabled .ck-button__label,a.ck.ck-button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-disabled .ck-button__keystroke,a.ck.ck-button.ck-disabled .ck-button__keystroke{opacity:.3}.ck.ck-button.ck-button_with-text,a.ck.ck-button.ck-button_with-text{padding:var(--ck-spacing-tiny) var(--ck-spacing-standard)}[dir=ltr] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=ltr] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-left:calc(var(--ck-spacing-small)*-1);margin-right:var(--ck-spacing-small)}[dir=rtl] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=rtl] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-right:calc(var(--ck-spacing-small)*-1);margin-left:var(--ck-spacing-small)}.ck.ck-button.ck-button_with-keystroke .ck-button__label,a.ck.ck-button.ck-button_with-keystroke .ck-button__label{flex-grow:1}.ck.ck-button.ck-on,a.ck.ck-button.ck-on{background:var(--ck-color-button-on-background)}.ck.ck-button.ck-on:not(.ck-disabled):hover,a.ck.ck-button.ck-on:not(.ck-disabled):hover{background:var(--ck-color-button-on-hover-background)}.ck.ck-button.ck-on:not(.ck-disabled):active,a.ck.ck-button.ck-on:not(.ck-disabled):active{background:var(--ck-color-button-on-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-on-active-shadow)}.ck.ck-button.ck-on.ck-disabled,a.ck.ck-button.ck-on.ck-disabled{background:var(--ck-color-button-on-disabled-background)}.ck.ck-button.ck-button-save,a.ck.ck-button.ck-button-save{color:var(--ck-color-button-save)}.ck.ck-button.ck-button-cancel,a.ck.ck-button.ck-button-cancel{color:var(--ck-color-button-cancel)}.ck.ck-button-action,a.ck.ck-button-action{background:var(--ck-color-button-action-background)}.ck.ck-button-action:not(.ck-disabled):hover,a.ck.ck-button-action:not(.ck-disabled):hover{background:var(--ck-color-button-action-hover-background)}.ck.ck-button-action:not(.ck-disabled):active,a.ck.ck-button-action:not(.ck-disabled):active{background:var(--ck-color-button-action-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-action-active-shadow)}.ck.ck-button-action.ck-disabled,a.ck.ck-button-action.ck-disabled{background:var(--ck-color-button-action-disabled-background)}.ck.ck-button-action,a.ck.ck-button-action{color:var(--ck-color-button-action-text)}.ck.ck-button-bold,a.ck.ck-button-bold{font-weight:700}";},function(t,e,i){var n=i(1),o=i(34);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[t.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);t.exports=o.locals||{};},function(t,e){t.exports=".ck.ck-list{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-direction:column}.ck.ck-list .ck-list__item,.ck.ck-list .ck-list__separator{display:block}.ck.ck-list .ck-list__item>:focus{position:relative;z-index:var(--ck-z-default)}.ck.ck-list{border-radius:0}.ck-rounded-corners .ck.ck-list,.ck.ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-list{list-style-type:none;background:var(--ck-color-list-background)}.ck.ck-list__item{cursor:default;min-width:12em}.ck.ck-list__item .ck-button{min-height:unset;width:100%;text-align:left;border-radius:0;padding:calc(var(--ck-line-height-base)*0.2*var(--ck-font-size-base)) calc(var(--ck-line-height-base)*0.4*var(--ck-font-size-base))}.ck.ck-list__item .ck-button .ck-button__label{line-height:calc(var(--ck-line-height-base)*1.2*var(--ck-font-size-base))}.ck.ck-list__item .ck-button:active{box-shadow:none}.ck.ck-list__item .ck-button.ck-on{background:var(--ck-color-list-button-on-background);color:var(--ck-color-list-button-on-text)}.ck.ck-list__item .ck-button.ck-on:active{box-shadow:none}.ck.ck-list__item .ck-button.ck-on:hover:not(.ck-disabled){background:var(--ck-color-list-button-on-background-focus)}.ck.ck-list__item .ck-button.ck-on:focus:not(.ck-disabled){border-color:var(--ck-color-base-background)}.ck.ck-list__item .ck-button:hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background)}.ck.ck-list__item .ck-switchbutton.ck-on{background:var(--ck-color-list-background);color:inherit}.ck.ck-list__item .ck-switchbutton.ck-on:hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background);color:inherit}.ck.ck-list__separator{height:1px;width:100%;background:var(--ck-color-base-border)}";},function(t,e,i){var n=i(1),o=i(36);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[t.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);t.exports=o.locals||{};},function(t,e){t.exports=".ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{display:block}:root{--ck-switch-button-toggle-width:2.6153846154em;--ck-switch-button-toggle-inner-size:1.0769230769em;--ck-switch-button-toggle-spacing:1px;--ck-switch-button-translation:calc(var(--ck-switch-button-toggle-width) - var(--ck-switch-button-toggle-inner-size) - var(--ck-switch-button-toggle-spacing)*2)}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__label{margin-right:calc(var(--ck-spacing-large)*2)}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__label{margin-left:calc(var(--ck-spacing-large)*2)}.ck.ck-button.ck-switchbutton .ck-button__toggle{border-radius:0}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle.ck-rounded-corners{border-radius:var(--ck-border-radius)}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-left:auto}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-right:auto}.ck.ck-button.ck-switchbutton .ck-button__toggle{transition:background .4s ease;width:var(--ck-switch-button-toggle-width);background:var(--ck-color-switch-button-off-background)}.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{border-radius:0}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner.ck-rounded-corners{border-radius:var(--ck-border-radius);border-radius:calc(var(--ck-border-radius)*0.5)}.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{margin:var(--ck-switch-button-toggle-spacing);width:var(--ck-switch-button-toggle-inner-size);height:var(--ck-switch-button-toggle-inner-size);background:var(--ck-color-switch-button-inner-background);transition:all .3s ease}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover{background:var(--ck-color-switch-button-off-hover-background)}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover .ck-button__toggle__inner{box-shadow:0 0 0 5px var(--ck-color-switch-button-inner-shadow)}.ck.ck-button.ck-switchbutton.ck-disabled .ck-button__toggle{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle{background:var(--ck-color-switch-button-on-background)}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle:hover{background:var(--ck-color-switch-button-on-hover-background)}[dir=ltr] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translateX(var(--ck-switch-button-translation))}[dir=rtl] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translateX(calc(var(--ck-switch-button-translation)*-1))}";},function(t,e,i){var n=i(1),o=i(38);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[t.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);t.exports=o.locals||{};},function(t,e){t.exports=":root{--ck-toolbar-dropdown-max-width:60vw}.ck.ck-toolbar-dropdown>.ck-dropdown__panel{width:max-content;max-width:var(--ck-toolbar-dropdown-max-width)}.ck.ck-toolbar-dropdown>.ck-dropdown__panel .ck-button:focus{z-index:calc(var(--ck-z-default) + 1)}.ck.ck-toolbar-dropdown .ck-toolbar{border:0}";},function(t,e,i){var n=i(1),o=i(40);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[t.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);t.exports=o.locals||{};},function(t,e){t.exports=".ck.ck-dropdown .ck-dropdown__panel .ck-list{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list,.ck.ck-dropdown .ck-dropdown__panel .ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0}.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button,.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button,.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}";},function(t,e,i){var n=i(1),o=i(42);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[t.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);t.exports=o.locals||{};},function(t,e){t.exports=".ck.ck-toolbar{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-flow:row nowrap;align-items:center}.ck.ck-toolbar>.ck-toolbar__items{display:flex;flex-flow:row wrap;align-items:center;flex-grow:1}.ck.ck-toolbar .ck.ck-toolbar__separator{display:inline-block}.ck.ck-toolbar .ck.ck-toolbar__separator:first-child,.ck.ck-toolbar .ck.ck-toolbar__separator:last-child{display:none}.ck.ck-toolbar .ck-toolbar__line-break{flex-basis:100%}.ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar.ck-toolbar_vertical>.ck-toolbar__items{flex-direction:column}.ck.ck-toolbar.ck-toolbar_floating>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown>.ck-dropdown__button .ck-dropdown__arrow{display:none}.ck.ck-toolbar{border-radius:0}.ck-rounded-corners .ck.ck-toolbar,.ck.ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-toolbar{background:var(--ck-color-toolbar-background);padding:0 var(--ck-spacing-small);border:1px solid var(--ck-color-toolbar-border)}.ck.ck-toolbar .ck.ck-toolbar__separator{align-self:stretch;width:1px;min-width:1px;background:var(--ck-color-toolbar-border);margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck.ck-toolbar .ck-toolbar__line-break{height:0}.ck.ck-toolbar>.ck-toolbar__items>:not(.ck-toolbar__line-break){margin-right:var(--ck-spacing-small)}.ck.ck-toolbar>.ck-toolbar__items:empty+.ck.ck-toolbar__separator{display:none}.ck.ck-toolbar>.ck-toolbar__items>:not(.ck-toolbar__line-break),.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown{margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck.ck-toolbar.ck-toolbar_vertical{padding:0}.ck.ck-toolbar.ck-toolbar_vertical>.ck-toolbar__items>.ck{width:100%;margin:0;border-radius:0;border:0}.ck.ck-toolbar.ck-toolbar_compact{padding:0}.ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>*{margin:0}.ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>:not(:first-child):not(:last-child){border-radius:0}.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown>.ck.ck-button.ck-dropdown__button{padding-left:var(--ck-spacing-tiny)}.ck-toolbar-container .ck.ck-toolbar{border:0}.ck.ck-toolbar[dir=rtl]>.ck-toolbar__items>.ck,[dir=rtl] .ck.ck-toolbar>.ck-toolbar__items>.ck{margin-right:0}.ck.ck-toolbar[dir=rtl]:not(.ck-toolbar_compact)>.ck-toolbar__items>.ck,[dir=rtl] .ck.ck-toolbar:not(.ck-toolbar_compact)>.ck-toolbar__items>.ck{margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=rtl]>.ck-toolbar__items>.ck:last-child,[dir=rtl] .ck.ck-toolbar>.ck-toolbar__items>.ck:last-child{margin-left:0}.ck.ck-toolbar[dir=rtl].ck-toolbar_compact>.ck-toolbar__items>.ck:first-child,[dir=rtl] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:first-child{border-top-left-radius:0;border-bottom-left-radius:0}.ck.ck-toolbar[dir=rtl].ck-toolbar_compact>.ck-toolbar__items>.ck:last-child,[dir=rtl] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:last-child{border-top-right-radius:0;border-bottom-right-radius:0}.ck.ck-toolbar[dir=rtl]>.ck.ck-toolbar__separator,[dir=rtl] .ck.ck-toolbar>.ck.ck-toolbar__separator{margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=rtl].ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child),[dir=rtl] .ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child){margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=ltr]>.ck-toolbar__items>.ck:last-child,[dir=ltr] .ck.ck-toolbar>.ck-toolbar__items>.ck:last-child{margin-right:0}.ck.ck-toolbar[dir=ltr].ck-toolbar_compact>.ck-toolbar__items>.ck:first-child,[dir=ltr] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:first-child{border-top-right-radius:0;border-bottom-right-radius:0}.ck.ck-toolbar[dir=ltr].ck-toolbar_compact>.ck-toolbar__items>.ck:last-child,[dir=ltr] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:last-child{border-top-left-radius:0;border-bottom-left-radius:0}.ck.ck-toolbar[dir=ltr]>.ck.ck-toolbar__separator,[dir=ltr] .ck.ck-toolbar>.ck.ck-toolbar__separator{margin-right:var(--ck-spacing-small)}.ck.ck-toolbar[dir=ltr].ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child),[dir=ltr] .ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child){margin-right:var(--ck-spacing-small)}";},function(t,e,i){var n=i(1),o=i(44);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[t.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);t.exports=o.locals||{};},function(t,e){t.exports=".ck.ck-editor{position:relative}.ck.ck-editor .ck-editor__top .ck-sticky-panel .ck-toolbar{z-index:var(--ck-z-modal)}.ck.ck-editor__top .ck-sticky-panel .ck-toolbar{border-radius:0}.ck-rounded-corners .ck.ck-editor__top .ck-sticky-panel .ck-toolbar,.ck.ck-editor__top .ck-sticky-panel .ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius);border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-editor__top .ck-sticky-panel .ck-toolbar{border-bottom-width:0}.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar{border-bottom-width:1px;border-radius:0}.ck-rounded-corners .ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar,.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius);border-radius:0}.ck.ck-editor__main>.ck-editor__editable{background:var(--ck-color-base-background);border-radius:0}.ck-rounded-corners .ck.ck-editor__main>.ck-editor__editable,.ck.ck-editor__main>.ck-editor__editable.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}.ck.ck-editor__main>.ck-editor__editable:not(.ck-focused){border-color:var(--ck-color-base-border)}";},function(t,e,i){var n=i(1),o=i(46);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[t.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);t.exports=o.locals||{};},function(t,e){t.exports=".ck-content blockquote{overflow:hidden;padding-right:1.5em;padding-left:1.5em;margin-left:0;margin-right:0;font-style:italic;border-left:5px solid #ccc}.ck-content[dir=rtl] blockquote{border-left:0;border-right:5px solid #ccc}";},function(t,e,i){var n=i(1),o=i(48);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[t.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);t.exports=o.locals||{};},function(t,e){t.exports=':root{--ck-balloon-panel-arrow-z-index:calc(var(--ck-z-default) - 3)}.ck.ck-balloon-panel{display:none;position:absolute;z-index:var(--ck-z-modal)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{content:"";position:absolute}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_n]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_n]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_s]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_s]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel.ck-balloon-panel_visible{display:block}:root{--ck-balloon-arrow-offset:2px;--ck-balloon-arrow-height:10px;--ck-balloon-arrow-half-width:8px;--ck-balloon-arrow-drop-shadow:0 2px 2px var(--ck-color-shadow-drop)}.ck.ck-balloon-panel{border-radius:0}.ck-rounded-corners .ck.ck-balloon-panel,.ck.ck-balloon-panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-balloon-panel{box-shadow:var(--ck-drop-shadow),0 0;min-height:15px;background:var(--ck-color-panel-background);border:1px solid var(--ck-color-panel-border)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{width:0;height:0;border-style:solid}.ck.ck-balloon-panel[class*=arrow_n]:after,.ck.ck-balloon-panel[class*=arrow_n]:before{border-left-width:var(--ck-balloon-arrow-half-width);border-bottom-width:var(--ck-balloon-arrow-height);border-right-width:var(--ck-balloon-arrow-half-width);border-top-width:0}.ck.ck-balloon-panel[class*=arrow_n]:before{border-bottom-color:var(--ck-color-panel-border)}.ck.ck-balloon-panel[class*=arrow_n]:after,.ck.ck-balloon-panel[class*=arrow_n]:before{border-left-color:transparent;border-right-color:transparent;border-top-color:transparent}.ck.ck-balloon-panel[class*=arrow_n]:after{border-bottom-color:var(--ck-color-panel-background);margin-top:var(--ck-balloon-arrow-offset)}.ck.ck-balloon-panel[class*=arrow_s]:after,.ck.ck-balloon-panel[class*=arrow_s]:before{border-left-width:var(--ck-balloon-arrow-half-width);border-bottom-width:0;border-right-width:var(--ck-balloon-arrow-half-width);border-top-width:var(--ck-balloon-arrow-height)}.ck.ck-balloon-panel[class*=arrow_s]:before{border-top-color:var(--ck-color-panel-border);filter:drop-shadow(var(--ck-balloon-arrow-drop-shadow))}.ck.ck-balloon-panel[class*=arrow_s]:after,.ck.ck-balloon-panel[class*=arrow_s]:before{border-left-color:transparent;border-bottom-color:transparent;border-right-color:transparent}.ck.ck-balloon-panel[class*=arrow_s]:after{border-top-color:var(--ck-color-panel-background);margin-bottom:var(--ck-balloon-arrow-offset)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:before{left:50%;margin-left:calc(var(--ck-balloon-arrow-half-width)*-1);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:before{left:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:before{right:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:before{left:50%;margin-left:calc(var(--ck-balloon-arrow-half-width)*-1);bottom:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:before{left:calc(var(--ck-balloon-arrow-half-width)*2);bottom:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:before{right:calc(var(--ck-balloon-arrow-half-width)*2);bottom:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sme:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sme:before{right:25%;margin-right:calc(var(--ck-balloon-arrow-half-width)*2);bottom:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_smw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_smw:before{left:25%;margin-left:calc(var(--ck-balloon-arrow-half-width)*2);bottom:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nme:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nme:before{right:25%;margin-right:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nmw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nmw:before{left:25%;margin-left:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}';},function(t,e,i){var n=i(1),o=i(50);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[t.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);t.exports=o.locals||{};},function(t,e){t.exports=".ck .ck-link_selected{background:var(--ck-color-link-selected-background)}.ck .ck-fake-link-selection{background:var(--ck-color-link-fake-selection)}.ck .ck-fake-link-selection_collapsed{height:100%;border-right:1px solid var(--ck-color-base-text);margin-right:-1px;outline:1px solid hsla(0,0%,100%,.5)}";},function(t,e,i){var n=i(1),o=i(52);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[t.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);t.exports=o.locals||{};},function(t,e){t.exports='.ck .ck-widget .ck-widget__type-around__button{display:block;position:absolute;overflow:hidden;z-index:var(--ck-z-default)}.ck .ck-widget .ck-widget__type-around__button svg{position:absolute;top:50%;left:50%;z-index:calc(var(--ck-z-default) + 2)}.ck .ck-widget .ck-widget__type-around__button.ck-widget__type-around__button_before{top:calc(var(--ck-widget-outline-thickness)*-0.5);left:min(10%,30px);transform:translateY(-50%)}.ck .ck-widget .ck-widget__type-around__button.ck-widget__type-around__button_after{bottom:calc(var(--ck-widget-outline-thickness)*-0.5);right:min(10%,30px);transform:translateY(50%)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:after,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover:after{content:"";display:block;position:absolute;top:1px;left:1px;z-index:calc(var(--ck-z-default) + 1)}.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__fake-caret{display:none;position:absolute;left:0;right:0}.ck .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__fake-caret{left:calc(var(--ck-widget-outline-thickness)*-1);right:calc(var(--ck-widget-outline-thickness)*-1)}.ck .ck-widget.ck-widget_type-around_show-fake-caret_before>.ck-widget__type-around>.ck-widget__type-around__fake-caret{top:calc(var(--ck-widget-outline-thickness)*-1 - 1px);display:block}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after>.ck-widget__type-around>.ck-widget__type-around__fake-caret{bottom:calc(var(--ck-widget-outline-thickness)*-1 - 1px);display:block}.ck.ck-editor__editable.ck-read-only .ck-widget__type-around,.ck.ck-editor__editable.ck-restricted-editing_mode_restricted .ck-widget__type-around,.ck.ck-editor__editable.ck-widget__type-around_disabled .ck-widget__type-around{display:none}:root{--ck-widget-type-around-button-size:20px;--ck-color-widget-type-around-button-active:var(--ck-color-focus-border);--ck-color-widget-type-around-button-hover:var(--ck-color-widget-hover-border);--ck-color-widget-type-around-button-blurred-editable:var(--ck-color-widget-blurred-border);--ck-color-widget-type-around-button-radar-start-alpha:0;--ck-color-widget-type-around-button-radar-end-alpha:.3;--ck-color-widget-type-around-button-icon:var(--ck-color-base-background)}.ck .ck-widget .ck-widget__type-around__button{width:var(--ck-widget-type-around-button-size);height:var(--ck-widget-type-around-button-size);background:var(--ck-color-widget-type-around-button);border-radius:100px;transition:opacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),background var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);opacity:0;pointer-events:none}.ck .ck-widget .ck-widget__type-around__button svg{width:10px;height:8px;transform:translate(-50%,-50%);transition:transform .5s ease;margin-top:1px}.ck .ck-widget .ck-widget__type-around__button svg *{stroke-dasharray:10;stroke-dashoffset:0;fill:none;stroke:var(--ck-color-widget-type-around-button-icon);stroke-width:1.5px;stroke-linecap:round;stroke-linejoin:round}.ck .ck-widget .ck-widget__type-around__button svg line{stroke-dasharray:7}.ck .ck-widget .ck-widget__type-around__button:hover{animation:ck-widget-type-around-button-sonar 1s ease infinite}.ck .ck-widget .ck-widget__type-around__button:hover svg polyline{animation:ck-widget-type-around-arrow-dash 2s linear}.ck .ck-widget .ck-widget__type-around__button:hover svg line{animation:ck-widget-type-around-arrow-tip-dash 2s linear}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__button{opacity:1;pointer-events:auto}.ck .ck-widget:not(.ck-widget_selected)>.ck-widget__type-around>.ck-widget__type-around__button{background:var(--ck-color-widget-type-around-button-hover)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover{background:var(--ck-color-widget-type-around-button-active)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:after,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover:after{width:calc(var(--ck-widget-type-around-button-size) - 2px);height:calc(var(--ck-widget-type-around-button-size) - 2px);border-radius:100px;background:linear-gradient(135deg,hsla(0,0%,100%,0),hsla(0,0%,100%,.3))}.ck .ck-widget.ck-widget_with-selection-handle>.ck-widget__type-around>.ck-widget__type-around__button_before{margin-left:20px}.ck .ck-widget .ck-widget__type-around__fake-caret{pointer-events:none;height:1px;animation:ck-widget-type-around-fake-caret-pulse 1s linear infinite normal forwards;outline:1px solid hsla(0,0%,100%,.5);background:var(--ck-color-base-text)}.ck .ck-widget.ck-widget_selected.ck-widget_type-around_show-fake-caret_after,.ck .ck-widget.ck-widget_selected.ck-widget_type-around_show-fake-caret_before{outline-color:transparent}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_selected:hover,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_selected:hover{outline-color:var(--ck-color-widget-hover-border)}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before>.ck-widget__type-around>.ck-widget__type-around__button{opacity:0;pointer-events:none}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle{opacity:0}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_selected.ck-widget_with-resizer>.ck-widget__resizer,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_selected.ck-widget_with-resizer>.ck-widget__resizer{opacity:0}.ck[dir=rtl] .ck-widget.ck-widget_with-selection-handle .ck-widget__type-around>.ck-widget__type-around__button_before{margin-left:0;margin-right:20px}.ck-editor__nested-editable.ck-editor__editable_selected .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck-editor__nested-editable.ck-editor__editable_selected .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__button{opacity:0;pointer-events:none}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:not(:hover){background:var(--ck-color-widget-type-around-button-blurred-editable)}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:not(:hover) svg *{stroke:#999}@keyframes ck-widget-type-around-arrow-dash{0%{stroke-dashoffset:10}20%,to{stroke-dashoffset:0}}@keyframes ck-widget-type-around-arrow-tip-dash{0%,20%{stroke-dashoffset:7}40%,to{stroke-dashoffset:0}}@keyframes ck-widget-type-around-button-sonar{0%{box-shadow:0 0 0 0 hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-start-alpha))}50%{box-shadow:0 0 0 5px hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-end-alpha))}to{box-shadow:0 0 0 5px hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-start-alpha))}}@keyframes ck-widget-type-around-fake-caret-pulse{0%{opacity:1}49%{opacity:1}50%{opacity:0}99%{opacity:0}to{opacity:1}}';},function(t,e,i){var n=i(1),o=i(54);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[t.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);t.exports=o.locals||{};},function(t,e){t.exports=":root{--ck-color-resizer:var(--ck-color-focus-border);--ck-color-resizer-tooltip-background:#262626;--ck-color-resizer-tooltip-text:#f2f2f2;--ck-resizer-border-radius:var(--ck-border-radius);--ck-resizer-tooltip-offset:10px}.ck .ck-widget,.ck .ck-widget.ck-widget_with-selection-handle{position:relative}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{position:absolute}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon{display:block}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected .ck-widget__selection-handle,.ck .ck-widget.ck-widget_with-selection-handle:hover .ck-widget__selection-handle{visibility:visible}.ck .ck-size-view{background:var(--ck-color-resizer-tooltip-background);color:var(--ck-color-resizer-tooltip-text);border:1px solid var(--ck-color-resizer-tooltip-text);border-radius:var(--ck-resizer-border-radius);font-size:var(--ck-font-size-tiny);display:block;padding:var(--ck-spacing-small)}.ck .ck-size-view.ck-orientation-bottom-left,.ck .ck-size-view.ck-orientation-bottom-right,.ck .ck-size-view.ck-orientation-top-left,.ck .ck-size-view.ck-orientation-top-right{position:absolute}.ck .ck-size-view.ck-orientation-top-left{top:var(--ck-resizer-tooltip-offset);left:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-top-right{top:var(--ck-resizer-tooltip-offset);right:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-right{bottom:var(--ck-resizer-tooltip-offset);right:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-left{bottom:var(--ck-resizer-tooltip-offset);left:var(--ck-resizer-tooltip-offset)}:root{--ck-widget-outline-thickness:3px;--ck-widget-handler-icon-size:16px;--ck-widget-handler-animation-duration:200ms;--ck-widget-handler-animation-curve:ease;--ck-color-widget-blurred-border:#dedede;--ck-color-widget-hover-border:#ffc83d;--ck-color-widget-editable-focus-background:var(--ck-color-base-background);--ck-color-widget-drag-handler-icon-color:var(--ck-color-base-background)}.ck .ck-widget{outline-width:var(--ck-widget-outline-thickness);outline-style:solid;outline-color:transparent;transition:outline-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve)}.ck .ck-widget.ck-widget_selected,.ck .ck-widget.ck-widget_selected:hover{outline:var(--ck-widget-outline-thickness) solid var(--ck-color-focus-border)}.ck .ck-widget:hover{outline-color:var(--ck-color-widget-hover-border)}.ck .ck-editor__nested-editable{border:1px solid transparent}.ck .ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck .ck-editor__nested-editable:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0;background-color:var(--ck-color-widget-editable-focus-background)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{padding:4px;box-sizing:border-box;background-color:transparent;opacity:0;transition:background-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),visibility var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),opacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);border-radius:var(--ck-border-radius) var(--ck-border-radius) 0 0;transform:translateY(-100%);left:calc(0px - var(--ck-widget-outline-thickness))}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon{width:var(--ck-widget-handler-icon-size);height:var(--ck-widget-handler-icon-size);color:var(--ck-color-widget-drag-handler-icon-color)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{opacity:0;transition:opacity .3s var(--ck-widget-handler-animation-curve)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle:hover .ck-icon .ck-icon__selected-indicator{opacity:1}.ck .ck-widget.ck-widget_with-selection-handle:hover .ck-widget__selection-handle{opacity:1;background-color:var(--ck-color-widget-hover-border)}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected .ck-widget__selection-handle,.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover .ck-widget__selection-handle{opacity:1;background-color:var(--ck-color-focus-border)}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator,.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{opacity:1}.ck[dir=rtl] .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{left:auto;right:calc(0px - var(--ck-widget-outline-thickness))}.ck.ck-editor__editable.ck-read-only .ck-widget{transition:none}.ck.ck-editor__editable.ck-read-only .ck-widget:not(.ck-widget_selected){--ck-widget-outline-thickness:0px}.ck.ck-editor__editable.ck-read-only .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle,.ck.ck-editor__editable.ck-read-only .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle:hover{background:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover{outline-color:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle .ck-widget__selection-handle,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle .ck-widget__selection-handle:hover,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover.ck-widget_with-selection-handle .ck-widget__selection-handle,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover.ck-widget_with-selection-handle .ck-widget__selection-handle:hover{background:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable>.ck-widget.ck-widget_with-selection-handle:first-child,.ck.ck-editor__editable blockquote>.ck-widget.ck-widget_with-selection-handle:first-child{margin-top:calc(1em + var(--ck-widget-handler-icon-size))}";},function(t,e,i){var n=i(1),o=i(56);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[t.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);t.exports=o.locals||{};},function(t,e){t.exports=".ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper{display:flex;position:relative}.ck.ck-labeled-field-view .ck.ck-label{display:block;position:absolute}:root{--ck-labeled-field-view-transition:.1s cubic-bezier(0,0,0.24,0.95);--ck-labeled-field-empty-unfocused-max-width:100% - 2 * var(--ck-spacing-medium);--ck-color-labeled-field-label-background:var(--ck-color-base-background)}.ck.ck-labeled-field-view{border-radius:0}.ck-rounded-corners .ck.ck-labeled-field-view,.ck.ck-labeled-field-view.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper{width:100%}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{top:0}[dir=ltr] .ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{left:0}[dir=rtl] .ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{right:0}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{pointer-events:none;transform-origin:0 0;transform:translate(var(--ck-spacing-medium),-6px) scale(.75);background:var(--ck-color-labeled-field-label-background);padding:0 calc(var(--ck-font-size-tiny)*0.5);line-height:normal;font-weight:400;text-overflow:ellipsis;overflow:hidden;max-width:100%;transition:transform var(--ck-labeled-field-view-transition),padding var(--ck-labeled-field-view-transition),background var(--ck-labeled-field-view-transition)}.ck.ck-labeled-field-view.ck-error .ck-input:not([readonly])+.ck.ck-label,.ck.ck-labeled-field-view.ck-error>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{color:var(--ck-color-base-error)}.ck.ck-labeled-field-view .ck-labeled-field-view__status{font-size:var(--ck-font-size-small);margin-top:var(--ck-spacing-small);white-space:normal}.ck.ck-labeled-field-view .ck-labeled-field-view__status.ck-labeled-field-view__status_error{color:var(--ck-color-base-error)}.ck.ck-labeled-field-view.ck-disabled>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{color:var(--ck-color-input-disabled-text)}[dir=ltr] .ck.ck-labeled-field-view.ck-disabled>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,[dir=ltr] .ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{transform:translate(var(--ck-spacing-medium),calc(var(--ck-font-size-base)*0.6)) scale(1)}[dir=rtl] .ck.ck-labeled-field-view.ck-disabled>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,[dir=rtl] .ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{transform:translate(calc(var(--ck-spacing-medium)*-1),calc(var(--ck-font-size-base)*0.6)) scale(1)}.ck.ck-labeled-field-view.ck-disabled>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{max-width:calc(var(--ck-labeled-field-empty-unfocused-max-width));background:transparent;padding:0}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown>.ck.ck-button{background:transparent}.ck.ck-labeled-field-view.ck-labeled-field-view_empty>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown>.ck-button>.ck-button__label{opacity:0}.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown+.ck-label{max-width:calc(var(--ck-labeled-field-empty-unfocused-max-width) - var(--ck-dropdown-arrow-size) - var(--ck-spacing-standard))}";},function(t,e,i){var n=i(1),o=i(58);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[t.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);t.exports=o.locals||{};},function(t,e){t.exports=":root{--ck-input-text-width:18em}.ck.ck-input-text{border-radius:0}.ck-rounded-corners .ck.ck-input-text,.ck.ck-input-text.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-input-text{background:var(--ck-color-input-background);border:1px solid var(--ck-color-input-border);padding:var(--ck-spacing-extra-tiny) var(--ck-spacing-medium);min-width:var(--ck-input-text-width);min-height:var(--ck-ui-component-min-height);transition:box-shadow .1s ease-in-out,border .1s ease-in-out}.ck.ck-input-text:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0}.ck.ck-input-text[readonly]{border:1px solid var(--ck-color-input-disabled-border);background:var(--ck-color-input-disabled-background);color:var(--ck-color-input-disabled-text)}.ck.ck-input-text[readonly]:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),0 0}.ck.ck-input-text.ck-error{border-color:var(--ck-color-input-error-border);animation:ck-text-input-shake .3s ease both}.ck.ck-input-text.ck-error:focus{box-shadow:var(--ck-focus-error-outer-shadow),0 0}@keyframes ck-text-input-shake{20%{transform:translateX(-2px)}40%{transform:translateX(2px)}60%{transform:translateX(-1px)}80%{transform:translateX(1px)}}";},function(t,e,i){var n=i(1),o=i(60);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[t.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);t.exports=o.locals||{};},function(t,e){t.exports=".ck.ck-text-alternative-form{display:flex;flex-direction:row;flex-wrap:nowrap}.ck.ck-text-alternative-form .ck-labeled-field-view{display:inline-block}.ck.ck-text-alternative-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-text-alternative-form{flex-wrap:wrap}.ck.ck-text-alternative-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-text-alternative-form .ck-button{flex-basis:50%}}";},function(t,e){t.exports='.ck-vertical-form .ck-button:after{content:"";width:0;position:absolute;right:-1px;top:var(--ck-spacing-small);bottom:var(--ck-spacing-small);z-index:1}@media screen and (max-width:600px){.ck.ck-responsive-form .ck-button:after{content:"";width:0;position:absolute;right:-1px;top:var(--ck-spacing-small);bottom:var(--ck-spacing-small);z-index:1}}.ck-vertical-form>.ck-button:nth-last-child(2):after{border-right:1px solid var(--ck-color-base-border)}.ck.ck-responsive-form{padding:var(--ck-spacing-large)}.ck.ck-responsive-form:focus{outline:none}[dir=ltr] .ck.ck-responsive-form>:not(:first-child),[dir=rtl] .ck.ck-responsive-form>:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-responsive-form{padding:0;width:calc(var(--ck-input-text-width)*0.8)}.ck.ck-responsive-form .ck-labeled-field-view{margin:var(--ck-spacing-large) var(--ck-spacing-large) 0}.ck.ck-responsive-form .ck-labeled-field-view .ck-input-text{min-width:0;width:100%}.ck.ck-responsive-form .ck-labeled-field-view .ck-labeled-field-view__error{white-space:normal}.ck.ck-responsive-form>.ck-button:last-child,.ck.ck-responsive-form>.ck-button:nth-last-child(2){padding:var(--ck-spacing-standard);margin-top:var(--ck-spacing-large);border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-responsive-form>.ck-button:last-child,[dir=ltr] .ck.ck-responsive-form>.ck-button:nth-last-child(2),[dir=rtl] .ck.ck-responsive-form>.ck-button:last-child,[dir=rtl] .ck.ck-responsive-form>.ck-button:nth-last-child(2){margin-left:0}.ck.ck-responsive-form>.ck-button:nth-last-child(2):after,[dir=rtl] .ck.ck-responsive-form>.ck-button:last-child:last-of-type,[dir=rtl] .ck.ck-responsive-form>.ck-button:nth-last-child(2):last-of-type{border-right:1px solid var(--ck-color-base-border)}}';},function(t,e,i){var n=i(1),o=i(63);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[t.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);t.exports=o.locals||{};},function(t,e){t.exports=".ck .ck-balloon-rotator__navigation{display:flex;align-items:center;justify-content:center}.ck .ck-balloon-rotator__content .ck-toolbar{justify-content:center}.ck .ck-balloon-rotator__navigation{background:var(--ck-color-toolbar-background);border-bottom:1px solid var(--ck-color-toolbar-border);padding:0 var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation>*{margin-right:var(--ck-spacing-small);margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation .ck-balloon-rotator__counter{margin-right:var(--ck-spacing-standard);margin-left:var(--ck-spacing-small)}.ck .ck-balloon-rotator__content .ck.ck-annotation-wrapper{box-shadow:none}";},function(t,e,i){var n=i(1),o=i(65);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[t.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);t.exports=o.locals||{};},function(t,e){t.exports=".ck .ck-fake-panel{position:absolute;z-index:calc(var(--ck-z-modal) - 1)}.ck .ck-fake-panel div{position:absolute}.ck .ck-fake-panel div:first-child{z-index:2}.ck .ck-fake-panel div:nth-child(2){z-index:1}:root{--ck-balloon-fake-panel-offset-horizontal:6px;--ck-balloon-fake-panel-offset-vertical:6px}.ck .ck-fake-panel div{box-shadow:var(--ck-drop-shadow),0 0;min-height:15px;background:var(--ck-color-panel-background);border:1px solid var(--ck-color-panel-border);border-radius:var(--ck-border-radius);width:100%;height:100%}.ck .ck-fake-panel div:first-child{margin-left:var(--ck-balloon-fake-panel-offset-horizontal);margin-top:var(--ck-balloon-fake-panel-offset-vertical)}.ck .ck-fake-panel div:nth-child(2){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal)*2);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical)*2)}.ck .ck-fake-panel div:nth-child(3){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal)*3);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical)*3)}.ck .ck-balloon-panel_arrow_s+.ck-fake-panel,.ck .ck-balloon-panel_arrow_se+.ck-fake-panel,.ck .ck-balloon-panel_arrow_sw+.ck-fake-panel{--ck-balloon-fake-panel-offset-vertical:-6px}";},function(t,e,i){var n=i(1),o=i(67);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[t.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);t.exports=o.locals||{};},function(t,e){t.exports=".ck-content .image{display:table;clear:both;text-align:center;margin:1em auto}.ck-content .image img{display:block;margin:0 auto;max-width:100%;min-width:50px}";},function(t,e,i){var n=i(1),o=i(69);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[t.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);t.exports=o.locals||{};},function(t,e){t.exports=".ck.ck-editor__editable .image{position:relative}.ck.ck-editor__editable .image .ck-progress-bar{position:absolute;top:0;left:0}.ck.ck-editor__editable .image.ck-appear{animation:fadeIn .7s}.ck.ck-editor__editable .image .ck-progress-bar{height:2px;width:0;background:var(--ck-color-upload-bar-background);transition:width .1s}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}";},function(t,e,i){var n=i(1),o=i(71);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[t.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);t.exports=o.locals||{};},function(t,e){t.exports='.ck-image-upload-complete-icon{display:block;position:absolute;top:10px;right:10px;border-radius:50%}.ck-image-upload-complete-icon:after{content:"";position:absolute}:root{--ck-color-image-upload-icon:#fff;--ck-color-image-upload-icon-background:#008a00;--ck-image-upload-icon-size:20px;--ck-image-upload-icon-width:2px}.ck-image-upload-complete-icon{width:var(--ck-image-upload-icon-size);height:var(--ck-image-upload-icon-size);opacity:0;background:var(--ck-color-image-upload-icon-background);animation-name:ck-upload-complete-icon-show,ck-upload-complete-icon-hide;animation-fill-mode:forwards,forwards;animation-duration:.5s,.5s;font-size:var(--ck-image-upload-icon-size);animation-delay:0ms,3s}.ck-image-upload-complete-icon:after{left:25%;top:50%;opacity:0;height:0;width:0;transform:scaleX(-1) rotate(135deg);transform-origin:left top;border-top:var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);border-right:var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);animation-name:ck-upload-complete-icon-check;animation-duration:.5s;animation-delay:.5s;animation-fill-mode:forwards;box-sizing:border-box}@keyframes ck-upload-complete-icon-show{0%{opacity:0}to{opacity:1}}@keyframes ck-upload-complete-icon-hide{0%{opacity:1}to{opacity:0}}@keyframes ck-upload-complete-icon-check{0%{opacity:1;width:0;height:0}33%{width:.3em;height:0}to{opacity:1;width:.3em;height:.45em}}';},function(t,e,i){var n=i(1),o=i(73);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[t.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);t.exports=o.locals||{};},function(t,e){t.exports='.ck .ck-upload-placeholder-loader{position:absolute;display:flex;align-items:center;justify-content:center;top:0;left:0}.ck .ck-upload-placeholder-loader:before{content:"";position:relative}:root{--ck-color-upload-placeholder-loader:#b3b3b3;--ck-upload-placeholder-loader-size:32px}.ck .ck-image-upload-placeholder{width:100%;margin:0}.ck .ck-upload-placeholder-loader{width:100%;height:100%}.ck .ck-upload-placeholder-loader:before{width:var(--ck-upload-placeholder-loader-size);height:var(--ck-upload-placeholder-loader-size);border-radius:50%;border-top:3px solid var(--ck-color-upload-placeholder-loader);border-right:2px solid transparent;animation:ck-upload-placeholder-loader 1s linear infinite}@keyframes ck-upload-placeholder-loader{to{transform:rotate(1turn)}}';},function(t,e){t.exports=".ck.ck-heading_heading1{font-size:20px}.ck.ck-heading_heading2{font-size:17px}.ck.ck-heading_heading3{font-size:14px}.ck[class*=ck-heading_heading]{font-weight:700}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__button .ck-button__label{width:8em}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__panel .ck-list__item{min-width:18em}";},function(t,e,i){var n=i(1),o=i(76);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[t.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);t.exports=o.locals||{};},function(t,e){t.exports=".ck-content .image>figcaption{display:table-caption;caption-side:bottom;word-break:break-word;color:#333;background-color:#f7f7f7;padding:.6em;font-size:.75em;outline-offset:-1px}";},function(t,e,i){var n=i(1),o=i(78);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[t.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);t.exports=o.locals||{};},function(t,e){t.exports=":root{--ck-image-style-spacing:1.5em}.ck-content .image-style-side{float:right;margin-left:var(--ck-image-style-spacing);max-width:50%}.ck-content .image-style-align-left{float:left;margin-right:var(--ck-image-style-spacing)}.ck-content .image-style-align-center{margin-left:auto;margin-right:auto}.ck-content .image-style-align-right{float:right;margin-left:var(--ck-image-style-spacing)}";},function(t,e,i){var n=i(1),o=i(80);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[t.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);t.exports=o.locals||{};},function(t,e){t.exports=".ck.ck-link-form{display:flex}.ck.ck-link-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-link-form{flex-wrap:wrap}.ck.ck-link-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-link-form .ck-button{flex-basis:50%}}.ck.ck-link-form_layout-vertical{display:block}.ck.ck-link-form_layout-vertical .ck-button.ck-button-cancel,.ck.ck-link-form_layout-vertical .ck-button.ck-button-save{margin-top:var(--ck-spacing-medium)}.ck.ck-link-form_layout-vertical{padding:0;min-width:var(--ck-input-text-width)}.ck.ck-link-form_layout-vertical .ck-labeled-field-view{margin:var(--ck-spacing-large) var(--ck-spacing-large) var(--ck-spacing-small)}.ck.ck-link-form_layout-vertical .ck-labeled-field-view .ck-input-text{min-width:0;width:100%}.ck.ck-link-form_layout-vertical .ck-button{padding:var(--ck-spacing-standard);margin:0;border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border);width:50%}[dir=ltr] .ck.ck-link-form_layout-vertical .ck-button,[dir=rtl] .ck.ck-link-form_layout-vertical .ck-button{margin-left:0}[dir=rtl] .ck.ck-link-form_layout-vertical .ck-button:last-of-type{border-right:1px solid var(--ck-color-base-border)}.ck.ck-link-form_layout-vertical .ck.ck-list{margin:var(--ck-spacing-standard) var(--ck-spacing-large)}.ck.ck-link-form_layout-vertical .ck.ck-list .ck-button.ck-switchbutton{border:0;padding:0;width:100%}.ck.ck-link-form_layout-vertical .ck.ck-list .ck-button.ck-switchbutton:hover{background:none}";},function(t,e,i){var n=i(1),o=i(82);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[t.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);t.exports=o.locals||{};},function(t,e){t.exports=".ck.ck-link-actions{display:flex;flex-direction:row;flex-wrap:nowrap}.ck.ck-link-actions .ck-link-actions__preview{display:inline-block}.ck.ck-link-actions .ck-link-actions__preview .ck-button__label{overflow:hidden}@media screen and (max-width:600px){.ck.ck-link-actions{flex-wrap:wrap}.ck.ck-link-actions .ck-link-actions__preview{flex-basis:100%}.ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){flex-basis:50%}}.ck.ck-link-actions .ck-button.ck-link-actions__preview{padding-left:0;padding-right:0}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label{padding:0 var(--ck-spacing-medium);color:var(--ck-color-link-default);text-overflow:ellipsis;cursor:pointer;max-width:var(--ck-input-text-width);min-width:3em;text-align:center}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label:hover{text-decoration:underline}.ck.ck-link-actions .ck-button.ck-link-actions__preview,.ck.ck-link-actions .ck-button.ck-link-actions__preview:active,.ck.ck-link-actions .ck-button.ck-link-actions__preview:focus,.ck.ck-link-actions .ck-button.ck-link-actions__preview:hover{background:none}.ck.ck-link-actions .ck-button.ck-link-actions__preview:active{box-shadow:none}.ck.ck-link-actions .ck-button.ck-link-actions__preview:focus .ck-button__label{text-decoration:underline}[dir=ltr] .ck.ck-link-actions .ck-button:not(:first-child),[dir=rtl] .ck.ck-link-actions .ck-button:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-link-actions .ck-button.ck-link-actions__preview{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) 0}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label{min-width:0;max-width:100%}[dir=ltr] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview),[dir=rtl] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){margin-left:0}}";},function(t,e,i){var n=i(1),o=i(84);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[t.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);t.exports=o.locals||{};},function(t,e){t.exports='.ck-media__wrapper .ck-media__placeholder{display:flex;flex-direction:column;align-items:center}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-tooltip{display:block}@media (hover:none){.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-tooltip{display:none}}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url{max-width:100%;position:relative}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url:hover .ck-tooltip{visibility:visible;opacity:1}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-media__placeholder__url__text{overflow:hidden;display:block}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="google.com/maps"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck-media__placeholder__icon *{display:none}.ck-editor__editable:not(.ck-read-only) .ck-media__wrapper>:not(.ck-media__placeholder),.ck-editor__editable:not(.ck-read-only) .ck-widget:not(.ck-widget_selected) .ck-media__placeholder{pointer-events:none}:root{--ck-media-embed-placeholder-icon-size:3em;--ck-color-media-embed-placeholder-url-text:#757575;--ck-color-media-embed-placeholder-url-text-hover:var(--ck-color-base-text)}.ck-media__wrapper{margin:0 auto}.ck-media__wrapper .ck-media__placeholder{padding:calc(var(--ck-spacing-standard)*3);background:var(--ck-color-base-foreground)}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__icon{min-width:var(--ck-media-embed-placeholder-icon-size);height:var(--ck-media-embed-placeholder-icon-size);margin-bottom:var(--ck-spacing-large);background-position:50%;background-size:cover}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__icon .ck-icon{width:100%;height:100%}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url__text{color:var(--ck-color-media-embed-placeholder-url-text);white-space:nowrap;text-align:center;font-style:italic;text-overflow:ellipsis}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:var(--ck-color-media-embed-placeholder-url-text-hover);cursor:pointer;text-decoration:underline}.ck-media__wrapper[data-oembed-url*="open.spotify.com"]{max-width:300px;max-height:380px}.ck-media__wrapper[data-oembed-url*="google.com/maps"] .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTAuMzc4IiBoZWlnaHQ9IjI1NC4xNjciIHZpZXdCb3g9IjAgMCA2Ni4yNDYgNjcuMjQ4Ij48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTcyLjUzMSAtMjE4LjQ1NSkgc2NhbGUoLjk4MDEyKSI+PHJlY3Qgcnk9IjUuMjM4IiByeD0iNS4yMzgiIHk9IjIzMS4zOTkiIHg9IjE3Ni4wMzEiIGhlaWdodD0iNjAuMDk5IiB3aWR0aD0iNjAuMDk5IiBmaWxsPSIjMzRhNjY4IiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjxwYXRoIGQ9Ik0yMDYuNDc3IDI2MC45bC0yOC45ODcgMjguOTg3YTUuMjE4IDUuMjE4IDAgMDAzLjc4IDEuNjFoNDkuNjIxYzEuNjk0IDAgMy4xOS0uNzk4IDQuMTQ2LTIuMDM3eiIgZmlsbD0iIzVjODhjNSIvPjxwYXRoIGQ9Ik0yMjYuNzQyIDIyMi45ODhjLTkuMjY2IDAtMTYuNzc3IDcuMTctMTYuNzc3IDE2LjAxNC4wMDcgMi43NjIuNjYzIDUuNDc0IDIuMDkzIDcuODc1LjQzLjcwMy44MyAxLjQwOCAxLjE5IDIuMTA3LjMzMy41MDIuNjUgMS4wMDUuOTUgMS41MDguMzQzLjQ3Ny42NzMuOTU3Ljk4OCAxLjQ0IDEuMzEgMS43NjkgMi41IDMuNTAyIDMuNjM3IDUuMTY4Ljc5MyAxLjI3NSAxLjY4MyAyLjY0IDIuNDY2IDMuOTkgMi4zNjMgNC4wOTQgNC4wMDcgOC4wOTIgNC42IDEzLjkxNHYuMDEyYy4xODIuNDEyLjUxNi42NjYuODc5LjY2Ny40MDMtLjAwMS43NjgtLjMxNC45My0uNzk5LjYwMy01Ljc1NiAyLjIzOC05LjcyOSA0LjU4NS0xMy43OTQuNzgyLTEuMzUgMS42NzMtMi43MTUgMi40NjUtMy45OSAxLjEzNy0xLjY2NiAyLjMyOC0zLjQgMy42MzgtNS4xNjkuMzE1LS40ODIuNjQ1LS45NjIuOTg4LTEuNDM5LjMtLjUwMy42MTctMS4wMDYuOTUtMS41MDguMzU5LS43Ljc2LTEuNDA0IDEuMTktMi4xMDcgMS40MjYtMi40MDIgMi01LjExNCAyLjAwNC03Ljg3NSAwLTguODQ0LTcuNTExLTE2LjAxNC0xNi43NzYtMTYuMDE0eiIgZmlsbD0iI2RkNGIzZSIgcGFpbnQtb3JkZXI9Im1hcmtlcnMgc3Ryb2tlIGZpbGwiLz48ZWxsaXBzZSByeT0iNS41NjQiIHJ4PSI1LjgyOCIgY3k9IjIzOS4wMDIiIGN4PSIyMjYuNzQyIiBmaWxsPSIjODAyZDI3IiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjxwYXRoIGQ9Ik0xOTAuMzAxIDIzNy4yODNjLTQuNjcgMC04LjQ1NyAzLjg1My04LjQ1NyA4LjYwNnMzLjc4NiA4LjYwNyA4LjQ1NyA4LjYwN2MzLjA0MyAwIDQuODA2LS45NTggNi4zMzctMi41MTYgMS41My0xLjU1NyAyLjA4Ny0zLjkxMyAyLjA4Ny02LjI5IDAtLjM2Mi0uMDIzLS43MjItLjA2NC0xLjA3OWgtOC4yNTd2My4wNDNoNC44NWMtLjE5Ny43NTktLjUzMSAxLjQ1LTEuMDU4IDEuOTg2LS45NDIuOTU4LTIuMDI4IDEuNTQ4LTMuOTAxIDEuNTQ4LTIuODc2IDAtNS4yMDgtMi4zNzItNS4yMDgtNS4yOTkgMC0yLjkyNiAyLjMzMi01LjI5OSA1LjIwOC01LjI5OSAxLjM5OSAwIDIuNjE4LjQwNyAzLjU4NCAxLjI5M2wyLjM4MS0yLjM4YzAtLjAwMi0uMDAzLS4wMDQtLjAwNC0uMDA1LTEuNTg4LTEuNTI0LTMuNjItMi4yMTUtNS45NTUtMi4yMTV6bTQuNDMgNS42NmwuMDAzLjAwNnYtLjAwM3oiIGZpbGw9IiNmZmYiIHBhaW50LW9yZGVyPSJtYXJrZXJzIHN0cm9rZSBmaWxsIi8+PHBhdGggZD0iTTIxNS4xODQgMjUxLjkyOWwtNy45OCA3Ljk3OSAyOC40NzcgMjguNDc1YTUuMjMzIDUuMjMzIDAgMDAuNDQ5LTIuMTIzdi0zMS4xNjVjLS40NjkuNjc1LS45MzQgMS4zNDktMS4zODIgMi4wMDUtLjc5MiAxLjI3NS0xLjY4MiAyLjY0LTIuNDY1IDMuOTktMi4zNDcgNC4wNjUtMy45ODIgOC4wMzgtNC41ODUgMTMuNzk0LS4xNjIuNDg1LS41MjcuNzk4LS45My43OTktLjM2My0uMDAxLS42OTctLjI1NS0uODc5LS42Njd2LS4wMTJjLS41OTMtNS44MjItMi4yMzctOS44Mi00LjYtMTMuOTE0LS43ODMtMS4zNS0xLjY3My0yLjcxNS0yLjQ2Ni0zLjk5LTEuMTM3LTEuNjY2LTIuMzI3LTMuNC0zLjYzNy01LjE2OWwtLjAwMi0uMDAzeiIgZmlsbD0iI2MzYzNjMyIvPjxwYXRoIGQ9Ik0yMTIuOTgzIDI0OC40OTVsLTM2Ljk1MiAzNi45NTN2LjgxMmE1LjIyNyA1LjIyNyAwIDAwNS4yMzggNS4yMzhoMS4wMTVsMzUuNjY2LTM1LjY2NmExMzYuMjc1IDEzNi4yNzUgMCAwMC0yLjc2NC0zLjkgMzcuNTc1IDM3LjU3NSAwIDAwLS45ODktMS40NCAzNS4xMjcgMzUuMTI3IDAgMDAtLjk1LTEuNTA4Yy0uMDgzLS4xNjItLjE3Ni0uMzI2LS4yNjQtLjQ4OXoiIGZpbGw9IiNmZGRjNGYiIHBhaW50LW9yZGVyPSJtYXJrZXJzIHN0cm9rZSBmaWxsIi8+PHBhdGggZD0iTTIxMS45OTggMjYxLjA4M2wtNi4xNTIgNi4xNTEgMjQuMjY0IDI0LjI2NGguNzgxYTUuMjI3IDUuMjI3IDAgMDA1LjIzOS01LjIzOHYtMS4wNDV6IiBmaWxsPSIjZmZmIiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjwvZz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder{background:#4268b3}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAyNCIgaGVpZ2h0PSIxMDI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik05NjcuNDg0IDBINTYuNTE3QzI1LjMwNCAwIDAgMjUuMzA0IDAgNTYuNTE3djkxMC45NjZDMCA5OTguNjk0IDI1LjI5NyAxMDI0IDU2LjUyMiAxMDI0SDU0N1Y2MjhINDE0VjQ3M2gxMzNWMzU5LjAyOWMwLTEzMi4yNjIgODAuNzczLTIwNC4yODIgMTk4Ljc1Ni0yMDQuMjgyIDU2LjUxMyAwIDEwNS4wODYgNC4yMDggMTE5LjI0NCA2LjA4OVYyOTlsLTgxLjYxNi4wMzdjLTYzLjk5MyAwLTc2LjM4NCAzMC40OTItNzYuMzg0IDc1LjIzNlY0NzNoMTUzLjQ4N2wtMTkuOTg2IDE1NUg3MDd2Mzk2aDI2MC40ODRjMzEuMjEzIDAgNTYuNTE2LTI1LjMwMyA1Ni41MTYtNTYuNTE2VjU2LjUxNUMxMDI0IDI1LjMwMyA5OTguNjk3IDAgOTY3LjQ4NCAwIiBmaWxsPSIjRkZGRkZFIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__url__text{color:#cdf}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder{background:linear-gradient(-135deg,#1400c7,#b800b1,#f50000)}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTA0IiBoZWlnaHQ9IjUwNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PHBhdGggaWQ9ImEiIGQ9Ik0wIC4xNTloNTAzLjg0MVY1MDMuOTRIMHoiLz48L2RlZnM+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48bWFzayBpZD0iYiIgZmlsbD0iI2ZmZiI+PHVzZSB4bGluazpocmVmPSIjYSIvPjwvbWFzaz48cGF0aCBkPSJNMjUxLjkyMS4xNTljLTY4LjQxOCAwLTc2Ljk5Ny4yOS0xMDMuODY3IDEuNTE2LTI2LjgxNCAxLjIyMy00NS4xMjcgNS40ODItNjEuMTUxIDExLjcxLTE2LjU2NiA2LjQzNy0zMC42MTUgMTUuMDUxLTQ0LjYyMSAyOS4wNTYtMTQuMDA1IDE0LjAwNi0yMi42MTkgMjguMDU1LTI5LjA1NiA0NC42MjEtNi4yMjggMTYuMDI0LTEwLjQ4NyAzNC4zMzctMTEuNzEgNjEuMTUxQy4yOSAxNzUuMDgzIDAgMTgzLjY2MiAwIDI1Mi4wOGMwIDY4LjQxNy4yOSA3Ni45OTYgMS41MTYgMTAzLjg2NiAxLjIyMyAyNi44MTQgNS40ODIgNDUuMTI3IDExLjcxIDYxLjE1MSA2LjQzNyAxNi41NjYgMTUuMDUxIDMwLjYxNSAyOS4wNTYgNDQuNjIxIDE0LjAwNiAxNC4wMDUgMjguMDU1IDIyLjYxOSA0NC42MjEgMjkuMDU3IDE2LjAyNCA2LjIyNyAzNC4zMzcgMTAuNDg2IDYxLjE1MSAxMS43MDkgMjYuODcgMS4yMjYgMzUuNDQ5IDEuNTE2IDEwMy44NjcgMS41MTYgNjguNDE3IDAgNzYuOTk2LS4yOSAxMDMuODY2LTEuNTE2IDI2LjgxNC0xLjIyMyA0NS4xMjctNS40ODIgNjEuMTUxLTExLjcwOSAxNi41NjYtNi40MzggMzAuNjE1LTE1LjA1MiA0NC42MjEtMjkuMDU3IDE0LjAwNS0xNC4wMDYgMjIuNjE5LTI4LjA1NSAyOS4wNTctNDQuNjIxIDYuMjI3LTE2LjAyNCAxMC40ODYtMzQuMzM3IDExLjcwOS02MS4xNTEgMS4yMjYtMjYuODcgMS41MTYtMzUuNDQ5IDEuNTE2LTEwMy44NjYgMC02OC40MTgtLjI5LTc2Ljk5Ny0xLjUxNi0xMDMuODY3LTEuMjIzLTI2LjgxNC01LjQ4Mi00NS4xMjctMTEuNzA5LTYxLjE1MS02LjQzOC0xNi41NjYtMTUuMDUyLTMwLjYxNS0yOS4wNTctNDQuNjIxLTE0LjAwNi0xNC4wMDUtMjguMDU1LTIyLjYxOS00NC42MjEtMjkuMDU2LTE2LjAyNC02LjIyOC0zNC4zMzctMTAuNDg3LTYxLjE1MS0xMS43MUMzMjguOTE3LjQ0OSAzMjAuMzM4LjE1OSAyNTEuOTIxLjE1OXptMCA0NS4zOTFjNjcuMjY1IDAgNzUuMjMzLjI1NyAxMDEuNzk3IDEuNDY5IDI0LjU2MiAxLjEyIDM3LjkwMSA1LjIyNCA0Ni43NzggOC42NzQgMTEuNzU5IDQuNTcgMjAuMTUxIDEwLjAyOSAyOC45NjYgMTguODQ1IDguODE2IDguODE1IDE0LjI3NSAxNy4yMDcgMTguODQ1IDI4Ljk2NiAzLjQ1IDguODc3IDcuNTU0IDIyLjIxNiA4LjY3NCA0Ni43NzggMS4yMTIgMjYuNTY0IDEuNDY5IDM0LjUzMiAxLjQ2OSAxMDEuNzk4IDAgNjcuMjY1LS4yNTcgNzUuMjMzLTEuNDY5IDEwMS43OTctMS4xMiAyNC41NjItNS4yMjQgMzcuOTAxLTguNjc0IDQ2Ljc3OC00LjU3IDExLjc1OS0xMC4wMjkgMjAuMTUxLTE4Ljg0NSAyOC45NjYtOC44MTUgOC44MTYtMTcuMjA3IDE0LjI3NS0yOC45NjYgMTguODQ1LTguODc3IDMuNDUtMjIuMjE2IDcuNTU0LTQ2Ljc3OCA4LjY3NC0yNi41NiAxLjIxMi0zNC41MjcgMS40NjktMTAxLjc5NyAxLjQ2OS02Ny4yNzEgMC03NS4yMzctLjI1Ny0xMDEuNzk4LTEuNDY5LTI0LjU2Mi0xLjEyLTM3LjkwMS01LjIyNC00Ni43NzgtOC42NzQtMTEuNzU5LTQuNTctMjAuMTUxLTEwLjAyOS0yOC45NjYtMTguODQ1LTguODE1LTguODE1LTE0LjI3NS0xNy4yMDctMTguODQ1LTI4Ljk2Ni0zLjQ1LTguODc3LTcuNTU0LTIyLjIxNi04LjY3NC00Ni43NzgtMS4yMTItMjYuNTY0LTEuNDY5LTM0LjUzMi0xLjQ2OS0xMDEuNzk3IDAtNjcuMjY2LjI1Ny03NS4yMzQgMS40NjktMTAxLjc5OCAxLjEyLTI0LjU2MiA1LjIyNC0zNy45MDEgOC42NzQtNDYuNzc4IDQuNTctMTEuNzU5IDEwLjAyOS0yMC4xNTEgMTguODQ1LTI4Ljk2NiA4LjgxNS04LjgxNiAxNy4yMDctMTQuMjc1IDI4Ljk2Ni0xOC44NDUgOC44NzctMy40NSAyMi4yMTYtNy41NTQgNDYuNzc4LTguNjc0IDI2LjU2NC0xLjIxMiAzNC41MzItMS40NjkgMTAxLjc5OC0xLjQ2OXoiIGZpbGw9IiNGRkYiIG1hc2s9InVybCgjYikiLz48cGF0aCBkPSJNMjUxLjkyMSAzMzYuMDUzYy00Ni4zNzggMC04My45NzQtMzcuNTk2LTgzLjk3NC04My45NzMgMC00Ni4zNzggMzcuNTk2LTgzLjk3NCA4My45NzQtODMuOTc0IDQ2LjM3NyAwIDgzLjk3MyAzNy41OTYgODMuOTczIDgzLjk3NCAwIDQ2LjM3Ny0zNy41OTYgODMuOTczLTgzLjk3MyA4My45NzN6bTAtMjEzLjMzOGMtNzEuNDQ3IDAtMTI5LjM2NSA1Ny45MTgtMTI5LjM2NSAxMjkuMzY1IDAgNzEuNDQ2IDU3LjkxOCAxMjkuMzY0IDEyOS4zNjUgMTI5LjM2NCA3MS40NDYgMCAxMjkuMzY0LTU3LjkxOCAxMjkuMzY0LTEyOS4zNjQgMC03MS40NDctNTcuOTE4LTEyOS4zNjUtMTI5LjM2NC0xMjkuMzY1ek00MTYuNjI3IDExNy42MDRjMCAxNi42OTYtMTMuNTM1IDMwLjIzLTMwLjIzMSAzMC4yMy0xNi42OTUgMC0zMC4yMy0xMy41MzQtMzAuMjMtMzAuMjMgMC0xNi42OTYgMTMuNTM1LTMwLjIzMSAzMC4yMy0zMC4yMzEgMTYuNjk2IDAgMzAuMjMxIDEzLjUzNSAzMC4yMzEgMzAuMjMxIiBmaWxsPSIjRkZGIi8+PC9nPjwvc3ZnPg==)}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__url__text{color:#ffe0fe}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder{background:linear-gradient(90deg,#71c6f4,#0d70a5)}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0MDAgNDAwIj48cGF0aCBkPSJNNDAwIDIwMGMwIDExMC41LTg5LjUgMjAwLTIwMCAyMDBTMCAzMTAuNSAwIDIwMCA4OS41IDAgMjAwIDBzMjAwIDg5LjUgMjAwIDIwMHpNMTYzLjQgMzA1LjVjODguNyAwIDEzNy4yLTczLjUgMTM3LjItMTM3LjIgMC0yLjEgMC00LjItLjEtNi4yIDkuNC02LjggMTcuNi0xNS4zIDI0LjEtMjUtOC42IDMuOC0xNy45IDYuNC0yNy43IDcuNiAxMC02IDE3LjYtMTUuNCAyMS4yLTI2LjctOS4zIDUuNS0xOS42IDkuNS0zMC42IDExLjctOC44LTkuNC0yMS4zLTE1LjItMzUuMi0xNS4yLTI2LjYgMC00OC4yIDIxLjYtNDguMiA0OC4yIDAgMy44LjQgNy41IDEuMyAxMS00MC4xLTItNzUuNi0yMS4yLTk5LjQtNTAuNC00LjEgNy4xLTYuNSAxNS40LTYuNSAyNC4yIDAgMTYuNyA4LjUgMzEuNSAyMS41IDQwLjEtNy45LS4yLTE1LjMtMi40LTIxLjgtNnYuNmMwIDIzLjQgMTYuNiA0Mi44IDM4LjcgNDcuMy00IDEuMS04LjMgMS43LTEyLjcgMS43LTMuMSAwLTYuMS0uMy05LjEtLjkgNi4xIDE5LjIgMjMuOSAzMy4xIDQ1IDMzLjUtMTYuNSAxMi45LTM3LjMgMjAuNi01OS45IDIwLjYtMy45IDAtNy43LS4yLTExLjUtLjcgMjEuMSAxMy44IDQ2LjUgMjEuOCA3My43IDIxLjgiIGZpbGw9IiNmZmYiLz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__url__text{color:#b8e6ff}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}';},function(t,e,i){var n=i(1),o=i(86);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[t.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);t.exports=o.locals||{};},function(t,e){t.exports=".ck.ck-media-form{display:flex;align-items:flex-start;flex-direction:row;flex-wrap:nowrap}.ck.ck-media-form .ck-labeled-field-view{display:inline-block}.ck.ck-media-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-media-form{flex-wrap:wrap}.ck.ck-media-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-media-form .ck-button{flex-basis:50%}}";},function(t,e,i){var n=i(1),o=i(88);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[t.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);t.exports=o.locals||{};},function(t,e){t.exports=".ck-content .media{clear:both;margin:1em 0;display:block;min-width:15em}";},function(t,e,i){var n=i(1),o=i(90);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[t.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);t.exports=o.locals||{};},function(t,e){t.exports=":root{--ck-color-table-focused-cell-background:rgba(158,207,250,0.3)}.ck-widget.table td.ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck-widget.table td.ck-editor__nested-editable:focus,.ck-widget.table th.ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck-widget.table th.ck-editor__nested-editable:focus{background:var(--ck-color-table-focused-cell-background);border-style:none;outline:1px solid var(--ck-color-focus-border);outline-offset:-1px}";},function(t,e,i){var n=i(1),o=i(92);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[t.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);t.exports=o.locals||{};},function(t,e){t.exports=".ck.ck-splitbutton{font-size:inherit}.ck.ck-splitbutton .ck-splitbutton__action:focus{z-index:calc(var(--ck-z-default) + 1)}.ck.ck-splitbutton.ck-splitbutton_open>.ck-button .ck-tooltip{display:none}:root{--ck-color-split-button-hover-background:#ebebeb;--ck-color-split-button-hover-border:#b3b3b3}[dir=ltr] .ck.ck-splitbutton>.ck-splitbutton__action{border-top-right-radius:unset;border-bottom-right-radius:unset}[dir=rtl] .ck.ck-splitbutton>.ck-splitbutton__action{border-top-left-radius:unset;border-bottom-left-radius:unset}.ck.ck-splitbutton>.ck-splitbutton__arrow{min-width:unset}[dir=ltr] .ck.ck-splitbutton>.ck-splitbutton__arrow{border-radius:0}.ck-rounded-corners [dir=ltr] .ck.ck-splitbutton>.ck-splitbutton__arrow,[dir=ltr] .ck.ck-splitbutton>.ck-splitbutton__arrow.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:unset;border-bottom-left-radius:unset}[dir=rtl] .ck.ck-splitbutton>.ck-splitbutton__arrow{border-top-right-radius:unset;border-bottom-right-radius:unset}.ck.ck-splitbutton>.ck-splitbutton__arrow svg{width:var(--ck-dropdown-arrow-size)}.ck.ck-splitbutton.ck-splitbutton_open>.ck-button:not(.ck-on):not(.ck-disabled):not(:hover),.ck.ck-splitbutton:hover>.ck-button:not(.ck-on):not(.ck-disabled):not(:hover){background:var(--ck-color-split-button-hover-background)}[dir=ltr] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled),[dir=ltr] .ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled){border-left-color:var(--ck-color-split-button-hover-border)}[dir=rtl] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled),[dir=rtl] .ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled){border-right-color:var(--ck-color-split-button-hover-border)}.ck.ck-splitbutton.ck-splitbutton_open{border-radius:0}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__action,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners>.ck-splitbutton__action{border-bottom-left-radius:0}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners>.ck-splitbutton__arrow{border-bottom-right-radius:0}";},function(t,e,i){var n=i(1),o=i(94);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[t.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);t.exports=o.locals||{};},function(t,e){t.exports=".ck .ck-insert-table-dropdown__grid{display:flex;flex-direction:row;flex-wrap:wrap}:root{--ck-insert-table-dropdown-padding:10px;--ck-insert-table-dropdown-box-height:11px;--ck-insert-table-dropdown-box-width:12px;--ck-insert-table-dropdown-box-margin:1px}.ck .ck-insert-table-dropdown__grid{width:calc(var(--ck-insert-table-dropdown-box-width)*10 + var(--ck-insert-table-dropdown-box-margin)*20 + var(--ck-insert-table-dropdown-padding)*2);padding:var(--ck-insert-table-dropdown-padding) var(--ck-insert-table-dropdown-padding) 0}.ck .ck-insert-table-dropdown__label{text-align:center}.ck .ck-insert-table-dropdown-grid-box{width:var(--ck-insert-table-dropdown-box-width);height:var(--ck-insert-table-dropdown-box-height);margin:var(--ck-insert-table-dropdown-box-margin);border:1px solid var(--ck-color-base-border);border-radius:1px}.ck .ck-insert-table-dropdown-grid-box.ck-on{border-color:var(--ck-color-focus-border);background:var(--ck-color-focus-outer-shadow)}";},function(t,e,i){var n=i(1),o=i(96);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[t.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);t.exports=o.locals||{};},function(t,e){t.exports=':root{--ck-table-selected-cell-background:rgba(158,207,250,0.3)}.ck.ck-editor__editable .table table td.ck-editor__editable_selected,.ck.ck-editor__editable .table table th.ck-editor__editable_selected{position:relative;caret-color:transparent;outline:unset;box-shadow:unset}.ck.ck-editor__editable .table table td.ck-editor__editable_selected:after,.ck.ck-editor__editable .table table th.ck-editor__editable_selected:after{content:"";pointer-events:none;background-color:var(--ck-table-selected-cell-background);position:absolute;top:0;left:0;right:0;bottom:0}.ck.ck-editor__editable .table table td.ck-editor__editable_selected ::selection,.ck.ck-editor__editable .table table td.ck-editor__editable_selected:focus,.ck.ck-editor__editable .table table th.ck-editor__editable_selected ::selection,.ck.ck-editor__editable .table table th.ck-editor__editable_selected:focus{background-color:transparent}.ck.ck-editor__editable .table table td.ck-editor__editable_selected .ck-widget_selected,.ck.ck-editor__editable .table table th.ck-editor__editable_selected .ck-widget_selected{outline:unset}';},function(t,e,i){var n=i(1),o=i(98);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[t.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);t.exports=o.locals||{};},function(t,e){t.exports=".ck-content .table{margin:1em auto;display:table}.ck-content .table table{border-collapse:collapse;border-spacing:0;width:100%;height:100%;border:1px double #b3b3b3}.ck-content .table table td,.ck-content .table table th{min-width:2em;padding:.4em;border:1px solid #bfbfbf}.ck-content .table table th{font-weight:700;background:hsla(0,0%,0%,5%)}.ck-content[dir=rtl] .table th{text-align:right}.ck-content[dir=ltr] .table th{text-align:left}";},function(t,e,i){var n=i(1),o=i(100);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[t.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);t.exports=o.locals||{};},function(t,e){t.exports=".ck.ck-color-grid{display:grid}:root{--ck-color-grid-tile-size:24px;--ck-color-color-grid-check-icon:#000}.ck.ck-color-grid{grid-gap:5px;padding:8px}.ck.ck-color-grid__tile{width:var(--ck-color-grid-tile-size);height:var(--ck-color-grid-tile-size);min-width:var(--ck-color-grid-tile-size);min-height:var(--ck-color-grid-tile-size);padding:0;transition:box-shadow .2s ease;border:0}.ck.ck-color-grid__tile.ck-disabled{cursor:unset;transition:unset}.ck.ck-color-grid__tile.ck-color-table__color-tile_bordered{box-shadow:0 0 0 1px var(--ck-color-base-border)}.ck.ck-color-grid__tile .ck.ck-icon{display:none;color:var(--ck-color-color-grid-check-icon)}.ck.ck-color-grid__tile.ck-on{box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-base-text)}.ck.ck-color-grid__tile.ck-on .ck.ck-icon{display:block}.ck.ck-color-grid__tile.ck-on,.ck.ck-color-grid__tile:focus:not(.ck-disabled),.ck.ck-color-grid__tile:hover:not(.ck-disabled){border:0}.ck.ck-color-grid__tile:focus:not(.ck-disabled),.ck.ck-color-grid__tile:hover:not(.ck-disabled){box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-focus-border)}.ck.ck-color-grid__label{padding:0 var(--ck-spacing-standard)}";},function(t,e,i){var n=i(1),o=i(102);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[t.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);t.exports=o.locals||{};},function(t,e){t.exports=".ck .ck-button.ck-color-table__remove-color{display:flex;align-items:center;width:100%}label.ck.ck-color-grid__label{font-weight:unset}.ck .ck-button.ck-color-table__remove-color{padding:calc(var(--ck-spacing-standard)/2) var(--ck-spacing-standard);border-bottom-left-radius:0;border-bottom-right-radius:0}.ck .ck-button.ck-color-table__remove-color:not(:focus){border-bottom:1px solid var(--ck-color-base-border)}[dir=ltr] .ck .ck-button.ck-color-table__remove-color .ck.ck-icon{margin-right:var(--ck-spacing-standard)}[dir=rtl] .ck .ck-button.ck-color-table__remove-color .ck.ck-icon{margin-left:var(--ck-spacing-standard)}";},function(t,e,i){var n=i(1),o=i(104);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[t.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);t.exports=o.locals||{};},function(t,e){t.exports=".ck.ck-list-styles-dropdown>.ck-dropdown__panel>.ck-toolbar>.ck-toolbar__items{display:grid}:root{--ck-list-style-button-size:44px}.ck.ck-list-styles-dropdown>.ck-dropdown__panel>.ck-toolbar{background:none;padding:0}.ck.ck-list-styles-dropdown>.ck-dropdown__panel>.ck-toolbar>.ck-toolbar__items{grid-template-columns:repeat(3,auto);row-gap:var(--ck-spacing-medium);column-gap:var(--ck-spacing-medium);padding:var(--ck-spacing-medium)}.ck.ck-list-styles-dropdown>.ck-dropdown__panel>.ck-toolbar>.ck-toolbar__items .ck-button{width:var(--ck-list-style-button-size);height:var(--ck-list-style-button-size);padding:0;margin:0;box-sizing:content-box}.ck.ck-list-styles-dropdown>.ck-dropdown__panel>.ck-toolbar>.ck-toolbar__items .ck-button .ck-icon{width:var(--ck-list-style-button-size);height:var(--ck-list-style-button-size)}";},function(t,e,i){var n=i(1),o=i(106);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[t.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);t.exports=o.locals||{};},function(t,e){t.exports=".ck-content .text-tiny{font-size:.7em}.ck-content .text-small{font-size:.85em}.ck-content .text-big{font-size:1.4em}.ck-content .text-huge{font-size:1.8em}";},function(t,e){t.exports=".ck-content code{background-color:hsla(0,0%,78%,.3);padding:.15em;border-radius:2px}.ck.ck-editor__editable .ck-code_selected{background-color:hsla(0,0%,78%,.5)}";},function(t,e,i){"use strict";var _marked=/*#__PURE__*/regeneratorRuntime.mark(Va),_marked2=/*#__PURE__*/regeneratorRuntime.mark(ja),_marked3=/*#__PURE__*/regeneratorRuntime.mark(Dd);i.r(e),i.d(e,"default",function(){return Mw;});var n=i(3),o=n.a.Symbol,r=Object.prototype,s=r.hasOwnProperty,a=r.toString,c=o?o.toStringTag:void 0;var l=function l(t){var e=s.call(t,c),i=t[c];try{t[c]=void 0;var n=!0;}catch(t){}var o=a.call(t);return n&&(e?t[c]=i:delete t[c]),o;},d=Object.prototype.toString;var u=function u(t){return d.call(t);},h=o?o.toStringTag:void 0;var f=function f(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":h&&h in Object(t)?l(t):u(t);};var m=function m(t,e){return function(i){return t(e(i));};},g=m(Object.getPrototypeOf,Object);var p=function p(t){return null!=t&&"object"==_typeof(t);},b=Function.prototype,w=Object.prototype,k=b.toString,_=w.hasOwnProperty,v=k.call(Object);var y=function y(t){if(!p(t)||"[object Object]"!=f(t))return!1;var e=g(t);if(null===e)return!0;var i=_.call(e,"constructor")&&e.constructor;return"function"==typeof i&&i instanceof i&&k.call(i)==v;};var x=function x(){this.__data__=[],this.size=0;};var A=function A(t,e){return t===e||t!=t&&e!=e;};var T=function T(t,e){for(var i=t.length;i--;){if(A(t[i][0],e))return i;}return-1;},C=Array.prototype.splice;var S=function S(t){var e=this.__data__,i=T(e,t);return!(i<0)&&(i==e.length-1?e.pop():C.call(e,i,1),--this.size,!0);};var E=function E(t){var e=this.__data__,i=T(e,t);return i<0?void 0:e[i][1];};var P=function P(t){return T(this.__data__,t)>-1;};var M=function M(t,e){var i=this.__data__,n=T(i,t);return n<0?(++this.size,i.push([t,e])):i[n][1]=e,this;};function I(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1]);}}I.prototype.clear=x,I.prototype["delete"]=S,I.prototype.get=E,I.prototype.has=P,I.prototype.set=M;var N=I;var O=function O(){this.__data__=new N(),this.size=0;};var R=function R(t){var e=this.__data__,i=e["delete"](t);return this.size=e.size,i;};var D=function D(t){return this.__data__.get(t);};var L=function L(t){return this.__data__.has(t);};var z=function z(t){var e=_typeof(t);return null!=t&&("object"==e||"function"==e);};var V,j=function j(t){if(!z(t))return!1;var e=f(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e;},B=n.a["__core-js_shared__"],F=(V=/[^.]+$/.exec(B&&B.keys&&B.keys.IE_PROTO||""))?"Symbol(src)_1."+V:"";var H=function H(t){return!!F&&F in t;},U=Function.prototype.toString;var W=function W(t){if(null!=t){try{return U.call(t);}catch(t){}try{return t+"";}catch(t){}}return"";},q=/^\[object .+?Constructor\]$/,$=Function.prototype,Y=Object.prototype,G=$.toString,K=Y.hasOwnProperty,Q=RegExp("^"+G.call(K).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var J=function J(t){return!(!z(t)||H(t))&&(j(t)?Q:q).test(W(t));};var Z=function Z(t,e){return null==t?void 0:t[e];};var X=function X(t,e){var i=Z(t,e);return J(i)?i:void 0;},tt=X(n.a,"Map"),et=X(Object,"create");var it=function it(){this.__data__=et?et(null):{},this.size=0;};var nt=function nt(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e;},ot=Object.prototype.hasOwnProperty;var rt=function rt(t){var e=this.__data__;if(et){var i=e[t];return"__lodash_hash_undefined__"===i?void 0:i;}return ot.call(e,t)?e[t]:void 0;},st=Object.prototype.hasOwnProperty;var at=function at(t){var e=this.__data__;return et?void 0!==e[t]:st.call(e,t);};var ct=function ct(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=et&&void 0===e?"__lodash_hash_undefined__":e,this;};function lt(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1]);}}lt.prototype.clear=it,lt.prototype["delete"]=nt,lt.prototype.get=rt,lt.prototype.has=at,lt.prototype.set=ct;var dt=lt;var ut=function ut(){this.size=0,this.__data__={hash:new dt(),map:new(tt||N)(),string:new dt()};};var ht=function ht(t){var e=_typeof(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t;};var ft=function ft(t,e){var i=t.__data__;return ht(e)?i["string"==typeof e?"string":"hash"]:i.map;};var mt=function mt(t){var e=ft(this,t)["delete"](t);return this.size-=e?1:0,e;};var gt=function gt(t){return ft(this,t).get(t);};var pt=function pt(t){return ft(this,t).has(t);};var bt=function bt(t,e){var i=ft(this,t),n=i.size;return i.set(t,e),this.size+=i.size==n?0:1,this;};function wt(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1]);}}wt.prototype.clear=ut,wt.prototype["delete"]=mt,wt.prototype.get=gt,wt.prototype.has=pt,wt.prototype.set=bt;var kt=wt;var _t=function _t(t,e){var i=this.__data__;if(i instanceof N){var n=i.__data__;if(!tt||n.length<199)return n.push([t,e]),this.size=++i.size,this;i=this.__data__=new kt(n);}return i.set(t,e),this.size=i.size,this;};function vt(t){var e=this.__data__=new N(t);this.size=e.size;}vt.prototype.clear=O,vt.prototype["delete"]=R,vt.prototype.get=D,vt.prototype.has=L,vt.prototype.set=_t;var yt=vt;var xt=function xt(t,e){for(var i=-1,n=null==t?0:t.length;++i<n&&!1!==e(t[i],i,t);){;}return t;},At=function(){try{var t=X(Object,"defineProperty");return t({},"",{}),t;}catch(t){}}();var Tt=function Tt(t,e,i){"__proto__"==e&&At?At(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i;},Ct=Object.prototype.hasOwnProperty;var St=function St(t,e,i){var n=t[e];Ct.call(t,e)&&A(n,i)&&(void 0!==i||e in t)||Tt(t,e,i);};var Et=function Et(t,e,i,n){var o=!i;i||(i={});for(var r=-1,s=e.length;++r<s;){var a=e[r],c=n?n(i[a],t[a],a,i,t):void 0;void 0===c&&(c=t[a]),o?Tt(i,a,c):St(i,a,c);}return i;};var Pt=function Pt(t,e){for(var i=-1,n=Array(t);++i<t;){n[i]=e(i);}return n;};var Mt=function Mt(t){return p(t)&&"[object Arguments]"==f(t);},It=Object.prototype,Nt=It.hasOwnProperty,Ot=It.propertyIsEnumerable,Rt=Mt(function(){return arguments;}())?Mt:function(t){return p(t)&&Nt.call(t,"callee")&&!Ot.call(t,"callee");},Dt=Array.isArray,Lt=i(4),zt=/^(?:0|[1-9]\d*)$/;var Vt=function Vt(t,e){var i=_typeof(t);return!!(e=null==e?9007199254740991:e)&&("number"==i||"symbol"!=i&&zt.test(t))&&t>-1&&t%1==0&&t<e;};var jt=function jt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991;},Bt={};Bt["[object Float32Array]"]=Bt["[object Float64Array]"]=Bt["[object Int8Array]"]=Bt["[object Int16Array]"]=Bt["[object Int32Array]"]=Bt["[object Uint8Array]"]=Bt["[object Uint8ClampedArray]"]=Bt["[object Uint16Array]"]=Bt["[object Uint32Array]"]=!0,Bt["[object Arguments]"]=Bt["[object Array]"]=Bt["[object ArrayBuffer]"]=Bt["[object Boolean]"]=Bt["[object DataView]"]=Bt["[object Date]"]=Bt["[object Error]"]=Bt["[object Function]"]=Bt["[object Map]"]=Bt["[object Number]"]=Bt["[object Object]"]=Bt["[object RegExp]"]=Bt["[object Set]"]=Bt["[object String]"]=Bt["[object WeakMap]"]=!1;var Ft=function Ft(t){return p(t)&&jt(t.length)&&!!Bt[f(t)];};var Ht=function Ht(t){return function(e){return t(e);};},Ut=i(5),Wt=Ut.a&&Ut.a.isTypedArray,qt=Wt?Ht(Wt):Ft,$t=Object.prototype.hasOwnProperty;var Yt=function Yt(t,e){var i=Dt(t),n=!i&&Rt(t),o=!i&&!n&&Object(Lt.a)(t),r=!i&&!n&&!o&&qt(t),s=i||n||o||r,a=s?Pt(t.length,String):[],c=a.length;for(var l in t){!e&&!$t.call(t,l)||s&&("length"==l||o&&("offset"==l||"parent"==l)||r&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Vt(l,c))||a.push(l);}return a;},Gt=Object.prototype;var Kt=function Kt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Gt);},Qt=m(Object.keys,Object),Jt=Object.prototype.hasOwnProperty;var Zt=function Zt(t){if(!Kt(t))return Qt(t);var e=[];for(var i in Object(t)){Jt.call(t,i)&&"constructor"!=i&&e.push(i);}return e;};var Xt=function Xt(t){return null!=t&&jt(t.length)&&!j(t);};var te=function te(t){return Xt(t)?Yt(t):Zt(t);};var ee=function ee(t,e){return t&&Et(e,te(e),t);};var ie=function ie(t){var e=[];if(null!=t)for(var i in Object(t)){e.push(i);}return e;},ne=Object.prototype.hasOwnProperty;var oe=function oe(t){if(!z(t))return ie(t);var e=Kt(t),i=[];for(var n in t){("constructor"!=n||!e&&ne.call(t,n))&&i.push(n);}return i;};var re=function re(t){return Xt(t)?Yt(t,!0):oe(t);};var se=function se(t,e){return t&&Et(e,re(e),t);},ae=i(9);var ce=function ce(t,e){var i=-1,n=t.length;for(e||(e=Array(n));++i<n;){e[i]=t[i];}return e;};var le=function le(t,e){for(var i=-1,n=null==t?0:t.length,o=0,r=[];++i<n;){var s=t[i];e(s,i,t)&&(r[o++]=s);}return r;};var de=function de(){return[];},ue=Object.prototype.propertyIsEnumerable,he=Object.getOwnPropertySymbols,fe=he?function(t){return null==t?[]:(t=Object(t),le(he(t),function(e){return ue.call(t,e);}));}:de;var me=function me(t,e){return Et(t,fe(t),e);};var ge=function ge(t,e){for(var i=-1,n=e.length,o=t.length;++i<n;){t[o+i]=e[i];}return t;},pe=Object.getOwnPropertySymbols?function(t){for(var e=[];t;){ge(e,fe(t)),t=g(t);}return e;}:de;var be=function be(t,e){return Et(t,pe(t),e);};var we=function we(t,e,i){var n=e(t);return Dt(t)?n:ge(n,i(t));};var ke=function ke(t){return we(t,te,fe);};var _e=function _e(t){return we(t,re,pe);},ve=X(n.a,"DataView"),ye=X(n.a,"Promise"),xe=X(n.a,"Set"),Ae=X(n.a,"WeakMap"),Te=W(ve),Ce=W(tt),Se=W(ye),Ee=W(xe),Pe=W(Ae),Me=f;(ve&&"[object DataView]"!=Me(new ve(new ArrayBuffer(1)))||tt&&"[object Map]"!=Me(new tt())||ye&&"[object Promise]"!=Me(ye.resolve())||xe&&"[object Set]"!=Me(new xe())||Ae&&"[object WeakMap]"!=Me(new Ae()))&&(Me=function Me(t){var e=f(t),i="[object Object]"==e?t.constructor:void 0,n=i?W(i):"";if(n)switch(n){case Te:return"[object DataView]";case Ce:return"[object Map]";case Se:return"[object Promise]";case Ee:return"[object Set]";case Pe:return"[object WeakMap]";}return e;});var Ie=Me,Ne=Object.prototype.hasOwnProperty;var Oe=function Oe(t){var e=t.length,i=new t.constructor(e);return e&&"string"==typeof t[0]&&Ne.call(t,"index")&&(i.index=t.index,i.input=t.input),i;},Re=n.a.Uint8Array;var De=function De(t){var e=new t.constructor(t.byteLength);return new Re(e).set(new Re(t)),e;};var Le=function Le(t,e){var i=e?De(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength);},ze=/\w*$/;var Ve=function Ve(t){var e=new t.constructor(t.source,ze.exec(t));return e.lastIndex=t.lastIndex,e;},je=o?o.prototype:void 0,Be=je?je.valueOf:void 0;var Fe=function Fe(t){return Be?Object(Be.call(t)):{};};var He=function He(t,e){var i=e?De(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length);};var Ue=function Ue(t,e,i){var n=t.constructor;switch(e){case"[object ArrayBuffer]":return De(t);case"[object Boolean]":case"[object Date]":return new n(+t);case"[object DataView]":return Le(t,i);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return He(t,i);case"[object Map]":return new n();case"[object Number]":case"[object String]":return new n(t);case"[object RegExp]":return Ve(t);case"[object Set]":return new n();case"[object Symbol]":return Fe(t);}},We=Object.create,qe=function(){function t(){}return function(e){if(!z(e))return{};if(We)return We(e);t.prototype=e;var i=new t();return t.prototype=void 0,i;};}();var $e=function $e(t){return"function"!=typeof t.constructor||Kt(t)?{}:qe(g(t));};var Ye=function Ye(t){return p(t)&&"[object Map]"==Ie(t);},Ge=Ut.a&&Ut.a.isMap,Ke=Ge?Ht(Ge):Ye;var Qe=function Qe(t){return p(t)&&"[object Set]"==Ie(t);},Je=Ut.a&&Ut.a.isSet,Ze=Je?Ht(Je):Qe,Xe={};Xe["[object Arguments]"]=Xe["[object Array]"]=Xe["[object ArrayBuffer]"]=Xe["[object DataView]"]=Xe["[object Boolean]"]=Xe["[object Date]"]=Xe["[object Float32Array]"]=Xe["[object Float64Array]"]=Xe["[object Int8Array]"]=Xe["[object Int16Array]"]=Xe["[object Int32Array]"]=Xe["[object Map]"]=Xe["[object Number]"]=Xe["[object Object]"]=Xe["[object RegExp]"]=Xe["[object Set]"]=Xe["[object String]"]=Xe["[object Symbol]"]=Xe["[object Uint8Array]"]=Xe["[object Uint8ClampedArray]"]=Xe["[object Uint16Array]"]=Xe["[object Uint32Array]"]=!0,Xe["[object Error]"]=Xe["[object Function]"]=Xe["[object WeakMap]"]=!1;var ti=function t(e,i,n,o,r,s){var a,c=1&i,l=2&i,d=4&i;if(n&&(a=r?n(e,o,r,s):n(e)),void 0!==a)return a;if(!z(e))return e;var u=Dt(e);if(u){if(a=Oe(e),!c)return ce(e,a);}else{var h=Ie(e),f="[object Function]"==h||"[object GeneratorFunction]"==h;if(Object(Lt.a)(e))return Object(ae.a)(e,c);if("[object Object]"==h||"[object Arguments]"==h||f&&!r){if(a=l||f?{}:$e(e),!c)return l?be(e,se(a,e)):me(e,ee(a,e));}else{if(!Xe[h])return r?e:{};a=Ue(e,h,c);}}s||(s=new yt());var m=s.get(e);if(m)return m;s.set(e,a),Ze(e)?e.forEach(function(o){a.add(t(o,i,n,o,e,s));}):Ke(e)&&e.forEach(function(o,r){a.set(r,t(o,i,n,r,e,s));});var g=u?void 0:(d?l?_e:ke:l?re:te)(e);return xt(g||e,function(o,r){g&&(o=e[r=o]),St(a,r,t(o,i,n,r,e,s));}),a;};var ei=function ei(t,e){return ti(t,5,e="function"==typeof e?e:void 0);};var ii=function ii(t){return p(t)&&1===t.nodeType&&!y(t);};var ni=/*#__PURE__*/function(){function ni(t,e){_classCallCheck(this,ni);this._config={},e&&this.define(oi(e)),t&&this._setObjectToTarget(this._config,t);}_createClass(ni,[{key:"set",value:function set(t,e){this._setToTarget(this._config,t,e);}},{key:"define",value:function define(t,e){this._setToTarget(this._config,t,e,!0);}},{key:"get",value:function get(t){return this._getFromSource(this._config,t);}},{key:"names",value:/*#__PURE__*/regeneratorRuntime.mark(function names(){var _i2,_Object$keys,_t2;return regeneratorRuntime.wrap(function names$(_context){while(1){switch(_context.prev=_context.next){case 0:_i2=0,_Object$keys=Object.keys(this._config);case 1:if(!(_i2<_Object$keys.length)){_context.next=8;break;}_t2=_Object$keys[_i2];_context.next=5;return _t2;case 5:_i2++;_context.next=1;break;case 8:case"end":return _context.stop();}}},names,this);})},{key:"_setToTarget",value:function _setToTarget(t,e,i){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:!1;if(y(e))return void this._setObjectToTarget(t,e,n);var o=e.split(".");e=o.pop();var _iterator=_createForOfIteratorHelper(o),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _e2=_step.value;y(t[_e2])||(t[_e2]={}),t=t[_e2];}}catch(err){_iterator.e(err);}finally{_iterator.f();}if(y(i))return y(t[e])||(t[e]={}),t=t[e],void this._setObjectToTarget(t,i,n);n&&void 0!==t[e]||(t[e]=i);}},{key:"_getFromSource",value:function _getFromSource(t,e){var i=e.split(".");e=i.pop();var _iterator2=_createForOfIteratorHelper(i),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _e3=_step2.value;if(!y(t[_e3])){t=null;break;}t=t[_e3];}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}return t?oi(t[e]):void 0;}},{key:"_setObjectToTarget",value:function _setObjectToTarget(t,e,i){var _this2=this;Object.keys(e).forEach(function(n){_this2._setToTarget(t,n,e[n],i);});}}]);return ni;}();function oi(t){return ei(t,ri);}function ri(t){return ii(t)?t:void 0;}var si=function si(){return function t(){t.called=!0;};};var ai=function ai(t,e){_classCallCheck(this,ai);this.source=t,this.name=e,this.path=[],this.stop=si(),this.off=si();};var ci=new Array(256).fill().map(function(t,e){return("0"+e.toString(16)).slice(-2);});function li(){var t=4294967296*Math.random()>>>0,e=4294967296*Math.random()>>>0,i=4294967296*Math.random()>>>0,n=4294967296*Math.random()>>>0;return"e"+ci[t>>0&255]+ci[t>>8&255]+ci[t>>16&255]+ci[t>>24&255]+ci[e>>0&255]+ci[e>>8&255]+ci[e>>16&255]+ci[e>>24&255]+ci[i>>0&255]+ci[i>>8&255]+ci[i>>16&255]+ci[i>>24&255]+ci[n>>0&255]+ci[n>>8&255]+ci[n>>16&255]+ci[n>>24&255];}var di={get:function get(t){return"number"!=typeof t?this[t]||this.normal:t;},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5},ui=(i(6),i(0));var hi=Symbol("listeningTo"),fi=Symbol("emitterId");var mi={on:function on(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};this.listenTo(this,t,e,i);},once:function once(t,e,i){var n=!1;this.listenTo(this,t,function(t){for(var _len=arguments.length,i=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){i[_key-1]=arguments[_key];}n||(n=!0,t.off(),e.call.apply(e,[this,t].concat(i)));},i);},off:function off(t,e){this.stopListening(this,t,e);},listenTo:function listenTo(t,e,i){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var o,r;this[hi]||(this[hi]={});var s=this[hi];pi(t)||gi(t);var a=pi(t);(o=s[a])||(o=s[a]={emitter:t,callbacks:{}}),(r=o.callbacks[e])||(r=o.callbacks[e]=[]),r.push(i),function(t,e){var i=bi(t);if(i[e])return;var n=e,o=null;var r=[];for(;""!==n&&!i[n];){i[n]={callbacks:[],childEvents:[]},r.push(i[n]),o&&i[n].childEvents.push(o),o=n,n=n.substr(0,n.lastIndexOf(":"));}if(""!==n){var _iterator3=_createForOfIteratorHelper(r),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var _t3=_step3.value;_t3.callbacks=i[n].callbacks.slice();}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}i[n].childEvents.push(o);}}(t,e);var c=wi(t,e),l=di.get(n.priority),d={callback:i,priority:l};var _iterator4=_createForOfIteratorHelper(c),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var _t4=_step4.value;var _e4=!1;for(var _i3=0;_i3<_t4.length;_i3++){if(_t4[_i3].priority<l){_t4.splice(_i3,0,d),_e4=!0;break;}}_e4||_t4.push(d);}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}},stopListening:function stopListening(t,e,i){var n=this[hi];var o=t&&pi(t);var r=n&&o&&n[o],s=r&&e&&r.callbacks[e];if(!(!n||t&&!r||e&&!s))if(i){_i(t,e,i);-1!==s.indexOf(i)&&(1===s.length?delete r.callbacks[e]:_i(t,e,i));}else if(s){for(;i=s.pop();){_i(t,e,i);}delete r.callbacks[e];}else if(r){for(e in r.callbacks){this.stopListening(t,e);}delete n[o];}else{for(o in n){this.stopListening(n[o].emitter);}delete this[hi];}},fire:function fire(t){try{var _i4=t instanceof ai?t:new ai(this,t),_n2=_i4.name;var _o2=function t(e,i){var n;if(!e._events||!(n=e._events[i])||!n.callbacks.length)return i.indexOf(":")>-1?t(e,i.substr(0,i.lastIndexOf(":"))):null;return n.callbacks;}(this,_n2);for(var _len2=arguments.length,e=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++){e[_key2-1]=arguments[_key2];}if(_i4.path.push(this),_o2){var _t5=[_i4].concat(e);_o2=Array.from(_o2);for(var _e5=0;_e5<_o2.length&&(_o2[_e5].callback.apply(this,_t5),_i4.off.called&&(delete _i4.off.called,_i(this,_n2,_o2[_e5].callback)),!_i4.stop.called);_e5++){;}}if(this._delegations){var _t6=this._delegations.get(_n2),_o3=this._delegations.get("*");_t6&&ki(_t6,_i4,e),_o3&&ki(_o3,_i4,e);}return _i4["return"];}catch(t){ui.a.rethrowUnexpectedError(t,this);}},delegate:function delegate(){var _this3=this;for(var _len3=arguments.length,t=new Array(_len3),_key3=0;_key3<_len3;_key3++){t[_key3]=arguments[_key3];}return{to:function to(e,i){_this3._delegations||(_this3._delegations=new Map()),t.forEach(function(t){var n=_this3._delegations.get(t);n?n.set(e,i):_this3._delegations.set(t,new Map([[e,i]]));});}};},stopDelegating:function stopDelegating(t,e){if(this._delegations)if(t){if(e){var _i5=this._delegations.get(t);_i5&&_i5["delete"](e);}else this._delegations["delete"](t);}else this._delegations.clear();}};function gi(t,e){t[fi]||(t[fi]=e||li());}function pi(t){return t[fi];}function bi(t){return t._events||Object.defineProperty(t,"_events",{value:{}}),t._events;}function wi(t,e){var i=bi(t)[e];if(!i)return[];var n=[i.callbacks];for(var _e6=0;_e6<i.childEvents.length;_e6++){var _o4=wi(t,i.childEvents[_e6]);n=n.concat(_o4);}return n;}function ki(t,e,i){var _iterator5=_createForOfIteratorHelper(t),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var _step5$value=_slicedToArray(_step5.value,2),_n3=_step5$value[0],_o5=_step5$value[1];_o5?"function"==typeof _o5&&(_o5=_o5(e.name)):_o5=e.name;var _t7=new ai(e.source,_o5);_t7.path=_toConsumableArray(e.path),_n3.fire.apply(_n3,[_t7].concat(_toConsumableArray(i)));}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}}function _i(t,e,i){var n=wi(t,e);var _iterator6=_createForOfIteratorHelper(n),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var _t8=_step6.value;for(var _e7=0;_e7<_t8.length;_e7++){_t8[_e7].callback==i&&(_t8.splice(_e7,1),_e7--);}}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}}function vi(t){return!(!t||!t[Symbol.iterator]);}function yi(t){for(var _len4=arguments.length,e=new Array(_len4>1?_len4-1:0),_key4=1;_key4<_len4;_key4++){e[_key4-1]=arguments[_key4];}e.forEach(function(e){Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e)).forEach(function(i){if(i in t.prototype)return;var n=Object.getOwnPropertyDescriptor(e,i);n.enumerable=!1,Object.defineProperty(t.prototype,i,n);});});}var xi=/*#__PURE__*/function(){function xi(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,xi);var i=vi(t);if(i||(e=t),this._items=[],this._itemMap=new Map(),this._idProperty=e.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap(),this._bindToInternalToExternalMap=new WeakMap(),this._skippedIndexesFromExternal=[],i){var _iterator7=_createForOfIteratorHelper(t),_step7;try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var _e8=_step7.value;this._items.push(_e8),this._itemMap.set(this._getItemIdBeforeAdding(_e8),_e8);}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}}}_createClass(xi,[{key:"length",get:function get(){return this._items.length;}},{key:"first",get:function get(){return this._items[0]||null;}},{key:"last",get:function get(){return this._items[this.length-1]||null;}},{key:"add",value:function add(t,e){return this.addMany([t],e);}},{key:"addMany",value:function addMany(t,e){if(void 0===e)e=this._items.length;else if(e>this._items.length||e<0)throw new ui.a("collection-add-item-invalid-index",this);for(var _i6=0;_i6<t.length;_i6++){var _n4=t[_i6],_o6=this._getItemIdBeforeAdding(_n4),_r2=e+_i6;this._items.splice(_r2,0,_n4),this._itemMap.set(_o6,_n4),this.fire("add",_n4,_r2);}return this.fire("change",{added:t,removed:[],index:e}),this;}},{key:"get",value:function get(t){var e;if("string"==typeof t)e=this._itemMap.get(t);else{if("number"!=typeof t)throw new ui.a("collection-get-invalid-arg",this);e=this._items[t];}return e||null;}},{key:"has",value:function has(t){if("string"==typeof t)return this._itemMap.has(t);{var _e9=t[this._idProperty];return this._itemMap.has(_e9);}}},{key:"getIndex",value:function getIndex(t){var e;return e="string"==typeof t?this._itemMap.get(t):t,this._items.indexOf(e);}},{key:"remove",value:function remove(t){var _this$_remove=this._remove(t),_this$_remove2=_slicedToArray(_this$_remove,2),e=_this$_remove2[0],i=_this$_remove2[1];return this.fire("change",{added:[],removed:[e],index:i}),e;}},{key:"map",value:function map(t,e){return this._items.map(t,e);}},{key:"find",value:function find(t,e){return this._items.find(t,e);}},{key:"filter",value:function filter(t,e){return this._items.filter(t,e);}},{key:"clear",value:function clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);var t=Array.from(this._items);for(;this.length;){this._remove(0);}this.fire("change",{added:[],removed:t,index:0});}},{key:"bindTo",value:function bindTo(t){var _this4=this;if(this._bindToCollection)throw new ui.a("collection-bind-to-rebind",this);return this._bindToCollection=t,{as:function as(t){_this4._setUpBindToBinding(function(e){return new t(e);});},using:function using(t){"function"==typeof t?_this4._setUpBindToBinding(function(e){return t(e);}):_this4._setUpBindToBinding(function(e){return e[t];});}};}},{key:"_setUpBindToBinding",value:function _setUpBindToBinding(t){var _this5=this;var e=this._bindToCollection,i=function i(_i8,n,o){var r=e._bindToCollection==_this5,s=e._bindToInternalToExternalMap.get(n);if(r&&s)_this5._bindToExternalToInternalMap.set(n,s),_this5._bindToInternalToExternalMap.set(s,n);else{var _i7=t(n);if(!_i7)return void _this5._skippedIndexesFromExternal.push(o);var _r3=o;var _iterator8=_createForOfIteratorHelper(_this5._skippedIndexesFromExternal),_step8;try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var _t10=_step8.value;o>_t10&&_r3--;}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}var _iterator9=_createForOfIteratorHelper(e._skippedIndexesFromExternal),_step9;try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var _t11=_step9.value;_r3>=_t11&&_r3++;}}catch(err){_iterator9.e(err);}finally{_iterator9.f();}_this5._bindToExternalToInternalMap.set(n,_i7),_this5._bindToInternalToExternalMap.set(_i7,n),_this5.add(_i7,_r3);for(var _t9=0;_t9<e._skippedIndexesFromExternal.length;_t9++){_r3<=e._skippedIndexesFromExternal[_t9]&&e._skippedIndexesFromExternal[_t9]++;}}};var _iterator10=_createForOfIteratorHelper(e),_step10;try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var _t12=_step10.value;i(0,_t12,e.getIndex(_t12));}}catch(err){_iterator10.e(err);}finally{_iterator10.f();}this.listenTo(e,"add",i),this.listenTo(e,"remove",function(t,e,i){var n=_this5._bindToExternalToInternalMap.get(e);n&&_this5.remove(n),_this5._skippedIndexesFromExternal=_this5._skippedIndexesFromExternal.reduce(function(t,e){return i<e&&t.push(e-1),i>e&&t.push(e),t;},[]);});}},{key:"_getItemIdBeforeAdding",value:function _getItemIdBeforeAdding(t){var e=this._idProperty;var i;if(e in t){if(i=t[e],"string"!=typeof i)throw new ui.a("collection-add-invalid-id",this);if(this.get(i))throw new ui.a("collection-add-item-already-exists",this);}else t[e]=i=li();return i;}},{key:"_remove",value:function _remove(t){var e,i,n,o=!1;var r=this._idProperty;if("string"==typeof t?(i=t,n=this._itemMap.get(i),o=!n,n&&(e=this._items.indexOf(n))):"number"==typeof t?(e=t,n=this._items[e],o=!n,n&&(i=n[r])):(n=t,i=n[r],e=this._items.indexOf(n),o=-1==e||!this._itemMap.get(i)),o)throw new ui.a("collection-remove-404",this);this._items.splice(e,1),this._itemMap["delete"](i);var s=this._bindToInternalToExternalMap.get(n);return this._bindToInternalToExternalMap["delete"](n),this._bindToExternalToInternalMap["delete"](s),this.fire("remove",n,e),[n,e];}},{key:Symbol.iterator,value:function value(){return this._items[Symbol.iterator]();}}]);return xi;}();yi(xi,mi);var Ai=/*#__PURE__*/function(){function Ai(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];_classCallCheck(this,Ai);this._context=t,this._plugins=new Map(),this._availablePlugins=new Map();var _iterator11=_createForOfIteratorHelper(e),_step11;try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){var _t13=_step11.value;_t13.pluginName&&this._availablePlugins.set(_t13.pluginName,_t13);}}catch(err){_iterator11.e(err);}finally{_iterator11.f();}this._contextPlugins=new Map();var _iterator12=_createForOfIteratorHelper(i),_step12;try{for(_iterator12.s();!(_step12=_iterator12.n()).done;){var _step12$value=_slicedToArray(_step12.value,2),_t14=_step12$value[0],_e10=_step12$value[1];this._contextPlugins.set(_t14,_e10),this._contextPlugins.set(_e10,_t14),_t14.pluginName&&this._availablePlugins.set(_t14.pluginName,_t14);}}catch(err){_iterator12.e(err);}finally{_iterator12.f();}}_createClass(Ai,[{key:Symbol.iterator,value:/*#__PURE__*/regeneratorRuntime.mark(function value(){var _iterator13,_step13,_t15;return regeneratorRuntime.wrap(function value$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_iterator13=_createForOfIteratorHelper(this._plugins);_context2.prev=1;_iterator13.s();case 3:if((_step13=_iterator13.n()).done){_context2.next=11;break;}_t15=_step13.value;_context2.t0="function"==typeof _t15[0];if(!_context2.t0){_context2.next=9;break;}_context2.next=9;return _t15;case 9:_context2.next=3;break;case 11:_context2.next=16;break;case 13:_context2.prev=13;_context2.t1=_context2["catch"](1);_iterator13.e(_context2.t1);case 16:_context2.prev=16;_iterator13.f();return _context2.finish(16);case 19:case"end":return _context2.stop();}}},value,this,[[1,13,16,19]]);})},{key:"get",value:function get(t){var e=this._plugins.get(t);if(!e){var _e11=t;throw"function"==typeof t&&(_e11=t.pluginName||t.name),new ui.a("plugincollection-plugin-not-loaded",this._context,{plugin:_e11});}return e;}},{key:"has",value:function has(t){return this._plugins.has(t);}},{key:"init",value:function init(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var i=this,n=this._context,o=new Set(),r=[],s=h(t),a=h(e),c=function(t){var e=[];var _iterator14=_createForOfIteratorHelper(t),_step14;try{for(_iterator14.s();!(_step14=_iterator14.n()).done;){var _i9=_step14.value;u(_i9)||e.push(_i9);}}catch(err){_iterator14.e(err);}finally{_iterator14.f();}return e.length?e:null;}(t);if(c){var _t16="plugincollection-plugin-not-found";return Object(ui.b)(_t16,{plugins:c}),Promise.reject(new ui.a(_t16,n,{plugins:c}));}return Promise.all(s.map(l)).then(function(){return d(r,"init");}).then(function(){return d(r,"afterInit");}).then(function(){return r;});function l(t){if(!a.includes(t)&&!i._plugins.has(t)&&!o.has(t))return function(t){return new Promise(function(s){o.add(t),t.requires&&t.requires.forEach(function(i){var o=u(i);if(t.isContextPlugin&&!o.isContextPlugin)throw new ui.a("plugincollection-context-required",null,{plugin:o.name,requiredBy:t.name});if(e.includes(o))throw new ui.a("plugincollection-required",n,{plugin:o.name,requiredBy:t.name});l(o);});var a=i._contextPlugins.get(t)||new t(n);i._add(t,a),r.push(a),s();});}(t)["catch"](function(e){throw Object(ui.b)("plugincollection-load",{plugin:t}),e;});}function d(t,e){return t.reduce(function(t,n){return n[e]?i._contextPlugins.has(n)?t:t.then(n[e].bind(n)):t;},Promise.resolve());}function u(t){return"function"==typeof t?t:i._availablePlugins.get(t);}function h(t){return t.map(function(t){return u(t);}).filter(function(t){return!!t;});}}},{key:"destroy",value:function destroy(){var t=[];var _iterator15=_createForOfIteratorHelper(this),_step15;try{for(_iterator15.s();!(_step15=_iterator15.n()).done;){var _step15$value=_slicedToArray(_step15.value,2),_e12=_step15$value[1];"function"!=typeof _e12.destroy||this._contextPlugins.has(_e12)||t.push(_e12.destroy());}}catch(err){_iterator15.e(err);}finally{_iterator15.f();}return Promise.all(t);}},{key:"_add",value:function _add(t,e){this._plugins.set(t,e);var i=t.pluginName;if(i){if(this._plugins.has(i))throw new ui.a("plugincollection-plugin-name-conflict",null,{pluginName:i,plugin1:this._plugins.get(i).constructor,plugin2:t});this._plugins.set(i,e);}}}]);return Ai;}();function Ti(t){return Array.isArray(t)?t:[t];}function Ci(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;if("number"!=typeof i)throw new ui.a("translation-service-quantity-not-a-number",null,{quantity:i});var n=Object.keys(window.CKEDITOR_TRANSLATIONS).length;1===n&&(t=Object.keys(window.CKEDITOR_TRANSLATIONS)[0]);var o=e.id||e.string;if(0===n||!function(t,e){return!!window.CKEDITOR_TRANSLATIONS[t]&&!!window.CKEDITOR_TRANSLATIONS[t].dictionary[e];}(t,o))return 1!==i?e.plural:e.string;var r=window.CKEDITOR_TRANSLATIONS[t].dictionary,s=window.CKEDITOR_TRANSLATIONS[t].getPluralForm||function(t){return 1===t?0:1;};if("string"==typeof r[o])return r[o];var a=Number(s(i));return r[o][a];}yi(Ai,mi),window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={});var Si=["ar","fa","he","ku","ug"];var Ei=/*#__PURE__*/function(){function Ei(){var _this6=this;var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,Ei);this.uiLanguage=t.uiLanguage||"en",this.contentLanguage=t.contentLanguage||this.uiLanguage,this.uiLanguageDirection=Pi(this.uiLanguage),this.contentLanguageDirection=Pi(this.contentLanguage),this.t=function(t,e){return _this6._t(t,e);};}_createClass(Ei,[{key:"language",get:function get(){return console.warn("locale-deprecated-language-property: The Locale#language property has been deprecated and will be removed in the near future. Please use #uiLanguage and #contentLanguage properties instead."),this.uiLanguage;}},{key:"_t",value:function _t(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];e=Ti(e),"string"==typeof t&&(t={string:t});var i=!!t.plural?e[0]:1;return function(t,e){return t.replace(/%(\d+)/g,function(t,i){return i<e.length?e[i]:t;});}(Ci(this.uiLanguage,t,i),e);}}]);return Ei;}();function Pi(t){return Si.includes(t)?"rtl":"ltr";}var Mi=/*#__PURE__*/function(){function Mi(t){_classCallCheck(this,Mi);this.config=new ni(t,this.constructor.defaultConfig);var e=this.constructor.builtinPlugins;this.config.define("plugins",e),this.plugins=new Ai(this,e);var i=this.config.get("language")||{};this.locale=new Ei({uiLanguage:"string"==typeof i?i:i.ui,contentLanguage:this.config.get("language.content")}),this.t=this.locale.t,this.editors=new xi(),this._contextOwner=null;}_createClass(Mi,[{key:"initPlugins",value:function initPlugins(){var t=this.config.get("plugins")||[];var _iterator16=_createForOfIteratorHelper(t),_step16;try{for(_iterator16.s();!(_step16=_iterator16.n()).done;){var _e13=_step16.value;if("function"!=typeof _e13)throw new ui.a("context-initplugins-constructor-only",null,{Plugin:_e13});if(!0!==_e13.isContextPlugin)throw new ui.a("context-initplugins-invalid-plugin",null,{Plugin:_e13});}}catch(err){_iterator16.e(err);}finally{_iterator16.f();}return this.plugins.init(t);}},{key:"destroy",value:function destroy(){var _this7=this;return Promise.all(Array.from(this.editors,function(t){return t.destroy();})).then(function(){return _this7.plugins.destroy();});}},{key:"_addEditor",value:function _addEditor(t,e){if(this._contextOwner)throw new ui.a("context-addeditor-private-context");this.editors.add(t),e&&(this._contextOwner=t);}},{key:"_removeEditor",value:function _removeEditor(t){return this.editors.has(t)&&this.editors.remove(t),this._contextOwner===t?this.destroy():Promise.resolve();}},{key:"_getEditorConfig",value:function _getEditorConfig(){var t={};var _iterator17=_createForOfIteratorHelper(this.config.names()),_step17;try{for(_iterator17.s();!(_step17=_iterator17.n()).done;){var _e14=_step17.value;["plugins","removePlugins","extraPlugins"].includes(_e14)||(t[_e14]=this.config.get(_e14));}}catch(err){_iterator17.e(err);}finally{_iterator17.f();}return t;}}],[{key:"create",value:function create(t){var _this8=this;return new Promise(function(e){var i=new _this8(t);e(i.initPlugins().then(function(){return i;}));});}}]);return Mi;}();function Ii(t,e){var i=Math.min(t.length,e.length);for(var _n5=0;_n5<i;_n5++){if(t[_n5]!=e[_n5])return _n5;}return t.length==e.length?"same":t.length<e.length?"prefix":"extension";}var Ni=function Ni(t){return ti(t,4);};var Oi=/*#__PURE__*/function(){function Oi(t){_classCallCheck(this,Oi);this.document=t,this.parent=null;}_createClass(Oi,[{key:"index",get:function get(){var t;if(!this.parent)return null;if(-1==(t=this.parent.getChildIndex(this)))throw new ui.a("view-node-not-found-in-parent",this);return t;}},{key:"nextSibling",get:function get(){var t=this.index;return null!==t&&this.parent.getChild(t+1)||null;}},{key:"previousSibling",get:function get(){var t=this.index;return null!==t&&this.parent.getChild(t-1)||null;}},{key:"root",get:function get(){var t=this;for(;t.parent;){t=t.parent;}return t;}},{key:"isAttached",value:function isAttached(){return this.root.is("rootElement");}},{key:"getPath",value:function getPath(){var t=[];var e=this;for(;e.parent;){t.unshift(e.index),e=e.parent;}return t;}},{key:"getAncestors",value:function getAncestors(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{includeSelf:!1,parentFirst:!1};var e=[];var i=t.includeSelf?this:this.parent;for(;i;){e[t.parentFirst?"push":"unshift"](i),i=i.parent;}return e;}},{key:"getCommonAncestor",value:function getCommonAncestor(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=this.getAncestors(e),n=t.getAncestors(e);var o=0;for(;i[o]==n[o]&&i[o];){o++;}return 0===o?null:i[o-1];}},{key:"isBefore",value:function isBefore(t){if(this==t)return!1;if(this.root!==t.root)return!1;var e=this.getPath(),i=t.getPath(),n=Ii(e,i);switch(n){case"prefix":return!0;case"extension":return!1;default:return e[n]<i[n];}}},{key:"isAfter",value:function isAfter(t){return this!=t&&this.root===t.root&&!this.isBefore(t);}},{key:"_remove",value:function _remove(){this.parent._removeChildren(this.index);}},{key:"_fireChange",value:function _fireChange(t,e){this.fire("change:"+t,e),this.parent&&this.parent._fireChange(t,e);}},{key:"toJSON",value:function toJSON(){var t=Ni(this);return delete t.parent,t;}},{key:"is",value:function is(t){return"node"===t||"view:node"===t;}}]);return Oi;}();yi(Oi,mi);var Ri=/*#__PURE__*/function(_Oi){_inherits(Ri,_Oi);var _super2=_createSuper(Ri);function Ri(t,e){var _this9;_classCallCheck(this,Ri);_this9=_super2.call(this,t),_this9._textData=e;return _this9;}_createClass(Ri,[{key:"is",value:function is(t){return"$text"===t||"view:$text"===t||"text"===t||"view:text"===t||"node"===t||"view:node"===t;}},{key:"data",get:function get(){return this._textData;}},{key:"_data",get:function get(){return this.data;},set:function set(t){this._fireChange("text",this),this._textData=t;}},{key:"isSimilar",value:function isSimilar(t){return t instanceof Ri&&(this===t||this.data===t.data);}},{key:"_clone",value:function _clone(){return new Ri(this.document,this.data);}}]);return Ri;}(Oi);var Di=/*#__PURE__*/function(){function Di(t,e,i){_classCallCheck(this,Di);if(this.textNode=t,e<0||e>t.data.length)throw new ui.a("view-textproxy-wrong-offsetintext",this);if(i<0||e+i>t.data.length)throw new ui.a("view-textproxy-wrong-length",this);this.data=t.data.substring(e,e+i),this.offsetInText=e;}_createClass(Di,[{key:"offsetSize",get:function get(){return this.data.length;}},{key:"isPartial",get:function get(){return this.data.length!==this.textNode.data.length;}},{key:"parent",get:function get(){return this.textNode.parent;}},{key:"root",get:function get(){return this.textNode.root;}},{key:"document",get:function get(){return this.textNode.document;}},{key:"is",value:function is(t){return"$textProxy"===t||"view:$textProxy"===t||"textProxy"===t||"view:textProxy"===t;}},{key:"getAncestors",value:function getAncestors(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{includeSelf:!1,parentFirst:!1};var e=[];var i=t.includeSelf?this.textNode:this.parent;for(;null!==i;){e[t.parentFirst?"push":"unshift"](i),i=i.parent;}return e;}}]);return Di;}();function Li(t){return vi(t)?new Map(t):function(t){var e=new Map();for(var _i10 in t){e.set(_i10,t[_i10]);}return e;}(t);}var zi=/*#__PURE__*/function(){function zi(){_classCallCheck(this,zi);this._patterns=[],this.add.apply(this,arguments);}_createClass(zi,[{key:"add",value:function add(){for(var _len5=arguments.length,t=new Array(_len5),_key5=0;_key5<_len5;_key5++){t[_key5]=arguments[_key5];}for(var _i11=0,_t17=t;_i11<_t17.length;_i11++){var _e15=_t17[_i11];("string"==typeof _e15||_e15 instanceof RegExp)&&(_e15={name:_e15}),_e15.classes&&("string"==typeof _e15.classes||_e15.classes instanceof RegExp)&&(_e15.classes=[_e15.classes]),this._patterns.push(_e15);}}},{key:"match",value:function match(){for(var _len6=arguments.length,t=new Array(_len6),_key6=0;_key6<_len6;_key6++){t[_key6]=arguments[_key6];}for(var _i12=0,_t18=t;_i12<_t18.length;_i12++){var _e16=_t18[_i12];var _iterator18=_createForOfIteratorHelper(this._patterns),_step18;try{for(_iterator18.s();!(_step18=_iterator18.n()).done;){var _t19=_step18.value;var _i13=Vi(_e16,_t19);if(_i13)return{element:_e16,pattern:_t19,match:_i13};}}catch(err){_iterator18.e(err);}finally{_iterator18.f();}}return null;}},{key:"matchAll",value:function matchAll(){var e=[];for(var _len7=arguments.length,t=new Array(_len7),_key7=0;_key7<_len7;_key7++){t[_key7]=arguments[_key7];}for(var _i14=0,_t20=t;_i14<_t20.length;_i14++){var _i15=_t20[_i14];var _iterator19=_createForOfIteratorHelper(this._patterns),_step19;try{for(_iterator19.s();!(_step19=_iterator19.n()).done;){var _t21=_step19.value;var _n6=Vi(_i15,_t21);_n6&&e.push({element:_i15,pattern:_t21,match:_n6});}}catch(err){_iterator19.e(err);}finally{_iterator19.f();}}return e.length>0?e:null;}},{key:"getElementName",value:function getElementName(){if(1!==this._patterns.length)return null;var t=this._patterns[0],e=t.name;return"function"==typeof t||!e||e instanceof RegExp?null:e;}}]);return zi;}();function Vi(t,e){if("function"==typeof e)return e(t);var i={};return e.name&&(i.name=function(t,e){if(t instanceof RegExp)return t.test(e);return t===e;}(e.name,t.name),!i.name)||e.attributes&&(i.attributes=function(t,e){var i=[];for(var _n7 in t){var _o7=t[_n7];if(!e.hasAttribute(_n7))return null;{var _t22=e.getAttribute(_n7);if(!0===_o7)i.push(_n7);else if(_o7 instanceof RegExp){if(!_o7.test(_t22))return null;i.push(_n7);}else{if(_t22!==_o7)return null;i.push(_n7);}}}return i;}(e.attributes,t),!i.attributes)?null:!(e.classes&&(i.classes=function(t,e){var i=[];var _iterator20=_createForOfIteratorHelper(t),_step20;try{for(_iterator20.s();!(_step20=_iterator20.n()).done;){var _n8=_step20.value;if(_n8 instanceof RegExp){var _t23=e.getClassNames();var _iterator21=_createForOfIteratorHelper(_t23),_step21;try{for(_iterator21.s();!(_step21=_iterator21.n()).done;){var _e17=_step21.value;_n8.test(_e17)&&i.push(_e17);}}catch(err){_iterator21.e(err);}finally{_iterator21.f();}if(0===i.length)return null;}else{if(!e.hasClass(_n8))return null;i.push(_n8);}}}catch(err){_iterator20.e(err);}finally{_iterator20.f();}return i;}(e.classes,t),!i.classes))&&!(e.styles&&(i.styles=function(t,e){var i=[];for(var _n9 in t){var _o8=t[_n9];if(!e.hasStyle(_n9))return null;{var _t24=e.getStyle(_n9);if(_o8 instanceof RegExp){if(!_o8.test(_t24))return null;i.push(_n9);}else{if(_t24!==_o8)return null;i.push(_n9);}}}return i;}(e.styles,t),!i.styles))&&i;}var ji=function ji(t){return"symbol"==_typeof(t)||p(t)&&"[object Symbol]"==f(t);},Bi=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Fi=/^\w*$/;var Hi=function Hi(t,e){if(Dt(t))return!1;var i=_typeof(t);return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=t&&!ji(t))||Fi.test(t)||!Bi.test(t)||null!=e&&t in Object(e);};function Ui(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var i=function i(){var n=arguments,o=e?e.apply(this,n):n[0],r=i.cache;if(r.has(o))return r.get(o);var s=t.apply(this,n);return i.cache=r.set(o,s)||r,s;};return i.cache=new(Ui.Cache||kt)(),i;}Ui.Cache=kt;var Wi=Ui;var qi=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$i=/\\(\\)?/g,Yi=function(t){var e=Wi(t,function(t){return 500===i.size&&i.clear(),t;}),i=e.cache;return e;}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(qi,function(t,i,n,o){e.push(n?o.replace($i,"$1"):i||t);}),e;});var Gi=function Gi(t,e){for(var i=-1,n=null==t?0:t.length,o=Array(n);++i<n;){o[i]=e(t[i],i,t);}return o;},Ki=o?o.prototype:void 0,Qi=Ki?Ki.toString:void 0;var Ji=function t(e){if("string"==typeof e)return e;if(Dt(e))return Gi(e,t)+"";if(ji(e))return Qi?Qi.call(e):"";var i=e+"";return"0"==i&&1/e==-1/0?"-0":i;};var Zi=function Zi(t){return null==t?"":Ji(t);};var Xi=function Xi(t,e){return Dt(t)?t:Hi(t,e)?[t]:Yi(Zi(t));};var tn=function tn(t){var e=null==t?0:t.length;return e?t[e-1]:void 0;};var en=function en(t){if("string"==typeof t||ji(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e;};var nn=function nn(t,e){for(var i=0,n=(e=Xi(e,t)).length;null!=t&&i<n;){t=t[en(e[i++])];}return i&&i==n?t:void 0;};var on=function on(t,e,i){var n=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(i=i>o?o:i)<0&&(i+=o),o=e>i?0:i-e>>>0,e>>>=0;for(var r=Array(o);++n<o;){r[n]=t[n+e];}return r;};var rn=function rn(t,e){return e.length<2?t:nn(t,on(e,0,-1));};var sn=function sn(t,e){return e=Xi(e,t),null==(t=rn(t,e))||delete t[en(tn(e))];};var an=function an(t,e){return null==t||sn(t,e);};var cn=function cn(t,e,i){var n=null==t?void 0:nn(t,e);return void 0===n?i:n;};var ln=function ln(t,e,i){(void 0!==i&&!A(t[e],i)||void 0===i&&!(e in t))&&Tt(t,e,i);};var dn=function(t){return function(e,i,n){for(var o=-1,r=Object(e),s=n(e),a=s.length;a--;){var c=s[t?a:++o];if(!1===i(r[c],c,r))break;}return e;};}();var un=function un(t){return p(t)&&Xt(t);};var hn=function hn(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e];};var fn=function fn(t){return Et(t,re(t));};var mn=function mn(t,e,i,n,o,r,s){var a=hn(t,i),c=hn(e,i),l=s.get(c);if(l)ln(t,i,l);else{var d=r?r(a,c,i+"",t,e,s):void 0,u=void 0===d;if(u){var h=Dt(c),f=!h&&Object(Lt.a)(c),m=!h&&!f&&qt(c);d=c,h||f||m?Dt(a)?d=a:un(a)?d=ce(a):f?(u=!1,d=Object(ae.a)(c,!0)):m?(u=!1,d=He(c,!0)):d=[]:y(c)||Rt(c)?(d=a,Rt(a)?d=fn(a):z(a)&&!j(a)||(d=$e(c))):u=!1;}u&&(s.set(c,d),o(d,c,n,r,s),s["delete"](c)),ln(t,i,d);}};var gn=function t(e,i,n,o,r){e!==i&&dn(i,function(s,a){if(r||(r=new yt()),z(s))mn(e,i,a,n,t,o,r);else{var c=o?o(hn(e,a),s,a+"",e,i,r):void 0;void 0===c&&(c=s),ln(e,a,c);}},re);};var pn=function pn(t){return t;};var bn=function bn(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2]);}return t.apply(e,i);},wn=Math.max;var kn=function kn(t,e,i){return e=wn(void 0===e?t.length-1:e,0),function(){for(var n=arguments,o=-1,r=wn(n.length-e,0),s=Array(r);++o<r;){s[o]=n[e+o];}o=-1;for(var a=Array(e+1);++o<e;){a[o]=n[o];}return a[e]=i(s),bn(t,this,a);};};var _n=function _n(t){return function(){return t;};},vn=At?function(t,e){return At(t,"toString",{configurable:!0,enumerable:!1,value:_n(e),writable:!0});}:pn,yn=Date.now;var xn=function(t){var e=0,i=0;return function(){var n=yn(),o=16-(n-i);if(i=n,o>0){if(++e>=800)return arguments[0];}else e=0;return t.apply(void 0,arguments);};}(vn);var An=function An(t,e){return xn(kn(t,e,pn),t+"");};var Tn=function Tn(t,e,i){if(!z(i))return!1;var n=_typeof(e);return!!("number"==n?Xt(i)&&Vt(e,i.length):"string"==n&&e in i)&&A(i[e],t);};var Cn=function Cn(t){return An(function(e,i){var n=-1,o=i.length,r=o>1?i[o-1]:void 0,s=o>2?i[2]:void 0;for(r=t.length>3&&"function"==typeof r?(o--,r):void 0,s&&Tn(i[0],i[1],s)&&(r=o<3?void 0:r,o=1),e=Object(e);++n<o;){var a=i[n];a&&t(e,a,n,r);}return e;});},Sn=Cn(function(t,e,i){gn(t,e,i);});var En=function En(t,e,i,n){if(!z(t))return t;for(var o=-1,r=(e=Xi(e,t)).length,s=r-1,a=t;null!=a&&++o<r;){var c=en(e[o]),l=i;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(o!=s){var d=a[c];void 0===(l=n?n(d,c,a):void 0)&&(l=z(d)?d:Vt(e[o+1])?[]:{});}St(a,c,l),a=a[c];}return t;};var Pn=function Pn(t,e,i){return null==t?t:En(t,e,i);};var Mn=/*#__PURE__*/function(){function Mn(t){_classCallCheck(this,Mn);this._styles={},this._styleProcessor=t;}_createClass(Mn,[{key:"isEmpty",get:function get(){var t=Object.entries(this._styles);return!Array.from(t).length;}},{key:"size",get:function get(){return this.isEmpty?0:this.getStyleNames().length;}},{key:"setTo",value:function setTo(t){this.clear();var e=Array.from(function(t){var e=null,i=0,n=0,o=null;var r=new Map();if(""===t)return r;";"!=t.charAt(t.length-1)&&(t+=";");for(var _s2=0;_s2<t.length;_s2++){var _a2=t.charAt(_s2);if(null===e)switch(_a2){case":":o||(o=t.substr(i,_s2-i),n=_s2+1);break;case'"':case"'":e=_a2;break;case";":{var _e18=t.substr(n,_s2-n);o&&r.set(o.trim(),_e18.trim()),o=null,i=_s2+1;break;}}else _a2===e&&(e=null);}return r;}(t).entries());for(var _i16=0,_e19=e;_i16<_e19.length;_i16++){var _e19$_i=_slicedToArray(_e19[_i16],2),_t25=_e19$_i[0],_i17=_e19$_i[1];this._styleProcessor.toNormalizedForm(_t25,_i17,this._styles);}}},{key:"has",value:function has(t){if(this.isEmpty)return!1;var e=this._styleProcessor.getReducedForm(t,this._styles).find(function(_ref){var _ref2=_slicedToArray(_ref,1),e=_ref2[0];return e===t;});return Array.isArray(e);}},{key:"set",value:function set(t,e){if(z(t))for(var _i18=0,_Object$entries=Object.entries(t);_i18<_Object$entries.length;_i18++){var _Object$entries$_i=_slicedToArray(_Object$entries[_i18],2),_e20=_Object$entries$_i[0],_i19=_Object$entries$_i[1];this._styleProcessor.toNormalizedForm(_e20,_i19,this._styles);}else this._styleProcessor.toNormalizedForm(t,e,this._styles);}},{key:"remove",value:function remove(t){var e=Nn(t);an(this._styles,e),delete this._styles[t],this._cleanEmptyObjectsOnPath(e);}},{key:"getNormalized",value:function getNormalized(t){return this._styleProcessor.getNormalized(t,this._styles);}},{key:"toString",value:function toString(){return this.isEmpty?"":this._getStylesEntries().map(function(t){return t.join(":");}).sort().join(";")+";";}},{key:"getAsString",value:function getAsString(t){if(this.isEmpty)return;if(this._styles[t]&&!z(this._styles[t]))return this._styles[t];var e=this._styleProcessor.getReducedForm(t,this._styles).find(function(_ref3){var _ref4=_slicedToArray(_ref3,1),e=_ref4[0];return e===t;});return Array.isArray(e)?e[1]:void 0;}},{key:"getStyleNames",value:function getStyleNames(){if(this.isEmpty)return[];return this._getStylesEntries().map(function(_ref5){var _ref6=_slicedToArray(_ref5,1),t=_ref6[0];return t;});}},{key:"clear",value:function clear(){this._styles={};}},{key:"_getStylesEntries",value:function _getStylesEntries(){var t=[],e=Object.keys(this._styles);for(var _i20=0,_e21=e;_i20<_e21.length;_i20++){var _i21=_e21[_i20];t.push.apply(t,_toConsumableArray(this._styleProcessor.getReducedForm(_i21,this._styles)));}return t;}},{key:"_cleanEmptyObjectsOnPath",value:function _cleanEmptyObjectsOnPath(t){var e=t.split(".");if(!(e.length>1))return;var i=e.splice(0,e.length-1).join("."),n=cn(this._styles,i);if(!n)return;!Array.from(Object.keys(n)).length&&this.remove(i);}}]);return Mn;}();var In=/*#__PURE__*/function(){function In(){_classCallCheck(this,In);this._normalizers=new Map(),this._extractors=new Map(),this._reducers=new Map(),this._consumables=new Map();}_createClass(In,[{key:"toNormalizedForm",value:function toNormalizedForm(t,e,i){if(z(e))On(i,Nn(t),e);else if(this._normalizers.has(t)){var _n10=this._normalizers.get(t),_n11=_n10(e),_o9=_n11.path,_r4=_n11.value;On(i,_o9,_r4);}else On(i,t,e);}},{key:"getNormalized",value:function getNormalized(t,e){if(!t)return Sn({},e);if(void 0!==e[t])return e[t];if(this._extractors.has(t)){var _i22=this._extractors.get(t);if("string"==typeof _i22)return cn(e,_i22);var _n12=_i22(t,e);if(_n12)return _n12;}return cn(e,Nn(t));}},{key:"getReducedForm",value:function getReducedForm(t,e){var i=this.getNormalized(t,e);if(void 0===i)return[];if(this._reducers.has(t)){return this._reducers.get(t)(i);}return[[t,i]];}},{key:"getRelatedStyles",value:function getRelatedStyles(t){return this._consumables.get(t)||[];}},{key:"setNormalizer",value:function setNormalizer(t,e){this._normalizers.set(t,e);}},{key:"setExtractor",value:function setExtractor(t,e){this._extractors.set(t,e);}},{key:"setReducer",value:function setReducer(t,e){this._reducers.set(t,e);}},{key:"setStyleRelation",value:function setStyleRelation(t,e){this._mapStyleNames(t,e);var _iterator22=_createForOfIteratorHelper(e),_step22;try{for(_iterator22.s();!(_step22=_iterator22.n()).done;){var _i23=_step22.value;this._mapStyleNames(_i23,[t]);}}catch(err){_iterator22.e(err);}finally{_iterator22.f();}}},{key:"_mapStyleNames",value:function _mapStyleNames(t,e){var _this$_consumables$ge;this._consumables.has(t)||this._consumables.set(t,[]),(_this$_consumables$ge=this._consumables.get(t)).push.apply(_this$_consumables$ge,_toConsumableArray(e));}}]);return In;}();function Nn(t){return t.replace("-",".");}function On(t,e,i){var n=i;z(i)&&(n=Sn({},cn(t,e),i)),Pn(t,e,n);}var Rn=/*#__PURE__*/function(_Oi2){_inherits(Rn,_Oi2);var _super3=_createSuper(Rn);function Rn(t,e,i,n){var _this10;_classCallCheck(this,Rn);if(_this10=_super3.call(this,t),_this10.name=e,_this10._attrs=function(t){t=Li(t);var _iterator23=_createForOfIteratorHelper(t),_step23;try{for(_iterator23.s();!(_step23=_iterator23.n()).done;){var _step23$value=_slicedToArray(_step23.value,2),_e22=_step23$value[0],_i24=_step23$value[1];null===_i24?t["delete"](_e22):"string"!=typeof _i24&&t.set(_e22,String(_i24));}}catch(err){_iterator23.e(err);}finally{_iterator23.f();}return t;}(i),_this10._children=[],n&&_this10._insertChild(0,n),_this10._classes=new Set(),_this10._attrs.has("class")){var _t26=_this10._attrs.get("class");Dn(_this10._classes,_t26),_this10._attrs["delete"]("class");}_this10._styles=new Mn(_this10.document.stylesProcessor),_this10._attrs.has("style")&&(_this10._styles.setTo(_this10._attrs.get("style")),_this10._attrs["delete"]("style")),_this10._customProperties=new Map(),_this10._isAllowedInsideAttributeElement=!1;return _possibleConstructorReturn(_this10);}_createClass(Rn,[{key:"childCount",get:function get(){return this._children.length;}},{key:"isEmpty",get:function get(){return 0===this._children.length;}},{key:"isAllowedInsideAttributeElement",get:function get(){return this._isAllowedInsideAttributeElement;}},{key:"is",value:function is(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return e?e===this.name&&("element"===t||"view:element"===t):"element"===t||"view:element"===t||"node"===t||"view:node"===t;}},{key:"getChild",value:function getChild(t){return this._children[t];}},{key:"getChildIndex",value:function getChildIndex(t){return this._children.indexOf(t);}},{key:"getChildren",value:function getChildren(){return this._children[Symbol.iterator]();}},{key:"getAttributeKeys",value:/*#__PURE__*/regeneratorRuntime.mark(function getAttributeKeys(){return regeneratorRuntime.wrap(function getAttributeKeys$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.t0=this._classes.size>0;if(!_context3.t0){_context3.next=4;break;}_context3.next=4;return"class";case 4:_context3.t1=this._styles.isEmpty;if(_context3.t1){_context3.next=8;break;}_context3.next=8;return"style";case 8:return _context3.delegateYield(this._attrs.keys(),"t2",9);case 9:case"end":return _context3.stop();}}},getAttributeKeys,this);})},{key:"getAttributes",value:/*#__PURE__*/regeneratorRuntime.mark(function getAttributes(){return regeneratorRuntime.wrap(function getAttributes$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:return _context4.delegateYield(this._attrs.entries(),"t0",1);case 1:_context4.t1=this._classes.size>0;if(!_context4.t1){_context4.next=5;break;}_context4.next=5;return["class",this.getAttribute("class")];case 5:_context4.t2=this._styles.isEmpty;if(_context4.t2){_context4.next=9;break;}_context4.next=9;return["style",this.getAttribute("style")];case 9:case"end":return _context4.stop();}}},getAttributes,this);})},{key:"getAttribute",value:function getAttribute(t){if("class"==t)return this._classes.size>0?_toConsumableArray(this._classes).join(" "):void 0;if("style"==t){var _t27=this._styles.toString();return""==_t27?void 0:_t27;}return this._attrs.get(t);}},{key:"hasAttribute",value:function hasAttribute(t){return"class"==t?this._classes.size>0:"style"==t?!this._styles.isEmpty:this._attrs.has(t);}},{key:"isSimilar",value:function isSimilar(t){if(!(t instanceof Rn))return!1;if(this===t)return!0;if(this.name!=t.name)return!1;if(this.isAllowedInsideAttributeElement!=t.isAllowedInsideAttributeElement)return!1;if(this._attrs.size!==t._attrs.size||this._classes.size!==t._classes.size||this._styles.size!==t._styles.size)return!1;var _iterator24=_createForOfIteratorHelper(this._attrs),_step24;try{for(_iterator24.s();!(_step24=_iterator24.n()).done;){var _step24$value=_slicedToArray(_step24.value,2),_e23=_step24$value[0],_i25=_step24$value[1];if(!t._attrs.has(_e23)||t._attrs.get(_e23)!==_i25)return!1;}}catch(err){_iterator24.e(err);}finally{_iterator24.f();}var _iterator25=_createForOfIteratorHelper(this._classes),_step25;try{for(_iterator25.s();!(_step25=_iterator25.n()).done;){var _e24=_step25.value;if(!t._classes.has(_e24))return!1;}}catch(err){_iterator25.e(err);}finally{_iterator25.f();}var _iterator26=_createForOfIteratorHelper(this._styles.getStyleNames()),_step26;try{for(_iterator26.s();!(_step26=_iterator26.n()).done;){var _e25=_step26.value;if(!t._styles.has(_e25)||t._styles.getAsString(_e25)!==this._styles.getAsString(_e25))return!1;}}catch(err){_iterator26.e(err);}finally{_iterator26.f();}return!0;}},{key:"hasClass",value:function hasClass(){for(var _len8=arguments.length,t=new Array(_len8),_key8=0;_key8<_len8;_key8++){t[_key8]=arguments[_key8];}for(var _i26=0,_t28=t;_i26<_t28.length;_i26++){var _e26=_t28[_i26];if(!this._classes.has(_e26))return!1;}return!0;}},{key:"getClassNames",value:function getClassNames(){return this._classes.keys();}},{key:"getStyle",value:function getStyle(t){return this._styles.getAsString(t);}},{key:"getNormalizedStyle",value:function getNormalizedStyle(t){return this._styles.getNormalized(t);}},{key:"getStyleNames",value:function getStyleNames(){return this._styles.getStyleNames();}},{key:"hasStyle",value:function hasStyle(){for(var _len9=arguments.length,t=new Array(_len9),_key9=0;_key9<_len9;_key9++){t[_key9]=arguments[_key9];}for(var _i27=0,_t29=t;_i27<_t29.length;_i27++){var _e27=_t29[_i27];if(!this._styles.has(_e27))return!1;}return!0;}},{key:"findAncestor",value:function findAncestor(){for(var _len10=arguments.length,t=new Array(_len10),_key10=0;_key10<_len10;_key10++){t[_key10]=arguments[_key10];}var e=_construct(zi,t);var i=this.parent;for(;i;){if(e.match(i))return i;i=i.parent;}return null;}},{key:"getCustomProperty",value:function getCustomProperty(t){return this._customProperties.get(t);}},{key:"getCustomProperties",value:/*#__PURE__*/regeneratorRuntime.mark(function getCustomProperties(){return regeneratorRuntime.wrap(function getCustomProperties$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:return _context5.delegateYield(this._customProperties.entries(),"t0",1);case 1:case"end":return _context5.stop();}}},getCustomProperties,this);})},{key:"getIdentity",value:function getIdentity(){var t=Array.from(this._classes).sort().join(","),e=this._styles.toString(),i=Array.from(this._attrs).map(function(t){return"".concat(t[0],"=\"").concat(t[1],"\"");}).sort().join(" ");return this.name+(""==t?"":" class=\"".concat(t,"\""))+(e?" style=\"".concat(e,"\""):"")+(""==i?"":" "+i);}},{key:"_clone",value:function _clone(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:!1;var e=[];if(t){var _iterator27=_createForOfIteratorHelper(this.getChildren()),_step27;try{for(_iterator27.s();!(_step27=_iterator27.n()).done;){var _i28=_step27.value;e.push(_i28._clone(t));}}catch(err){_iterator27.e(err);}finally{_iterator27.f();}}var i=new this.constructor(this.document,this.name,this._attrs,e);return i._classes=new Set(this._classes),i._styles.set(this._styles.getNormalized()),i._customProperties=new Map(this._customProperties),i.getFillerOffset=this.getFillerOffset,i._isAllowedInsideAttributeElement=this.isAllowedInsideAttributeElement,i;}},{key:"_appendChild",value:function _appendChild(t){return this._insertChild(this.childCount,t);}},{key:"_insertChild",value:function _insertChild(t,e){this._fireChange("children",this);var i=0;var n=function(t,e){if("string"==typeof e)return[new Ri(t,e)];vi(e)||(e=[e]);return Array.from(e).map(function(e){return"string"==typeof e?new Ri(t,e):e instanceof Di?new Ri(t,e.data):e;});}(this.document,e);var _iterator28=_createForOfIteratorHelper(n),_step28;try{for(_iterator28.s();!(_step28=_iterator28.n()).done;){var _e28=_step28.value;null!==_e28.parent&&_e28._remove(),_e28.parent=this,_e28.document=this.document,this._children.splice(t,0,_e28),t++,i++;}}catch(err){_iterator28.e(err);}finally{_iterator28.f();}return i;}},{key:"_removeChildren",value:function _removeChildren(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;this._fireChange("children",this);for(var _i29=t;_i29<t+e;_i29++){this._children[_i29].parent=null;}return this._children.splice(t,e);}},{key:"_setAttribute",value:function _setAttribute(t,e){e=String(e),this._fireChange("attributes",this),"class"==t?Dn(this._classes,e):"style"==t?this._styles.setTo(e):this._attrs.set(t,e);}},{key:"_removeAttribute",value:function _removeAttribute(t){return this._fireChange("attributes",this),"class"==t?this._classes.size>0&&(this._classes.clear(),!0):"style"==t?!this._styles.isEmpty&&(this._styles.clear(),!0):this._attrs["delete"](t);}},{key:"_addClass",value:function _addClass(t){this._fireChange("attributes",this);var _iterator29=_createForOfIteratorHelper(Ti(t)),_step29;try{for(_iterator29.s();!(_step29=_iterator29.n()).done;){var _e29=_step29.value;this._classes.add(_e29);}}catch(err){_iterator29.e(err);}finally{_iterator29.f();}}},{key:"_removeClass",value:function _removeClass(t){this._fireChange("attributes",this);var _iterator30=_createForOfIteratorHelper(Ti(t)),_step30;try{for(_iterator30.s();!(_step30=_iterator30.n()).done;){var _e30=_step30.value;this._classes["delete"](_e30);}}catch(err){_iterator30.e(err);}finally{_iterator30.f();}}},{key:"_setStyle",value:function _setStyle(t,e){this._fireChange("attributes",this),this._styles.set(t,e);}},{key:"_removeStyle",value:function _removeStyle(t){this._fireChange("attributes",this);var _iterator31=_createForOfIteratorHelper(Ti(t)),_step31;try{for(_iterator31.s();!(_step31=_iterator31.n()).done;){var _e31=_step31.value;this._styles.remove(_e31);}}catch(err){_iterator31.e(err);}finally{_iterator31.f();}}},{key:"_setCustomProperty",value:function _setCustomProperty(t,e){this._customProperties.set(t,e);}},{key:"_removeCustomProperty",value:function _removeCustomProperty(t){return this._customProperties["delete"](t);}}]);return Rn;}(Oi);function Dn(t,e){var i=e.split(/\s+/);t.clear(),i.forEach(function(e){return t.add(e);});}var Ln=/*#__PURE__*/function(_Rn){_inherits(Ln,_Rn);var _super4=_createSuper(Ln);function Ln(t,e,i,n){var _this11;_classCallCheck(this,Ln);_this11=_super4.call(this,t,e,i,n),_this11.getFillerOffset=zn;return _this11;}_createClass(Ln,[{key:"is",value:function is(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return e?e===this.name&&("containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t):"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t;}}]);return Ln;}(Rn);function zn(){var t=_toConsumableArray(this.getChildren()),e=t[this.childCount-1];if(e&&e.is("element","br"))return this.childCount;var _iterator32=_createForOfIteratorHelper(t),_step32;try{for(_iterator32.s();!(_step32=_iterator32.n()).done;){var _e32=_step32.value;if(!_e32.is("uiElement"))return null;}}catch(err){_iterator32.e(err);}finally{_iterator32.f();}return this.childCount;}var Vn=Cn(function(t,e){Et(e,re(e),t);});var jn=Symbol("observableProperties"),Bn=Symbol("boundObservables"),Fn=Symbol("boundProperties"),Hn={set:function set(t,e){var _this12=this;if(z(t))return void Object.keys(t).forEach(function(e){_this12.set(e,t[e]);},this);Wn(this);var i=this[jn];if(t in this&&!i.has(t))throw new ui.a("observable-set-cannot-override",this);Object.defineProperty(this,t,{enumerable:!0,configurable:!0,get:function get(){return i.get(t);},set:function set(e){var n=i.get(t);var o=this.fire("set:"+t,t,e,n);void 0===o&&(o=e),n===o&&i.has(t)||(i.set(t,o),this.fire("change:"+t,t,o,n));}}),this[t]=e;},bind:function bind(){var _this13=this;for(var _len11=arguments.length,t=new Array(_len11),_key11=0;_key11<_len11;_key11++){t[_key11]=arguments[_key11];}if(!t.length||!Yn(t))throw new ui.a("observable-bind-wrong-properties",this);if(new Set(t).size!==t.length)throw new ui.a("observable-bind-duplicate-properties",this);Wn(this);var e=this[Fn];t.forEach(function(t){if(e.has(t))throw new ui.a("observable-bind-rebind",_this13);});var i=new Map();return t.forEach(function(t){var n={property:t,to:[]};e.set(t,n),i.set(t,n);}),{to:qn,toMany:$n,_observable:this,_bindProperties:t,_to:[],_bindings:i};},unbind:function unbind(){var _this14=this;if(!this[jn])return;var e=this[Fn],i=this[Bn];for(var _len12=arguments.length,t=new Array(_len12),_key12=0;_key12<_len12;_key12++){t[_key12]=arguments[_key12];}if(t.length){if(!Yn(t))throw new ui.a("observable-unbind-wrong-properties",this);t.forEach(function(t){var n=e.get(t);if(!n)return;var o,r,s,a;n.to.forEach(function(t){o=t[0],r=t[1],s=i.get(o),a=s[r],a["delete"](n),a.size||delete s[r],Object.keys(s).length||(i["delete"](o),_this14.stopListening(o,"change"));}),e["delete"](t);});}else i.forEach(function(t,e){_this14.stopListening(e,"change");}),i.clear(),e.clear();},decorate:function decorate(t){var _this15=this;var e=this[t];if(!e)throw new ui.a("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:t});this.on(t,function(t,i){t["return"]=e.apply(_this15,i);}),this[t]=function(){for(var _len13=arguments.length,e=new Array(_len13),_key13=0;_key13<_len13;_key13++){e[_key13]=arguments[_key13];}return this.fire(t,e);};}};Vn(Hn,mi);var Un=Hn;function Wn(t){t[jn]||(Object.defineProperty(t,jn,{value:new Map()}),Object.defineProperty(t,Bn,{value:new Map()}),Object.defineProperty(t,Fn,{value:new Map()}));}function qn(){var _this16=this;var e=function(){for(var _len14=arguments.length,t=new Array(_len14),_key14=0;_key14<_len14;_key14++){t[_key14]=arguments[_key14];}if(!t.length)throw new ui.a("observable-bind-to-parse-error",null);var e={to:[]};var i;"function"==typeof t[t.length-1]&&(e.callback=t.pop());return t.forEach(function(t){if("string"==typeof t)i.properties.push(t);else{if("object"!=_typeof(t))throw new ui.a("observable-bind-to-parse-error",null);i={observable:t,properties:[]},e.to.push(i);}}),e;}.apply(void 0,arguments),i=Array.from(this._bindings.keys()),n=i.length;if(!e.callback&&e.to.length>1)throw new ui.a("observable-bind-to-no-callback",this);if(n>1&&e.callback)throw new ui.a("observable-bind-to-extra-callback",this);var o;e.to.forEach(function(t){if(t.properties.length&&t.properties.length!==n)throw new ui.a("observable-bind-to-properties-length",_this16);t.properties.length||(t.properties=_this16._bindProperties);}),this._to=e.to,e.callback&&(this._bindings.get(i[0]).callback=e.callback),o=this._observable,this._to.forEach(function(t){var e=o[Bn];var i;e.get(t.observable)||o.listenTo(t.observable,"change",function(n,r){i=e.get(t.observable)[r],i&&i.forEach(function(t){Gn(o,t.property);});});}),function(t){var e;t._bindings.forEach(function(i,n){t._to.forEach(function(o){e=o.properties[i.callback?0:t._bindProperties.indexOf(n)],i.to.push([o.observable,e]),function(t,e,i,n){var o=t[Bn],r=o.get(i),s=r||{};s[n]||(s[n]=new Set());s[n].add(e),r||o.set(i,s);}(t._observable,i,o.observable,e);});});}(this),this._bindProperties.forEach(function(t){Gn(_this16._observable,t);});}function $n(t,e,i){if(this._bindings.size>1)throw new ui.a("observable-bind-to-many-not-one-binding",this);this.to.apply(this,_toConsumableArray(function(t,e){var i=t.map(function(t){return[t,e];});return Array.prototype.concat.apply([],i);}(t,e)).concat([i]));}function Yn(t){return t.every(function(t){return"string"==typeof t;});}function Gn(t,e){var i=t[Fn].get(e);var n;i.callback?n=i.callback.apply(t,i.to.map(function(t){return t[0][t[1]];})):(n=i.to[0],n=n[0][n[1]]),Object.prototype.hasOwnProperty.call(t,e)?t[e]=n:t.set(e,n);}var Kn=/*#__PURE__*/function(_Ln){_inherits(Kn,_Ln);var _super5=_createSuper(Kn);function Kn(t,e,i,n){var _this17;_classCallCheck(this,Kn);_this17=_super5.call(this,t,e,i,n),_this17.set("isReadOnly",!1),_this17.set("isFocused",!1),_this17.bind("isReadOnly").to(t),_this17.bind("isFocused").to(t,"isFocused",function(e){return e&&t.selection.editableElement==_assertThisInitialized(_this17);}),_this17.listenTo(t.selection,"change",function(){_this17.isFocused=t.isFocused&&t.selection.editableElement==_assertThisInitialized(_this17);});return _this17;}_createClass(Kn,[{key:"is",value:function is(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return e?e===this.name&&("editableElement"===t||"view:editableElement"===t||"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t):"editableElement"===t||"view:editableElement"===t||"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t;}},{key:"destroy",value:function destroy(){this.stopListening();}}]);return Kn;}(Ln);yi(Kn,Un);var Qn=Symbol("rootName");var Jn=/*#__PURE__*/function(_Kn){_inherits(Jn,_Kn);var _super6=_createSuper(Jn);function Jn(t,e){var _this18;_classCallCheck(this,Jn);_this18=_super6.call(this,t,e),_this18.rootName="main";return _this18;}_createClass(Jn,[{key:"is",value:function is(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return e?e===this.name&&("rootElement"===t||"view:rootElement"===t||"editableElement"===t||"view:editableElement"===t||"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t):"rootElement"===t||"view:rootElement"===t||"editableElement"===t||"view:editableElement"===t||"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t;}},{key:"rootName",get:function get(){return this.getCustomProperty(Qn);},set:function set(t){this._setCustomProperty(Qn,t);}},{key:"_name",set:function set(t){this.name=t;}}]);return Jn;}(Kn);var Zn=/*#__PURE__*/function(){function Zn(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,Zn);if(!t.boundaries&&!t.startPosition)throw new ui.a("view-tree-walker-no-start-position",null);if(t.direction&&"forward"!=t.direction&&"backward"!=t.direction)throw new ui.a("view-tree-walker-unknown-direction",t.startPosition,{direction:t.direction});this.boundaries=t.boundaries||null,t.startPosition?this.position=Xn._createAt(t.startPosition):this.position=Xn._createAt(t.boundaries["backward"==t.direction?"end":"start"]),this.direction=t.direction||"forward",this.singleCharacters=!!t.singleCharacters,this.shallow=!!t.shallow,this.ignoreElementEnd=!!t.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null;}_createClass(Zn,[{key:Symbol.iterator,value:function value(){return this;}},{key:"skip",value:function skip(t){var e,i,n;do{var _this$next;n=this.position,(_this$next=this.next(),e=_this$next.done,i=_this$next.value,_this$next);}while(!e&&t(i));e||(this.position=n);}},{key:"next",value:function next(){return"forward"==this.direction?this._next():this._previous();}},{key:"_next",value:function _next(){var t=this.position.clone();var e=this.position,i=t.parent;if(null===i.parent&&t.offset===i.childCount)return{done:!0};if(i===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0};var n;if(i instanceof Ri){if(t.isAtEnd)return this.position=Xn._createAfter(i),this._next();n=i.data[t.offset];}else n=i.getChild(t.offset);if(n instanceof Rn)return this.shallow?t.offset++:t=new Xn(n,0),this.position=t,this._formatReturnValue("elementStart",n,e,t,1);if(n instanceof Ri){if(this.singleCharacters)return t=new Xn(n,0),this.position=t,this._next();{var _i30,_o10=n.data.length;return n==this._boundaryEndParent?(_o10=this.boundaries.end.offset,_i30=new Di(n,0,_o10),t=Xn._createAfter(_i30)):(_i30=new Di(n,0,n.data.length),t.offset++),this.position=t,this._formatReturnValue("text",_i30,e,t,_o10);}}if("string"==typeof n){var _n13;if(this.singleCharacters)_n13=1;else{_n13=(i===this._boundaryEndParent?this.boundaries.end.offset:i.data.length)-t.offset;}var _o11=new Di(i,t.offset,_n13);return t.offset+=_n13,this.position=t,this._formatReturnValue("text",_o11,e,t,_n13);}return t=Xn._createAfter(i),this.position=t,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",i,e,t);}},{key:"_previous",value:function _previous(){var t=this.position.clone();var e=this.position,i=t.parent;if(null===i.parent&&0===t.offset)return{done:!0};if(i==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0};var n;if(i instanceof Ri){if(t.isAtStart)return this.position=Xn._createBefore(i),this._previous();n=i.data[t.offset-1];}else n=i.getChild(t.offset-1);if(n instanceof Rn)return this.shallow?(t.offset--,this.position=t,this._formatReturnValue("elementStart",n,e,t,1)):(t=new Xn(n,n.childCount),this.position=t,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",n,e,t));if(n instanceof Ri){if(this.singleCharacters)return t=new Xn(n,n.data.length),this.position=t,this._previous();{var _i31,_o12=n.data.length;if(n==this._boundaryStartParent){var _e33=this.boundaries.start.offset;_i31=new Di(n,_e33,n.data.length-_e33),_o12=_i31.data.length,t=Xn._createBefore(_i31);}else _i31=new Di(n,0,n.data.length),t.offset--;return this.position=t,this._formatReturnValue("text",_i31,e,t,_o12);}}if("string"==typeof n){var _n14;if(this.singleCharacters)_n14=1;else{var _e34=i===this._boundaryStartParent?this.boundaries.start.offset:0;_n14=t.offset-_e34;}t.offset-=_n14;var _o13=new Di(i,t.offset,_n14);return this.position=t,this._formatReturnValue("text",_o13,e,t,_n14);}return t=Xn._createBefore(i),this.position=t,this._formatReturnValue("elementStart",i,e,t,1);}},{key:"_formatReturnValue",value:function _formatReturnValue(t,e,i,n,o){return e instanceof Di&&(e.offsetInText+e.data.length==e.textNode.data.length&&("forward"!=this.direction||this.boundaries&&this.boundaries.end.isEqual(this.position)?i=Xn._createAfter(e.textNode):(n=Xn._createAfter(e.textNode),this.position=n)),0===e.offsetInText&&("backward"!=this.direction||this.boundaries&&this.boundaries.start.isEqual(this.position)?i=Xn._createBefore(e.textNode):(n=Xn._createBefore(e.textNode),this.position=n))),{done:!1,value:{type:t,item:e,previousPosition:i,nextPosition:n,length:o}};}}]);return Zn;}();var Xn=/*#__PURE__*/function(){function Xn(t,e){_classCallCheck(this,Xn);this.parent=t,this.offset=e;}_createClass(Xn,[{key:"nodeAfter",get:function get(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null;}},{key:"nodeBefore",get:function get(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null;}},{key:"isAtStart",get:function get(){return 0===this.offset;}},{key:"isAtEnd",get:function get(){var t=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===t;}},{key:"root",get:function get(){return this.parent.root;}},{key:"editableElement",get:function get(){var t=this.parent;for(;!(t instanceof Kn);){if(!t.parent)return null;t=t.parent;}return t;}},{key:"getShiftedBy",value:function getShiftedBy(t){var e=Xn._createAt(this),i=e.offset+t;return e.offset=i<0?0:i,e;}},{key:"getLastMatchingPosition",value:function getLastMatchingPosition(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};e.startPosition=this;var i=new Zn(e);return i.skip(t),i.position;}},{key:"getAncestors",value:function getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0});}},{key:"getCommonAncestor",value:function getCommonAncestor(t){var e=this.getAncestors(),i=t.getAncestors();var n=0;for(;e[n]==i[n]&&e[n];){n++;}return 0===n?null:e[n-1];}},{key:"is",value:function is(t){return"position"===t||"view:position"===t;}},{key:"isEqual",value:function isEqual(t){return this.parent==t.parent&&this.offset==t.offset;}},{key:"isBefore",value:function isBefore(t){return"before"==this.compareWith(t);}},{key:"isAfter",value:function isAfter(t){return"after"==this.compareWith(t);}},{key:"compareWith",value:function compareWith(t){if(this.root!==t.root)return"different";if(this.isEqual(t))return"same";var e=this.parent.is("node")?this.parent.getPath():[],i=t.parent.is("node")?t.parent.getPath():[];e.push(this.offset),i.push(t.offset);var n=Ii(e,i);switch(n){case"prefix":return"before";case"extension":return"after";default:return e[n]<i[n]?"before":"after";}}},{key:"getWalker",value:function getWalker(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return t.startPosition=this,new Zn(t);}},{key:"clone",value:function clone(){return new Xn(this.parent,this.offset);}}],[{key:"_createAt",value:function _createAt(t,e){if(t instanceof Xn)return new this(t.parent,t.offset);{var _i32=t;if("end"==e)e=_i32.is("$text")?_i32.data.length:_i32.childCount;else{if("before"==e)return this._createBefore(_i32);if("after"==e)return this._createAfter(_i32);if(0!==e&&!e)throw new ui.a("view-createpositionat-offset-required",_i32);}return new Xn(_i32,e);}}},{key:"_createAfter",value:function _createAfter(t){if(t.is("$textProxy"))return new Xn(t.textNode,t.offsetInText+t.data.length);if(!t.parent)throw new ui.a("view-position-after-root",t,{root:t});return new Xn(t.parent,t.index+1);}},{key:"_createBefore",value:function _createBefore(t){if(t.is("$textProxy"))return new Xn(t.textNode,t.offsetInText);if(!t.parent)throw new ui.a("view-position-before-root",t,{root:t});return new Xn(t.parent,t.index);}}]);return Xn;}();var to=/*#__PURE__*/function(){function to(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;_classCallCheck(this,to);this.start=t.clone(),this.end=e?e.clone():t.clone();}_createClass(to,[{key:Symbol.iterator,value:/*#__PURE__*/regeneratorRuntime.mark(function value(){return regeneratorRuntime.wrap(function value$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:return _context6.delegateYield(new Zn({boundaries:this,ignoreElementEnd:!0}),"t0",1);case 1:case"end":return _context6.stop();}}},value,this);})},{key:"isCollapsed",get:function get(){return this.start.isEqual(this.end);}},{key:"isFlat",get:function get(){return this.start.parent===this.end.parent;}},{key:"root",get:function get(){return this.start.root;}},{key:"getEnlarged",value:function getEnlarged(){var t=this.start.getLastMatchingPosition(eo,{direction:"backward"}),e=this.end.getLastMatchingPosition(eo);return t.parent.is("$text")&&t.isAtStart&&(t=Xn._createBefore(t.parent)),e.parent.is("$text")&&e.isAtEnd&&(e=Xn._createAfter(e.parent)),new to(t,e);}},{key:"getTrimmed",value:function getTrimmed(){var t=this.start.getLastMatchingPosition(eo);if(t.isAfter(this.end)||t.isEqual(this.end))return new to(t,t);var e=this.end.getLastMatchingPosition(eo,{direction:"backward"});var i=t.nodeAfter,n=e.nodeBefore;return i&&i.is("$text")&&(t=new Xn(i,0)),n&&n.is("$text")&&(e=new Xn(n,n.data.length)),new to(t,e);}},{key:"isEqual",value:function isEqual(t){return this==t||this.start.isEqual(t.start)&&this.end.isEqual(t.end);}},{key:"containsPosition",value:function containsPosition(t){return t.isAfter(this.start)&&t.isBefore(this.end);}},{key:"containsRange",value:function containsRange(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;t.isCollapsed&&(e=!1);var i=this.containsPosition(t.start)||e&&this.start.isEqual(t.start),n=this.containsPosition(t.end)||e&&this.end.isEqual(t.end);return i&&n;}},{key:"getDifference",value:function getDifference(t){var e=[];return this.isIntersecting(t)?(this.containsPosition(t.start)&&e.push(new to(this.start,t.start)),this.containsPosition(t.end)&&e.push(new to(t.end,this.end))):e.push(this.clone()),e;}},{key:"getIntersection",value:function getIntersection(t){if(this.isIntersecting(t)){var _e35=this.start,_i33=this.end;return this.containsPosition(t.start)&&(_e35=t.start),this.containsPosition(t.end)&&(_i33=t.end),new to(_e35,_i33);}return null;}},{key:"getWalker",value:function getWalker(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return t.boundaries=this,new Zn(t);}},{key:"getCommonAncestor",value:function getCommonAncestor(){return this.start.getCommonAncestor(this.end);}},{key:"getContainedElement",value:function getContainedElement(){if(this.isCollapsed)return null;var t=this.start.nodeAfter,e=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(t=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(e=this.end.parent.previousSibling),t&&t.is("element")&&t===e?t:null;}},{key:"clone",value:function clone(){return new to(this.start,this.end);}},{key:"getItems",value:/*#__PURE__*/regeneratorRuntime.mark(function getItems(){var t,e,_iterator33,_step33,_t30,_args7=arguments;return regeneratorRuntime.wrap(function getItems$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:t=_args7.length>0&&_args7[0]!==undefined?_args7[0]:{};t.boundaries=this,t.ignoreElementEnd=!0;e=new Zn(t);_iterator33=_createForOfIteratorHelper(e);_context7.prev=4;_iterator33.s();case 6:if((_step33=_iterator33.n()).done){_context7.next=12;break;}_t30=_step33.value;_context7.next=10;return _t30.item;case 10:_context7.next=6;break;case 12:_context7.next=17;break;case 14:_context7.prev=14;_context7.t0=_context7["catch"](4);_iterator33.e(_context7.t0);case 17:_context7.prev=17;_iterator33.f();return _context7.finish(17);case 20:case"end":return _context7.stop();}}},getItems,this,[[4,14,17,20]]);})},{key:"getPositions",value:/*#__PURE__*/regeneratorRuntime.mark(function getPositions(){var t,e,_iterator34,_step34,_t31,_args8=arguments;return regeneratorRuntime.wrap(function getPositions$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:t=_args8.length>0&&_args8[0]!==undefined?_args8[0]:{};t.boundaries=this;e=new Zn(t);_context8.next=5;return e.position;case 5:_iterator34=_createForOfIteratorHelper(e);_context8.prev=6;_iterator34.s();case 8:if((_step34=_iterator34.n()).done){_context8.next=14;break;}_t31=_step34.value;_context8.next=12;return _t31.nextPosition;case 12:_context8.next=8;break;case 14:_context8.next=19;break;case 16:_context8.prev=16;_context8.t0=_context8["catch"](6);_iterator34.e(_context8.t0);case 19:_context8.prev=19;_iterator34.f();return _context8.finish(19);case 22:case"end":return _context8.stop();}}},getPositions,this,[[6,16,19,22]]);})},{key:"is",value:function is(t){return"range"===t||"view:range"===t;}},{key:"isIntersecting",value:function isIntersecting(t){return this.start.isBefore(t.end)&&this.end.isAfter(t.start);}}],[{key:"_createFromParentsAndOffsets",value:function _createFromParentsAndOffsets(t,e,i,n){return new this(new Xn(t,e),new Xn(i,n));}},{key:"_createFromPositionAndShift",value:function _createFromPositionAndShift(t,e){var i=t,n=t.getShiftedBy(e);return e>0?new this(i,n):new this(n,i);}},{key:"_createIn",value:function _createIn(t){return this._createFromParentsAndOffsets(t,0,t,t.childCount);}},{key:"_createOn",value:function _createOn(t){var e=t.is("$textProxy")?t.offsetSize:1;return this._createFromPositionAndShift(Xn._createBefore(t),e);}}]);return to;}();function eo(t){return!(!t.item.is("attributeElement")&&!t.item.is("uiElement"));}function io(t){var e=0;var _iterator35=_createForOfIteratorHelper(t),_step35;try{for(_iterator35.s();!(_step35=_iterator35.n()).done;){var _i34=_step35.value;e++;}}catch(err){_iterator35.e(err);}finally{_iterator35.f();}return e;}var no=/*#__PURE__*/function(){function no(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var e=arguments.length>1?arguments[1]:undefined;var i=arguments.length>2?arguments[2]:undefined;_classCallCheck(this,no);this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",this.setTo(t,e,i);}_createClass(no,[{key:"isFake",get:function get(){return this._isFake;}},{key:"fakeSelectionLabel",get:function get(){return this._fakeSelectionLabel;}},{key:"anchor",get:function get(){if(!this._ranges.length)return null;var t=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?t.end:t.start).clone();}},{key:"focus",get:function get(){if(!this._ranges.length)return null;var t=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?t.start:t.end).clone();}},{key:"isCollapsed",get:function get(){return 1===this.rangeCount&&this._ranges[0].isCollapsed;}},{key:"rangeCount",get:function get(){return this._ranges.length;}},{key:"isBackward",get:function get(){return!this.isCollapsed&&this._lastRangeBackward;}},{key:"editableElement",get:function get(){return this.anchor?this.anchor.editableElement:null;}},{key:"getRanges",value:/*#__PURE__*/regeneratorRuntime.mark(function getRanges(){var _iterator36,_step36,_t32;return regeneratorRuntime.wrap(function getRanges$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_iterator36=_createForOfIteratorHelper(this._ranges);_context9.prev=1;_iterator36.s();case 3:if((_step36=_iterator36.n()).done){_context9.next=9;break;}_t32=_step36.value;_context9.next=7;return _t32.clone();case 7:_context9.next=3;break;case 9:_context9.next=14;break;case 11:_context9.prev=11;_context9.t0=_context9["catch"](1);_iterator36.e(_context9.t0);case 14:_context9.prev=14;_iterator36.f();return _context9.finish(14);case 17:case"end":return _context9.stop();}}},getRanges,this,[[1,11,14,17]]);})},{key:"getFirstRange",value:function getFirstRange(){var t=null;var _iterator37=_createForOfIteratorHelper(this._ranges),_step37;try{for(_iterator37.s();!(_step37=_iterator37.n()).done;){var _e36=_step37.value;t&&!_e36.start.isBefore(t.start)||(t=_e36);}}catch(err){_iterator37.e(err);}finally{_iterator37.f();}return t?t.clone():null;}},{key:"getLastRange",value:function getLastRange(){var t=null;var _iterator38=_createForOfIteratorHelper(this._ranges),_step38;try{for(_iterator38.s();!(_step38=_iterator38.n()).done;){var _e37=_step38.value;t&&!_e37.end.isAfter(t.end)||(t=_e37);}}catch(err){_iterator38.e(err);}finally{_iterator38.f();}return t?t.clone():null;}},{key:"getFirstPosition",value:function getFirstPosition(){var t=this.getFirstRange();return t?t.start.clone():null;}},{key:"getLastPosition",value:function getLastPosition(){var t=this.getLastRange();return t?t.end.clone():null;}},{key:"isEqual",value:function isEqual(t){if(this.isFake!=t.isFake)return!1;if(this.isFake&&this.fakeSelectionLabel!=t.fakeSelectionLabel)return!1;if(this.rangeCount!=t.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(t.anchor)||!this.focus.isEqual(t.focus))return!1;var _iterator39=_createForOfIteratorHelper(this._ranges),_step39;try{for(_iterator39.s();!(_step39=_iterator39.n()).done;){var _e38=_step39.value;var _i35=!1;var _iterator40=_createForOfIteratorHelper(t._ranges),_step40;try{for(_iterator40.s();!(_step40=_iterator40.n()).done;){var _n15=_step40.value;if(_e38.isEqual(_n15)){_i35=!0;break;}}}catch(err){_iterator40.e(err);}finally{_iterator40.f();}if(!_i35)return!1;}}catch(err){_iterator39.e(err);}finally{_iterator39.f();}return!0;}},{key:"isSimilar",value:function isSimilar(t){if(this.isBackward!=t.isBackward)return!1;var e=io(this.getRanges());if(e!=io(t.getRanges()))return!1;if(0==e)return!0;var _iterator41=_createForOfIteratorHelper(this.getRanges()),_step41;try{for(_iterator41.s();!(_step41=_iterator41.n()).done;){var _e39=_step41.value;_e39=_e39.getTrimmed();var _i36=!1;var _iterator42=_createForOfIteratorHelper(t.getRanges()),_step42;try{for(_iterator42.s();!(_step42=_iterator42.n()).done;){var _n16=_step42.value;if(_n16=_n16.getTrimmed(),_e39.start.isEqual(_n16.start)&&_e39.end.isEqual(_n16.end)){_i36=!0;break;}}}catch(err){_iterator42.e(err);}finally{_iterator42.f();}if(!_i36)return!1;}}catch(err){_iterator41.e(err);}finally{_iterator41.f();}return!0;}},{key:"getSelectedElement",value:function getSelectedElement(){return 1!==this.rangeCount?null:this.getFirstRange().getContainedElement();}},{key:"setTo",value:function setTo(t,e,i){if(null===t)this._setRanges([]),this._setFakeOptions(e);else if(t instanceof no||t instanceof oo)this._setRanges(t.getRanges(),t.isBackward),this._setFakeOptions({fake:t.isFake,label:t.fakeSelectionLabel});else if(t instanceof to)this._setRanges([t],e&&e.backward),this._setFakeOptions(e);else if(t instanceof Xn)this._setRanges([new to(t)]),this._setFakeOptions(e);else if(t instanceof Oi){var _n17=!!i&&!!i.backward;var _o14;if(void 0===e)throw new ui.a("view-selection-setto-required-second-parameter",this);_o14="in"==e?to._createIn(t):"on"==e?to._createOn(t):new to(Xn._createAt(t,e)),this._setRanges([_o14],_n17),this._setFakeOptions(i);}else{if(!vi(t))throw new ui.a("view-selection-setto-not-selectable",this);this._setRanges(t,e&&e.backward),this._setFakeOptions(e);}this.fire("change");}},{key:"setFocus",value:function setFocus(t,e){if(null===this.anchor)throw new ui.a("view-selection-setfocus-no-ranges",this);var i=Xn._createAt(t,e);if("same"==i.compareWith(this.focus))return;var n=this.anchor;this._ranges.pop(),"before"==i.compareWith(n)?this._addRange(new to(i,n),!0):this._addRange(new to(n,i)),this.fire("change");}},{key:"is",value:function is(t){return"selection"===t||"view:selection"===t;}},{key:"_setRanges",value:function _setRanges(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;t=Array.from(t),this._ranges=[];var _iterator43=_createForOfIteratorHelper(t),_step43;try{for(_iterator43.s();!(_step43=_iterator43.n()).done;){var _e40=_step43.value;this._addRange(_e40);}}catch(err){_iterator43.e(err);}finally{_iterator43.f();}this._lastRangeBackward=!!e;}},{key:"_setFakeOptions",value:function _setFakeOptions(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};this._isFake=!!t.fake,this._fakeSelectionLabel=t.fake&&t.label||"";}},{key:"_addRange",value:function _addRange(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;if(!(t instanceof to))throw new ui.a("view-selection-add-range-not-range",this);this._pushRange(t),this._lastRangeBackward=!!e;}},{key:"_pushRange",value:function _pushRange(t){var _iterator44=_createForOfIteratorHelper(this._ranges),_step44;try{for(_iterator44.s();!(_step44=_iterator44.n()).done;){var _e41=_step44.value;if(t.isIntersecting(_e41))throw new ui.a("view-selection-range-intersects",this,{addedRange:t,intersectingRange:_e41});}}catch(err){_iterator44.e(err);}finally{_iterator44.f();}this._ranges.push(new to(t.start,t.end));}}]);return no;}();yi(no,mi);var oo=/*#__PURE__*/function(){function oo(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var e=arguments.length>1?arguments[1]:undefined;var i=arguments.length>2?arguments[2]:undefined;_classCallCheck(this,oo);this._selection=new no(),this._selection.delegate("change").to(this),this._selection.setTo(t,e,i);}_createClass(oo,[{key:"isFake",get:function get(){return this._selection.isFake;}},{key:"fakeSelectionLabel",get:function get(){return this._selection.fakeSelectionLabel;}},{key:"anchor",get:function get(){return this._selection.anchor;}},{key:"focus",get:function get(){return this._selection.focus;}},{key:"isCollapsed",get:function get(){return this._selection.isCollapsed;}},{key:"rangeCount",get:function get(){return this._selection.rangeCount;}},{key:"isBackward",get:function get(){return this._selection.isBackward;}},{key:"editableElement",get:function get(){return this._selection.editableElement;}},{key:"_ranges",get:function get(){return this._selection._ranges;}},{key:"getRanges",value:/*#__PURE__*/regeneratorRuntime.mark(function getRanges(){return regeneratorRuntime.wrap(function getRanges$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:return _context10.delegateYield(this._selection.getRanges(),"t0",1);case 1:case"end":return _context10.stop();}}},getRanges,this);})},{key:"getFirstRange",value:function getFirstRange(){return this._selection.getFirstRange();}},{key:"getLastRange",value:function getLastRange(){return this._selection.getLastRange();}},{key:"getFirstPosition",value:function getFirstPosition(){return this._selection.getFirstPosition();}},{key:"getLastPosition",value:function getLastPosition(){return this._selection.getLastPosition();}},{key:"getSelectedElement",value:function getSelectedElement(){return this._selection.getSelectedElement();}},{key:"isEqual",value:function isEqual(t){return this._selection.isEqual(t);}},{key:"isSimilar",value:function isSimilar(t){return this._selection.isSimilar(t);}},{key:"is",value:function is(t){return"selection"===t||"documentSelection"==t||"view:selection"==t||"view:documentSelection"==t;}},{key:"_setTo",value:function _setTo(t,e,i){this._selection.setTo(t,e,i);}},{key:"_setFocus",value:function _setFocus(t,e){this._selection.setFocus(t,e);}}]);return oo;}();yi(oo,mi);var ro=/*#__PURE__*/function(){function ro(t){_classCallCheck(this,ro);this.selection=new oo(),this.roots=new xi({idProperty:"rootName"}),this.stylesProcessor=t,this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isComposing",!1),this._postFixers=new Set();}_createClass(ro,[{key:"getRoot",value:function getRoot(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"main";return this.roots.get(t);}},{key:"registerPostFixer",value:function registerPostFixer(t){this._postFixers.add(t);}},{key:"destroy",value:function destroy(){this.roots.map(function(t){return t.destroy();}),this.stopListening();}},{key:"_callPostFixers",value:function _callPostFixers(t){var e=!1;do{var _iterator45=_createForOfIteratorHelper(this._postFixers),_step45;try{for(_iterator45.s();!(_step45=_iterator45.n()).done;){var _i37=_step45.value;if(e=_i37(t),e)break;}}catch(err){_iterator45.e(err);}finally{_iterator45.f();}}while(e);}}]);return ro;}();yi(ro,Un);var so=/*#__PURE__*/function(_Rn2){_inherits(so,_Rn2);var _super7=_createSuper(so);function so(t,e,i,n){var _this19;_classCallCheck(this,so);_this19=_super7.call(this,t,e,i,n),_this19.getFillerOffset=ao,_this19._priority=10,_this19._id=null,_this19._clonesGroup=null;return _this19;}_createClass(so,[{key:"priority",get:function get(){return this._priority;}},{key:"id",get:function get(){return this._id;}},{key:"getElementsWithSameId",value:function getElementsWithSameId(){if(null===this.id)throw new ui.a("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup);}},{key:"is",value:function is(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return e?e===this.name&&("attributeElement"===t||"view:attributeElement"===t||"element"===t||"view:element"===t):"attributeElement"===t||"view:attributeElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t;}},{key:"isSimilar",value:function isSimilar(t){return null!==this.id||null!==t.id?this.id===t.id:_get(_getPrototypeOf(so.prototype),"isSimilar",this).call(this,t)&&this.priority==t.priority;}},{key:"_clone",value:function _clone(t){var e=_get(_getPrototypeOf(so.prototype),"_clone",this).call(this,t);return e._priority=this._priority,e._id=this._id,e;}}]);return so;}(Rn);function ao(){if(co(this))return null;var t=this.parent;for(;t&&t.is("attributeElement");){if(co(t)>1)return null;t=t.parent;}return!t||co(t)>1?null:this.childCount;}function co(t){return Array.from(t.getChildren()).filter(function(t){return!t.is("uiElement");}).length;}so.DEFAULT_PRIORITY=10;var lo=/*#__PURE__*/function(_Rn3){_inherits(lo,_Rn3);var _super8=_createSuper(lo);function lo(t,e,i,n){var _this20;_classCallCheck(this,lo);_this20=_super8.call(this,t,e,i,n),_this20._isAllowedInsideAttributeElement=!0,_this20.getFillerOffset=uo;return _this20;}_createClass(lo,[{key:"is",value:function is(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return e?e===this.name&&("emptyElement"===t||"view:emptyElement"===t||"element"===t||"view:element"===t):"emptyElement"===t||"view:emptyElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t;}},{key:"_insertChild",value:function _insertChild(t,e){if(e&&(e instanceof Oi||Array.from(e).length>0))throw new ui.a("view-emptyelement-cannot-add",[this,e]);}}]);return lo;}(Rn);function uo(){return null;}var ho=navigator.userAgent.toLowerCase();var fo={isMac:function(t){return t.indexOf("macintosh")>-1;}(ho),isGecko:function(t){return!!t.match(/gecko\/\d+/);}(ho),isSafari:function(t){return t.indexOf(" applewebkit/")>-1&&-1===t.indexOf("chrome");}(ho),isAndroid:function(t){return t.indexOf("android")>-1;}(ho),isBlink:function(t){return t.indexOf("chrome/")>-1&&t.indexOf("edge/")<0;}(ho),features:{isRegExpUnicodePropertySupported:function(){var t=!1;try{t=0==="ć".search(new RegExp("[\\p{L}]","u"));}catch(t){}return t;}()}};var mo={ctrl:"⌃",cmd:"⌘",alt:"⌥",shift:"⇧"},go={ctrl:"Ctrl+",alt:"Alt+",shift:"Shift+"},po=function(){var t={arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,"delete":46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(var _e42=65;_e42<=90;_e42++){var _i38=String.fromCharCode(_e42);t[_i38.toLowerCase()]=_e42;}for(var _e43=48;_e43<=57;_e43++){t[_e43-48]=_e43;}for(var _e44=112;_e44<=123;_e44++){t["f"+(_e44-111)]=_e44;}return t;}(),bo=Object.fromEntries(Object.entries(po).map(function(_ref7){var _ref8=_slicedToArray(_ref7,2),t=_ref8[0],e=_ref8[1];return[e,t.charAt(0).toUpperCase()+t.slice(1)];}));function wo(t){var e;if("string"==typeof t){if(e=po[t.toLowerCase()],!e)throw new ui.a("keyboard-unknown-key",null,{key:t});}else e=t.keyCode+(t.altKey?po.alt:0)+(t.ctrlKey?po.ctrl:0)+(t.shiftKey?po.shift:0)+(t.metaKey?po.cmd:0);return e;}function ko(t){return"string"==typeof t&&(t=function(t){return t.split(/\s*\+\s*/);}(t)),t.map(function(t){return"string"==typeof t?function(t){if(t.endsWith("!"))return wo(t.slice(0,-1));var e=wo(t);return fo.isMac&&e==po.ctrl?po.cmd:e;}(t):t;}).reduce(function(t,e){return e+t;},0);}function _o(t){var e=ko(t);return Object.entries(fo.isMac?mo:go).reduce(function(t,_ref9){var _ref10=_slicedToArray(_ref9,2),i=_ref10[0],n=_ref10[1];return 0!=(e&po[i])&&(e&=~po[i],t+=n),t;},"")+(e?bo[e]:"");}function vo(t){return t==po.arrowright||t==po.arrowleft||t==po.arrowup||t==po.arrowdown;}function yo(t,e){var i="ltr"===e;switch(t){case po.arrowleft:return i?"left":"right";case po.arrowright:return i?"right":"left";case po.arrowup:return"up";case po.arrowdown:return"down";}}function xo(t,e){var i=yo(t,e);return"down"===i||"right"===i;}var Ao=/*#__PURE__*/function(_Rn4){_inherits(Ao,_Rn4);var _super9=_createSuper(Ao);function Ao(t,e,i,n){var _this21;_classCallCheck(this,Ao);_this21=_super9.call(this,t,e,i,n),_this21.getFillerOffset=Co;return _this21;}_createClass(Ao,[{key:"is",value:function is(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return e?e===this.name&&("uiElement"===t||"view:uiElement"===t||"element"===t||"view:element"===t):"uiElement"===t||"view:uiElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t;}},{key:"_insertChild",value:function _insertChild(t,e){if(e&&(e instanceof Oi||Array.from(e).length>0))throw new ui.a("view-uielement-cannot-add",this);}},{key:"render",value:function render(t){return this.toDomElement(t);}},{key:"toDomElement",value:function toDomElement(t){var e=t.createElement(this.name);var _iterator46=_createForOfIteratorHelper(this.getAttributeKeys()),_step46;try{for(_iterator46.s();!(_step46=_iterator46.n()).done;){var _t33=_step46.value;e.setAttribute(_t33,this.getAttribute(_t33));}}catch(err){_iterator46.e(err);}finally{_iterator46.f();}return e;}}]);return Ao;}(Rn);function To(t){t.document.on("keydown",function(e,i){return function(t,e,i){if(e.keyCode==po.arrowright){var _t34=e.domTarget;for(;11!==_t34.nodeType;){_t34=_t34.parentNode;}var _n18=_t34.getSelection(),_o15=1==_n18.rangeCount&&_n18.getRangeAt(0).collapsed;if(_o15||e.shiftKey){var _t35=_n18.focusNode,_e45=_n18.focusOffset,_r5=i.domPositionToView(_t35,_e45);if(null===_r5)return;var _s3=!1;var _a3=_r5.getLastMatchingPosition(function(t){return t.item.is("uiElement")&&(_s3=!0),!(!t.item.is("uiElement")&&!t.item.is("attributeElement"));});if(_s3){var _t36=i.viewPositionToDom(_a3);_o15?_n18.collapse(_t36.parent,_t36.offset):_n18.extend(_t36.parent,_t36.offset);}}}}(0,i,t.domConverter);});}function Co(){return null;}var So=/*#__PURE__*/function(_Rn5){_inherits(So,_Rn5);var _super10=_createSuper(So);function So(t,e,i,n){var _this22;_classCallCheck(this,So);_this22=_super10.call(this,t,e,i,n),_this22._isAllowedInsideAttributeElement=!0,_this22.getFillerOffset=Eo;return _this22;}_createClass(So,[{key:"is",value:function is(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return e?e===this.name&&("rawElement"===t||"view:rawElement"===t||"element"===t||"view:element"===t):"rawElement"===t||"view:rawElement"===t||t===this.name||t==="view:"+this.name||"element"===t||"view:element"===t||"node"===t||"view:node"===t;}},{key:"_insertChild",value:function _insertChild(t,e){if(e&&(e instanceof Oi||Array.from(e).length>0))throw new ui.a("view-rawelement-cannot-add",[this,e]);}}]);return So;}(Rn);function Eo(){return null;}var Po=/*#__PURE__*/function(){function Po(t,e){_classCallCheck(this,Po);this.document=t,this._children=[],e&&this._insertChild(0,e);}_createClass(Po,[{key:Symbol.iterator,value:function value(){return this._children[Symbol.iterator]();}},{key:"childCount",get:function get(){return this._children.length;}},{key:"isEmpty",get:function get(){return 0===this.childCount;}},{key:"root",get:function get(){return this;}},{key:"parent",get:function get(){return null;}},{key:"is",value:function is(t){return"documentFragment"===t||"view:documentFragment"===t;}},{key:"_appendChild",value:function _appendChild(t){return this._insertChild(this.childCount,t);}},{key:"getChild",value:function getChild(t){return this._children[t];}},{key:"getChildIndex",value:function getChildIndex(t){return this._children.indexOf(t);}},{key:"getChildren",value:function getChildren(){return this._children[Symbol.iterator]();}},{key:"_insertChild",value:function _insertChild(t,e){this._fireChange("children",this);var i=0;var n=function(t,e){if("string"==typeof e)return[new Ri(t,e)];vi(e)||(e=[e]);return Array.from(e).map(function(e){return"string"==typeof e?new Ri(t,e):e instanceof Di?new Ri(t,e.data):e;});}(this.document,e);var _iterator47=_createForOfIteratorHelper(n),_step47;try{for(_iterator47.s();!(_step47=_iterator47.n()).done;){var _e46=_step47.value;null!==_e46.parent&&_e46._remove(),_e46.parent=this,this._children.splice(t,0,_e46),t++,i++;}}catch(err){_iterator47.e(err);}finally{_iterator47.f();}return i;}},{key:"_removeChildren",value:function _removeChildren(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;this._fireChange("children",this);for(var _i39=t;_i39<t+e;_i39++){this._children[_i39].parent=null;}return this._children.splice(t,e);}},{key:"_fireChange",value:function _fireChange(t,e){this.fire("change:"+t,e);}}]);return Po;}();yi(Po,mi);var Mo=/*#__PURE__*/function(){function Mo(t){_classCallCheck(this,Mo);this.document=t,this._cloneGroups=new Map();}_createClass(Mo,[{key:"setSelection",value:function setSelection(t,e,i){this.document.selection._setTo(t,e,i);}},{key:"setSelectionFocus",value:function setSelectionFocus(t,e){this.document.selection._setFocus(t,e);}},{key:"createDocumentFragment",value:function createDocumentFragment(t){return new Po(this.document,t);}},{key:"createText",value:function createText(t){return new Ri(this.document,t);}},{key:"createAttributeElement",value:function createAttributeElement(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var n=new so(this.document,t,e);return i.priority&&(n._priority=i.priority),i.id&&(n._id=i.id),n;}},{key:"createContainerElement",value:function createContainerElement(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var n=new Ln(this.document,t,e);return void 0!==i.isAllowedInsideAttributeElement&&(n._isAllowedInsideAttributeElement=i.isAllowedInsideAttributeElement),n;}},{key:"createEditableElement",value:function createEditableElement(t,e){var i=new Kn(this.document,t,e);return i._document=this.document,i;}},{key:"createEmptyElement",value:function createEmptyElement(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var n=new lo(this.document,t,e);return void 0!==i.isAllowedInsideAttributeElement&&(n._isAllowedInsideAttributeElement=i.isAllowedInsideAttributeElement),n;}},{key:"createUIElement",value:function createUIElement(t,e,i){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var o=new Ao(this.document,t,e);return i&&(o.render=i),void 0!==n.isAllowedInsideAttributeElement&&(o._isAllowedInsideAttributeElement=n.isAllowedInsideAttributeElement),o;}},{key:"createRawElement",value:function createRawElement(t,e,i){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var o=new So(this.document,t,e);return o.render=i||function(){},void 0!==n.isAllowedInsideAttributeElement&&(o._isAllowedInsideAttributeElement=n.isAllowedInsideAttributeElement),o;}},{key:"setAttribute",value:function setAttribute(t,e,i){i._setAttribute(t,e);}},{key:"removeAttribute",value:function removeAttribute(t,e){e._removeAttribute(t);}},{key:"addClass",value:function addClass(t,e){e._addClass(t);}},{key:"removeClass",value:function removeClass(t,e){e._removeClass(t);}},{key:"setStyle",value:function setStyle(t,e,i){y(t)&&void 0===i&&(i=e),i._setStyle(t,e);}},{key:"removeStyle",value:function removeStyle(t,e){e._removeStyle(t);}},{key:"setCustomProperty",value:function setCustomProperty(t,e,i){i._setCustomProperty(t,e);}},{key:"removeCustomProperty",value:function removeCustomProperty(t,e){return e._removeCustomProperty(t);}},{key:"breakAttributes",value:function breakAttributes(t){return t instanceof Xn?this._breakAttributes(t):this._breakAttributesRange(t);}},{key:"breakContainer",value:function breakContainer(t){var e=t.parent;if(!e.is("containerElement"))throw new ui.a("view-writer-break-non-container-element",this.document);if(!e.parent)throw new ui.a("view-writer-break-root",this.document);if(t.isAtStart)return Xn._createBefore(e);if(!t.isAtEnd){var _i40=e._clone(!1);this.insert(Xn._createAfter(e),_i40);var _n19=new to(t,Xn._createAt(e,"end")),_o16=new Xn(_i40,0);this.move(_n19,_o16);}return Xn._createAfter(e);}},{key:"mergeAttributes",value:function mergeAttributes(t){var e=t.offset,i=t.parent;if(i.is("$text"))return t;if(i.is("attributeElement")&&0===i.childCount){var _t37=i.parent,_e47=i.index;return i._remove(),this._removeFromClonedElementsGroup(i),this.mergeAttributes(new Xn(_t37,_e47));}var n=i.getChild(e-1),o=i.getChild(e);if(!n||!o)return t;if(n.is("$text")&&o.is("$text"))return Do(n,o);if(n.is("attributeElement")&&o.is("attributeElement")&&n.isSimilar(o)){var _t38=n.childCount;return n._appendChild(o.getChildren()),o._remove(),this._removeFromClonedElementsGroup(o),this.mergeAttributes(new Xn(n,_t38));}return t;}},{key:"mergeContainers",value:function mergeContainers(t){var e=t.nodeBefore,i=t.nodeAfter;if(!(e&&i&&e.is("containerElement")&&i.is("containerElement")))throw new ui.a("view-writer-merge-containers-invalid-position",this.document);var n=e.getChild(e.childCount-1),o=n instanceof Ri?Xn._createAt(n,"end"):Xn._createAt(e,"end");return this.move(to._createIn(i),Xn._createAt(e,"end")),this.remove(to._createOn(i)),o;}},{key:"insert",value:function insert(t,e){(function t(e,i){var _iterator48=_createForOfIteratorHelper(e),_step48;try{var _loop=function _loop(){var n=_step48.value;if(!Lo.some(function(t){return n instanceof t;}))throw new ui.a("view-writer-insert-invalid-node-type",i);n.is("$text")||t(n.getChildren(),i);};for(_iterator48.s();!(_step48=_iterator48.n()).done;){_loop();}}catch(err){_iterator48.e(err);}finally{_iterator48.f();}})(e=vi(e)?_toConsumableArray(e):[e],this.document);var i=e.reduce(function(t,e){var i=t[t.length-1],n=!(e.is("uiElement")&&e.isAllowedInsideAttributeElement);return i&&i.breakAttributes==n?i.nodes.push(e):t.push({breakAttributes:n,nodes:[e]}),t;},[]);var n=null,o=t;var _iterator49=_createForOfIteratorHelper(i),_step49;try{for(_iterator49.s();!(_step49=_iterator49.n()).done;){var _step49$value=_step49.value,_t39=_step49$value.nodes,_e48=_step49$value.breakAttributes;var _i41=this._insertNodes(o,_t39,_e48);n||(n=_i41.start),o=_i41.end;}}catch(err){_iterator49.e(err);}finally{_iterator49.f();}return n?new to(n,o):new to(t);}},{key:"remove",value:function remove(t){var e=t instanceof to?t:to._createOn(t);if(Vo(e,this.document),e.isCollapsed)return new Po(this.document);var _this$_breakAttribute=this._breakAttributesRange(e,!0),i=_this$_breakAttribute.start,n=_this$_breakAttribute.end,o=i.parent,r=n.offset-i.offset,s=o._removeChildren(i.offset,r);var _iterator50=_createForOfIteratorHelper(s),_step50;try{for(_iterator50.s();!(_step50=_iterator50.n()).done;){var _t40=_step50.value;this._removeFromClonedElementsGroup(_t40);}}catch(err){_iterator50.e(err);}finally{_iterator50.f();}var a=this.mergeAttributes(i);return e.start=a,e.end=a.clone(),new Po(this.document,s);}},{key:"clear",value:function clear(t,e){Vo(t,this.document);var i=t.getWalker({direction:"backward",ignoreElementEnd:!0});var _iterator51=_createForOfIteratorHelper(i),_step51;try{for(_iterator51.s();!(_step51=_iterator51.n()).done;){var _n20=_step51.value;var _i42=_n20.item;var _o17=void 0;if(_i42.is("element")&&e.isSimilar(_i42))_o17=to._createOn(_i42);else if(!_n20.nextPosition.isAfter(t.start)&&_i42.is("$textProxy")){var _t41=_i42.getAncestors().find(function(t){return t.is("element")&&e.isSimilar(t);});_t41&&(_o17=to._createIn(_t41));}_o17&&(_o17.end.isAfter(t.end)&&(_o17.end=t.end),_o17.start.isBefore(t.start)&&(_o17.start=t.start),this.remove(_o17));}}catch(err){_iterator51.e(err);}finally{_iterator51.f();}}},{key:"move",value:function move(t,e){var i;if(e.isAfter(t.end)){var _n21=(e=this._breakAttributes(e,!0)).parent,_o18=_n21.childCount;t=this._breakAttributesRange(t,!0),i=this.remove(t),e.offset+=_n21.childCount-_o18;}else i=this.remove(t);return this.insert(e,i);}},{key:"wrap",value:function wrap(t,e){if(!(e instanceof so))throw new ui.a("view-writer-wrap-invalid-attribute",this.document);if(Vo(t,this.document),t.isCollapsed){var _n22=t.start;_n22.parent.is("element")&&(i=_n22.parent,!Array.from(i.getChildren()).some(function(t){return!t.is("uiElement");}))&&(_n22=_n22.getLastMatchingPosition(function(t){return t.item.is("uiElement");})),_n22=this._wrapPosition(_n22,e);var _o19=this.document.selection;return _o19.isCollapsed&&_o19.getFirstPosition().isEqual(t.start)&&this.setSelection(_n22),new to(_n22);}return this._wrapRange(t,e);var i;}},{key:"unwrap",value:function unwrap(t,e){if(!(e instanceof so))throw new ui.a("view-writer-unwrap-invalid-attribute",this.document);if(Vo(t,this.document),t.isCollapsed)return t;var _this$_breakAttribute2=this._breakAttributesRange(t,!0),i=_this$_breakAttribute2.start,n=_this$_breakAttribute2.end,o=i.parent,r=this._unwrapChildren(o,i.offset,n.offset,e),s=this.mergeAttributes(r.start);s.isEqual(r.start)||r.end.offset--;var a=this.mergeAttributes(r.end);return new to(s,a);}},{key:"rename",value:function rename(t,e){var i=new Ln(this.document,t,e.getAttributes());return this.insert(Xn._createAfter(e),i),this.move(to._createIn(e),Xn._createAt(i,0)),this.remove(to._createOn(e)),i;}},{key:"clearClonedElementsGroup",value:function clearClonedElementsGroup(t){this._cloneGroups["delete"](t);}},{key:"createPositionAt",value:function createPositionAt(t,e){return Xn._createAt(t,e);}},{key:"createPositionAfter",value:function createPositionAfter(t){return Xn._createAfter(t);}},{key:"createPositionBefore",value:function createPositionBefore(t){return Xn._createBefore(t);}},{key:"createRange",value:function createRange(t,e){return new to(t,e);}},{key:"createRangeOn",value:function createRangeOn(t){return to._createOn(t);}},{key:"createRangeIn",value:function createRangeIn(t){return to._createIn(t);}},{key:"createSelection",value:function createSelection(t,e,i){return new no(t,e,i);}},{key:"_insertNodes",value:function _insertNodes(t,e,i){var n,o;if(n=i?Io(t):t.parent.is("$text")?t.parent.parent:t.parent,!n)throw new ui.a("view-writer-invalid-position-container",this.document);o=i?this._breakAttributes(t,!0):t.parent.is("$text")?Ro(t):t;var r=n._insertChild(o.offset,e);var _iterator52=_createForOfIteratorHelper(e),_step52;try{for(_iterator52.s();!(_step52=_iterator52.n()).done;){var _t42=_step52.value;this._addToClonedElementsGroup(_t42);}}catch(err){_iterator52.e(err);}finally{_iterator52.f();}var s=o.getShiftedBy(r),a=this.mergeAttributes(o);a.isEqual(o)||s.offset--;var c=this.mergeAttributes(s);return new to(a,c);}},{key:"_wrapChildren",value:function _wrapChildren(t,e,i,n){var o=e;var r=[];for(;o<i;){var _e49=t.getChild(o),_i43=_e49.is("$text"),_s4=_e49.is("attributeElement"),_a4=_e49.isAllowedInsideAttributeElement;if(_s4&&this._wrapAttributeElement(n,_e49))r.push(new Xn(t,o));else if(_i43||_a4||_s4&&No(n,_e49)){var _i44=n._clone();_e49._remove(),_i44._appendChild(_e49),t._insertChild(o,_i44),this._addToClonedElementsGroup(_i44),r.push(new Xn(t,o));}else _s4&&this._wrapChildren(_e49,0,_e49.childCount,n);o++;}var s=0;for(var _i45=0,_r6=r;_i45<_r6.length;_i45++){var _t43=_r6[_i45];if(_t43.offset-=s,_t43.offset==e)continue;this.mergeAttributes(_t43).isEqual(_t43)||(s++,i--);}return to._createFromParentsAndOffsets(t,e,t,i);}},{key:"_unwrapChildren",value:function _unwrapChildren(t,e,i,n){var o=e;var r=[];for(;o<i;){var _e50=t.getChild(o);if(_e50.is("attributeElement")){if(_e50.isSimilar(n)){var _n23=_e50.getChildren(),_s5=_e50.childCount;_e50._remove(),t._insertChild(o,_n23),this._removeFromClonedElementsGroup(_e50),r.push(new Xn(t,o),new Xn(t,o+_s5)),o+=_s5,i+=_s5-1;}else this._unwrapAttributeElement(n,_e50)?(r.push(new Xn(t,o),new Xn(t,o+1)),o++):(this._unwrapChildren(_e50,0,_e50.childCount,n),o++);}else o++;}var s=0;for(var _i46=0,_r7=r;_i46<_r7.length;_i46++){var _t44=_r7[_i46];if(_t44.offset-=s,_t44.offset==e||_t44.offset==i)continue;this.mergeAttributes(_t44).isEqual(_t44)||(s++,i--);}return to._createFromParentsAndOffsets(t,e,t,i);}},{key:"_wrapRange",value:function _wrapRange(t,e){var _this$_breakAttribute3=this._breakAttributesRange(t,!0),i=_this$_breakAttribute3.start,n=_this$_breakAttribute3.end,o=i.parent,r=this._wrapChildren(o,i.offset,n.offset,e),s=this.mergeAttributes(r.start);s.isEqual(r.start)||r.end.offset--;var a=this.mergeAttributes(r.end);return new to(s,a);}},{key:"_wrapPosition",value:function _wrapPosition(t,e){if(e.isSimilar(t.parent))return Oo(t.clone());t.parent.is("$text")&&(t=Ro(t));var i=this.createAttributeElement();i._priority=Number.POSITIVE_INFINITY,i.isSimilar=function(){return!1;},t.parent._insertChild(t.offset,i);var n=new to(t,t.getShiftedBy(1));this.wrap(n,e);var o=new Xn(i.parent,i.index);i._remove();var r=o.nodeBefore,s=o.nodeAfter;return r instanceof Ri&&s instanceof Ri?Do(r,s):Oo(o);}},{key:"_wrapAttributeElement",value:function _wrapAttributeElement(t,e){if(!jo(t,e))return!1;if(t.name!==e.name||t.priority!==e.priority)return!1;var _iterator53=_createForOfIteratorHelper(t.getAttributeKeys()),_step53;try{for(_iterator53.s();!(_step53=_iterator53.n()).done;){var _i47=_step53.value;if("class"!==_i47&&"style"!==_i47&&e.hasAttribute(_i47)&&e.getAttribute(_i47)!==t.getAttribute(_i47))return!1;}}catch(err){_iterator53.e(err);}finally{_iterator53.f();}var _iterator54=_createForOfIteratorHelper(t.getStyleNames()),_step54;try{for(_iterator54.s();!(_step54=_iterator54.n()).done;){var _i48=_step54.value;if(e.hasStyle(_i48)&&e.getStyle(_i48)!==t.getStyle(_i48))return!1;}}catch(err){_iterator54.e(err);}finally{_iterator54.f();}var _iterator55=_createForOfIteratorHelper(t.getAttributeKeys()),_step55;try{for(_iterator55.s();!(_step55=_iterator55.n()).done;){var _i49=_step55.value;"class"!==_i49&&"style"!==_i49&&(e.hasAttribute(_i49)||this.setAttribute(_i49,t.getAttribute(_i49),e));}}catch(err){_iterator55.e(err);}finally{_iterator55.f();}var _iterator56=_createForOfIteratorHelper(t.getStyleNames()),_step56;try{for(_iterator56.s();!(_step56=_iterator56.n()).done;){var _i50=_step56.value;e.hasStyle(_i50)||this.setStyle(_i50,t.getStyle(_i50),e);}}catch(err){_iterator56.e(err);}finally{_iterator56.f();}var _iterator57=_createForOfIteratorHelper(t.getClassNames()),_step57;try{for(_iterator57.s();!(_step57=_iterator57.n()).done;){var _i51=_step57.value;e.hasClass(_i51)||this.addClass(_i51,e);}}catch(err){_iterator57.e(err);}finally{_iterator57.f();}return!0;}},{key:"_unwrapAttributeElement",value:function _unwrapAttributeElement(t,e){if(!jo(t,e))return!1;if(t.name!==e.name||t.priority!==e.priority)return!1;var _iterator58=_createForOfIteratorHelper(t.getAttributeKeys()),_step58;try{for(_iterator58.s();!(_step58=_iterator58.n()).done;){var _i52=_step58.value;if("class"!==_i52&&"style"!==_i52&&(!e.hasAttribute(_i52)||e.getAttribute(_i52)!==t.getAttribute(_i52)))return!1;}}catch(err){_iterator58.e(err);}finally{_iterator58.f();}if(!e.hasClass.apply(e,_toConsumableArray(t.getClassNames())))return!1;var _iterator59=_createForOfIteratorHelper(t.getStyleNames()),_step59;try{for(_iterator59.s();!(_step59=_iterator59.n()).done;){var _i53=_step59.value;if(!e.hasStyle(_i53)||e.getStyle(_i53)!==t.getStyle(_i53))return!1;}}catch(err){_iterator59.e(err);}finally{_iterator59.f();}var _iterator60=_createForOfIteratorHelper(t.getAttributeKeys()),_step60;try{for(_iterator60.s();!(_step60=_iterator60.n()).done;){var _i54=_step60.value;"class"!==_i54&&"style"!==_i54&&this.removeAttribute(_i54,e);}}catch(err){_iterator60.e(err);}finally{_iterator60.f();}return this.removeClass(Array.from(t.getClassNames()),e),this.removeStyle(Array.from(t.getStyleNames()),e),!0;}},{key:"_breakAttributesRange",value:function _breakAttributesRange(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;var i=t.start,n=t.end;if(Vo(t,this.document),t.isCollapsed){var _i55=this._breakAttributes(t.start,e);return new to(_i55,_i55);}var o=this._breakAttributes(n,e),r=o.parent.childCount,s=this._breakAttributes(i,e);return o.offset+=o.parent.childCount-r,new to(s,o);}},{key:"_breakAttributes",value:function _breakAttributes(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;var i=t.offset,n=t.parent;if(t.parent.is("emptyElement"))throw new ui.a("view-writer-cannot-break-empty-element",this.document);if(t.parent.is("uiElement"))throw new ui.a("view-writer-cannot-break-ui-element",this.document);if(t.parent.is("rawElement"))throw new ui.a("view-writer-cannot-break-raw-element",this.document);if(!e&&n.is("$text")&&zo(n.parent))return t.clone();if(zo(n))return t.clone();if(n.is("$text"))return this._breakAttributes(Ro(t),e);if(i==n.childCount){var _t45=new Xn(n.parent,n.index+1);return this._breakAttributes(_t45,e);}if(0===i){var _t46=new Xn(n.parent,n.index);return this._breakAttributes(_t46,e);}{var _t47=n.index+1,_o20=n._clone();n.parent._insertChild(_t47,_o20),this._addToClonedElementsGroup(_o20);var _r8=n.childCount-i,_s6=n._removeChildren(i,_r8);_o20._appendChild(_s6);var _a5=new Xn(n.parent,_t47);return this._breakAttributes(_a5,e);}}},{key:"_addToClonedElementsGroup",value:function _addToClonedElementsGroup(t){if(!t.root.is("rootElement"))return;if(t.is("element")){var _iterator61=_createForOfIteratorHelper(t.getChildren()),_step61;try{for(_iterator61.s();!(_step61=_iterator61.n()).done;){var _e51=_step61.value;this._addToClonedElementsGroup(_e51);}}catch(err){_iterator61.e(err);}finally{_iterator61.f();}}var e=t.id;if(!e)return;var i=this._cloneGroups.get(e);i||(i=new Set(),this._cloneGroups.set(e,i)),i.add(t),t._clonesGroup=i;}},{key:"_removeFromClonedElementsGroup",value:function _removeFromClonedElementsGroup(t){if(t.is("element")){var _iterator62=_createForOfIteratorHelper(t.getChildren()),_step62;try{for(_iterator62.s();!(_step62=_iterator62.n()).done;){var _e52=_step62.value;this._removeFromClonedElementsGroup(_e52);}}catch(err){_iterator62.e(err);}finally{_iterator62.f();}}var e=t.id;if(!e)return;var i=this._cloneGroups.get(e);i&&i["delete"](t);}}]);return Mo;}();function Io(t){var e=t.parent;for(;!zo(e);){if(!e)return;e=e.parent;}return e;}function No(t,e){return t.priority<e.priority||!(t.priority>e.priority)&&t.getIdentity()<e.getIdentity();}function Oo(t){var e=t.nodeBefore;if(e&&e.is("$text"))return new Xn(e,e.data.length);var i=t.nodeAfter;return i&&i.is("$text")?new Xn(i,0):t;}function Ro(t){if(t.offset==t.parent.data.length)return new Xn(t.parent.parent,t.parent.index+1);if(0===t.offset)return new Xn(t.parent.parent,t.parent.index);var e=t.parent.data.slice(t.offset);return t.parent._data=t.parent.data.slice(0,t.offset),t.parent.parent._insertChild(t.parent.index+1,new Ri(t.root.document,e)),new Xn(t.parent.parent,t.parent.index+1);}function Do(t,e){var i=t.data.length;return t._data+=e.data,e._remove(),new Xn(t,i);}var Lo=[Ri,so,Ln,lo,So,Ao];function zo(t){return t&&(t.is("containerElement")||t.is("documentFragment"));}function Vo(t,e){var i=Io(t.start),n=Io(t.end);if(!i||!n||i!==n)throw new ui.a("view-writer-invalid-range-container",e);}function jo(t,e){return null===t.id&&null===e.id;}function Bo(t){return"[object Text]"==Object.prototype.toString.call(t);}var Fo=function Fo(t){return t.createTextNode(" ");},Ho=function Ho(t){var e=t.createElement("br");return e.dataset.ckeFiller=!0,e;},Uo=function(){var t="";for(var _e53=0;_e53<7;_e53++){t+="​";}return t;}();function Wo(t){return Bo(t)&&t.data.substr(0,7)===Uo;}function qo(t){return 7==t.data.length&&Wo(t);}function $o(t){return Wo(t)?t.data.slice(7):t.data;}function Yo(t,e){if(e.keyCode==po.arrowleft){var _t48=e.domTarget;for(;1===_t48.nodeType;){_t48=_t48.parentNode;}var _i56=_t48.getSelection();if(1==_i56.rangeCount&&_i56.getRangeAt(0).collapsed){var _t49=_i56.getRangeAt(0).startContainer,_e54=_i56.getRangeAt(0).startOffset;Wo(_t49)&&_e54<=7&&_i56.collapse(_t49,0);}}}function Go(t,e,i){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:!1;i=i||function(t,e){return t===e;},Array.isArray(t)||(t=Array.prototype.slice.call(t)),Array.isArray(e)||(e=Array.prototype.slice.call(e));var o=function(t,e,i){var n=Ko(t,e,i);if(-1===n)return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};var o=Qo(t,n),r=Qo(e,n),s=Ko(o,r,i),a=t.length-s,c=e.length-s;return{firstIndex:n,lastIndexOld:a,lastIndexNew:c};}(t,e,i);return n?function(t,e){var i=t.firstIndex,n=t.lastIndexOld,o=t.lastIndexNew;if(-1===i)return Array(e).fill("equal");var r=[];i>0&&(r=r.concat(Array(i).fill("equal")));o-i>0&&(r=r.concat(Array(o-i).fill("insert")));n-i>0&&(r=r.concat(Array(n-i).fill("delete")));o<e&&(r=r.concat(Array(e-o).fill("equal")));return r;}(o,e.length):function(t,e){var i=[],n=e.firstIndex,o=e.lastIndexOld,r=e.lastIndexNew;r-n>0&&i.push({index:n,type:"insert",values:t.slice(n,r)});o-n>0&&i.push({index:n+(r-n),type:"delete",howMany:o-n});return i;}(e,o);}function Ko(t,e,i){for(var _n24=0;_n24<Math.max(t.length,e.length);_n24++){if(void 0===t[_n24]||void 0===e[_n24]||!i(t[_n24],e[_n24]))return _n24;}return-1;}function Qo(t,e){return t.slice(e).reverse();}function Jo(t,e,i){i=i||function(t,e){return t===e;};var n=t.length,o=e.length;if(n>200||o>200||n+o>300)return Jo.fastDiff(t,e,i,!0);var r,s;if(o<n){var _i57=t;t=e,e=_i57,r="delete",s="insert";}else r="insert",s="delete";var a=t.length,c=e.length,l=c-a,d={},u={};function h(n){var o=(void 0!==u[n-1]?u[n-1]:-1)+1,l=void 0!==u[n+1]?u[n+1]:-1,h=o>l?-1:1;d[n+h]&&(d[n]=d[n+h].slice(0)),d[n]||(d[n]=[]),d[n].push(o>l?r:s);var f=Math.max(o,l),m=f-n;for(;m<a&&f<c&&i(t[m],e[f]);){m++,f++,d[n].push("equal");}return f;}var f,m=0;do{for(f=-m;f<l;f++){u[f]=h(f);}for(f=l+m;f>l;f--){u[f]=h(f);}u[l]=h(l),m++;}while(u[l]!==c);return d[l].slice(1);}function Zo(t,e,i){t.insertBefore(i,t.childNodes[e]||null);}function Xo(t){var e=t.parentNode;e&&e.removeChild(t);}function tr(t){if(t){if(t.defaultView)return t instanceof t.defaultView.Document;if(t.ownerDocument&&t.ownerDocument.defaultView)return t instanceof t.ownerDocument.defaultView.Node;}return!1;}Jo.fastDiff=Go;var er=/*#__PURE__*/function(){function er(t,e){_classCallCheck(this,er);this.domDocuments=new Set(),this.domConverter=t,this.markedAttributes=new Set(),this.markedChildren=new Set(),this.markedTexts=new Set(),this.selection=e,this.isFocused=!1,this._inlineFiller=null,this._fakeSelectionContainer=null;}_createClass(er,[{key:"markToSync",value:function markToSync(t,e){if("text"===t)this.domConverter.mapViewToDom(e.parent)&&this.markedTexts.add(e);else{if(!this.domConverter.mapViewToDom(e))return;if("attributes"===t)this.markedAttributes.add(e);else{if("children"!==t)throw new ui.a("view-renderer-unknown-type",this);this.markedChildren.add(e);}}}},{key:"render",value:function render(){var t;var _iterator63=_createForOfIteratorHelper(this.markedChildren),_step63;try{for(_iterator63.s();!(_step63=_iterator63.n()).done;){var _t50=_step63.value;this._updateChildrenMappings(_t50);}}catch(err){_iterator63.e(err);}finally{_iterator63.f();}this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?t=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(t=this.selection.getFirstPosition(),this.markedChildren.add(t.parent));var _iterator64=_createForOfIteratorHelper(this.markedAttributes),_step64;try{for(_iterator64.s();!(_step64=_iterator64.n()).done;){var _t51=_step64.value;this._updateAttrs(_t51);}}catch(err){_iterator64.e(err);}finally{_iterator64.f();}var _iterator65=_createForOfIteratorHelper(this.markedChildren),_step65;try{for(_iterator65.s();!(_step65=_iterator65.n()).done;){var _e56=_step65.value;this._updateChildren(_e56,{inlineFillerPosition:t});}}catch(err){_iterator65.e(err);}finally{_iterator65.f();}var _iterator66=_createForOfIteratorHelper(this.markedTexts),_step66;try{for(_iterator66.s();!(_step66=_iterator66.n()).done;){var _e57=_step66.value;!this.markedChildren.has(_e57.parent)&&this.domConverter.mapViewToDom(_e57.parent)&&this._updateText(_e57,{inlineFillerPosition:t});}}catch(err){_iterator66.e(err);}finally{_iterator66.f();}if(t){var _e55=this.domConverter.viewPositionToDom(t),_i58=_e55.parent.ownerDocument;Wo(_e55.parent)?this._inlineFiller=_e55.parent:this._inlineFiller=ir(_i58,_e55.parent,_e55.offset);}else this._inlineFiller=null;this._updateSelection(),this._updateFocus(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear();}},{key:"_updateChildrenMappings",value:function _updateChildrenMappings(t){var e=this.domConverter.mapViewToDom(t);if(!e)return;var i=this.domConverter.mapViewToDom(t).childNodes,n=Array.from(this.domConverter.viewChildrenToDom(t,e.ownerDocument,{withChildren:!1})),o=this._diffNodeLists(i,n),r=this._findReplaceActions(o,i,n);if(-1!==r.indexOf("replace")){var _e58={equal:0,insert:0,"delete":0};var _iterator67=_createForOfIteratorHelper(r),_step67;try{for(_iterator67.s();!(_step67=_iterator67.n()).done;){var _o21=_step67.value;if("replace"===_o21){var _o22=_e58.equal+_e58.insert,_r9=_e58.equal+_e58["delete"],_s7=t.getChild(_o22);!_s7||_s7.is("uiElement")||_s7.is("rawElement")||this._updateElementMappings(_s7,i[_r9]),Xo(n[_o22]),_e58.equal++;}else _e58[_o21]++;}}catch(err){_iterator67.e(err);}finally{_iterator67.f();}}}},{key:"_updateElementMappings",value:function _updateElementMappings(t,e){this.domConverter.unbindDomElement(e),this.domConverter.bindElements(e,t),this.markedChildren.add(t),this.markedAttributes.add(t);}},{key:"_getInlineFillerPosition",value:function _getInlineFillerPosition(){var t=this.selection.getFirstPosition();return t.parent.is("$text")?Xn._createBefore(this.selection.getFirstPosition().parent):t;}},{key:"_isSelectionInInlineFiller",value:function _isSelectionInInlineFiller(){if(1!=this.selection.rangeCount||!this.selection.isCollapsed)return!1;var t=this.selection.getFirstPosition(),e=this.domConverter.viewPositionToDom(t);return!!(e&&Bo(e.parent)&&Wo(e.parent));}},{key:"_removeInlineFiller",value:function _removeInlineFiller(){var t=this._inlineFiller;if(!Wo(t))throw new ui.a("view-renderer-filler-was-lost",this);qo(t)?t.parentNode.removeChild(t):t.data=t.data.substr(7),this._inlineFiller=null;}},{key:"_needsInlineFillerAtSelection",value:function _needsInlineFillerAtSelection(){if(1!=this.selection.rangeCount||!this.selection.isCollapsed)return!1;var t=this.selection.getFirstPosition(),e=t.parent,i=t.offset;if(!this.domConverter.mapViewToDom(e.root))return!1;if(!e.is("element"))return!1;if(!function(t){if("false"==t.getAttribute("contenteditable"))return!1;var e=t.findAncestor(function(t){return t.hasAttribute("contenteditable");});return!e||"true"==e.getAttribute("contenteditable");}(e))return!1;if(i===e.getFillerOffset())return!1;var n=t.nodeBefore,o=t.nodeAfter;return!(n instanceof Ri||o instanceof Ri);}},{key:"_updateText",value:function _updateText(t,e){var i=this.domConverter.findCorrespondingDomText(t),n=this.domConverter.viewToDom(t,i.ownerDocument),o=i.data;var r=n.data;var s=e.inlineFillerPosition;if(s&&s.parent==t.parent&&s.offset==t.index&&(r=Uo+r),o!=r){var _t52=Go(o,r);var _iterator68=_createForOfIteratorHelper(_t52),_step68;try{for(_iterator68.s();!(_step68=_iterator68.n()).done;){var _e59=_step68.value;"insert"===_e59.type?i.insertData(_e59.index,_e59.values.join("")):i.deleteData(_e59.index,_e59.howMany);}}catch(err){_iterator68.e(err);}finally{_iterator68.f();}}}},{key:"_updateAttrs",value:function _updateAttrs(t){var e=this.domConverter.mapViewToDom(t);if(!e)return;var i=Array.from(e.attributes).map(function(t){return t.name;}),n=t.getAttributeKeys();var _iterator69=_createForOfIteratorHelper(n),_step69;try{for(_iterator69.s();!(_step69=_iterator69.n()).done;){var _i59=_step69.value;e.setAttribute(_i59,t.getAttribute(_i59));}}catch(err){_iterator69.e(err);}finally{_iterator69.f();}var _iterator70=_createForOfIteratorHelper(i),_step70;try{for(_iterator70.s();!(_step70=_iterator70.n()).done;){var _n25=_step70.value;t.hasAttribute(_n25)||e.removeAttribute(_n25);}}catch(err){_iterator70.e(err);}finally{_iterator70.f();}}},{key:"_updateChildren",value:function _updateChildren(t,e){var i=this.domConverter.mapViewToDom(t);if(!i)return;var n=e.inlineFillerPosition,o=this.domConverter.mapViewToDom(t).childNodes,r=Array.from(this.domConverter.viewChildrenToDom(t,i.ownerDocument,{bind:!0,inlineFillerPosition:n}));n&&n.parent===t&&ir(i.ownerDocument,r,n.offset);var s=this._diffNodeLists(o,r);var a=0;var c=new Set();var _iterator71=_createForOfIteratorHelper(s),_step71;try{for(_iterator71.s();!(_step71=_iterator71.n()).done;){var _t53=_step71.value;"delete"===_t53?(c.add(o[a]),Xo(o[a])):"equal"===_t53&&a++;}}catch(err){_iterator71.e(err);}finally{_iterator71.f();}a=0;var _iterator72=_createForOfIteratorHelper(s),_step72;try{for(_iterator72.s();!(_step72=_iterator72.n()).done;){var _t54=_step72.value;"insert"===_t54?(Zo(i,a,r[a]),a++):"equal"===_t54&&(this._markDescendantTextToSync(this.domConverter.domToView(r[a])),a++);}}catch(err){_iterator72.e(err);}finally{_iterator72.f();}var _iterator73=_createForOfIteratorHelper(c),_step73;try{for(_iterator73.s();!(_step73=_iterator73.n()).done;){var _t55=_step73.value;_t55.parentNode||this.domConverter.unbindDomElement(_t55);}}catch(err){_iterator73.e(err);}finally{_iterator73.f();}}},{key:"_diffNodeLists",value:function _diffNodeLists(t,e){return Jo(t=function(t,e){var i=Array.from(t);if(0==i.length||!e)return i;i[i.length-1]==e&&i.pop();return i;}(t,this._fakeSelectionContainer),e,or.bind(null,this.domConverter));}},{key:"_findReplaceActions",value:function _findReplaceActions(t,e,i){if(-1===t.indexOf("insert")||-1===t.indexOf("delete"))return t;var n=[],o=[],r=[];var s={equal:0,insert:0,"delete":0};var _iterator74=_createForOfIteratorHelper(t),_step74;try{for(_iterator74.s();!(_step74=_iterator74.n()).done;){var _a6=_step74.value;"insert"===_a6?r.push(i[s.equal+s.insert]):"delete"===_a6?o.push(e[s.equal+s["delete"]]):(n=n.concat(Jo(o,r,nr).map(function(t){return"equal"===t?"replace":t;})),n.push("equal"),o=[],r=[]),s[_a6]++;}}catch(err){_iterator74.e(err);}finally{_iterator74.f();}return n.concat(Jo(o,r,nr).map(function(t){return"equal"===t?"replace":t;}));}},{key:"_markDescendantTextToSync",value:function _markDescendantTextToSync(t){if(t)if(t.is("$text"))this.markedTexts.add(t);else if(t.is("element")){var _iterator75=_createForOfIteratorHelper(t.getChildren()),_step75;try{for(_iterator75.s();!(_step75=_iterator75.n()).done;){var _e60=_step75.value;this._markDescendantTextToSync(_e60);}}catch(err){_iterator75.e(err);}finally{_iterator75.f();}}}},{key:"_updateSelection",value:function _updateSelection(){if(0===this.selection.rangeCount)return this._removeDomSelection(),void this._removeFakeSelection();var t=this.domConverter.mapViewToDom(this.selection.editableElement);this.isFocused&&t&&(this.selection.isFake?this._updateFakeSelection(t):(this._removeFakeSelection(),this._updateDomSelection(t)));}},{key:"_updateFakeSelection",value:function _updateFakeSelection(t){var e=t.ownerDocument;var i=t;for(;1===i.nodeType;){i=i.parentNode;}this._fakeSelectionContainer||(this._fakeSelectionContainer=function(t){var e=t.createElement("div");return e.className="ck-fake-selection-container",Object.assign(e.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),e.textContent=" ",e;}(e));var n=this._fakeSelectionContainer;if(this.domConverter.bindFakeSelection(n,this.selection),!this._fakeSelectionNeedsUpdate(t))return;n.parentElement&&n.parentElement==t||t.appendChild(n),n.textContent=this.selection.fakeSelectionLabel||" ";var o=i.getSelection(),r=e.createRange();o.removeAllRanges(),r.selectNodeContents(n),o.addRange(r);}},{key:"_updateDomSelection",value:function _updateDomSelection(t){var e=t;for(;1===e.nodeType;){e=e.parentNode;}var i=e.getSelection();if(!this._domSelectionNeedsUpdate(i))return;var n=this.domConverter.viewPositionToDom(this.selection.anchor),o=this.domConverter.viewPositionToDom(this.selection.focus);t.focus(),i.collapse(n.parent,n.offset),i.extend(o.parent,o.offset),fo.isGecko&&function(t,e){var i=t.parent;if(i.nodeType!=Node.ELEMENT_NODE||t.offset!=i.childNodes.length-1)return;var n=i.childNodes[t.offset];n&&"BR"==n.tagName&&e.addRange(e.getRangeAt(0));}(o,i);}},{key:"_domSelectionNeedsUpdate",value:function _domSelectionNeedsUpdate(t){if(!this.domConverter.isDomSelectionCorrect(t))return!0;var e=t&&this.domConverter.domSelectionToView(t);return(!e||!this.selection.isEqual(e))&&!(!this.selection.isCollapsed&&this.selection.isSimilar(e));}},{key:"_fakeSelectionNeedsUpdate",value:function _fakeSelectionNeedsUpdate(t){var e=this._fakeSelectionContainer;var i=t;for(;1===i.nodeType;){i=i.parentNode;}var n=i.getSelection();return!e||e.parentElement!==t||n.anchorNode!==e&&!e.contains(n.anchorNode)||e.textContent!==this.selection.fakeSelectionLabel;}},{key:"_removeDomSelection",value:function _removeDomSelection(){var _iterator76=_createForOfIteratorHelper(this.domDocuments),_step76;try{for(_iterator76.s();!(_step76=_iterator76.n()).done;){var _t56=_step76.value;console.log(_t56);if(document.getElementsByTagName("mobi-html-editor")[0].shadowRoot.getSelection().rangeCount){var _e61=_t56.activeElement,_i60=this.domConverter.mapDomToView(_e61);_e61&&_i60&&document.getElementsByTagName("mobi-html-editor")[0].shadowRoot.getSelection().removeAllRanges();}}}catch(err){_iterator76.e(err);}finally{_iterator76.f();}}},{key:"_removeFakeSelection",value:function _removeFakeSelection(){var t=this._fakeSelectionContainer;t&&t.remove();}},{key:"_updateFocus",value:function _updateFocus(){if(this.isFocused){var _t57=this.selection.editableElement;_t57&&this.domConverter.focus(_t57);}}}]);return er;}();function ir(t,e,i){var n=e instanceof Array?e:e.childNodes,o=n[i];if(Bo(o))return o.data=Uo+o.data,o;{var _o23=t.createTextNode(Uo);return Array.isArray(e)?n.splice(i,0,_o23):Zo(e,i,_o23),_o23;}}function nr(t,e){return tr(t)&&tr(e)&&!Bo(t)&&!Bo(e)&&t.nodeType!==Node.COMMENT_NODE&&e.nodeType!==Node.COMMENT_NODE&&t.tagName.toLowerCase()===e.tagName.toLowerCase();}function or(t,e,i){return e===i||(Bo(e)&&Bo(i)?e.data===i.data:!(!t.isBlockFiller(e)||!t.isBlockFiller(i)));}yi(er,Un);var rr={window:window,document:document};function sr(t){var e=0;for(;t.previousSibling;){t=t.previousSibling,e++;}return e;}function ar(t){var e=[];for(;t&&t.nodeType!=Node.DOCUMENT_NODE;){e.unshift(t),t=t.parentNode;}return e;}var cr=Ho(document);var lr=/*#__PURE__*/function(){function lr(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,lr);this.document=t,this.blockFillerMode=e.blockFillerMode||"br",this.preElements=["pre"],this.blockElements=["p","div","h1","h2","h3","h4","h5","h6","li","dd","dt","figcaption","td","th"],this._blockFiller="br"==this.blockFillerMode?Ho:Fo,this._domToViewMapping=new WeakMap(),this._viewToDomMapping=new WeakMap(),this._fakeSelectionMapping=new WeakMap(),this._rawContentElementMatcher=new zi(),this._encounteredRawContentDomNodes=new WeakSet();}_createClass(lr,[{key:"bindFakeSelection",value:function bindFakeSelection(t,e){this._fakeSelectionMapping.set(t,new no(e));}},{key:"fakeSelectionToView",value:function fakeSelectionToView(t){return this._fakeSelectionMapping.get(t);}},{key:"bindElements",value:function bindElements(t,e){this._domToViewMapping.set(t,e),this._viewToDomMapping.set(e,t);}},{key:"unbindDomElement",value:function unbindDomElement(t){var e=this._domToViewMapping.get(t);if(e){this._domToViewMapping["delete"](t),this._viewToDomMapping["delete"](e);var _iterator77=_createForOfIteratorHelper(t.childNodes),_step77;try{for(_iterator77.s();!(_step77=_iterator77.n()).done;){var _e62=_step77.value;this.unbindDomElement(_e62);}}catch(err){_iterator77.e(err);}finally{_iterator77.f();}}}},{key:"bindDocumentFragments",value:function bindDocumentFragments(t,e){this._domToViewMapping.set(t,e),this._viewToDomMapping.set(e,t);}},{key:"viewToDom",value:function viewToDom(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(t.is("$text")){var _i61=this._processDataFromViewText(t);return e.createTextNode(_i61);}{if(this.mapViewToDom(t))return this.mapViewToDom(t);var _n26;if(t.is("documentFragment"))_n26=e.createDocumentFragment(),i.bind&&this.bindDocumentFragments(_n26,t);else{if(t.is("uiElement"))return _n26=t.render(e),i.bind&&this.bindElements(_n26,t),_n26;_n26=t.hasAttribute("xmlns")?e.createElementNS(t.getAttribute("xmlns"),t.name):e.createElement(t.name),t.is("rawElement")&&t.render(_n26),i.bind&&this.bindElements(_n26,t);var _iterator78=_createForOfIteratorHelper(t.getAttributeKeys()),_step78;try{for(_iterator78.s();!(_step78=_iterator78.n()).done;){var _e63=_step78.value;_n26.setAttribute(_e63,t.getAttribute(_e63));}}catch(err){_iterator78.e(err);}finally{_iterator78.f();}}if(!1!==i.withChildren){var _iterator79=_createForOfIteratorHelper(this.viewChildrenToDom(t,e,i)),_step79;try{for(_iterator79.s();!(_step79=_iterator79.n()).done;){var _o24=_step79.value;_n26.appendChild(_o24);}}catch(err){_iterator79.e(err);}finally{_iterator79.f();}}return _n26;}}},{key:"viewChildrenToDom",value:/*#__PURE__*/regeneratorRuntime.mark(function viewChildrenToDom(t,e){var i,n,o,_iterator80,_step80,_r10,_args11=arguments;return regeneratorRuntime.wrap(function viewChildrenToDom$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:i=_args11.length>2&&_args11[2]!==undefined?_args11[2]:{};n=t.getFillerOffset&&t.getFillerOffset();o=0;_iterator80=_createForOfIteratorHelper(t.getChildren());_context11.prev=4;_iterator80.s();case 6:if((_step80=_iterator80.n()).done){_context11.next=17;break;}_r10=_step80.value;_context11.t0=n===o;if(!_context11.t0){_context11.next=12;break;}_context11.next=12;return this._blockFiller(e);case 12:_context11.next=14;return this.viewToDom(_r10,e,i);case 14:o++;case 15:_context11.next=6;break;case 17:_context11.next=22;break;case 19:_context11.prev=19;_context11.t1=_context11["catch"](4);_iterator80.e(_context11.t1);case 22:_context11.prev=22;_iterator80.f();return _context11.finish(22);case 25:_context11.t2=n===o;if(!_context11.t2){_context11.next=29;break;}_context11.next=29;return this._blockFiller(e);case 29:case"end":return _context11.stop();}}},viewChildrenToDom,this,[[4,19,22,25]]);})},{key:"viewRangeToDom",value:function viewRangeToDom(t){var e=this.viewPositionToDom(t.start),i=this.viewPositionToDom(t.end),n=document.createRange();return n.setStart(e.parent,e.offset),n.setEnd(i.parent,i.offset),n;}},{key:"viewPositionToDom",value:function viewPositionToDom(t){var e=t.parent;if(e.is("$text")){var _i62=this.findCorrespondingDomText(e);if(!_i62)return null;var _n27=t.offset;return Wo(_i62)&&(_n27+=7),{parent:_i62,offset:_n27};}{var _i63,_n28,_o25;if(0===t.offset){if(_i63=this.mapViewToDom(e),!_i63)return null;_o25=_i63.childNodes[0];}else{var _e64=t.nodeBefore;if(_n28=_e64.is("$text")?this.findCorrespondingDomText(_e64):this.mapViewToDom(t.nodeBefore),!_n28)return null;_i63=_n28.parentNode,_o25=_n28.nextSibling;}if(Bo(_o25)&&Wo(_o25))return{parent:_o25,offset:7};return{parent:_i63,offset:_n28?sr(_n28)+1:0};}}},{key:"domToView",value:function domToView(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(this.isBlockFiller(t,this.blockFillerMode))return null;var i=this.getHostViewElement(t);if(i)return i;if(Bo(t)){if(qo(t))return null;{var _e65=this._processDataFromDomText(t);return""===_e65?null:new Ri(this.document,_e65);}}if(this.isComment(t))return null;{if(this.mapDomToView(t))return this.mapDomToView(t);var _i64;if(this.isDocumentFragment(t))_i64=new Po(this.document),e.bind&&this.bindDocumentFragments(t,_i64);else{var _n29=e.keepOriginalCase?t.tagName:t.tagName.toLowerCase();_i64=new Rn(this.document,_n29),e.bind&&this.bindElements(t,_i64);var _o26=t.attributes;for(var _t58=_o26.length-1;_t58>=0;_t58--){_i64._setAttribute(_o26[_t58].name,_o26[_t58].value);}if(!1!==e.withChildren&&this._rawContentElementMatcher.match(_i64))return _i64._setCustomProperty("$rawContent",t.innerHTML),this._encounteredRawContentDomNodes.add(t),_i64;}if(!1!==e.withChildren){var _iterator81=_createForOfIteratorHelper(this.domChildrenToView(t,e)),_step81;try{for(_iterator81.s();!(_step81=_iterator81.n()).done;){var _n30=_step81.value;_i64._appendChild(_n30);}}catch(err){_iterator81.e(err);}finally{_iterator81.f();}}return _i64;}}},{key:"domChildrenToView",value:/*#__PURE__*/regeneratorRuntime.mark(function domChildrenToView(t){var e,_i65,_n31,_o27,_args12=arguments;return regeneratorRuntime.wrap(function domChildrenToView$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:e=_args12.length>1&&_args12[1]!==undefined?_args12[1]:{};_i65=0;case 2:if(!(_i65<t.childNodes.length)){_context12.next=11;break;}_n31=t.childNodes[_i65],_o27=this.domToView(_n31,e);_context12.t0=null!==_o27;if(!_context12.t0){_context12.next=8;break;}_context12.next=8;return _o27;case 8:_i65++;_context12.next=2;break;case 11:case"end":return _context12.stop();}}},domChildrenToView,this);})},{key:"domSelectionToView",value:function domSelectionToView(t){if(1===t.rangeCount){var _e66=t.getRangeAt(0).startContainer;Bo(_e66)&&(_e66=_e66.parentNode);var _i66=this.fakeSelectionToView(_e66);if(_i66)return _i66;}var e=this.isDomSelectionBackward(t),i=[];for(var _e67=0;_e67<t.rangeCount;_e67++){var _n32=t.getRangeAt(_e67),_o28=this.domRangeToView(_n32);_o28&&i.push(_o28);}return new no(i,{backward:e});}},{key:"domRangeToView",value:function domRangeToView(t){var e=this.domPositionToView(t.startContainer,t.startOffset),i=this.domPositionToView(t.endContainer,t.endOffset);return e&&i?new to(e,i):null;}},{key:"domPositionToView",value:function domPositionToView(t,e){if(this.isBlockFiller(t,this.blockFillerMode))return this.domPositionToView(t.parentNode,sr(t));var i=this.mapDomToView(t);if(i&&(i.is("uiElement")||i.is("rawElement")))return Xn._createBefore(i);if(Bo(t)){if(qo(t))return this.domPositionToView(t.parentNode,sr(t));var _i67=this.findCorrespondingViewText(t);var _n33=e;return _i67?(Wo(t)&&(_n33-=7,_n33=_n33<0?0:_n33),new Xn(_i67,_n33)):null;}if(0===e){var _e68=this.mapDomToView(t);if(_e68)return new Xn(_e68,0);}else{var _i68=t.childNodes[e-1],_n34=Bo(_i68)?this.findCorrespondingViewText(_i68):this.mapDomToView(_i68);if(_n34&&_n34.parent)return new Xn(_n34.parent,_n34.index+1);}return null;}},{key:"mapDomToView",value:function mapDomToView(t){return this.getHostViewElement(t)||this._domToViewMapping.get(t);}},{key:"findCorrespondingViewText",value:function findCorrespondingViewText(t){if(qo(t))return null;var e=this.getHostViewElement(t);if(e)return e;var i=t.previousSibling;if(i){if(!this.isElement(i))return null;var _t59=this.mapDomToView(i);if(_t59){return _t59.nextSibling instanceof Ri?_t59.nextSibling:null;}}else{var _e69=this.mapDomToView(t.parentNode);if(_e69){var _t60=_e69.getChild(0);return _t60 instanceof Ri?_t60:null;}}return null;}},{key:"mapViewToDom",value:function mapViewToDom(t){return this._viewToDomMapping.get(t);}},{key:"findCorrespondingDomText",value:function findCorrespondingDomText(t){var e=t.previousSibling;return e&&this.mapViewToDom(e)?this.mapViewToDom(e).nextSibling:!e&&t.parent&&this.mapViewToDom(t.parent)?this.mapViewToDom(t.parent).childNodes[0]:null;}},{key:"focus",value:function focus(t){var e=this.mapViewToDom(t);if(e&&e.ownerDocument.activeElement!==e){var _rr$window=rr.window,_t61=_rr$window.scrollX,_i69=_rr$window.scrollY,_n35=[];ur(e,function(t){var e=t.scrollLeft,i=t.scrollTop;_n35.push([e,i]);}),e.focus(),ur(e,function(t){var _n35$shift=_n35.shift(),_n35$shift2=_slicedToArray(_n35$shift,2),e=_n35$shift2[0],i=_n35$shift2[1];t.scrollLeft=e,t.scrollTop=i;}),rr.window.scrollTo(_t61,_i69);}}},{key:"isElement",value:function isElement(t){return t&&t.nodeType==Node.ELEMENT_NODE;}},{key:"isDocumentFragment",value:function isDocumentFragment(t){return t&&t.nodeType==Node.DOCUMENT_FRAGMENT_NODE;}},{key:"isComment",value:function isComment(t){return t&&t.nodeType==Node.COMMENT_NODE;}},{key:"isBlockFiller",value:function isBlockFiller(t){return"br"==this.blockFillerMode?t.isEqualNode(cr):!("BR"!==t.tagName||!hr(t,this.blockElements)||1!==t.parentNode.childNodes.length)||function(t,e){return Bo(t)&&" "==t.data&&hr(t,e)&&1===t.parentNode.childNodes.length;}(t,this.blockElements);}},{key:"isDomSelectionBackward",value:function isDomSelectionBackward(t){if(t.isCollapsed)return!1;var e=document.createRange();e.setStart(t.anchorNode,t.anchorOffset),e.setEnd(t.focusNode,t.focusOffset);var i=e.collapsed;return e.detach(),i;}},{key:"getHostViewElement",value:function getHostViewElement(t){var e=ar(t);for(e.pop();e.length;){var _t62=e.pop(),_i70=this._domToViewMapping.get(_t62);if(_i70&&(_i70.is("uiElement")||_i70.is("rawElement")))return _i70;}return null;}},{key:"isDomSelectionCorrect",value:function isDomSelectionCorrect(t){return this._isDomSelectionPositionCorrect(t.anchorNode,t.anchorOffset)&&this._isDomSelectionPositionCorrect(t.focusNode,t.focusOffset);}},{key:"registerRawContentMatcher",value:function registerRawContentMatcher(t){this._rawContentElementMatcher.add(t);}},{key:"_isDomSelectionPositionCorrect",value:function _isDomSelectionPositionCorrect(t,e){if(Bo(t)&&Wo(t)&&e<7)return!1;if(this.isElement(t)&&Wo(t.childNodes[e]))return!1;var i=this.mapDomToView(t);return!i||!i.is("uiElement")&&!i.is("rawElement");}},{key:"_processDataFromViewText",value:function _processDataFromViewText(t){var _this23=this;var e=t.data;if(t.getAncestors().some(function(t){return _this23.preElements.includes(t.name);}))return e;if(" "==e.charAt(0)){var _i71=this._getTouchingViewTextNode(t,!1);!(_i71&&this._nodeEndsWithSpace(_i71))&&_i71||(e=" "+e.substr(1));}if(" "==e.charAt(e.length-1)){var _i72=this._getTouchingViewTextNode(t,!0);" "!=e.charAt(e.length-2)&&_i72&&" "!=_i72.data.charAt(0)||(e=e.substr(0,e.length-1)+" ");}return e.replace(/ {2}/g,"  ");}},{key:"_nodeEndsWithSpace",value:function _nodeEndsWithSpace(t){var _this24=this;if(t.getAncestors().some(function(t){return _this24.preElements.includes(t.name);}))return!1;var e=this._processDataFromViewText(t);return" "==e.charAt(e.length-1);}},{key:"_processDataFromDomText",value:function _processDataFromDomText(t){var e=t.data;if(dr(t,this.preElements))return $o(t);e=e.replace(/[ \n\t\r]{1,}/g," ");var i=this._getTouchingInlineDomNode(t,!1),n=this._getTouchingInlineDomNode(t,!0),o=this._checkShouldLeftTrimDomText(t,i),r=this._checkShouldRightTrimDomText(t,n);return o&&(e=e.replace(/^ /,"")),r&&(e=e.replace(/ $/,"")),e=$o(new Text(e)),e=e.replace(/ \u00A0/g,"  "),(/( |\u00A0)\u00A0$/.test(e)||!n||n.data&&" "==n.data.charAt(0))&&(e=e.replace(/\u00A0$/," ")),o&&(e=e.replace(/^\u00A0/," ")),e;}},{key:"_checkShouldLeftTrimDomText",value:function _checkShouldLeftTrimDomText(t,e){return!e||!!ii(e)||!this._encounteredRawContentDomNodes.has(t.previousSibling)&&/[^\S\u00A0]/.test(e.data.charAt(e.data.length-1));}},{key:"_checkShouldRightTrimDomText",value:function _checkShouldRightTrimDomText(t,e){return!e&&!Wo(t);}},{key:"_getTouchingViewTextNode",value:function _getTouchingViewTextNode(t,e){var i=new Zn({startPosition:e?Xn._createAfter(t):Xn._createBefore(t),direction:e?"forward":"backward"});var _iterator82=_createForOfIteratorHelper(i),_step82;try{for(_iterator82.s();!(_step82=_iterator82.n()).done;){var _t63=_step82.value;if(_t63.item.is("containerElement"))return null;if(_t63.item.is("element","br"))return null;if(_t63.item.is("$textProxy"))return _t63.item;}}catch(err){_iterator82.e(err);}finally{_iterator82.f();}return null;}},{key:"_getTouchingInlineDomNode",value:function _getTouchingInlineDomNode(t,e){if(!t.parentNode)return null;var i=e?"nextNode":"previousNode",n=t.ownerDocument,o=ar(t)[0],r=n.createTreeWalker(o,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,{acceptNode:function acceptNode(t){return Bo(t)||"BR"==t.tagName?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP;}});r.currentNode=t;var s=r[i]();if(null!==s){var _e70=function(t,e){var i=ar(t),n=ar(e);var o=0;for(;i[o]==n[o]&&i[o];){o++;}return 0===o?null:i[o-1];}(t,s);if(_e70&&!dr(t,this.blockElements,_e70)&&!dr(s,this.blockElements,_e70))return s;}return null;}}]);return lr;}();function dr(t,e,i){var n=ar(t);return i&&(n=n.slice(n.indexOf(i)+1)),n.some(function(t){return t.tagName&&e.includes(t.tagName.toLowerCase());});}function ur(t,e){for(;t&&t!=rr.document;){e(t),t=t.parentNode;}}function hr(t,e){var i=t.parentNode;return i&&i.tagName&&e.includes(i.tagName.toLowerCase());}function fr(t){var e=Object.prototype.toString.apply(t);return"[object Window]"==e||"[object global]"==e;}var mr=Vn({},mi,{listenTo:function listenTo(t){var _mi$listenTo;for(var _len15=arguments.length,e=new Array(_len15>1?_len15-1:0),_key15=1;_key15<_len15;_key15++){e[_key15-1]=arguments[_key15];}if(tr(t)||fr(t)){var _i73=this._getProxyEmitter(t)||new gr(t);_i73.attach.apply(_i73,e),t=_i73;}(_mi$listenTo=mi.listenTo).call.apply(_mi$listenTo,[this,t].concat(e));},stopListening:function stopListening(t,e,i){if(tr(t)||fr(t)){var _e71=this._getProxyEmitter(t);if(!_e71)return;t=_e71;}mi.stopListening.call(this,t,e,i),t instanceof gr&&t.detach(e);},_getProxyEmitter:function _getProxyEmitter(t){return e=this,i=pr(t),e[hi]&&e[hi][i]?e[hi][i].emitter:null;var e,i;}});var gr=function gr(t){_classCallCheck(this,gr);gi(this,pr(t)),this._domNode=t;};function pr(t){return t["data-ck-expando"]||(t["data-ck-expando"]=li());}Vn(gr.prototype,mi,{attach:function attach(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(this._domListeners&&this._domListeners[t])return;var n={capture:!!i.useCapture,passive:!!i.usePassive},o=this._createDomListener(t,n);this._domNode.addEventListener(t,o,n),this._domListeners||(this._domListeners={}),this._domListeners[t]=o;},detach:function detach(t){var e;!this._domListeners[t]||(e=this._events[t])&&e.callbacks.length||this._domListeners[t].removeListener();},_createDomListener:function _createDomListener(t,e){var _this25=this;var i=function i(e){_this25.fire(t,e);};return i.removeListener=function(){_this25._domNode.removeEventListener(t,i,e),delete _this25._domListeners[t];},i;}});var br=/*#__PURE__*/function(){function br(t){_classCallCheck(this,br);this.view=t,this.document=t.document,this.isEnabled=!1;}_createClass(br,[{key:"enable",value:function enable(){this.isEnabled=!0;}},{key:"disable",value:function disable(){this.isEnabled=!1;}},{key:"destroy",value:function destroy(){this.disable(),this.stopListening();}},{key:"checkShouldIgnoreEventFromTarget",value:function checkShouldIgnoreEventFromTarget(t){return t&&3===t.nodeType&&(t=t.parentNode),!(!t||1!==t.nodeType)&&t.matches("[data-cke-ignore-events], [data-cke-ignore-events] *");}}]);return br;}();yi(br,mr);var wr=function wr(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this;};var kr=function kr(t){return this.__data__.has(t);};function _r(t){var e=-1,i=null==t?0:t.length;for(this.__data__=new kt();++e<i;){this.add(t[e]);}}_r.prototype.add=_r.prototype.push=wr,_r.prototype.has=kr;var vr=_r;var yr=function yr(t,e){for(var i=-1,n=null==t?0:t.length;++i<n;){if(e(t[i],i,t))return!0;}return!1;};var xr=function xr(t,e){return t.has(e);};var Ar=function Ar(t,e,i,n,o,r){var s=1&i,a=t.length,c=e.length;if(a!=c&&!(s&&c>a))return!1;var l=r.get(t),d=r.get(e);if(l&&d)return l==e&&d==t;var u=-1,h=!0,f=2&i?new vr():void 0;for(r.set(t,e),r.set(e,t);++u<a;){var m=t[u],g=e[u];if(n)var p=s?n(g,m,u,e,t,r):n(m,g,u,t,e,r);if(void 0!==p){if(p)continue;h=!1;break;}if(f){if(!yr(e,function(t,e){if(!xr(f,e)&&(m===t||o(m,t,i,n,r)))return f.push(e);})){h=!1;break;}}else if(m!==g&&!o(m,g,i,n,r)){h=!1;break;}}return r["delete"](t),r["delete"](e),h;};var Tr=function Tr(t){var e=-1,i=Array(t.size);return t.forEach(function(t,n){i[++e]=[n,t];}),i;};var Cr=function Cr(t){var e=-1,i=Array(t.size);return t.forEach(function(t){i[++e]=t;}),i;},Sr=o?o.prototype:void 0,Er=Sr?Sr.valueOf:void 0;var Pr=function Pr(t,e,i,n,o,r,s){switch(i){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!r(new Re(t),new Re(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return A(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var a=Tr;case"[object Set]":var c=1&n;if(a||(a=Cr),t.size!=e.size&&!c)return!1;var l=s.get(t);if(l)return l==e;n|=2,s.set(t,e);var d=Ar(a(t),a(e),n,o,r,s);return s["delete"](t),d;case"[object Symbol]":if(Er)return Er.call(t)==Er.call(e);}return!1;},Mr=Object.prototype.hasOwnProperty;var Ir=function Ir(t,e,i,n,o,r){var s=1&i,a=ke(t),c=a.length;if(c!=ke(e).length&&!s)return!1;for(var l=c;l--;){var d=a[l];if(!(s?d in e:Mr.call(e,d)))return!1;}var u=r.get(t),h=r.get(e);if(u&&h)return u==e&&h==t;var f=!0;r.set(t,e),r.set(e,t);for(var m=s;++l<c;){var g=t[d=a[l]],p=e[d];if(n)var b=s?n(p,g,d,e,t,r):n(g,p,d,t,e,r);if(!(void 0===b?g===p||o(g,p,i,n,r):b)){f=!1;break;}m||(m="constructor"==d);}if(f&&!m){var w=t.constructor,k=e.constructor;w==k||!("constructor"in t)||!("constructor"in e)||"function"==typeof w&&w instanceof w&&"function"==typeof k&&k instanceof k||(f=!1);}return r["delete"](t),r["delete"](e),f;},Nr=Object.prototype.hasOwnProperty;var Or=function Or(t,e,i,n,o,r){var s=Dt(t),a=Dt(e),c=s?"[object Array]":Ie(t),l=a?"[object Array]":Ie(e),d="[object Object]"==(c="[object Arguments]"==c?"[object Object]":c),u="[object Object]"==(l="[object Arguments]"==l?"[object Object]":l),h=c==l;if(h&&Object(Lt.a)(t)){if(!Object(Lt.a)(e))return!1;s=!0,d=!1;}if(h&&!d)return r||(r=new yt()),s||qt(t)?Ar(t,e,i,n,o,r):Pr(t,e,c,i,n,o,r);if(!(1&i)){var f=d&&Nr.call(t,"__wrapped__"),m=u&&Nr.call(e,"__wrapped__");if(f||m){var g=f?t.value():t,p=m?e.value():e;return r||(r=new yt()),o(g,p,i,n,r);}}return!!h&&(r||(r=new yt()),Ir(t,e,i,n,o,r));};var Rr=function t(e,i,n,o,r){return e===i||(null==e||null==i||!p(e)&&!p(i)?e!=e&&i!=i:Or(e,i,n,o,t,r));};var Dr=function Dr(t,e,i){var n=(i="function"==typeof i?i:void 0)?i(t,e):void 0;return void 0===n?Rr(t,e,void 0,i):!!n;};var Lr=/*#__PURE__*/function(_br){_inherits(Lr,_br);var _super11=_createSuper(Lr);function Lr(t){var _this26;_classCallCheck(this,Lr);_this26=_super11.call(this,t),_this26._config={childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0},_this26.domConverter=t.domConverter,_this26.renderer=t._renderer,_this26._domElements=[],_this26._mutationObserver=new window.MutationObserver(_this26._onMutations.bind(_assertThisInitialized(_this26)));return _this26;}_createClass(Lr,[{key:"flush",value:function flush(){this._onMutations(this._mutationObserver.takeRecords());}},{key:"observe",value:function observe(t){this._domElements.push(t),this.isEnabled&&this._mutationObserver.observe(t,this._config);}},{key:"enable",value:function enable(){_get(_getPrototypeOf(Lr.prototype),"enable",this).call(this);var _iterator83=_createForOfIteratorHelper(this._domElements),_step83;try{for(_iterator83.s();!(_step83=_iterator83.n()).done;){var _t64=_step83.value;this._mutationObserver.observe(_t64,this._config);}}catch(err){_iterator83.e(err);}finally{_iterator83.f();}}},{key:"disable",value:function disable(){_get(_getPrototypeOf(Lr.prototype),"disable",this).call(this),this._mutationObserver.disconnect();}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(Lr.prototype),"destroy",this).call(this),this._mutationObserver.disconnect();}},{key:"_onMutations",value:function _onMutations(t){if(0===t.length)return;var e=this.domConverter,i=new Map(),n=new Set();var _iterator84=_createForOfIteratorHelper(t),_step84;try{for(_iterator84.s();!(_step84=_iterator84.n()).done;){var _i75=_step84.value;if("childList"===_i75.type){var _t66=e.mapDomToView(_i75.target);if(_t66&&(_t66.is("uiElement")||_t66.is("rawElement")))continue;_t66&&!this._isBogusBrMutation(_i75)&&n.add(_t66);}}}catch(err){_iterator84.e(err);}finally{_iterator84.f();}var _iterator85=_createForOfIteratorHelper(t),_step85;try{for(_iterator85.s();!(_step85=_iterator85.n()).done;){var _o29=_step85.value;var _t67=e.mapDomToView(_o29.target);if((!_t67||!_t67.is("uiElement")&&!_t67.is("rawElement"))&&"characterData"===_o29.type){var _t68=e.findCorrespondingViewText(_o29.target);_t68&&!n.has(_t68.parent)?i.set(_t68,{type:"text",oldText:_t68.data,newText:$o(_o29.target),node:_t68}):!_t68&&Wo(_o29.target)&&n.add(e.mapDomToView(_o29.target.parentNode));}}}catch(err){_iterator85.e(err);}finally{_iterator85.f();}var o=[];var _iterator86=_createForOfIteratorHelper(i.values()),_step86;try{for(_iterator86.s();!(_step86=_iterator86.n()).done;){var _t69=_step86.value;this.renderer.markToSync("text",_t69.node),o.push(_t69);}}catch(err){_iterator86.e(err);}finally{_iterator86.f();}var _iterator87=_createForOfIteratorHelper(n),_step87;try{for(_iterator87.s();!(_step87=_iterator87.n()).done;){var _t70=_step87.value;var _i76=e.mapViewToDom(_t70),_n36=Array.from(_t70.getChildren()),_r11=Array.from(e.domChildrenToView(_i76,{withChildren:!1}));Dr(_n36,_r11,c)||(this.renderer.markToSync("children",_t70),o.push({type:"children",oldChildren:_n36,newChildren:_r11,node:_t70}));}}catch(err){_iterator87.e(err);}finally{_iterator87.f();}var r=t[0].target;for(;11!==r.nodeType;){r=r.parentNode;}var s=r.getSelection();var a=null;if(s&&s.anchorNode){var _t65=e.domPositionToView(s.anchorNode,s.anchorOffset),_i74=e.domPositionToView(s.focusNode,s.focusOffset);_t65&&_i74&&(a=new no(_t65),a.setFocus(_i74));}function c(t,e){if(!Array.isArray(t))return t===e||!(!t.is("$text")||!e.is("$text"))&&t.data===e.data;}o.length&&(this.document.fire("mutations",o,a),this.view.forceRender());}},{key:"_isBogusBrMutation",value:function _isBogusBrMutation(t){var e=null;return null===t.nextSibling&&0===t.removedNodes.length&&1==t.addedNodes.length&&(e=this.domConverter.domToView(t.addedNodes[0],{withChildren:!1})),e&&e.is("element","br");}}]);return Lr;}(br);var zr=/*#__PURE__*/function(){function zr(t,e,i){_classCallCheck(this,zr);this.view=t,this.document=t.document,this.domEvent=e,this.domTarget=e.target,Vn(this,i);}_createClass(zr,[{key:"target",get:function get(){return this.view.domConverter.mapDomToView(this.domTarget);}},{key:"preventDefault",value:function preventDefault(){this.domEvent.preventDefault();}},{key:"stopPropagation",value:function stopPropagation(){this.domEvent.stopPropagation();}}]);return zr;}();var Vr=/*#__PURE__*/function(_br2){_inherits(Vr,_br2);var _super12=_createSuper(Vr);function Vr(t){var _this27;_classCallCheck(this,Vr);_this27=_super12.call(this,t),_this27.useCapture=!1;return _this27;}_createClass(Vr,[{key:"observe",value:function observe(t){var _this28=this;("string"==typeof this.domEventType?[this.domEventType]:this.domEventType).forEach(function(e){_this28.listenTo(t,e,function(t,e){_this28.isEnabled&&!_this28.checkShouldIgnoreEventFromTarget(e.target)&&_this28.onDomEvent(e);},{useCapture:_this28.useCapture});});}},{key:"fire",value:function fire(t,e,i){this.isEnabled&&this.document.fire(t,new zr(this.view,e,i));}}]);return Vr;}(br);var jr=/*#__PURE__*/function(_Vr){_inherits(jr,_Vr);var _super13=_createSuper(jr);function jr(t){var _this29;_classCallCheck(this,jr);_this29=_super13.call(this,t),_this29.domEventType=["keydown","keyup"];return _this29;}_createClass(jr,[{key:"onDomEvent",value:function onDomEvent(t){this.fire(t.type,t,{keyCode:t.keyCode,altKey:t.altKey,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,metaKey:t.metaKey,get keystroke(){return wo(this);}});}}]);return jr;}(Vr);var Br=function Br(){return n.a.Date.now();},Fr=/\s/;var Hr=function Hr(t){for(var e=t.length;e--&&Fr.test(t.charAt(e));){;}return e;},Ur=/^\s+/;var Wr=function Wr(t){return t?t.slice(0,Hr(t)+1).replace(Ur,""):t;},qr=/^[-+]0x[0-9a-f]+$/i,$r=/^0b[01]+$/i,Yr=/^0o[0-7]+$/i,Gr=parseInt;var Kr=function Kr(t){if("number"==typeof t)return t;if(ji(t))return NaN;if(z(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=z(e)?e+"":e;}if("string"!=typeof t)return 0===t?t:+t;t=Wr(t);var i=$r.test(t);return i||Yr.test(t)?Gr(t.slice(2),i?2:8):qr.test(t)?NaN:+t;},Qr=Math.max,Jr=Math.min;var Zr=function Zr(t,e,i){var n,o,r,s,a,c,l=0,d=!1,u=!1,h=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function f(e){var i=n,r=o;return n=o=void 0,l=e,s=t.apply(r,i);}function m(t){return l=t,a=setTimeout(p,e),d?f(t):s;}function g(t){var i=t-c;return void 0===c||i>=e||i<0||u&&t-l>=r;}function p(){var t=Br();if(g(t))return b(t);a=setTimeout(p,function(t){var i=e-(t-c);return u?Jr(i,r-(t-l)):i;}(t));}function b(t){return a=void 0,h&&n?f(t):(n=o=void 0,s);}function w(){var t=Br(),i=g(t);if(n=arguments,o=this,c=t,i){if(void 0===a)return m(c);if(u)return clearTimeout(a),a=setTimeout(p,e),f(c);}return void 0===a&&(a=setTimeout(p,e)),s;}return e=Kr(e)||0,z(i)&&(d=!!i.leading,r=(u="maxWait"in i)?Qr(Kr(i.maxWait)||0,e):r,h="trailing"in i?!!i.trailing:h),w.cancel=function(){void 0!==a&&clearTimeout(a),l=0,n=c=o=a=void 0;},w.flush=function(){return void 0===a?s:b(Br());},w;};var Xr=/*#__PURE__*/function(_br3){_inherits(Xr,_br3);var _super14=_createSuper(Xr);function Xr(t){var _this30;_classCallCheck(this,Xr);_this30=_super14.call(this,t),_this30._fireSelectionChangeDoneDebounced=Zr(function(t){return _this30.document.fire("selectionChangeDone",t);},200);return _this30;}_createClass(Xr,[{key:"observe",value:function observe(){var _this31=this;var t=this.document;t.on("keydown",function(e,i){t.selection.isFake&&vo(i.keyCode)&&_this31.isEnabled&&(i.preventDefault(),_this31._handleSelectionMove(i.keyCode));},{priority:"lowest"});}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(Xr.prototype),"destroy",this).call(this),this._fireSelectionChangeDoneDebounced.cancel();}},{key:"_handleSelectionMove",value:function _handleSelectionMove(t){var e=this.document.selection,i=new no(e.getRanges(),{backward:e.isBackward,fake:!1});t!=po.arrowleft&&t!=po.arrowup||i.setTo(i.getFirstPosition()),t!=po.arrowright&&t!=po.arrowdown||i.setTo(i.getLastPosition());var n={oldSelection:e,newSelection:i,domSelection:null};this.document.fire("selectionChange",n),this._fireSelectionChangeDoneDebounced(n);}}]);return Xr;}(br);var ts=/*#__PURE__*/function(_br4){_inherits(ts,_br4);var _super15=_createSuper(ts);function ts(t){var _this32;_classCallCheck(this,ts);_this32=_super15.call(this,t),_this32.mutationObserver=t.getObserver(Lr),_this32.selection=_this32.document.selection,_this32.domConverter=t.domConverter,_this32._documents=new WeakSet(),_this32._fireSelectionChangeDoneDebounced=Zr(function(t){return _this32.document.fire("selectionChangeDone",t);},200),_this32._clearInfiniteLoopInterval=setInterval(function(){return _this32._clearInfiniteLoop();},1e3),_this32._loopbackCounter=0;return _this32;}_createClass(ts,[{key:"observe",value:function observe(t){var _this33=this;var e=t.ownerDocument;this._documents.has(e)||(this.listenTo(e,"selectionchange",function(t,i){_this33._handleSelectionChange(i,e);}),this._documents.add(e));}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(ts.prototype),"destroy",this).call(this),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel();}},{key:"_handleSelectionChange",value:function _handleSelectionChange(t,e){if(!this.isEnabled)return;var i=e.getElementsByTagName("*");i=Array.prototype.slice.call(i).find(function(t){return!!t.shadowRoot;}).shadowRoot;var n=i.getSelection();if(this.checkShouldIgnoreEventFromTarget(n.anchorNode))return;this.mutationObserver.flush();var o=this.domConverter.domSelectionToView(n);if(0!=o.rangeCount){if(this.view.hasDomSelection=!0,!(this.selection.isEqual(o)&&this.domConverter.isDomSelectionCorrect(n)||++this._loopbackCounter>60))if(this.selection.isSimilar(o))this.view.forceRender();else{var _t71={oldSelection:this.selection,newSelection:o,domSelection:n};this.document.fire("selectionChange",_t71),this._fireSelectionChangeDoneDebounced(_t71);}}else this.view.hasDomSelection=!1;}},{key:"_clearInfiniteLoop",value:function _clearInfiniteLoop(){this._loopbackCounter=0;}}]);return ts;}(br);var es=/*#__PURE__*/function(_Vr2){_inherits(es,_Vr2);var _super16=_createSuper(es);function es(t){var _this34;_classCallCheck(this,es);_this34=_super16.call(this,t),_this34.domEventType=["focus","blur"],_this34.useCapture=!0;var e=_this34.document;e.on("focus",function(){e.isFocused=!0,_this34._renderTimeoutId=setTimeout(function(){return t.forceRender();},50);}),e.on("blur",function(i,n){var o=e.selection.editableElement;null!==o&&o!==n.target||(e.isFocused=!1,t.forceRender());});return _this34;}_createClass(es,[{key:"onDomEvent",value:function onDomEvent(t){this.fire(t.type,t);}},{key:"destroy",value:function destroy(){this._renderTimeoutId&&clearTimeout(this._renderTimeoutId),_get(_getPrototypeOf(es.prototype),"destroy",this).call(this);}}]);return es;}(Vr);var is=/*#__PURE__*/function(_Vr3){_inherits(is,_Vr3);var _super17=_createSuper(is);function is(t){var _this35;_classCallCheck(this,is);_this35=_super17.call(this,t),_this35.domEventType=["compositionstart","compositionupdate","compositionend"];var e=_this35.document;e.on("compositionstart",function(){e.isComposing=!0;}),e.on("compositionend",function(){e.isComposing=!1;});return _this35;}_createClass(is,[{key:"onDomEvent",value:function onDomEvent(t){this.fire(t.type,t);}}]);return is;}(Vr);var ns=/*#__PURE__*/function(_Vr4){_inherits(ns,_Vr4);var _super18=_createSuper(ns);function ns(t){var _this36;_classCallCheck(this,ns);_this36=_super18.call(this,t),_this36.domEventType=["beforeinput"];return _this36;}_createClass(ns,[{key:"onDomEvent",value:function onDomEvent(t){this.fire(t.type,t);}}]);return ns;}(Vr);function os(t){return"[object Range]"==Object.prototype.toString.apply(t);}function rs(t){if(1!==t.nodeType)return;var e=t.ownerDocument.defaultView.getComputedStyle(t);return{top:parseInt(e.borderTopWidth,10),right:parseInt(e.borderRightWidth,10),bottom:parseInt(e.borderBottomWidth,10),left:parseInt(e.borderLeftWidth,10)};}var ss=["top","right","bottom","left","width","height"];var as=/*#__PURE__*/function(){function as(t){_classCallCheck(this,as);var e=os(t);if(Object.defineProperty(this,"_source",{value:t._source||t,writable:!0,enumerable:!1}),ii(t)||e){if(e){var _e72=as.getDomRangeRects(t);cs(this,as.getBoundingRect(_e72));}else cs(this,t.getBoundingClientRect());}else if(fr(t)){var _e73=t.innerWidth,_i77=t.innerHeight;cs(this,{top:0,right:_e73,bottom:_i77,left:0,width:_e73,height:_i77});}else cs(this,t);}_createClass(as,[{key:"clone",value:function clone(){return new as(this);}},{key:"moveTo",value:function moveTo(t,e){return this.top=e,this.right=t+this.width,this.bottom=e+this.height,this.left=t,this;}},{key:"moveBy",value:function moveBy(t,e){return this.top+=e,this.right+=t,this.left+=t,this.bottom+=e,this;}},{key:"getIntersection",value:function getIntersection(t){var e={top:Math.max(this.top,t.top),right:Math.min(this.right,t.right),bottom:Math.min(this.bottom,t.bottom),left:Math.max(this.left,t.left)};return e.width=e.right-e.left,e.height=e.bottom-e.top,e.width<0||e.height<0?null:new as(e);}},{key:"getIntersectionArea",value:function getIntersectionArea(t){var e=this.getIntersection(t);return e?e.getArea():0;}},{key:"getArea",value:function getArea(){return this.width*this.height;}},{key:"getVisible",value:function getVisible(){var t=this._source;var e=this.clone();if(!ls(t)){var _i78=t.parentNode||t.commonAncestorContainer;for(;_i78&&!ls(_i78);){var _t72=new as(_i78),_n37=e.getIntersection(_t72);if(!_n37)return null;_n37.getArea()<e.getArea()&&(e=_n37),_i78=_i78.parentNode;}}return e;}},{key:"isEqual",value:function isEqual(t){var _iterator88=_createForOfIteratorHelper(ss),_step88;try{for(_iterator88.s();!(_step88=_iterator88.n()).done;){var _e74=_step88.value;if(this[_e74]!==t[_e74])return!1;}}catch(err){_iterator88.e(err);}finally{_iterator88.f();}return!0;}},{key:"contains",value:function contains(t){var e=this.getIntersection(t);return!(!e||!e.isEqual(t));}},{key:"excludeScrollbarsAndBorders",value:function excludeScrollbarsAndBorders(){var t=this._source;var e,i,n;if(1===t.nodeType){if(fr(t))e=t.innerWidth-t.document.documentElement.clientWidth,i=t.innerHeight-t.document.documentElement.clientHeight,n=t.getComputedStyle(t.document.documentElement).direction;else{var _o30=rs(this._source);e=t.offsetWidth-t.clientWidth-_o30.left-_o30.right,i=t.offsetHeight-t.clientHeight-_o30.top-_o30.bottom,n=t.ownerDocument.defaultView.getComputedStyle(t).direction,this.left+=_o30.left,this.top+=_o30.top,this.right-=_o30.right,this.bottom-=_o30.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top;}return this.width-=e,"ltr"===n?this.right-=e:this.left+=e,this.height-=i,this.bottom-=i,this;}}}],[{key:"getDomRangeRects",value:function getDomRangeRects(t){var e=[],i=Array.from(t.getClientRects());if(i.length){var _iterator89=_createForOfIteratorHelper(i),_step89;try{for(_iterator89.s();!(_step89=_iterator89.n()).done;){var _t73=_step89.value;e.push(new as(_t73));}}catch(err){_iterator89.e(err);}finally{_iterator89.f();}}else{var _i79=t.startContainer;Bo(_i79)&&(_i79=_i79.parentNode);var _n38=new as(_i79.getBoundingClientRect());_n38.right=_n38.left,_n38.width=0,e.push(_n38);}return e;}},{key:"getBoundingRect",value:function getBoundingRect(t){var e={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY};var i=0;var _iterator90=_createForOfIteratorHelper(t),_step90;try{for(_iterator90.s();!(_step90=_iterator90.n()).done;){var _n39=_step90.value;i++,e.left=Math.min(e.left,_n39.left),e.top=Math.min(e.top,_n39.top),e.right=Math.max(e.right,_n39.right),e.bottom=Math.max(e.bottom,_n39.bottom);}}catch(err){_iterator90.e(err);}finally{_iterator90.f();}return 0==i?null:(e.width=e.right-e.left,e.height=e.bottom-e.top,new as(e));}}]);return as;}();function cs(t,e){var _iterator91=_createForOfIteratorHelper(ss),_step91;try{for(_iterator91.s();!(_step91=_iterator91.n()).done;){var _i80=_step91.value;t[_i80]=e[_i80];}}catch(err){_iterator91.e(err);}finally{_iterator91.f();}}function ls(t){return!!ii(t)&&t===t.ownerDocument.body;}function ds(_ref11){var t=_ref11.target,_ref11$viewportOffset=_ref11.viewportOffset,e=_ref11$viewportOffset===void 0?0:_ref11$viewportOffset;var i=bs(t);var n=i,o=null;for(;n;){var _r12=void 0;_r12=ws(n==i?t:o),hs(_r12,function(){return ks(t,n);});var _s8=ks(t,n);if(us(n,_s8,e),n.parent!=n){if(o=n.frameElement,n=n.parent,!o)return;}else n=null;}}function us(t,e,i){var n=e.clone().moveBy(0,i),o=e.clone().moveBy(0,-i),r=new as(t).excludeScrollbarsAndBorders();if(r&&![o,n].every(function(t){return r.contains(t);})){var _s9=t.scrollX,_a7=t.scrollY;ms(o,r)?_a7-=r.top-e.top+i:fs(n,r)&&(_a7+=e.bottom-r.bottom+i),gs(e,r)?_s9-=r.left-e.left+i:ps(e,r)&&(_s9+=e.right-r.right+i),t.scrollTo(_s9,_a7);}}function hs(t,e){var i=bs(t);var n,o;for(;t!=i.document.body&&1===t.nodeType;){o=e(),n=new as(t).excludeScrollbarsAndBorders(),n.contains(o)||(ms(o,n)?t.scrollTop-=n.top-o.top:fs(o,n)&&(t.scrollTop+=o.bottom-n.bottom),gs(o,n)?t.scrollLeft-=n.left-o.left:ps(o,n)&&(t.scrollLeft+=o.right-n.right)),t=t.parentNode;}}function fs(t,e){return t.bottom>e.bottom;}function ms(t,e){return t.top<e.top;}function gs(t,e){return t.left<e.left;}function ps(t,e){return t.right>e.right;}function bs(t){return os(t)?t.startContainer.ownerDocument.defaultView:t.ownerDocument.defaultView;}function ws(t){if(os(t)){var _e75=t.commonAncestorContainer;return Bo(_e75)&&(_e75=_e75.parentNode),_e75;}return t.parentNode;}function ks(t,e){var i=bs(t),n=new as(t);if(i===e)return n;{var _t74=i;for(;_t74!=e;){var _e76=_t74.frameElement,_i81=new as(_e76).excludeScrollbarsAndBorders();n.moveBy(_i81.left,_i81.top),_t74=_t74.parent;}}return n;}Object.assign({},{scrollViewportToShowTarget:ds,scrollAncestorsToShowTarget:function scrollAncestorsToShowTarget(t){hs(ws(t),function(){return new as(t);});}});var _s=/*#__PURE__*/function(){function _s(t){var _this37=this;_classCallCheck(this,_s);this.document=new ro(t),this.domConverter=new lr(this.document),this.domRoots=new Map(),this.set("isRenderingInProgress",!1),this.set("hasDomSelection",!1),this._renderer=new er(this.domConverter,this.document.selection),this._renderer.bind("isFocused").to(this.document),this._initialDomRootAttributes=new WeakMap(),this._observers=new Map(),this._ongoingChange=!1,this._postFixersInProgress=!1,this._renderingDisabled=!1,this._hasChangedSinceTheLastRendering=!1,this._writer=new Mo(this.document),this.addObserver(Lr),this.addObserver(ts),this.addObserver(es),this.addObserver(jr),this.addObserver(Xr),this.addObserver(is),fo.isAndroid&&this.addObserver(ns),this.document.on("keydown",Yo),To(this),this.on("render",function(){_this37._render(),_this37.document.fire("layoutChanged"),_this37._hasChangedSinceTheLastRendering=!1;}),this.listenTo(this.document.selection,"change",function(){_this37._hasChangedSinceTheLastRendering=!0;});}_createClass(_s,[{key:"attachDomRoot",value:function attachDomRoot(t){var _this38=this;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"main";var i=this.document.getRoot(e);i._name=t.tagName.toLowerCase();var n={};for(var _i82=0,_Array$from=Array.from(t.attributes);_i82<_Array$from.length;_i82++){var _Array$from$_i=_Array$from[_i82],_e77=_Array$from$_i.name,_o31=_Array$from$_i.value;n[_e77]=_o31,"class"===_e77?this._writer.addClass(_o31.split(" "),i):this._writer.setAttribute(_e77,_o31,i);}this._initialDomRootAttributes.set(t,n);var o=function o(){_this38._writer.setAttribute("contenteditable",!i.isReadOnly,i),i.isReadOnly?_this38._writer.addClass("ck-read-only",i):_this38._writer.removeClass("ck-read-only",i);};o(),this.domRoots.set(e,t),this.domConverter.bindElements(t,i),this._renderer.markToSync("children",i),this._renderer.markToSync("attributes",i),this._renderer.domDocuments.add(t.ownerDocument),i.on("change:children",function(t,e){return _this38._renderer.markToSync("children",e);}),i.on("change:attributes",function(t,e){return _this38._renderer.markToSync("attributes",e);}),i.on("change:text",function(t,e){return _this38._renderer.markToSync("text",e);}),i.on("change:isReadOnly",function(){return _this38.change(o);}),i.on("change",function(){_this38._hasChangedSinceTheLastRendering=!0;});var _iterator92=_createForOfIteratorHelper(this._observers.values()),_step92;try{for(_iterator92.s();!(_step92=_iterator92.n()).done;){var _i83=_step92.value;_i83.observe(t,e);}}catch(err){_iterator92.e(err);}finally{_iterator92.f();}}},{key:"detachDomRoot",value:function detachDomRoot(t){var e=this.domRoots.get(t);Array.from(e.attributes).forEach(function(_ref12){var t=_ref12.name;return e.removeAttribute(t);});var i=this._initialDomRootAttributes.get(e);for(var _t75 in i){e.setAttribute(_t75,i[_t75]);}this.domRoots["delete"](t),this.domConverter.unbindDomElement(e);}},{key:"getDomRoot",value:function getDomRoot(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"main";return this.domRoots.get(t);}},{key:"addObserver",value:function addObserver(t){var e=this._observers.get(t);if(e)return e;e=new t(this),this._observers.set(t,e);var _iterator93=_createForOfIteratorHelper(this.domRoots),_step93;try{for(_iterator93.s();!(_step93=_iterator93.n()).done;){var _step93$value=_slicedToArray(_step93.value,2),_t76=_step93$value[0],_i84=_step93$value[1];e.observe(_i84,_t76);}}catch(err){_iterator93.e(err);}finally{_iterator93.f();}return e.enable(),e;}},{key:"getObserver",value:function getObserver(t){return this._observers.get(t);}},{key:"disableObservers",value:function disableObservers(){var _iterator94=_createForOfIteratorHelper(this._observers.values()),_step94;try{for(_iterator94.s();!(_step94=_iterator94.n()).done;){var _t77=_step94.value;_t77.disable();}}catch(err){_iterator94.e(err);}finally{_iterator94.f();}}},{key:"enableObservers",value:function enableObservers(){var _iterator95=_createForOfIteratorHelper(this._observers.values()),_step95;try{for(_iterator95.s();!(_step95=_iterator95.n()).done;){var _t78=_step95.value;_t78.enable();}}catch(err){_iterator95.e(err);}finally{_iterator95.f();}}},{key:"scrollToTheSelection",value:function scrollToTheSelection(){var t=this.document.selection.getFirstRange();t&&ds({target:this.domConverter.viewRangeToDom(t),viewportOffset:20});}},{key:"focus",value:function focus(){if(!this.document.isFocused){var _t79=this.document.selection.editableElement;_t79&&(this.domConverter.focus(_t79),this.forceRender());}}},{key:"change",value:function change(t){if(this.isRenderingInProgress||this._postFixersInProgress)throw new ui.a("cannot-change-view-tree",this);try{if(this._ongoingChange)return t(this._writer);this._ongoingChange=!0;var _e78=t(this._writer);return this._ongoingChange=!1,!this._renderingDisabled&&this._hasChangedSinceTheLastRendering&&(this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render")),_e78;}catch(t){ui.a.rethrowUnexpectedError(t,this);}}},{key:"forceRender",value:function forceRender(){this._hasChangedSinceTheLastRendering=!0,this.change(function(){});}},{key:"destroy",value:function destroy(){var _iterator96=_createForOfIteratorHelper(this._observers.values()),_step96;try{for(_iterator96.s();!(_step96=_iterator96.n()).done;){var _t80=_step96.value;_t80.destroy();}}catch(err){_iterator96.e(err);}finally{_iterator96.f();}this.document.destroy(),this.stopListening();}},{key:"createPositionAt",value:function createPositionAt(t,e){return Xn._createAt(t,e);}},{key:"createPositionAfter",value:function createPositionAfter(t){return Xn._createAfter(t);}},{key:"createPositionBefore",value:function createPositionBefore(t){return Xn._createBefore(t);}},{key:"createRange",value:function createRange(t,e){return new to(t,e);}},{key:"createRangeOn",value:function createRangeOn(t){return to._createOn(t);}},{key:"createRangeIn",value:function createRangeIn(t){return to._createIn(t);}},{key:"createSelection",value:function createSelection(t,e,i){return new no(t,e,i);}},{key:"_disableRendering",value:function _disableRendering(t){this._renderingDisabled=t,0==t&&this.change(function(){});}},{key:"_render",value:function _render(){this.isRenderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this.isRenderingInProgress=!1;}}]);return _s;}();yi(_s,Un);var vs=/*#__PURE__*/function(){function vs(t){_classCallCheck(this,vs);this.parent=null,this._attrs=Li(t);}_createClass(vs,[{key:"index",get:function get(){var t;if(!this.parent)return null;if(null===(t=this.parent.getChildIndex(this)))throw new ui.a("model-node-not-found-in-parent",this);return t;}},{key:"startOffset",get:function get(){var t;if(!this.parent)return null;if(null===(t=this.parent.getChildStartOffset(this)))throw new ui.a("model-node-not-found-in-parent",this);return t;}},{key:"offsetSize",get:function get(){return 1;}},{key:"endOffset",get:function get(){return this.parent?this.startOffset+this.offsetSize:null;}},{key:"nextSibling",get:function get(){var t=this.index;return null!==t&&this.parent.getChild(t+1)||null;}},{key:"previousSibling",get:function get(){var t=this.index;return null!==t&&this.parent.getChild(t-1)||null;}},{key:"root",get:function get(){var t=this;for(;t.parent;){t=t.parent;}return t;}},{key:"isAttached",value:function isAttached(){return this.root.is("rootElement");}},{key:"getPath",value:function getPath(){var t=[];var e=this;for(;e.parent;){t.unshift(e.startOffset),e=e.parent;}return t;}},{key:"getAncestors",value:function getAncestors(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{includeSelf:!1,parentFirst:!1};var e=[];var i=t.includeSelf?this:this.parent;for(;i;){e[t.parentFirst?"push":"unshift"](i),i=i.parent;}return e;}},{key:"getCommonAncestor",value:function getCommonAncestor(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=this.getAncestors(e),n=t.getAncestors(e);var o=0;for(;i[o]==n[o]&&i[o];){o++;}return 0===o?null:i[o-1];}},{key:"isBefore",value:function isBefore(t){if(this==t)return!1;if(this.root!==t.root)return!1;var e=this.getPath(),i=t.getPath(),n=Ii(e,i);switch(n){case"prefix":return!0;case"extension":return!1;default:return e[n]<i[n];}}},{key:"isAfter",value:function isAfter(t){return this!=t&&this.root===t.root&&!this.isBefore(t);}},{key:"hasAttribute",value:function hasAttribute(t){return this._attrs.has(t);}},{key:"getAttribute",value:function getAttribute(t){return this._attrs.get(t);}},{key:"getAttributes",value:function getAttributes(){return this._attrs.entries();}},{key:"getAttributeKeys",value:function getAttributeKeys(){return this._attrs.keys();}},{key:"toJSON",value:function toJSON(){var t={};return this._attrs.size&&(t.attributes=Array.from(this._attrs).reduce(function(t,e){return t[e[0]]=e[1],t;},{})),t;}},{key:"is",value:function is(t){return"node"===t||"model:node"===t;}},{key:"_clone",value:function _clone(){return new vs(this._attrs);}},{key:"_remove",value:function _remove(){this.parent._removeChildren(this.index);}},{key:"_setAttribute",value:function _setAttribute(t,e){this._attrs.set(t,e);}},{key:"_setAttributesTo",value:function _setAttributesTo(t){this._attrs=Li(t);}},{key:"_removeAttribute",value:function _removeAttribute(t){return this._attrs["delete"](t);}},{key:"_clearAttributes",value:function _clearAttributes(){this._attrs.clear();}}]);return vs;}();var ys=/*#__PURE__*/function(_vs){_inherits(ys,_vs);var _super19=_createSuper(ys);function ys(t,e){var _this39;_classCallCheck(this,ys);_this39=_super19.call(this,e),_this39._data=t||"";return _this39;}_createClass(ys,[{key:"offsetSize",get:function get(){return this.data.length;}},{key:"data",get:function get(){return this._data;}},{key:"is",value:function is(t){return"$text"===t||"model:$text"===t||"text"===t||"model:text"===t||"node"===t||"model:node"===t;}},{key:"toJSON",value:function toJSON(){var t=_get(_getPrototypeOf(ys.prototype),"toJSON",this).call(this);return t.data=this.data,t;}},{key:"_clone",value:function _clone(){return new ys(this.data,this.getAttributes());}}],[{key:"fromJSON",value:function fromJSON(t){return new ys(t.data,t.attributes);}}]);return ys;}(vs);var xs=/*#__PURE__*/function(){function xs(t,e,i){_classCallCheck(this,xs);if(this.textNode=t,e<0||e>t.offsetSize)throw new ui.a("model-textproxy-wrong-offsetintext",this);if(i<0||e+i>t.offsetSize)throw new ui.a("model-textproxy-wrong-length",this);this.data=t.data.substring(e,e+i),this.offsetInText=e;}_createClass(xs,[{key:"startOffset",get:function get(){return null!==this.textNode.startOffset?this.textNode.startOffset+this.offsetInText:null;}},{key:"offsetSize",get:function get(){return this.data.length;}},{key:"endOffset",get:function get(){return null!==this.startOffset?this.startOffset+this.offsetSize:null;}},{key:"isPartial",get:function get(){return this.offsetSize!==this.textNode.offsetSize;}},{key:"parent",get:function get(){return this.textNode.parent;}},{key:"root",get:function get(){return this.textNode.root;}},{key:"is",value:function is(t){return"$textProxy"===t||"model:$textProxy"===t||"textProxy"===t||"model:textProxy"===t;}},{key:"getPath",value:function getPath(){var t=this.textNode.getPath();return t.length>0&&(t[t.length-1]+=this.offsetInText),t;}},{key:"getAncestors",value:function getAncestors(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{includeSelf:!1,parentFirst:!1};var e=[];var i=t.includeSelf?this:this.parent;for(;i;){e[t.parentFirst?"push":"unshift"](i),i=i.parent;}return e;}},{key:"hasAttribute",value:function hasAttribute(t){return this.textNode.hasAttribute(t);}},{key:"getAttribute",value:function getAttribute(t){return this.textNode.getAttribute(t);}},{key:"getAttributes",value:function getAttributes(){return this.textNode.getAttributes();}},{key:"getAttributeKeys",value:function getAttributeKeys(){return this.textNode.getAttributeKeys();}}]);return xs;}();var As=/*#__PURE__*/function(){function As(t){_classCallCheck(this,As);this._nodes=[],t&&this._insertNodes(0,t);}_createClass(As,[{key:Symbol.iterator,value:function value(){return this._nodes[Symbol.iterator]();}},{key:"length",get:function get(){return this._nodes.length;}},{key:"maxOffset",get:function get(){return this._nodes.reduce(function(t,e){return t+e.offsetSize;},0);}},{key:"getNode",value:function getNode(t){return this._nodes[t]||null;}},{key:"getNodeIndex",value:function getNodeIndex(t){var e=this._nodes.indexOf(t);return-1==e?null:e;}},{key:"getNodeStartOffset",value:function getNodeStartOffset(t){var e=this.getNodeIndex(t);return null===e?null:this._nodes.slice(0,e).reduce(function(t,e){return t+e.offsetSize;},0);}},{key:"indexToOffset",value:function indexToOffset(t){if(t==this._nodes.length)return this.maxOffset;var e=this._nodes[t];if(!e)throw new ui.a("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(e);}},{key:"offsetToIndex",value:function offsetToIndex(t){var e=0;var _iterator97=_createForOfIteratorHelper(this._nodes),_step97;try{for(_iterator97.s();!(_step97=_iterator97.n()).done;){var _i85=_step97.value;if(t>=e&&t<e+_i85.offsetSize)return this.getNodeIndex(_i85);e+=_i85.offsetSize;}}catch(err){_iterator97.e(err);}finally{_iterator97.f();}if(e!=t)throw new ui.a("model-nodelist-offset-out-of-bounds",this,{offset:t,nodeList:this});return this.length;}},{key:"_insertNodes",value:function _insertNodes(t,e){var _this$_nodes;var _iterator98=_createForOfIteratorHelper(e),_step98;try{for(_iterator98.s();!(_step98=_iterator98.n()).done;){var _t81=_step98.value;if(!(_t81 instanceof vs))throw new ui.a("model-nodelist-insertnodes-not-node",this);}}catch(err){_iterator98.e(err);}finally{_iterator98.f();}(_this$_nodes=this._nodes).splice.apply(_this$_nodes,[t,0].concat(_toConsumableArray(e)));}},{key:"_removeNodes",value:function _removeNodes(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;return this._nodes.splice(t,e);}},{key:"toJSON",value:function toJSON(){return this._nodes.map(function(t){return t.toJSON();});}}]);return As;}();var Ts=/*#__PURE__*/function(_vs2){_inherits(Ts,_vs2);var _super20=_createSuper(Ts);function Ts(t,e,i){var _this40;_classCallCheck(this,Ts);_this40=_super20.call(this,e),_this40.name=t,_this40._children=new As(),i&&_this40._insertChild(0,i);return _this40;}_createClass(Ts,[{key:"childCount",get:function get(){return this._children.length;}},{key:"maxOffset",get:function get(){return this._children.maxOffset;}},{key:"isEmpty",get:function get(){return 0===this.childCount;}},{key:"is",value:function is(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return e?e===this.name&&("element"===t||"model:element"===t):"element"===t||"model:element"===t||"node"===t||"model:node"===t;}},{key:"getChild",value:function getChild(t){return this._children.getNode(t);}},{key:"getChildren",value:function getChildren(){return this._children[Symbol.iterator]();}},{key:"getChildIndex",value:function getChildIndex(t){return this._children.getNodeIndex(t);}},{key:"getChildStartOffset",value:function getChildStartOffset(t){return this._children.getNodeStartOffset(t);}},{key:"offsetToIndex",value:function offsetToIndex(t){return this._children.offsetToIndex(t);}},{key:"getNodeByPath",value:function getNodeByPath(t){var e=this;var _iterator99=_createForOfIteratorHelper(t),_step99;try{for(_iterator99.s();!(_step99=_iterator99.n()).done;){var _i86=_step99.value;e=e.getChild(e.offsetToIndex(_i86));}}catch(err){_iterator99.e(err);}finally{_iterator99.f();}return e;}},{key:"findAncestor",value:function findAncestor(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{includeSelf:!1};var i=e.includeSelf?this:this.parent;for(;i;){if(i.name===t)return i;i=i.parent;}return null;}},{key:"toJSON",value:function toJSON(){var t=_get(_getPrototypeOf(Ts.prototype),"toJSON",this).call(this);if(t.name=this.name,this._children.length>0){t.children=[];var _iterator100=_createForOfIteratorHelper(this._children),_step100;try{for(_iterator100.s();!(_step100=_iterator100.n()).done;){var _e79=_step100.value;t.children.push(_e79.toJSON());}}catch(err){_iterator100.e(err);}finally{_iterator100.f();}}return t;}},{key:"_clone",value:function _clone(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:!1;var e=t?Array.from(this._children).map(function(t){return t._clone(!0);}):null;return new Ts(this.name,this.getAttributes(),e);}},{key:"_appendChild",value:function _appendChild(t){this._insertChild(this.childCount,t);}},{key:"_insertChild",value:function _insertChild(t,e){var i=function(t){if("string"==typeof t)return[new ys(t)];vi(t)||(t=[t]);return Array.from(t).map(function(t){return"string"==typeof t?new ys(t):t instanceof xs?new ys(t.data,t.getAttributes()):t;});}(e);var _iterator101=_createForOfIteratorHelper(i),_step101;try{for(_iterator101.s();!(_step101=_iterator101.n()).done;){var _t82=_step101.value;null!==_t82.parent&&_t82._remove(),_t82.parent=this;}}catch(err){_iterator101.e(err);}finally{_iterator101.f();}this._children._insertNodes(t,i);}},{key:"_removeChildren",value:function _removeChildren(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var i=this._children._removeNodes(t,e);var _iterator102=_createForOfIteratorHelper(i),_step102;try{for(_iterator102.s();!(_step102=_iterator102.n()).done;){var _t83=_step102.value;_t83.parent=null;}}catch(err){_iterator102.e(err);}finally{_iterator102.f();}return i;}}],[{key:"fromJSON",value:function fromJSON(t){var e=null;if(t.children){e=[];var _iterator103=_createForOfIteratorHelper(t.children),_step103;try{for(_iterator103.s();!(_step103=_iterator103.n()).done;){var _i87=_step103.value;_i87.name?e.push(Ts.fromJSON(_i87)):e.push(ys.fromJSON(_i87));}}catch(err){_iterator103.e(err);}finally{_iterator103.f();}}return new Ts(t.name,t.attributes,e);}}]);return Ts;}(vs);var Cs=/*#__PURE__*/function(){function Cs(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,Cs);if(!t.boundaries&&!t.startPosition)throw new ui.a("model-tree-walker-no-start-position",null);var e=t.direction||"forward";if("forward"!=e&&"backward"!=e)throw new ui.a("model-tree-walker-unknown-direction",t,{direction:e});this.direction=e,this.boundaries=t.boundaries||null,t.startPosition?this.position=t.startPosition.clone():this.position=Es._createAt(this.boundaries["backward"==this.direction?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!t.singleCharacters,this.shallow=!!t.shallow,this.ignoreElementEnd=!!t.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent;}_createClass(Cs,[{key:Symbol.iterator,value:function value(){return this;}},{key:"skip",value:function skip(t){var e,i,n,o;do{var _this$next2;n=this.position,o=this._visitedParent,(_this$next2=this.next(),e=_this$next2.done,i=_this$next2.value,_this$next2);}while(!e&&t(i));e||(this.position=n,this._visitedParent=o);}},{key:"next",value:function next(){return"forward"==this.direction?this._next():this._previous();}},{key:"_next",value:function _next(){var t=this.position,e=this.position.clone(),i=this._visitedParent;if(null===i.parent&&e.offset===i.maxOffset)return{done:!0};if(i===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0};var n=e.parent,o=Ps(e,n),r=o||Ms(e,n,o);if(r instanceof Ts)return this.shallow?e.offset++:(e.path.push(0),this._visitedParent=r),this.position=e,Ss("elementStart",r,t,e,1);if(r instanceof ys){var _n40;if(this.singleCharacters)_n40=1;else{var _t84=r.endOffset;this._boundaryEndParent==i&&this.boundaries.end.offset<_t84&&(_t84=this.boundaries.end.offset),_n40=_t84-e.offset;}var _o32=e.offset-r.startOffset,_s10=new xs(r,_o32,_n40);return e.offset+=_n40,this.position=e,Ss("text",_s10,t,e,_n40);}return e.path.pop(),e.offset++,this.position=e,this._visitedParent=i.parent,this.ignoreElementEnd?this._next():Ss("elementEnd",i,t,e);}},{key:"_previous",value:function _previous(){var t=this.position,e=this.position.clone(),i=this._visitedParent;if(null===i.parent&&0===e.offset)return{done:!0};if(i==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0};var n=e.parent,o=Ps(e,n),r=o||Is(e,n,o);if(r instanceof Ts)return e.offset--,this.shallow?(this.position=e,Ss("elementStart",r,t,e,1)):(e.path.push(r.maxOffset),this.position=e,this._visitedParent=r,this.ignoreElementEnd?this._previous():Ss("elementEnd",r,t,e));if(r instanceof ys){var _n41;if(this.singleCharacters)_n41=1;else{var _t85=r.startOffset;this._boundaryStartParent==i&&this.boundaries.start.offset>_t85&&(_t85=this.boundaries.start.offset),_n41=e.offset-_t85;}var _o33=e.offset-r.startOffset,_s11=new xs(r,_o33-_n41,_n41);return e.offset-=_n41,this.position=e,Ss("text",_s11,t,e,_n41);}return e.path.pop(),this.position=e,this._visitedParent=i.parent,Ss("elementStart",i,t,e,1);}}]);return Cs;}();function Ss(t,e,i,n,o){return{done:!1,value:{type:t,item:e,previousPosition:i,nextPosition:n,length:o}};}var Es=/*#__PURE__*/function(){function Es(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"toNone";_classCallCheck(this,Es);if(!t.is("element")&&!t.is("documentFragment"))throw new ui.a("model-position-root-invalid",t);if(!(e instanceof Array)||0===e.length)throw new ui.a("model-position-path-incorrect-format",t,{path:e});t.is("rootElement")?e=e.slice():(e=[].concat(_toConsumableArray(t.getPath()),_toConsumableArray(e)),t=t.root),this.root=t,this.path=e,this.stickiness=i;}_createClass(Es,[{key:"offset",get:function get(){return this.path[this.path.length-1];},set:function set(t){this.path[this.path.length-1]=t;}},{key:"parent",get:function get(){var t=this.root;for(var _e80=0;_e80<this.path.length-1;_e80++){if(t=t.getChild(t.offsetToIndex(this.path[_e80])),!t)throw new ui.a("model-position-path-incorrect",this,{position:this});}if(t.is("$text"))throw new ui.a("model-position-path-incorrect",this,{position:this});return t;}},{key:"index",get:function get(){return this.parent.offsetToIndex(this.offset);}},{key:"textNode",get:function get(){return Ps(this,this.parent);}},{key:"nodeAfter",get:function get(){var t=this.parent;return Ms(this,t,Ps(this,t));}},{key:"nodeBefore",get:function get(){var t=this.parent;return Is(this,t,Ps(this,t));}},{key:"isAtStart",get:function get(){return 0===this.offset;}},{key:"isAtEnd",get:function get(){return this.offset==this.parent.maxOffset;}},{key:"compareWith",value:function compareWith(t){if(this.root!=t.root)return"different";var e=Ii(this.path,t.path);switch(e){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[e]<t.path[e]?"before":"after";}}},{key:"getLastMatchingPosition",value:function getLastMatchingPosition(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};e.startPosition=this;var i=new Cs(e);return i.skip(t),i.position;}},{key:"getParentPath",value:function getParentPath(){return this.path.slice(0,-1);}},{key:"getAncestors",value:function getAncestors(){var t=this.parent;return t.is("documentFragment")?[t]:t.getAncestors({includeSelf:!0});}},{key:"findAncestor",value:function findAncestor(t){var e=this.parent;return e.is("element")?e.findAncestor(t,{includeSelf:!0}):null;}},{key:"getCommonPath",value:function getCommonPath(t){if(this.root!=t.root)return[];var e=Ii(this.path,t.path),i="string"==typeof e?Math.min(this.path.length,t.path.length):e;return this.path.slice(0,i);}},{key:"getCommonAncestor",value:function getCommonAncestor(t){var e=this.getAncestors(),i=t.getAncestors();var n=0;for(;e[n]==i[n]&&e[n];){n++;}return 0===n?null:e[n-1];}},{key:"getShiftedBy",value:function getShiftedBy(t){var e=this.clone(),i=e.offset+t;return e.offset=i<0?0:i,e;}},{key:"isAfter",value:function isAfter(t){return"after"==this.compareWith(t);}},{key:"isBefore",value:function isBefore(t){return"before"==this.compareWith(t);}},{key:"isEqual",value:function isEqual(t){return"same"==this.compareWith(t);}},{key:"isTouching",value:function isTouching(t){var e=null,i=null;switch(this.compareWith(t)){case"same":return!0;case"before":e=Es._createAt(this),i=Es._createAt(t);break;case"after":e=Es._createAt(t),i=Es._createAt(this);break;default:return!1;}var n=e.parent;for(;e.path.length+i.path.length;){if(e.isEqual(i))return!0;if(e.path.length>i.path.length){if(e.offset!==n.maxOffset)return!1;e.path=e.path.slice(0,-1),n=n.parent,e.offset++;}else{if(0!==i.offset)return!1;i.path=i.path.slice(0,-1);}}}},{key:"is",value:function is(t){return"position"===t||"model:position"===t;}},{key:"hasSameParentAs",value:function hasSameParentAs(t){if(this.root!==t.root)return!1;return"same"==Ii(this.getParentPath(),t.getParentPath());}},{key:"getTransformedByOperation",value:function getTransformedByOperation(t){var e;switch(t.type){case"insert":e=this._getTransformedByInsertOperation(t);break;case"move":case"remove":case"reinsert":e=this._getTransformedByMoveOperation(t);break;case"split":e=this._getTransformedBySplitOperation(t);break;case"merge":e=this._getTransformedByMergeOperation(t);break;default:e=Es._createAt(this);}return e;}},{key:"_getTransformedByInsertOperation",value:function _getTransformedByInsertOperation(t){return this._getTransformedByInsertion(t.position,t.howMany);}},{key:"_getTransformedByMoveOperation",value:function _getTransformedByMoveOperation(t){return this._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany);}},{key:"_getTransformedBySplitOperation",value:function _getTransformedBySplitOperation(t){var e=t.movedRange;return e.containsPosition(this)||e.start.isEqual(this)&&"toNext"==this.stickiness?this._getCombined(t.splitPosition,t.moveTargetPosition):t.graveyardPosition?this._getTransformedByMove(t.graveyardPosition,t.insertionPosition,1):this._getTransformedByInsertion(t.insertionPosition,1);}},{key:"_getTransformedByMergeOperation",value:function _getTransformedByMergeOperation(t){var e=t.movedRange;var i;return e.containsPosition(this)||e.start.isEqual(this)?(i=this._getCombined(t.sourcePosition,t.targetPosition),t.sourcePosition.isBefore(t.targetPosition)&&(i=i._getTransformedByDeletion(t.deletionPosition,1))):i=this.isEqual(t.deletionPosition)?Es._createAt(t.deletionPosition):this._getTransformedByMove(t.deletionPosition,t.graveyardPosition,1),i;}},{key:"_getTransformedByDeletion",value:function _getTransformedByDeletion(t,e){var i=Es._createAt(this);if(this.root!=t.root)return i;if("same"==Ii(t.getParentPath(),this.getParentPath())){if(t.offset<this.offset){if(t.offset+e>this.offset)return null;i.offset-=e;}}else if("prefix"==Ii(t.getParentPath(),this.getParentPath())){var _n42=t.path.length-1;if(t.offset<=this.path[_n42]){if(t.offset+e>this.path[_n42])return null;i.path[_n42]-=e;}}return i;}},{key:"_getTransformedByInsertion",value:function _getTransformedByInsertion(t,e){var i=Es._createAt(this);if(this.root!=t.root)return i;if("same"==Ii(t.getParentPath(),this.getParentPath()))(t.offset<this.offset||t.offset==this.offset&&"toPrevious"!=this.stickiness)&&(i.offset+=e);else if("prefix"==Ii(t.getParentPath(),this.getParentPath())){var _n43=t.path.length-1;t.offset<=this.path[_n43]&&(i.path[_n43]+=e);}return i;}},{key:"_getTransformedByMove",value:function _getTransformedByMove(t,e,i){if(e=e._getTransformedByDeletion(t,i),t.isEqual(e))return Es._createAt(this);var n=this._getTransformedByDeletion(t,i);return null===n||t.isEqual(this)&&"toNext"==this.stickiness||t.getShiftedBy(i).isEqual(this)&&"toPrevious"==this.stickiness?this._getCombined(t,e):n._getTransformedByInsertion(e,i);}},{key:"_getCombined",value:function _getCombined(t,e){var i=t.path.length-1,n=Es._createAt(e);return n.stickiness=this.stickiness,n.offset=n.offset+this.path[i]-t.offset,n.path=[].concat(_toConsumableArray(n.path),_toConsumableArray(this.path.slice(i+1))),n;}},{key:"toJSON",value:function toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness};}},{key:"clone",value:function clone(){return new this.constructor(this.root,this.path,this.stickiness);}}],[{key:"_createAt",value:function _createAt(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"toNone";if(t instanceof Es)return new Es(t.root,t.path,t.stickiness);{var _n44=t;if("end"==e)e=_n44.maxOffset;else{if("before"==e)return this._createBefore(_n44,i);if("after"==e)return this._createAfter(_n44,i);if(0!==e&&!e)throw new ui.a("model-createpositionat-offset-required",[this,t]);}if(!_n44.is("element")&&!_n44.is("documentFragment"))throw new ui.a("model-position-parent-incorrect",[this,t]);var _o34=_n44.getPath();return _o34.push(e),new this(_n44.root,_o34,i);}}},{key:"_createAfter",value:function _createAfter(t,e){if(!t.parent)throw new ui.a("model-position-after-root",[this,t],{root:t});return this._createAt(t.parent,t.endOffset,e);}},{key:"_createBefore",value:function _createBefore(t,e){if(!t.parent)throw new ui.a("model-position-before-root",t,{root:t});return this._createAt(t.parent,t.startOffset,e);}},{key:"fromJSON",value:function fromJSON(t,e){if("$graveyard"===t.root){var _i88=new Es(e.graveyard,t.path);return _i88.stickiness=t.stickiness,_i88;}if(!e.getRoot(t.root))throw new ui.a("model-position-fromjson-no-root",e,{rootName:t.root});return new Es(e.getRoot(t.root),t.path,t.stickiness);}}]);return Es;}();function Ps(t,e){var i=e.getChild(e.offsetToIndex(t.offset));return i&&i.is("$text")&&i.startOffset<t.offset?i:null;}function Ms(t,e,i){return null!==i?null:e.getChild(e.offsetToIndex(t.offset));}function Is(t,e,i){return null!==i?null:e.getChild(e.offsetToIndex(t.offset)-1);}var Ns=/*#__PURE__*/function(){function Ns(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;_classCallCheck(this,Ns);this.start=Es._createAt(t),this.end=e?Es._createAt(e):Es._createAt(t),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious";}_createClass(Ns,[{key:Symbol.iterator,value:/*#__PURE__*/regeneratorRuntime.mark(function value(){return regeneratorRuntime.wrap(function value$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:return _context13.delegateYield(new Cs({boundaries:this,ignoreElementEnd:!0}),"t0",1);case 1:case"end":return _context13.stop();}}},value,this);})},{key:"isCollapsed",get:function get(){return this.start.isEqual(this.end);}},{key:"isFlat",get:function get(){return"same"==Ii(this.start.getParentPath(),this.end.getParentPath());}},{key:"root",get:function get(){return this.start.root;}},{key:"containsPosition",value:function containsPosition(t){return t.isAfter(this.start)&&t.isBefore(this.end);}},{key:"containsRange",value:function containsRange(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;t.isCollapsed&&(e=!1);var i=this.containsPosition(t.start)||e&&this.start.isEqual(t.start),n=this.containsPosition(t.end)||e&&this.end.isEqual(t.end);return i&&n;}},{key:"containsItem",value:function containsItem(t){var e=Es._createBefore(t);return this.containsPosition(e)||this.start.isEqual(e);}},{key:"is",value:function is(t){return"range"===t||"model:range"===t;}},{key:"isEqual",value:function isEqual(t){return this.start.isEqual(t.start)&&this.end.isEqual(t.end);}},{key:"isIntersecting",value:function isIntersecting(t){return this.start.isBefore(t.end)&&this.end.isAfter(t.start);}},{key:"getDifference",value:function getDifference(t){var e=[];return this.isIntersecting(t)?(this.containsPosition(t.start)&&e.push(new Ns(this.start,t.start)),this.containsPosition(t.end)&&e.push(new Ns(t.end,this.end))):e.push(new Ns(this.start,this.end)),e;}},{key:"getIntersection",value:function getIntersection(t){if(this.isIntersecting(t)){var _e81=this.start,_i89=this.end;return this.containsPosition(t.start)&&(_e81=t.start),this.containsPosition(t.end)&&(_i89=t.end),new Ns(_e81,_i89);}return null;}},{key:"getJoined",value:function getJoined(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;var i=this.isIntersecting(t);if(i||(i=this.start.isBefore(t.start)?e?this.end.isTouching(t.start):this.end.isEqual(t.start):e?t.end.isTouching(this.start):t.end.isEqual(this.start)),!i)return null;var n=this.start,o=this.end;return t.start.isBefore(n)&&(n=t.start),t.end.isAfter(o)&&(o=t.end),new Ns(n,o);}},{key:"getMinimalFlatRanges",value:function getMinimalFlatRanges(){var t=[],e=this.start.getCommonPath(this.end).length,i=Es._createAt(this.start);var n=i.parent;for(;i.path.length>e+1;){var _e82=n.maxOffset-i.offset;0!==_e82&&t.push(new Ns(i,i.getShiftedBy(_e82))),i.path=i.path.slice(0,-1),i.offset++,n=n.parent;}for(;i.path.length<=this.end.path.length;){var _e83=this.end.path[i.path.length-1],_n45=_e83-i.offset;0!==_n45&&t.push(new Ns(i,i.getShiftedBy(_n45))),i.offset=_e83,i.path.push(0);}return t;}},{key:"getWalker",value:function getWalker(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return t.boundaries=this,new Cs(t);}},{key:"getItems",value:/*#__PURE__*/regeneratorRuntime.mark(function getItems(){var t,e,_iterator104,_step104,_t86,_args14=arguments;return regeneratorRuntime.wrap(function getItems$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:t=_args14.length>0&&_args14[0]!==undefined?_args14[0]:{};t.boundaries=this,t.ignoreElementEnd=!0;e=new Cs(t);_iterator104=_createForOfIteratorHelper(e);_context14.prev=4;_iterator104.s();case 6:if((_step104=_iterator104.n()).done){_context14.next=12;break;}_t86=_step104.value;_context14.next=10;return _t86.item;case 10:_context14.next=6;break;case 12:_context14.next=17;break;case 14:_context14.prev=14;_context14.t0=_context14["catch"](4);_iterator104.e(_context14.t0);case 17:_context14.prev=17;_iterator104.f();return _context14.finish(17);case 20:case"end":return _context14.stop();}}},getItems,this,[[4,14,17,20]]);})},{key:"getPositions",value:/*#__PURE__*/regeneratorRuntime.mark(function getPositions(){var t,e,_iterator105,_step105,_t87,_args15=arguments;return regeneratorRuntime.wrap(function getPositions$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:t=_args15.length>0&&_args15[0]!==undefined?_args15[0]:{};t.boundaries=this;e=new Cs(t);_context15.next=5;return e.position;case 5:_iterator105=_createForOfIteratorHelper(e);_context15.prev=6;_iterator105.s();case 8:if((_step105=_iterator105.n()).done){_context15.next=14;break;}_t87=_step105.value;_context15.next=12;return _t87.nextPosition;case 12:_context15.next=8;break;case 14:_context15.next=19;break;case 16:_context15.prev=16;_context15.t0=_context15["catch"](6);_iterator105.e(_context15.t0);case 19:_context15.prev=19;_iterator105.f();return _context15.finish(19);case 22:case"end":return _context15.stop();}}},getPositions,this,[[6,16,19,22]]);})},{key:"getTransformedByOperation",value:function getTransformedByOperation(t){switch(t.type){case"insert":return this._getTransformedByInsertOperation(t);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(t);case"split":return[this._getTransformedBySplitOperation(t)];case"merge":return[this._getTransformedByMergeOperation(t)];}return[new Ns(this.start,this.end)];}},{key:"getTransformedByOperations",value:function getTransformedByOperations(t){var e=[new Ns(this.start,this.end)];var _iterator106=_createForOfIteratorHelper(t),_step106;try{for(_iterator106.s();!(_step106=_iterator106.n()).done;){var _i91=_step106.value;for(var _t90=0;_t90<e.length;_t90++){var _n47=e[_t90].getTransformedByOperation(_i91);e.splice.apply(e,[_t90,1].concat(_toConsumableArray(_n47))),_t90+=_n47.length-1;}}}catch(err){_iterator106.e(err);}finally{_iterator106.f();}for(var _t88=0;_t88<e.length;_t88++){var _i90=e[_t88];for(var _n46=_t88+1;_n46<e.length;_n46++){var _t89=e[_n46];(_i90.containsRange(_t89)||_t89.containsRange(_i90)||_i90.isEqual(_t89))&&e.splice(_n46,1);}}return e;}},{key:"getCommonAncestor",value:function getCommonAncestor(){return this.start.getCommonAncestor(this.end);}},{key:"getContainedElement",value:function getContainedElement(){if(this.isCollapsed)return null;var t=this.start.nodeAfter,e=this.end.nodeBefore;return t&&t.is("element")&&t===e?t:null;}},{key:"toJSON",value:function toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()};}},{key:"clone",value:function clone(){return new this.constructor(this.start,this.end);}},{key:"_getTransformedByInsertOperation",value:function _getTransformedByInsertOperation(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;return this._getTransformedByInsertion(t.position,t.howMany,e);}},{key:"_getTransformedByMoveOperation",value:function _getTransformedByMoveOperation(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;var i=t.sourcePosition,n=t.howMany,o=t.targetPosition;return this._getTransformedByMove(i,o,n,e);}},{key:"_getTransformedBySplitOperation",value:function _getTransformedBySplitOperation(t){var e=this.start._getTransformedBySplitOperation(t);var i=this.end._getTransformedBySplitOperation(t);return this.end.isEqual(t.insertionPosition)&&(i=this.end.getShiftedBy(1)),e.root!=i.root&&(i=this.end.getShiftedBy(-1)),new Ns(e,i);}},{key:"_getTransformedByMergeOperation",value:function _getTransformedByMergeOperation(t){if(this.start.isEqual(t.targetPosition)&&this.end.isEqual(t.deletionPosition))return new Ns(this.start);var e=this.start._getTransformedByMergeOperation(t),i=this.end._getTransformedByMergeOperation(t);return e.root!=i.root&&(i=this.end.getShiftedBy(-1)),e.isAfter(i)?(t.sourcePosition.isBefore(t.targetPosition)?(e=Es._createAt(i),e.offset=0):(t.deletionPosition.isEqual(e)||(i=t.deletionPosition),e=t.targetPosition),new Ns(e,i)):new Ns(e,i);}},{key:"_getTransformedByInsertion",value:function _getTransformedByInsertion(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:!1;if(i&&this.containsPosition(t))return[new Ns(this.start,t),new Ns(t.getShiftedBy(e),this.end._getTransformedByInsertion(t,e))];{var _i92=new Ns(this.start,this.end);return _i92.start=_i92.start._getTransformedByInsertion(t,e),_i92.end=_i92.end._getTransformedByInsertion(t,e),[_i92];}}},{key:"_getTransformedByMove",value:function _getTransformedByMove(t,e,i){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:!1;if(this.isCollapsed){var _n48=this.start._getTransformedByMove(t,e,i);return[new Ns(_n48)];}var o=Ns._createFromPositionAndShift(t,i),r=e._getTransformedByDeletion(t,i);if(this.containsPosition(e)&&!n&&(o.containsPosition(this.start)||o.containsPosition(this.end))){var _n49=this.start._getTransformedByMove(t,e,i),_o35=this.end._getTransformedByMove(t,e,i);return[new Ns(_n49,_o35)];}var s;var a=this.getDifference(o);var c=null;var l=this.getIntersection(o);if(1==a.length?c=new Ns(a[0].start._getTransformedByDeletion(t,i),a[0].end._getTransformedByDeletion(t,i)):2==a.length&&(c=new Ns(this.start,this.end._getTransformedByDeletion(t,i))),s=c?c._getTransformedByInsertion(r,i,null!==l||n):[],l){var _t91=new Ns(l.start._getCombined(o.start,r),l.end._getCombined(o.start,r));2==s.length?s.splice(1,0,_t91):s.push(_t91);}return s;}},{key:"_getTransformedByDeletion",value:function _getTransformedByDeletion(t,e){var i=this.start._getTransformedByDeletion(t,e),n=this.end._getTransformedByDeletion(t,e);return null==i&&null==n?null:(null==i&&(i=t),null==n&&(n=t),new Ns(i,n));}}],[{key:"_createFromPositionAndShift",value:function _createFromPositionAndShift(t,e){var i=t,n=t.getShiftedBy(e);return e>0?new this(i,n):new this(n,i);}},{key:"_createIn",value:function _createIn(t){return new this(Es._createAt(t,0),Es._createAt(t,t.maxOffset));}},{key:"_createOn",value:function _createOn(t){return this._createFromPositionAndShift(Es._createBefore(t),t.offsetSize);}},{key:"_createFromRanges",value:function _createFromRanges(t){if(0===t.length)throw new ui.a("range-create-from-ranges-empty-array",null);if(1==t.length)return t[0].clone();var e=t[0];t.sort(function(t,e){return t.start.isAfter(e.start)?1:-1;});var i=t.indexOf(e),n=new this(e.start,e.end);if(i>0)for(var _e84=i-1;t[_e84].end.isEqual(n.start);_e84++){n.start=Es._createAt(t[_e84].start);}for(var _e85=i+1;_e85<t.length&&t[_e85].start.isEqual(n.end);_e85++){n.end=Es._createAt(t[_e85].end);}return n;}},{key:"fromJSON",value:function fromJSON(t,e){return new this(Es.fromJSON(t.start,e),Es.fromJSON(t.end,e));}}]);return Ns;}();var Os=/*#__PURE__*/function(){function Os(){var _this41=this;_classCallCheck(this,Os);this._modelToViewMapping=new WeakMap(),this._viewToModelMapping=new WeakMap(),this._viewToModelLengthCallbacks=new Map(),this._markerNameToElements=new Map(),this._elementToMarkerNames=new Map(),this._unboundMarkerNames=new Set(),this.on("modelToViewPosition",function(t,e){if(e.viewPosition)return;var i=_this41._modelToViewMapping.get(e.modelPosition.parent);e.viewPosition=_this41.findPositionIn(i,e.modelPosition.offset);},{priority:"low"}),this.on("viewToModelPosition",function(t,e){if(e.modelPosition)return;var i=_this41.findMappedViewAncestor(e.viewPosition),n=_this41._viewToModelMapping.get(i),o=_this41._toModelOffset(e.viewPosition.parent,e.viewPosition.offset,i);e.modelPosition=Es._createAt(n,o);},{priority:"low"});}_createClass(Os,[{key:"bindElements",value:function bindElements(t,e){this._modelToViewMapping.set(t,e),this._viewToModelMapping.set(e,t);}},{key:"unbindViewElement",value:function unbindViewElement(t){var e=this.toModelElement(t);if(this._viewToModelMapping["delete"](t),this._elementToMarkerNames.has(t)){var _iterator107=_createForOfIteratorHelper(this._elementToMarkerNames.get(t)),_step107;try{for(_iterator107.s();!(_step107=_iterator107.n()).done;){var _e86=_step107.value;this._unboundMarkerNames.add(_e86);}}catch(err){_iterator107.e(err);}finally{_iterator107.f();}}this._modelToViewMapping.get(e)==t&&this._modelToViewMapping["delete"](e);}},{key:"unbindModelElement",value:function unbindModelElement(t){var e=this.toViewElement(t);this._modelToViewMapping["delete"](t),this._viewToModelMapping.get(e)==t&&this._viewToModelMapping["delete"](e);}},{key:"bindElementToMarker",value:function bindElementToMarker(t,e){var i=this._markerNameToElements.get(e)||new Set();i.add(t);var n=this._elementToMarkerNames.get(t)||new Set();n.add(e),this._markerNameToElements.set(e,i),this._elementToMarkerNames.set(t,n);}},{key:"unbindElementFromMarkerName",value:function unbindElementFromMarkerName(t,e){var i=this._markerNameToElements.get(e);i&&(i["delete"](t),0==i.size&&this._markerNameToElements["delete"](e));var n=this._elementToMarkerNames.get(t);n&&(n["delete"](e),0==n.size&&this._elementToMarkerNames["delete"](t));}},{key:"flushUnboundMarkerNames",value:function flushUnboundMarkerNames(){var t=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),t;}},{key:"clearBindings",value:function clearBindings(){this._modelToViewMapping=new WeakMap(),this._viewToModelMapping=new WeakMap(),this._markerNameToElements=new Map(),this._elementToMarkerNames=new Map(),this._unboundMarkerNames=new Set();}},{key:"toModelElement",value:function toModelElement(t){return this._viewToModelMapping.get(t);}},{key:"toViewElement",value:function toViewElement(t){return this._modelToViewMapping.get(t);}},{key:"toModelRange",value:function toModelRange(t){return new Ns(this.toModelPosition(t.start),this.toModelPosition(t.end));}},{key:"toViewRange",value:function toViewRange(t){return new to(this.toViewPosition(t.start),this.toViewPosition(t.end));}},{key:"toModelPosition",value:function toModelPosition(t){var e={viewPosition:t,mapper:this};return this.fire("viewToModelPosition",e),e.modelPosition;}},{key:"toViewPosition",value:function toViewPosition(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{isPhantom:!1};var i={modelPosition:t,mapper:this,isPhantom:e.isPhantom};return this.fire("modelToViewPosition",i),i.viewPosition;}},{key:"markerNameToElements",value:function markerNameToElements(t){var e=this._markerNameToElements.get(t);if(!e)return null;var i=new Set();var _iterator108=_createForOfIteratorHelper(e),_step108;try{for(_iterator108.s();!(_step108=_iterator108.n()).done;){var _t92=_step108.value;if(_t92.is("attributeElement")){var _iterator109=_createForOfIteratorHelper(_t92.getElementsWithSameId()),_step109;try{for(_iterator109.s();!(_step109=_iterator109.n()).done;){var _e87=_step109.value;i.add(_e87);}}catch(err){_iterator109.e(err);}finally{_iterator109.f();}}else i.add(_t92);}}catch(err){_iterator108.e(err);}finally{_iterator108.f();}return i;}},{key:"registerViewToModelLength",value:function registerViewToModelLength(t,e){this._viewToModelLengthCallbacks.set(t,e);}},{key:"findMappedViewAncestor",value:function findMappedViewAncestor(t){var e=t.parent;for(;!this._viewToModelMapping.has(e);){e=e.parent;}return e;}},{key:"_toModelOffset",value:function _toModelOffset(t,e,i){if(i!=t){return this._toModelOffset(t.parent,t.index,i)+this._toModelOffset(t,e,t);}if(t.is("$text"))return e;var n=0;for(var _i93=0;_i93<e;_i93++){n+=this.getModelLength(t.getChild(_i93));}return n;}},{key:"getModelLength",value:function getModelLength(t){if(this._viewToModelLengthCallbacks.get(t.name)){return this._viewToModelLengthCallbacks.get(t.name)(t);}if(this._viewToModelMapping.has(t))return 1;if(t.is("$text"))return t.data.length;if(t.is("uiElement"))return 0;{var _e88=0;var _iterator110=_createForOfIteratorHelper(t.getChildren()),_step110;try{for(_iterator110.s();!(_step110=_iterator110.n()).done;){var _i94=_step110.value;_e88+=this.getModelLength(_i94);}}catch(err){_iterator110.e(err);}finally{_iterator110.f();}return _e88;}}},{key:"findPositionIn",value:function findPositionIn(t,e){var i,n=0,o=0,r=0;if(t.is("$text"))return new Xn(t,e);for(;o<e;){i=t.getChild(r),n=this.getModelLength(i),o+=n,r++;}return o==e?this._moveViewPositionToTextNode(new Xn(t,r)):this.findPositionIn(i,e-(o-n));}},{key:"_moveViewPositionToTextNode",value:function _moveViewPositionToTextNode(t){var e=t.nodeBefore,i=t.nodeAfter;return e instanceof Ri?new Xn(e,e.data.length):i instanceof Ri?new Xn(i,0):t;}}]);return Os;}();yi(Os,mi);var Rs=/*#__PURE__*/function(){function Rs(){_classCallCheck(this,Rs);this._consumable=new Map(),this._textProxyRegistry=new Map();}_createClass(Rs,[{key:"add",value:function add(t,e){e=Ds(e),t instanceof xs&&(t=this._getSymbolForTextProxy(t)),this._consumable.has(t)||this._consumable.set(t,new Map()),this._consumable.get(t).set(e,!0);}},{key:"consume",value:function consume(t,e){return e=Ds(e),t instanceof xs&&(t=this._getSymbolForTextProxy(t)),!!this.test(t,e)&&(this._consumable.get(t).set(e,!1),!0);}},{key:"test",value:function test(t,e){e=Ds(e),t instanceof xs&&(t=this._getSymbolForTextProxy(t));var i=this._consumable.get(t);if(void 0===i)return null;var n=i.get(e);return void 0===n?null:n;}},{key:"revert",value:function revert(t,e){e=Ds(e),t instanceof xs&&(t=this._getSymbolForTextProxy(t));var i=this.test(t,e);return!1===i?(this._consumable.get(t).set(e,!0),!0):!0!==i&&null;}},{key:"_getSymbolForTextProxy",value:function _getSymbolForTextProxy(t){var e=null;var i=this._textProxyRegistry.get(t.startOffset);if(i){var _n50=i.get(t.endOffset);_n50&&(e=_n50.get(t.parent));}return e||(e=this._addSymbolForTextProxy(t.startOffset,t.endOffset,t.parent)),e;}},{key:"_addSymbolForTextProxy",value:function _addSymbolForTextProxy(t,e,i){var n=Symbol("textProxySymbol");var o,r;return o=this._textProxyRegistry.get(t),o||(o=new Map(),this._textProxyRegistry.set(t,o)),r=o.get(e),r||(r=new Map(),o.set(e,r)),r.set(i,n),n;}}]);return Rs;}();function Ds(t){var e=t.split(":");return e.length>1?e[0]+":"+e[1]:e[0];}var Ls=/*#__PURE__*/function(){function Ls(t){_classCallCheck(this,Ls);this.conversionApi=Object.assign({dispatcher:this},t),this._reconversionEventsMapping=new Map();}_createClass(Ls,[{key:"convertChanges",value:function convertChanges(t,e,i){var _iterator111=_createForOfIteratorHelper(t.getMarkersToRemove()),_step111;try{for(_iterator111.s();!(_step111=_iterator111.n()).done;){var _e89=_step111.value;this.convertMarkerRemove(_e89.name,_e89.range,i);}}catch(err){_iterator111.e(err);}finally{_iterator111.f();}var n=this._mapChangesWithAutomaticReconversion(t);var _iterator112=_createForOfIteratorHelper(n),_step112;try{for(_iterator112.s();!(_step112=_iterator112.n()).done;){var _t93=_step112.value;"insert"===_t93.type?this.convertInsert(Ns._createFromPositionAndShift(_t93.position,_t93.length),i):"remove"===_t93.type?this.convertRemove(_t93.position,_t93.length,_t93.name,i):"reconvert"===_t93.type?this.reconvertElement(_t93.element,i):this.convertAttribute(_t93.range,_t93.attributeKey,_t93.attributeOldValue,_t93.attributeNewValue,i);}}catch(err){_iterator112.e(err);}finally{_iterator112.f();}var _iterator113=_createForOfIteratorHelper(this.conversionApi.mapper.flushUnboundMarkerNames()),_step113;try{for(_iterator113.s();!(_step113=_iterator113.n()).done;){var _t94=_step113.value;var _n51=e.get(_t94).getRange();this.convertMarkerRemove(_t94,_n51,i),this.convertMarkerAdd(_t94,_n51,i);}}catch(err){_iterator113.e(err);}finally{_iterator113.f();}var _iterator114=_createForOfIteratorHelper(t.getMarkersToAdd()),_step114;try{for(_iterator114.s();!(_step114=_iterator114.n()).done;){var _e90=_step114.value;this.convertMarkerAdd(_e90.name,_e90.range,i);}}catch(err){_iterator114.e(err);}finally{_iterator114.f();}}},{key:"convertInsert",value:function convertInsert(t,e){this.conversionApi.writer=e,this.conversionApi.consumable=this._createInsertConsumable(t);var _iterator115=_createForOfIteratorHelper(Array.from(t).map(Vs)),_step115;try{for(_iterator115.s();!(_step115=_iterator115.n()).done;){var _e91=_step115.value;this._convertInsertWithAttributes(_e91);}}catch(err){_iterator115.e(err);}finally{_iterator115.f();}this._clearConversionApi();}},{key:"convertRemove",value:function convertRemove(t,e,i,n){this.conversionApi.writer=n,this.fire("remove:"+i,{position:t,length:e},this.conversionApi),this._clearConversionApi();}},{key:"convertAttribute",value:function convertAttribute(t,e,i,n,o){this.conversionApi.writer=o,this.conversionApi.consumable=this._createConsumableForRange(t,"attribute:"+e);var _iterator116=_createForOfIteratorHelper(t),_step116;try{for(_iterator116.s();!(_step116=_iterator116.n()).done;){var _o36=_step116.value;var _t95={item:_o36.item,range:Ns._createFromPositionAndShift(_o36.previousPosition,_o36.length),attributeKey:e,attributeOldValue:i,attributeNewValue:n};this._testAndFire("attribute:"+e,_t95);}}catch(err){_iterator116.e(err);}finally{_iterator116.f();}this._clearConversionApi();}},{key:"reconvertElement",value:function reconvertElement(t,e){var i=Ns._createOn(t);this.conversionApi.writer=e,this.conversionApi.consumable=this._createInsertConsumable(i);var n=this.conversionApi.mapper,o=n.toViewElement(t);e.remove(o),this._convertInsertWithAttributes({item:t,range:i});var r=n.toViewElement(t);var _iterator117=_createForOfIteratorHelper(Ns._createIn(t)),_step117;try{for(_iterator117.s();!(_step117=_iterator117.n()).done;){var _i95=_step117.value;var _t96=_i95.item,_o37=js(_t96,n);_o37?_o37.root!==r.root&&e.move(e.createRangeOn(_o37),n.toViewPosition(Es._createBefore(_t96))):this._convertInsertWithAttributes(Vs(_i95));}}catch(err){_iterator117.e(err);}finally{_iterator117.f();}n.unbindViewElement(o),this._clearConversionApi();}},{key:"convertSelection",value:function convertSelection(t,e,i){var n=Array.from(e.getMarkersAtPosition(t.getFirstPosition()));if(this.conversionApi.writer=i,this.conversionApi.consumable=this._createSelectionConsumable(t,n),this.fire("selection",{selection:t},this.conversionApi),t.isCollapsed){var _iterator118=_createForOfIteratorHelper(n),_step118;try{for(_iterator118.s();!(_step118=_iterator118.n()).done;){var _e92=_step118.value;var _i96=_e92.getRange();if(!zs(t.getFirstPosition(),_e92,this.conversionApi.mapper))continue;var _n52={item:t,markerName:_e92.name,markerRange:_i96};this.conversionApi.consumable.test(t,"addMarker:"+_e92.name)&&this.fire("addMarker:"+_e92.name,_n52,this.conversionApi);}}catch(err){_iterator118.e(err);}finally{_iterator118.f();}var _iterator119=_createForOfIteratorHelper(t.getAttributeKeys()),_step119;try{for(_iterator119.s();!(_step119=_iterator119.n()).done;){var _e93=_step119.value;var _i97={item:t,range:t.getFirstRange(),attributeKey:_e93,attributeOldValue:null,attributeNewValue:t.getAttribute(_e93)};this.conversionApi.consumable.test(t,"attribute:"+_i97.attributeKey)&&this.fire("attribute:"+_i97.attributeKey+":$text",_i97,this.conversionApi);}}catch(err){_iterator119.e(err);}finally{_iterator119.f();}this._clearConversionApi();}}},{key:"convertMarkerAdd",value:function convertMarkerAdd(t,e,i){if(!e.root.document||"$graveyard"==e.root.rootName)return;this.conversionApi.writer=i;var n="addMarker:"+t,o=new Rs();if(o.add(e,n),this.conversionApi.consumable=o,this.fire(n,{markerName:t,markerRange:e},this.conversionApi),o.test(e,n)){this.conversionApi.consumable=this._createConsumableForRange(e,n);var _iterator120=_createForOfIteratorHelper(e.getItems()),_step120;try{for(_iterator120.s();!(_step120=_iterator120.n()).done;){var _i98=_step120.value;if(!this.conversionApi.consumable.test(_i98,n))continue;var _o38={item:_i98,range:Ns._createOn(_i98),markerName:t,markerRange:e};this.fire(n,_o38,this.conversionApi);}}catch(err){_iterator120.e(err);}finally{_iterator120.f();}this._clearConversionApi();}}},{key:"convertMarkerRemove",value:function convertMarkerRemove(t,e,i){e.root.document&&"$graveyard"!=e.root.rootName&&(this.conversionApi.writer=i,this.fire("removeMarker:"+t,{markerName:t,markerRange:e},this.conversionApi),this._clearConversionApi());}},{key:"_mapReconversionTriggerEvent",value:function _mapReconversionTriggerEvent(t,e){this._reconversionEventsMapping.set(e,t);}},{key:"_createInsertConsumable",value:function _createInsertConsumable(t){var e=new Rs();var _iterator121=_createForOfIteratorHelper(t),_step121;try{for(_iterator121.s();!(_step121=_iterator121.n()).done;){var _i99=_step121.value;var _t97=_i99.item;e.add(_t97,"insert");var _iterator122=_createForOfIteratorHelper(_t97.getAttributeKeys()),_step122;try{for(_iterator122.s();!(_step122=_iterator122.n()).done;){var _i100=_step122.value;e.add(_t97,"attribute:"+_i100);}}catch(err){_iterator122.e(err);}finally{_iterator122.f();}}}catch(err){_iterator121.e(err);}finally{_iterator121.f();}return e;}},{key:"_createConsumableForRange",value:function _createConsumableForRange(t,e){var i=new Rs();var _iterator123=_createForOfIteratorHelper(t.getItems()),_step123;try{for(_iterator123.s();!(_step123=_iterator123.n()).done;){var _n53=_step123.value;i.add(_n53,e);}}catch(err){_iterator123.e(err);}finally{_iterator123.f();}return i;}},{key:"_createSelectionConsumable",value:function _createSelectionConsumable(t,e){var i=new Rs();i.add(t,"selection");var _iterator124=_createForOfIteratorHelper(e),_step124;try{for(_iterator124.s();!(_step124=_iterator124.n()).done;){var _n54=_step124.value;i.add(t,"addMarker:"+_n54.name);}}catch(err){_iterator124.e(err);}finally{_iterator124.f();}var _iterator125=_createForOfIteratorHelper(t.getAttributeKeys()),_step125;try{for(_iterator125.s();!(_step125=_iterator125.n()).done;){var _e94=_step125.value;i.add(t,"attribute:"+_e94);}}catch(err){_iterator125.e(err);}finally{_iterator125.f();}return i;}},{key:"_testAndFire",value:function _testAndFire(t,e){this.conversionApi.consumable.test(e.item,t)&&this.fire(function(t,e){var i=e.item.name||"$text";return"".concat(t,":").concat(i);}(t,e),e,this.conversionApi);}},{key:"_clearConversionApi",value:function _clearConversionApi(){delete this.conversionApi.writer,delete this.conversionApi.consumable;}},{key:"_convertInsertWithAttributes",value:function _convertInsertWithAttributes(t){this._testAndFire("insert",t);var _iterator126=_createForOfIteratorHelper(t.item.getAttributeKeys()),_step126;try{for(_iterator126.s();!(_step126=_iterator126.n()).done;){var _e95=_step126.value;t.attributeKey=_e95,t.attributeOldValue=null,t.attributeNewValue=t.item.getAttribute(_e95),this._testAndFire("attribute:"+_e95,t);}}catch(err){_iterator126.e(err);}finally{_iterator126.f();}}},{key:"_mapChangesWithAutomaticReconversion",value:function _mapChangesWithAutomaticReconversion(t){var e=new Set(),i=[];var _iterator127=_createForOfIteratorHelper(t.getChanges()),_step127;try{for(_iterator127.s();!(_step127=_iterator127.n()).done;){var _n55=_step127.value;var _t98=_n55.position||_n55.range.start,_o39=_t98.parent;if(Ps(_t98,_o39)){i.push(_n55);continue;}var _r13="attribute"===_n55.type?Ms(_t98,_o39,null):_o39;if(_r13.is("$text")){i.push(_n55);continue;}var _s12=void 0;if(_s12="attribute"===_n55.type?"attribute:".concat(_n55.attributeKey,":").concat(_r13.name):"".concat(_n55.type,":").concat(_n55.name),this._isReconvertTriggerEvent(_s12,_r13.name)){if(e.has(_r13))continue;e.add(_r13),i.push({type:"reconvert",element:_r13});}else i.push(_n55);}}catch(err){_iterator127.e(err);}finally{_iterator127.f();}return i;}},{key:"_isReconvertTriggerEvent",value:function _isReconvertTriggerEvent(t,e){return this._reconversionEventsMapping.get(t)===e;}}]);return Ls;}();function zs(t,e,i){var n=e.getRange(),o=Array.from(t.getAncestors());o.shift(),o.reverse();return!o.some(function(t){if(n.containsItem(t)){return!!i.toViewElement(t).getCustomProperty("addHighlight");}});}function Vs(t){return{item:t.item,range:Ns._createFromPositionAndShift(t.previousPosition,t.length)};}function js(t,e){if(t.is("textProxy")){var _i101=e.toViewPosition(Es._createBefore(t)).parent;return _i101.is("$text")?_i101:null;}return e.toViewElement(t);}yi(Ls,mi);var Bs=/*#__PURE__*/function(){function Bs(t,e,i){_classCallCheck(this,Bs);this._lastRangeBackward=!1,this._ranges=[],this._attrs=new Map(),t&&this.setTo(t,e,i);}_createClass(Bs,[{key:"anchor",get:function get(){if(this._ranges.length>0){var _t99=this._ranges[this._ranges.length-1];return this._lastRangeBackward?_t99.end:_t99.start;}return null;}},{key:"focus",get:function get(){if(this._ranges.length>0){var _t100=this._ranges[this._ranges.length-1];return this._lastRangeBackward?_t100.start:_t100.end;}return null;}},{key:"isCollapsed",get:function get(){return 1===this._ranges.length&&this._ranges[0].isCollapsed;}},{key:"rangeCount",get:function get(){return this._ranges.length;}},{key:"isBackward",get:function get(){return!this.isCollapsed&&this._lastRangeBackward;}},{key:"isEqual",value:function isEqual(t){if(this.rangeCount!=t.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(t.anchor)||!this.focus.isEqual(t.focus))return!1;var _iterator128=_createForOfIteratorHelper(this._ranges),_step128;try{for(_iterator128.s();!(_step128=_iterator128.n()).done;){var _e96=_step128.value;var _i102=!1;var _iterator129=_createForOfIteratorHelper(t._ranges),_step129;try{for(_iterator129.s();!(_step129=_iterator129.n()).done;){var _n56=_step129.value;if(_e96.isEqual(_n56)){_i102=!0;break;}}}catch(err){_iterator129.e(err);}finally{_iterator129.f();}if(!_i102)return!1;}}catch(err){_iterator128.e(err);}finally{_iterator128.f();}return!0;}},{key:"getRanges",value:/*#__PURE__*/regeneratorRuntime.mark(function getRanges(){var _iterator130,_step130,_t101;return regeneratorRuntime.wrap(function getRanges$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:_iterator130=_createForOfIteratorHelper(this._ranges);_context16.prev=1;_iterator130.s();case 3:if((_step130=_iterator130.n()).done){_context16.next=9;break;}_t101=_step130.value;_context16.next=7;return new Ns(_t101.start,_t101.end);case 7:_context16.next=3;break;case 9:_context16.next=14;break;case 11:_context16.prev=11;_context16.t0=_context16["catch"](1);_iterator130.e(_context16.t0);case 14:_context16.prev=14;_iterator130.f();return _context16.finish(14);case 17:case"end":return _context16.stop();}}},getRanges,this,[[1,11,14,17]]);})},{key:"getFirstRange",value:function getFirstRange(){var t=null;var _iterator131=_createForOfIteratorHelper(this._ranges),_step131;try{for(_iterator131.s();!(_step131=_iterator131.n()).done;){var _e97=_step131.value;t&&!_e97.start.isBefore(t.start)||(t=_e97);}}catch(err){_iterator131.e(err);}finally{_iterator131.f();}return t?new Ns(t.start,t.end):null;}},{key:"getLastRange",value:function getLastRange(){var t=null;var _iterator132=_createForOfIteratorHelper(this._ranges),_step132;try{for(_iterator132.s();!(_step132=_iterator132.n()).done;){var _e98=_step132.value;t&&!_e98.end.isAfter(t.end)||(t=_e98);}}catch(err){_iterator132.e(err);}finally{_iterator132.f();}return t?new Ns(t.start,t.end):null;}},{key:"getFirstPosition",value:function getFirstPosition(){var t=this.getFirstRange();return t?t.start.clone():null;}},{key:"getLastPosition",value:function getLastPosition(){var t=this.getLastRange();return t?t.end.clone():null;}},{key:"setTo",value:function setTo(t,e,i){if(null===t)this._setRanges([]);else if(t instanceof Bs)this._setRanges(t.getRanges(),t.isBackward);else if(t&&"function"==typeof t.getRanges)this._setRanges(t.getRanges(),t.isBackward);else if(t instanceof Ns)this._setRanges([t],!!e&&!!e.backward);else if(t instanceof Es)this._setRanges([new Ns(t)]);else if(t instanceof vs){var _n57=!!i&&!!i.backward;var _o40;if("in"==e)_o40=Ns._createIn(t);else if("on"==e)_o40=Ns._createOn(t);else{if(void 0===e)throw new ui.a("model-selection-setto-required-second-parameter",[this,t]);_o40=new Ns(Es._createAt(t,e));}this._setRanges([_o40],_n57);}else{if(!vi(t))throw new ui.a("model-selection-setto-not-selectable",[this,t]);this._setRanges(t,e&&!!e.backward);}}},{key:"_setRanges",value:function _setRanges(t){var _this42=this;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;var i=(t=Array.from(t)).some(function(e){if(!(e instanceof Ns))throw new ui.a("model-selection-set-ranges-not-range",[_this42,t]);return _this42._ranges.every(function(t){return!t.isEqual(e);});});if(t.length!==this._ranges.length||i){this._removeAllRanges();var _iterator133=_createForOfIteratorHelper(t),_step133;try{for(_iterator133.s();!(_step133=_iterator133.n()).done;){var _e99=_step133.value;this._pushRange(_e99);}}catch(err){_iterator133.e(err);}finally{_iterator133.f();}this._lastRangeBackward=!!e,this.fire("change:range",{directChange:!0});}}},{key:"setFocus",value:function setFocus(t,e){if(null===this.anchor)throw new ui.a("model-selection-setfocus-no-ranges",[this,t]);var i=Es._createAt(t,e);if("same"==i.compareWith(this.focus))return;var n=this.anchor;this._ranges.length&&this._popRange(),"before"==i.compareWith(n)?(this._pushRange(new Ns(i,n)),this._lastRangeBackward=!0):(this._pushRange(new Ns(n,i)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0});}},{key:"getAttribute",value:function getAttribute(t){return this._attrs.get(t);}},{key:"getAttributes",value:function getAttributes(){return this._attrs.entries();}},{key:"getAttributeKeys",value:function getAttributeKeys(){return this._attrs.keys();}},{key:"hasAttribute",value:function hasAttribute(t){return this._attrs.has(t);}},{key:"removeAttribute",value:function removeAttribute(t){this.hasAttribute(t)&&(this._attrs["delete"](t),this.fire("change:attribute",{attributeKeys:[t],directChange:!0}));}},{key:"setAttribute",value:function setAttribute(t,e){this.getAttribute(t)!==e&&(this._attrs.set(t,e),this.fire("change:attribute",{attributeKeys:[t],directChange:!0}));}},{key:"getSelectedElement",value:function getSelectedElement(){return 1!==this.rangeCount?null:this.getFirstRange().getContainedElement();}},{key:"is",value:function is(t){return"selection"===t||"model:selection"===t;}},{key:"getSelectedBlocks",value:/*#__PURE__*/regeneratorRuntime.mark(function getSelectedBlocks(){var t,_iterator134,_step134,_e100,_i103,_iterator135,_step135,_i104,_n59,_n58;return regeneratorRuntime.wrap(function getSelectedBlocks$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:t=new WeakSet();_iterator134=_createForOfIteratorHelper(this.getRanges());_context17.prev=2;_iterator134.s();case 4:if((_step134=_iterator134.n()).done){_context17.next=38;break;}_e100=_step134.value;_i103=Us(_e100.start,t);_context17.t0=_i103&&Ws(_i103,_e100);if(!_context17.t0){_context17.next=11;break;}_context17.next=11;return _i103;case 11:_iterator135=_createForOfIteratorHelper(_e100.getWalker());_context17.prev=12;_iterator135.s();case 14:if((_step135=_iterator135.n()).done){_context17.next=23;break;}_i104=_step135.value;_n59=_i104.item;_context17.t1="elementEnd"==_i104.type&&Hs(_n59,t,_e100);if(!_context17.t1){_context17.next=21;break;}_context17.next=21;return _n59;case 21:_context17.next=14;break;case 23:_context17.next=28;break;case 25:_context17.prev=25;_context17.t2=_context17["catch"](12);_iterator135.e(_context17.t2);case 28:_context17.prev=28;_iterator135.f();return _context17.finish(28);case 31:_n58=Us(_e100.end,t);_context17.t3=_n58&&!_e100.end.isTouching(Es._createAt(_n58,0))&&Ws(_n58,_e100);if(!_context17.t3){_context17.next=36;break;}_context17.next=36;return _n58;case 36:_context17.next=4;break;case 38:_context17.next=43;break;case 40:_context17.prev=40;_context17.t4=_context17["catch"](2);_iterator134.e(_context17.t4);case 43:_context17.prev=43;_iterator134.f();return _context17.finish(43);case 46:case"end":return _context17.stop();}}},getSelectedBlocks,this,[[2,40,43,46],[12,25,28,31]]);})},{key:"containsEntireContent",value:function containsEntireContent(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.anchor.root;var e=Es._createAt(t,0),i=Es._createAt(t,"end");return e.isTouching(this.getFirstPosition())&&i.isTouching(this.getLastPosition());}},{key:"_pushRange",value:function _pushRange(t){this._checkRange(t),this._ranges.push(new Ns(t.start,t.end));}},{key:"_checkRange",value:function _checkRange(t){for(var _e101=0;_e101<this._ranges.length;_e101++){if(t.isIntersecting(this._ranges[_e101]))throw new ui.a("model-selection-range-intersects",[this,t],{addedRange:t,intersectingRange:this._ranges[_e101]});}}},{key:"_removeAllRanges",value:function _removeAllRanges(){for(;this._ranges.length>0;){this._popRange();}}},{key:"_popRange",value:function _popRange(){this._ranges.pop();}}]);return Bs;}();function Fs(t,e){return!e.has(t)&&(e.add(t),t.root.document.model.schema.isBlock(t)&&t.parent);}function Hs(t,e,i){return Fs(t,e)&&Ws(t,i);}function Us(t,e){var i=t.parent.root.document.model.schema,n=t.parent.getAncestors({parentFirst:!0,includeSelf:!0});var o=!1;var r=n.find(function(t){return!o&&(o=i.isLimit(t),!o&&Fs(t,e));});return n.forEach(function(t){return e.add(t);}),r;}function Ws(t,e){var i=function(t){var e=t.root.document.model.schema;var i=t.parent;for(;i;){if(e.isBlock(i))return i;i=i.parent;}}(t);if(!i)return!0;return!e.containsRange(Ns._createOn(i),!0);}yi(Bs,mi);var qs=/*#__PURE__*/function(_Ns){_inherits(qs,_Ns);var _super21=_createSuper(qs);function qs(t,e){var _this43;_classCallCheck(this,qs);_this43=_super21.call(this,t,e),$s.call(_assertThisInitialized(_this43));return _this43;}_createClass(qs,[{key:"detach",value:function detach(){this.stopListening();}},{key:"is",value:function is(t){return"liveRange"===t||"model:liveRange"===t||"range"==t||"model:range"===t;}},{key:"toRange",value:function toRange(){return new Ns(this.start,this.end);}}],[{key:"fromRange",value:function fromRange(t){return new qs(t.start,t.end);}}]);return qs;}(Ns);function $s(){var _this44=this;this.listenTo(this.root.document.model,"applyOperation",function(t,e){var i=e[0];i.isDocumentOperation&&Ys.call(_this44,i);},{priority:"low"});}function Ys(t){var e=this.getTransformedByOperation(t),i=Ns._createFromRanges(e),n=!i.isEqual(this),o=function(t,e){switch(e.type){case"insert":return t.containsPosition(e.position);case"move":case"remove":case"reinsert":case"merge":return t.containsPosition(e.sourcePosition)||t.start.isEqual(e.sourcePosition)||t.containsPosition(e.targetPosition);case"split":return t.containsPosition(e.splitPosition)||t.containsPosition(e.insertionPosition);}return!1;}(this,t);var r=null;if(n){"$graveyard"==i.root.rootName&&(r="remove"==t.type?t.sourcePosition:t.deletionPosition);var _e102=this.toRange();this.start=i.start,this.end=i.end,this.fire("change:range",_e102,{deletionPosition:r});}else o&&this.fire("change:content",this.toRange(),{deletionPosition:r});}yi(qs,mi);var Gs=/*#__PURE__*/function(){function Gs(t){_classCallCheck(this,Gs);this._selection=new Ks(t),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this);}_createClass(Gs,[{key:"isCollapsed",get:function get(){return this._selection.isCollapsed;}},{key:"anchor",get:function get(){return this._selection.anchor;}},{key:"focus",get:function get(){return this._selection.focus;}},{key:"rangeCount",get:function get(){return this._selection.rangeCount;}},{key:"hasOwnRange",get:function get(){return this._selection.hasOwnRange;}},{key:"isBackward",get:function get(){return this._selection.isBackward;}},{key:"isGravityOverridden",get:function get(){return this._selection.isGravityOverridden;}},{key:"markers",get:function get(){return this._selection.markers;}},{key:"_ranges",get:function get(){return this._selection._ranges;}},{key:"getRanges",value:function getRanges(){return this._selection.getRanges();}},{key:"getFirstPosition",value:function getFirstPosition(){return this._selection.getFirstPosition();}},{key:"getLastPosition",value:function getLastPosition(){return this._selection.getLastPosition();}},{key:"getFirstRange",value:function getFirstRange(){return this._selection.getFirstRange();}},{key:"getLastRange",value:function getLastRange(){return this._selection.getLastRange();}},{key:"getSelectedBlocks",value:function getSelectedBlocks(){return this._selection.getSelectedBlocks();}},{key:"getSelectedElement",value:function getSelectedElement(){return this._selection.getSelectedElement();}},{key:"containsEntireContent",value:function containsEntireContent(t){return this._selection.containsEntireContent(t);}},{key:"destroy",value:function destroy(){this._selection.destroy();}},{key:"getAttributeKeys",value:function getAttributeKeys(){return this._selection.getAttributeKeys();}},{key:"getAttributes",value:function getAttributes(){return this._selection.getAttributes();}},{key:"getAttribute",value:function getAttribute(t){return this._selection.getAttribute(t);}},{key:"hasAttribute",value:function hasAttribute(t){return this._selection.hasAttribute(t);}},{key:"refresh",value:function refresh(){this._selection._updateMarkers(),this._selection._updateAttributes(!1);}},{key:"observeMarkers",value:function observeMarkers(t){this._selection.observeMarkers(t);}},{key:"is",value:function is(t){return"selection"===t||"model:selection"==t||"documentSelection"==t||"model:documentSelection"==t;}},{key:"_setFocus",value:function _setFocus(t,e){this._selection.setFocus(t,e);}},{key:"_setTo",value:function _setTo(t,e,i){this._selection.setTo(t,e,i);}},{key:"_setAttribute",value:function _setAttribute(t,e){this._selection.setAttribute(t,e);}},{key:"_removeAttribute",value:function _removeAttribute(t){this._selection.removeAttribute(t);}},{key:"_getStoredAttributes",value:function _getStoredAttributes(){return this._selection._getStoredAttributes();}},{key:"_overrideGravity",value:function _overrideGravity(){return this._selection.overrideGravity();}},{key:"_restoreGravity",value:function _restoreGravity(t){this._selection.restoreGravity(t);}}],[{key:"_getStoreAttributeKey",value:function _getStoreAttributeKey(t){return"selection:"+t;}},{key:"_isStoreAttributeKey",value:function _isStoreAttributeKey(t){return t.startsWith("selection:");}}]);return Gs;}();yi(Gs,mi);var Ks=/*#__PURE__*/function(_Bs){_inherits(Ks,_Bs);var _super22=_createSuper(Ks);function Ks(t){var _this45;_classCallCheck(this,Ks);_this45=_super22.call(this),_this45.markers=new xi({idProperty:"name"}),_this45._model=t.model,_this45._document=t,_this45._attributePriority=new Map(),_this45._selectionRestorePosition=null,_this45._hasChangedRange=!1,_this45._overriddenGravityRegister=new Set(),_this45._observedMarkers=new Set(),_this45.listenTo(_this45._model,"applyOperation",function(t,e){var i=e[0];i.isDocumentOperation&&"marker"!=i.type&&"rename"!=i.type&&"noop"!=i.type&&(0==_this45._ranges.length&&_this45._selectionRestorePosition&&_this45._fixGraveyardSelection(_this45._selectionRestorePosition),_this45._selectionRestorePosition=null,_this45._hasChangedRange&&(_this45._hasChangedRange=!1,_this45.fire("change:range",{directChange:!1})));},{priority:"lowest"}),_this45.on("change:range",function(){var _iterator136=_createForOfIteratorHelper(_this45.getRanges()),_step136;try{for(_iterator136.s();!(_step136=_iterator136.n()).done;){var _t102=_step136.value;if(!_this45._document._validateSelectionRange(_t102))throw new ui.a("document-selection-wrong-position",_assertThisInitialized(_this45),{range:_t102});}}catch(err){_iterator136.e(err);}finally{_iterator136.f();}}),_this45.listenTo(_this45._model.markers,"update",function(t,e,i,n){_this45._updateMarker(e,n);}),_this45.listenTo(_this45._document,"change",function(t,e){!function(t,e){var i=t.document.differ;var _iterator137=_createForOfIteratorHelper(i.getChanges()),_step137;try{var _loop2=function _loop2(){var n=_step137.value;if("insert"!=n.type)return"continue";var i=n.position.parent;n.length===i.maxOffset&&t.enqueueChange(e,function(t){var e=Array.from(i.getAttributeKeys()).filter(function(t){return t.startsWith("selection:");});var _iterator138=_createForOfIteratorHelper(e),_step138;try{for(_iterator138.s();!(_step138=_iterator138.n()).done;){var _n60=_step138.value;t.removeAttribute(_n60,i);}}catch(err){_iterator138.e(err);}finally{_iterator138.f();}});};for(_iterator137.s();!(_step137=_iterator137.n()).done;){var _ret=_loop2();if(_ret==="continue")continue;}}catch(err){_iterator137.e(err);}finally{_iterator137.f();}}(_this45._model,e);});return _this45;}_createClass(Ks,[{key:"isCollapsed",get:function get(){return 0===this._ranges.length?this._document._getDefaultRange().isCollapsed:_get(_getPrototypeOf(Ks.prototype),"isCollapsed",this);}},{key:"anchor",get:function get(){return _get(_getPrototypeOf(Ks.prototype),"anchor",this)||this._document._getDefaultRange().start;}},{key:"focus",get:function get(){return _get(_getPrototypeOf(Ks.prototype),"focus",this)||this._document._getDefaultRange().end;}},{key:"rangeCount",get:function get(){return this._ranges.length?this._ranges.length:1;}},{key:"hasOwnRange",get:function get(){return this._ranges.length>0;}},{key:"isGravityOverridden",get:function get(){return!!this._overriddenGravityRegister.size;}},{key:"destroy",value:function destroy(){for(var _t103=0;_t103<this._ranges.length;_t103++){this._ranges[_t103].detach();}this.stopListening();}},{key:"getRanges",value:/*#__PURE__*/regeneratorRuntime.mark(function getRanges(){return regeneratorRuntime.wrap(function getRanges$(_context18){while(1){switch(_context18.prev=_context18.next){case 0:if(!this._ranges.length){_context18.next=4;break;}return _context18.delegateYield(_get(_getPrototypeOf(Ks.prototype),"getRanges",this).call(this),"t0",2);case 2:_context18.next=6;break;case 4:_context18.next=6;return this._document._getDefaultRange();case 6:case"end":return _context18.stop();}}},getRanges,this);})},{key:"getFirstRange",value:function getFirstRange(){return _get(_getPrototypeOf(Ks.prototype),"getFirstRange",this).call(this)||this._document._getDefaultRange();}},{key:"getLastRange",value:function getLastRange(){return _get(_getPrototypeOf(Ks.prototype),"getLastRange",this).call(this)||this._document._getDefaultRange();}},{key:"setTo",value:function setTo(t,e,i){_get(_getPrototypeOf(Ks.prototype),"setTo",this).call(this,t,e,i),this._updateAttributes(!0),this._updateMarkers();}},{key:"setFocus",value:function setFocus(t,e){_get(_getPrototypeOf(Ks.prototype),"setFocus",this).call(this,t,e),this._updateAttributes(!0),this._updateMarkers();}},{key:"setAttribute",value:function setAttribute(t,e){if(this._setAttribute(t,e)){var _e103=[t];this.fire("change:attribute",{attributeKeys:_e103,directChange:!0});}}},{key:"removeAttribute",value:function removeAttribute(t){if(this._removeAttribute(t)){var _e104=[t];this.fire("change:attribute",{attributeKeys:_e104,directChange:!0});}}},{key:"overrideGravity",value:function overrideGravity(){var t=li();return this._overriddenGravityRegister.add(t),1===this._overriddenGravityRegister.size&&this._updateAttributes(!0),t;}},{key:"restoreGravity",value:function restoreGravity(t){if(!this._overriddenGravityRegister.has(t))throw new ui.a("document-selection-gravity-wrong-restore",this,{uid:t});this._overriddenGravityRegister["delete"](t),this.isGravityOverridden||this._updateAttributes(!0);}},{key:"observeMarkers",value:function observeMarkers(t){this._observedMarkers.add(t),this._updateMarkers();}},{key:"_popRange",value:function _popRange(){this._ranges.pop().detach();}},{key:"_pushRange",value:function _pushRange(t){var e=this._prepareRange(t);e&&this._ranges.push(e);}},{key:"_prepareRange",value:function _prepareRange(t){var _this46=this;if(this._checkRange(t),t.root==this._document.graveyard)return;var e=qs.fromRange(t);return e.on("change:range",function(t,i,n){if(_this46._hasChangedRange=!0,e.root==_this46._document.graveyard){_this46._selectionRestorePosition=n.deletionPosition;var _t104=_this46._ranges.indexOf(e);_this46._ranges.splice(_t104,1),e.detach();}}),e;}},{key:"_updateMarkers",value:function _updateMarkers(){if(!this._observedMarkers.size)return;var t=[];var e=!1;var _iterator139=_createForOfIteratorHelper(this._model.markers),_step139;try{for(_iterator139.s();!(_step139=_iterator139.n()).done;){var _e105=_step139.value;var _i109=_e105.name.split(":",1)[0];if(!this._observedMarkers.has(_i109))continue;var _n61=_e105.getRange();var _iterator140=_createForOfIteratorHelper(this.getRanges()),_step140;try{for(_iterator140.s();!(_step140=_iterator140.n()).done;){var _i110=_step140.value;_n61.containsRange(_i110,!_i110.isCollapsed)&&t.push(_e105);}}catch(err){_iterator140.e(err);}finally{_iterator140.f();}}}catch(err){_iterator139.e(err);}finally{_iterator139.f();}var i=Array.from(this.markers);for(var _i105=0,_t105=t;_i105<_t105.length;_i105++){var _i106=_t105[_i105];this.markers.has(_i106)||(this.markers.add(_i106),e=!0);}for(var _i107=0,_Array$from2=Array.from(this.markers);_i107<_Array$from2.length;_i107++){var _i108=_Array$from2[_i107];t.includes(_i108)||(this.markers.remove(_i108),e=!0);}e&&this.fire("change:marker",{oldMarkers:i,directChange:!1});}},{key:"_updateMarker",value:function _updateMarker(t,e){var i=t.name.split(":",1)[0];if(!this._observedMarkers.has(i))return;var n=!1;var o=Array.from(this.markers),r=this.markers.has(t);if(e){var _i111=!1;var _iterator141=_createForOfIteratorHelper(this.getRanges()),_step141;try{for(_iterator141.s();!(_step141=_iterator141.n()).done;){var _t106=_step141.value;if(e.containsRange(_t106,!_t106.isCollapsed)){_i111=!0;break;}}}catch(err){_iterator141.e(err);}finally{_iterator141.f();}_i111&&!r?(this.markers.add(t),n=!0):!_i111&&r&&(this.markers.remove(t),n=!0);}else r&&(this.markers.remove(t),n=!0);n&&this.fire("change:marker",{oldMarkers:o,directChange:!1});}},{key:"_updateAttributes",value:function _updateAttributes(t){var e=Li(this._getSurroundingAttributes()),i=Li(this.getAttributes());if(t)this._attributePriority=new Map(),this._attrs=new Map();else{var _iterator142=_createForOfIteratorHelper(this._attributePriority),_step142;try{for(_iterator142.s();!(_step142=_iterator142.n()).done;){var _step142$value=_slicedToArray(_step142.value,2),_t107=_step142$value[0],_e106=_step142$value[1];"low"==_e106&&(this._attrs["delete"](_t107),this._attributePriority["delete"](_t107));}}catch(err){_iterator142.e(err);}finally{_iterator142.f();}}this._setAttributesTo(e);var n=[];var _iterator143=_createForOfIteratorHelper(this.getAttributes()),_step143;try{for(_iterator143.s();!(_step143=_iterator143.n()).done;){var _step143$value=_slicedToArray(_step143.value,2),_t108=_step143$value[0],_e107=_step143$value[1];i.has(_t108)&&i.get(_t108)===_e107||n.push(_t108);}}catch(err){_iterator143.e(err);}finally{_iterator143.f();}var _iterator144=_createForOfIteratorHelper(i),_step144;try{for(_iterator144.s();!(_step144=_iterator144.n()).done;){var _step144$value=_slicedToArray(_step144.value,1),_t109=_step144$value[0];this.hasAttribute(_t109)||n.push(_t109);}}catch(err){_iterator144.e(err);}finally{_iterator144.f();}n.length>0&&this.fire("change:attribute",{attributeKeys:n,directChange:!1});}},{key:"_setAttribute",value:function _setAttribute(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:!0;var n=i?"normal":"low";if("low"==n&&"normal"==this._attributePriority.get(t))return!1;return _get(_getPrototypeOf(Ks.prototype),"getAttribute",this).call(this,t)!==e&&(this._attrs.set(t,e),this._attributePriority.set(t,n),!0);}},{key:"_removeAttribute",value:function _removeAttribute(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!0;var i=e?"normal":"low";return("low"!=i||"normal"!=this._attributePriority.get(t))&&(this._attributePriority.set(t,i),!!_get(_getPrototypeOf(Ks.prototype),"hasAttribute",this).call(this,t)&&(this._attrs["delete"](t),!0));}},{key:"_setAttributesTo",value:function _setAttributesTo(t){var e=new Set();var _iterator145=_createForOfIteratorHelper(this.getAttributes()),_step145;try{for(_iterator145.s();!(_step145=_iterator145.n()).done;){var _step145$value=_slicedToArray(_step145.value,2),_e108=_step145$value[0],_i112=_step145$value[1];t.get(_e108)!==_i112&&this._removeAttribute(_e108,!1);}}catch(err){_iterator145.e(err);}finally{_iterator145.f();}var _iterator146=_createForOfIteratorHelper(t),_step146;try{for(_iterator146.s();!(_step146=_iterator146.n()).done;){var _step146$value=_slicedToArray(_step146.value,2),_i113=_step146$value[0],_n62=_step146$value[1];this._setAttribute(_i113,_n62,!1)&&e.add(_i113);}}catch(err){_iterator146.e(err);}finally{_iterator146.f();}return e;}},{key:"_getStoredAttributes",value:/*#__PURE__*/regeneratorRuntime.mark(function _getStoredAttributes(){var t,_iterator147,_step147,_e109,_i114;return regeneratorRuntime.wrap(function _getStoredAttributes$(_context19){while(1){switch(_context19.prev=_context19.next){case 0:t=this.getFirstPosition().parent;if(!(this.isCollapsed&&t.isEmpty)){_context19.next=21;break;}_iterator147=_createForOfIteratorHelper(t.getAttributeKeys());_context19.prev=3;_iterator147.s();case 5:if((_step147=_iterator147.n()).done){_context19.next=13;break;}_e109=_step147.value;if(!_e109.startsWith("selection:")){_context19.next=11;break;}_i114=_e109.substr("selection:".length);_context19.next=11;return[_i114,t.getAttribute(_e109)];case 11:_context19.next=5;break;case 13:_context19.next=18;break;case 15:_context19.prev=15;_context19.t0=_context19["catch"](3);_iterator147.e(_context19.t0);case 18:_context19.prev=18;_iterator147.f();return _context19.finish(18);case 21:case"end":return _context19.stop();}}},_getStoredAttributes,this,[[3,15,18,21]]);})},{key:"_getSurroundingAttributes",value:function _getSurroundingAttributes(){var t=this.getFirstPosition(),e=this._model.schema;var i=null;if(this.isCollapsed){var _n63=t.textNode?t.textNode:t.nodeBefore,_o41=t.textNode?t.textNode:t.nodeAfter;if(this.isGravityOverridden||(i=Qs(_n63)),i||(i=Qs(_o41)),!this.isGravityOverridden&&!i){var _t110=_n63;for(;_t110&&!e.isInline(_t110)&&!i;){_t110=_t110.previousSibling,i=Qs(_t110);}}if(!i){var _t111=_o41;for(;_t111&&!e.isInline(_t111)&&!i;){_t111=_t111.nextSibling,i=Qs(_t111);}}i||(i=this._getStoredAttributes());}else{var _t112=this.getFirstRange();var _iterator148=_createForOfIteratorHelper(_t112),_step148;try{for(_iterator148.s();!(_step148=_iterator148.n()).done;){var _n64=_step148.value;if(_n64.item.is("element")&&e.isObject(_n64.item))break;if("text"==_n64.type){i=_n64.item.getAttributes();break;}}}catch(err){_iterator148.e(err);}finally{_iterator148.f();}}return i;}},{key:"_fixGraveyardSelection",value:function _fixGraveyardSelection(t){var e=this._model.schema.getNearestSelectionRange(t);e&&this._pushRange(e);}}]);return Ks;}(Bs);function Qs(t){return t instanceof xs||t instanceof ys?t.getAttributes():null;}var Js=/*#__PURE__*/function(){function Js(t){_classCallCheck(this,Js);this._dispatchers=t;}_createClass(Js,[{key:"add",value:function add(t){var _iterator149=_createForOfIteratorHelper(this._dispatchers),_step149;try{for(_iterator149.s();!(_step149=_iterator149.n()).done;){var _e110=_step149.value;t(_e110);}}catch(err){_iterator149.e(err);}finally{_iterator149.f();}return this;}}]);return Js;}();var Zs=function Zs(t){return ti(t,5);};var Xs=/*#__PURE__*/function(_Js){_inherits(Xs,_Js);var _super23=_createSuper(Xs);function Xs(){_classCallCheck(this,Xs);return _super23.apply(this,arguments);}_createClass(Xs,[{key:"elementToElement",value:function elementToElement(t){return this.add(function(t){return(t=Zs(t)).view=ia(t.view,"container"),function(e){var i;if(e.on("insert:"+t.model,(i=t.view,function(t,e,n){var o=i(e.item,n);if(!o)return;if(!n.consumable.consume(e.item,"insert"))return;var r=n.mapper.toViewPosition(e.range.start);n.mapper.bindElements(e.item,o),n.writer.insert(r,o);}),{priority:t.converterPriority||"normal"}),t.triggerBy){if(t.triggerBy.attributes){var _iterator150=_createForOfIteratorHelper(t.triggerBy.attributes),_step150;try{for(_iterator150.s();!(_step150=_iterator150.n()).done;){var _i115=_step150.value;e._mapReconversionTriggerEvent(t.model,"attribute:".concat(_i115,":").concat(t.model));}}catch(err){_iterator150.e(err);}finally{_iterator150.f();}}if(t.triggerBy.children){var _iterator151=_createForOfIteratorHelper(t.triggerBy.children),_step151;try{for(_iterator151.s();!(_step151=_iterator151.n()).done;){var _i116=_step151.value;e._mapReconversionTriggerEvent(t.model,"insert:"+_i116),e._mapReconversionTriggerEvent(t.model,"remove:"+_i116);}}catch(err){_iterator151.e(err);}finally{_iterator151.f();}}}};}(t));}},{key:"attributeToElement",value:function attributeToElement(t){return this.add(function(t){t=Zs(t);var e="attribute:"+(t.model.key?t.model.key:t.model);t.model.name&&(e+=":"+t.model.name);if(t.model.values){var _iterator152=_createForOfIteratorHelper(t.model.values),_step152;try{for(_iterator152.s();!(_step152=_iterator152.n()).done;){var _e111=_step152.value;t.view[_e111]=ia(t.view[_e111],"attribute");}}catch(err){_iterator152.e(err);}finally{_iterator152.f();}}else t.view=ia(t.view,"attribute");var i=na(t);return function(n){n.on(e,function(t){return function(e,i,n){var o=t(i.attributeOldValue,n),r=t(i.attributeNewValue,n);if(!o&&!r)return;if(!n.consumable.consume(i.item,e.name))return;var s=n.writer,a=s.document.selection;if(i.item instanceof Bs||i.item instanceof Gs)s.wrap(a.getFirstRange(),r);else{var _t113=n.mapper.toViewRange(i.range);null!==i.attributeOldValue&&o&&(_t113=s.unwrap(_t113,o)),null!==i.attributeNewValue&&r&&s.wrap(_t113,r);}};}(i),{priority:t.converterPriority||"normal"});};}(t));}},{key:"attributeToAttribute",value:function attributeToAttribute(t){return this.add(function(t){t=Zs(t);var e="attribute:"+(t.model.key?t.model.key:t.model);t.model.name&&(e+=":"+t.model.name);if(t.model.values){var _iterator153=_createForOfIteratorHelper(t.model.values),_step153;try{for(_iterator153.s();!(_step153=_iterator153.n()).done;){var _e112=_step153.value;t.view[_e112]=oa(t.view[_e112]);}}catch(err){_iterator153.e(err);}finally{_iterator153.f();}}else t.view=oa(t.view);var i=na(t);return function(n){var o;n.on(e,(o=i,function(t,e,i){var n=o(e.attributeOldValue,i),r=o(e.attributeNewValue,i);if(!n&&!r)return;if(!i.consumable.consume(e.item,t.name))return;var s=i.mapper.toViewElement(e.item),a=i.writer;if(!s)throw new ui.a("conversion-attribute-to-attribute-on-text",[e,i]);if(null!==e.attributeOldValue&&n)if("class"==n.key){var _t114=Ti(n.value);var _iterator154=_createForOfIteratorHelper(_t114),_step154;try{for(_iterator154.s();!(_step154=_iterator154.n()).done;){var _e113=_step154.value;a.removeClass(_e113,s);}}catch(err){_iterator154.e(err);}finally{_iterator154.f();}}else if("style"==n.key){var _t115=Object.keys(n.value);for(var _i117=0,_t116=_t115;_i117<_t116.length;_i117++){var _e114=_t116[_i117];a.removeStyle(_e114,s);}}else a.removeAttribute(n.key,s);if(null!==e.attributeNewValue&&r)if("class"==r.key){var _t117=Ti(r.value);var _iterator155=_createForOfIteratorHelper(_t117),_step155;try{for(_iterator155.s();!(_step155=_iterator155.n()).done;){var _e115=_step155.value;a.addClass(_e115,s);}}catch(err){_iterator155.e(err);}finally{_iterator155.f();}}else if("style"==r.key){var _t118=Object.keys(r.value);for(var _i118=0,_t119=_t118;_i118<_t119.length;_i118++){var _e116=_t119[_i118];a.setStyle(_e116,r.value[_e116],s);}}else a.setAttribute(r.key,r.value,s);}),{priority:t.converterPriority||"normal"});};}(t));}},{key:"markerToElement",value:function markerToElement(t){return this.add(function(t){return(t=Zs(t)).view=ia(t.view,"ui"),function(e){var i;e.on("addMarker:"+t.model,(i=t.view,function(t,e,n){e.isOpening=!0;var o=i(e,n);e.isOpening=!1;var r=i(e,n);if(!o||!r)return;var s=e.markerRange;if(s.isCollapsed&&!n.consumable.consume(s,t.name))return;var _iterator156=_createForOfIteratorHelper(s),_step156;try{for(_iterator156.s();!(_step156=_iterator156.n()).done;){var _e117=_step156.value;if(!n.consumable.consume(_e117.item,t.name))return;}}catch(err){_iterator156.e(err);}finally{_iterator156.f();}var a=n.mapper,c=n.writer;c.insert(a.toViewPosition(s.start),o),n.mapper.bindElementToMarker(o,e.markerName),s.isCollapsed||(c.insert(a.toViewPosition(s.end),r),n.mapper.bindElementToMarker(r,e.markerName)),t.stop();}),{priority:t.converterPriority||"normal"}),e.on("removeMarker:"+t.model,(t.view,function(t,e,i){var n=i.mapper.markerNameToElements(e.markerName);if(n){var _iterator157=_createForOfIteratorHelper(n),_step157;try{for(_iterator157.s();!(_step157=_iterator157.n()).done;){var _t120=_step157.value;i.mapper.unbindElementFromMarkerName(_t120,e.markerName),i.writer.clear(i.writer.createRangeOn(_t120),_t120);}}catch(err){_iterator157.e(err);}finally{_iterator157.f();}i.writer.clearClonedElementsGroup(e.markerName),t.stop();}}),{priority:t.converterPriority||"normal"});};}(t));}},{key:"markerToHighlight",value:function markerToHighlight(t){return this.add(function(t){return function(e){var i;e.on("addMarker:"+t.model,(i=t.view,function(t,e,n){if(!e.item)return;if(!(e.item instanceof Bs||e.item instanceof Gs||e.item.is("$textProxy")))return;var o=ra(i,e,n);if(!o)return;if(!n.consumable.consume(e.item,t.name))return;var r=n.writer,s=ta(r,o),a=r.document.selection;if(e.item instanceof Bs||e.item instanceof Gs)r.wrap(a.getFirstRange(),s,a);else{var _t121=n.mapper.toViewRange(e.range),_i119=r.wrap(_t121,s);var _iterator158=_createForOfIteratorHelper(_i119.getItems()),_step158;try{for(_iterator158.s();!(_step158=_iterator158.n()).done;){var _t122=_step158.value;if(_t122.is("attributeElement")&&_t122.isSimilar(s)){n.mapper.bindElementToMarker(_t122,e.markerName);break;}}}catch(err){_iterator158.e(err);}finally{_iterator158.f();}}}),{priority:t.converterPriority||"normal"}),e.on("addMarker:"+t.model,function(t){return function(e,i,n){if(!i.item)return;if(!(i.item instanceof Ts))return;var o=ra(t,i,n);if(!o)return;if(!n.consumable.test(i.item,e.name))return;var r=n.mapper.toViewElement(i.item);if(r&&r.getCustomProperty("addHighlight")){n.consumable.consume(i.item,e.name);var _iterator159=_createForOfIteratorHelper(Ns._createIn(i.item)),_step159;try{for(_iterator159.s();!(_step159=_iterator159.n()).done;){var _t123=_step159.value;n.consumable.consume(_t123.item,e.name);}}catch(err){_iterator159.e(err);}finally{_iterator159.f();}r.getCustomProperty("addHighlight")(r,o,n.writer),n.mapper.bindElementToMarker(r,i.markerName);}};}(t.view),{priority:t.converterPriority||"normal"}),e.on("removeMarker:"+t.model,function(t){return function(e,i,n){if(i.markerRange.isCollapsed)return;var o=ra(t,i,n);if(!o)return;var r=ta(n.writer,o),s=n.mapper.markerNameToElements(i.markerName);if(s){var _iterator160=_createForOfIteratorHelper(s),_step160;try{for(_iterator160.s();!(_step160=_iterator160.n()).done;){var _t124=_step160.value;n.mapper.unbindElementFromMarkerName(_t124,i.markerName),_t124.is("attributeElement")?n.writer.unwrap(n.writer.createRangeOn(_t124),r):_t124.getCustomProperty("removeHighlight")(_t124,o.id,n.writer);}}catch(err){_iterator160.e(err);}finally{_iterator160.f();}n.writer.clearClonedElementsGroup(i.markerName),e.stop();}};}(t.view),{priority:t.converterPriority||"normal"});};}(t));}},{key:"markerToData",value:function markerToData(t){return this.add(function(t){var e=(t=Zs(t)).model;t.view||(t.view=function(i){return{group:e,name:i.substr(t.model.length+1)};});return function(i){var n;i.on("addMarker:"+e,(n=t.view,function(t,e,i){var o=n(e.markerName,i);if(!o)return;var r=e.markerRange;i.consumable.consume(r,t.name)&&(ea(r,!1,i,e,o),ea(r,!0,i,e,o),t.stop());}),{priority:t.converterPriority||"normal"}),i.on("removeMarker:"+e,function(t){return function(e,i,n){var o=t(i.markerName,n);if(!o)return;var r=n.mapper.markerNameToElements(i.markerName);if(r){var _iterator161=_createForOfIteratorHelper(r),_step161;try{for(_iterator161.s();!(_step161=_iterator161.n()).done;){var _t125=_step161.value;n.mapper.unbindElementFromMarkerName(_t125,i.markerName),_t125.is("containerElement")?(s("data-".concat(o.group,"-start-before"),_t125),s("data-".concat(o.group,"-start-after"),_t125),s("data-".concat(o.group,"-end-before"),_t125),s("data-".concat(o.group,"-end-after"),_t125)):n.writer.clear(n.writer.createRangeOn(_t125),_t125);}}catch(err){_iterator161.e(err);}finally{_iterator161.f();}n.writer.clearClonedElementsGroup(i.markerName),e.stop();}function s(t,e){if(e.hasAttribute(t)){var _i120=new Set(e.getAttribute(t).split(","));_i120["delete"](o.name),0==_i120.size?n.writer.removeAttribute(t,e):n.writer.setAttribute(t,Array.from(_i120).join(","),e);}}};}(t.view),{priority:t.converterPriority||"normal"});};}(t));}}]);return Xs;}(Js);function ta(t,e){var i=t.createAttributeElement("span",e.attributes);return e.classes&&i._addClass(e.classes),e.priority&&(i._priority=e.priority),i._id=e.id,i;}function ea(t,e,i,n,o){var r=e?t.start:t.end;if(i.schema.checkChild(r,"$text")){!function(t,e,i,n,o){var r="".concat(o.group,"-").concat(e?"start":"end"),s=o.name?{name:o.name}:null,a=i.writer.createUIElement(r,s);i.writer.insert(t,a),i.mapper.bindElementToMarker(a,n.markerName);}(i.mapper.toViewPosition(r),e,i,n,o);}else{var _t126,_s13;e&&r.nodeAfter||!e&&!r.nodeBefore?(_t126=r.nodeAfter,_s13=!0):(_t126=r.nodeBefore,_s13=!1);!function(t,e,i,n,o,r){var s="data-".concat(r.group,"-").concat(e?"start":"end","-").concat(i?"before":"after"),a=t.hasAttribute(s)?t.getAttribute(s).split(","):[];a.unshift(r.name),n.writer.setAttribute(s,a.join(","),t),n.mapper.bindElementToMarker(t,o.markerName);}(i.mapper.toViewElement(_t126),e,_s13,i,n,o);}}function ia(t,e){return"function"==typeof t?t:function(i,n){return function(t,e,i){"string"==typeof t&&(t={name:t});var n;var o=e.writer,r=Object.assign({},t.attributes);if("container"==i)n=o.createContainerElement(t.name,r);else if("attribute"==i){var _e118={priority:t.priority||so.DEFAULT_PRIORITY};n=o.createAttributeElement(t.name,r,_e118);}else n=o.createUIElement(t.name,r);if(t.styles){var _e119=Object.keys(t.styles);for(var _i121=0,_e120=_e119;_i121<_e120.length;_i121++){var _i122=_e120[_i121];o.setStyle(_i122,t.styles[_i122],n);}}if(t.classes){var _e121=t.classes;if("string"==typeof _e121)o.addClass(_e121,n);else{var _iterator162=_createForOfIteratorHelper(_e121),_step162;try{for(_iterator162.s();!(_step162=_iterator162.n()).done;){var _t127=_step162.value;o.addClass(_t127,n);}}catch(err){_iterator162.e(err);}finally{_iterator162.f();}}}return n;}(t,n,e);};}function na(t){return t.model.values?function(e,i){var n=t.view[e];return n?n(e,i):null;}:t.view;}function oa(t){return"string"==typeof t?function(e){return{key:t,value:e};}:"object"==_typeof(t)?t.value?function(){return t;}:function(e){return{key:t.key,value:e};}:t;}function ra(t,e,i){var n="function"==typeof t?t(e,i):t;return n?(n.priority||(n.priority=10),n.id||(n.id=e.markerName),n):null;}function sa(t){var _t$model=t.model,e=_t$model.schema,i=_t$model.document;var _iterator163=_createForOfIteratorHelper(i.getRootNames()),_step163;try{for(_iterator163.s();!(_step163=_iterator163.n()).done;){var _n65=_step163.value;var _o42=i.getRoot(_n65);if(_o42.isEmpty&&!e.checkChild(_o42,"$text")&&e.checkChild(_o42,"paragraph"))return t.insertElement("paragraph",_o42),!0;}}catch(err){_iterator163.e(err);}finally{_iterator163.f();}return!1;}function aa(t,e,i){var n=i.createContext(t);return!!i.checkChild(n,"paragraph")&&!!i.checkChild(n.push("paragraph"),e);}function ca(t,e){var i=e.createElement("paragraph");return e.insert(i,t),e.createPositionAt(i,0);}var la=/*#__PURE__*/function(_Js2){_inherits(la,_Js2);var _super24=_createSuper(la);function la(){_classCallCheck(this,la);return _super24.apply(this,arguments);}_createClass(la,[{key:"elementToElement",value:function elementToElement(t){return this.add(da(t));}},{key:"elementToAttribute",value:function elementToAttribute(t){return this.add(function(t){fa(t=Zs(t));var e=ma(t,!1),i=ua(t.view),n=i?"element:"+i:"element";return function(i){i.on(n,e,{priority:t.converterPriority||"low"});};}(t));}},{key:"attributeToAttribute",value:function attributeToAttribute(t){return this.add(function(t){t=Zs(t);var e=null;("string"==typeof t.view||t.view.key)&&(e=function(t){"string"==typeof t.view&&(t.view={key:t.view});var e=t.view.key;var i;if("class"==e||"style"==e){i=_defineProperty({},"class"==e?"classes":"styles",t.view.value);}else{var _n66=void 0===t.view.value?/[\s\S]*/:t.view.value;i={attributes:_defineProperty({},e,_n66)};}t.view.name&&(i.name=t.view.name);return t.view=i,e;}(t));fa(t,e);var i=ma(t,!0);return function(e){e.on("element",i,{priority:t.converterPriority||"low"});};}(t));}},{key:"elementToMarker",value:function elementToMarker(t){return Object(ui.c)("upcast-helpers-element-to-marker-deprecated"),this.add(function(t){return function(t){var e=t.model;t.model=function(t,i){var n="string"==typeof e?e:e(t,i);return i.writer.createElement("$marker",{"data-name":n});};}(t=Zs(t)),da(t);}(t));}},{key:"dataToMarker",value:function dataToMarker(t){return this.add(function(t){(t=Zs(t)).model||(t.model=function(e){return e?t.view+":"+e:t.view;});var e=ha(ga(t,"start")),i=ha(ga(t,"end"));return function(n){n.on("element:"+t.view+"-start",e,{priority:t.converterPriority||"normal"}),n.on("element:"+t.view+"-end",i,{priority:t.converterPriority||"normal"});var o=di.get("low"),r=di.get("highest"),s=di.get(t.converterPriority)/r;n.on("element",function(t){return function(e,i,n){var o="data-"+t.view;function r(e,o){var _iterator164=_createForOfIteratorHelper(o),_step164;try{for(_iterator164.s();!(_step164=_iterator164.n()).done;){var _r14=_step164.value;var _o43=t.model(_r14,n),_s14=n.writer.createElement("$marker",{"data-name":_o43});n.writer.insert(_s14,e),i.modelCursor.isEqual(e)?i.modelCursor=i.modelCursor.getShiftedBy(1):i.modelCursor=i.modelCursor._getTransformedByInsertion(e,1),i.modelRange=i.modelRange._getTransformedByInsertion(e,1)[0];}}catch(err){_iterator164.e(err);}finally{_iterator164.f();}}i.modelRange||(i=Object.assign(i,n.convertChildren(i.viewItem,i.modelCursor))),n.consumable.consume(i.viewItem,{attributes:o+"-end-after"})&&r(i.modelRange.end,i.viewItem.getAttribute(o+"-end-after").split(",")),n.consumable.consume(i.viewItem,{attributes:o+"-start-after"})&&r(i.modelRange.end,i.viewItem.getAttribute(o+"-start-after").split(",")),n.consumable.consume(i.viewItem,{attributes:o+"-end-before"})&&r(i.modelRange.start,i.viewItem.getAttribute(o+"-end-before").split(",")),n.consumable.consume(i.viewItem,{attributes:o+"-start-before"})&&r(i.modelRange.start,i.viewItem.getAttribute(o+"-start-before").split(","));};}(t),{priority:o+s});};}(t));}}]);return la;}(Js);function da(t){var e=ha(t=Zs(t)),i=ua(t.view),n=i?"element:"+i:"element";return function(i){i.on(n,e,{priority:t.converterPriority||"normal"});};}function ua(t){return"string"==typeof t?t:"object"==_typeof(t)&&"string"==typeof t.name?t.name:null;}function ha(t){var e=new zi(t.view);return function(i,n,o){var r=e.match(n.viewItem);if(!r)return;var s=r.match;if(s.name=!0,!o.consumable.test(n.viewItem,s))return;var a=function(t,e,i){return t instanceof Function?t(e,i):i.writer.createElement(t);}(t.model,n.viewItem,o);a&&o.safeInsert(a,n.modelCursor)&&(o.consumable.consume(n.viewItem,s),o.convertChildren(n.viewItem,a),o.updateConversionResult(a,n));};}function fa(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var i=null===e||function(t){return t.getAttribute(e);},n="object"!=_typeof(t.model)?t.model:t.model.key,o="object"!=_typeof(t.model)||void 0===t.model.value?i:t.model.value;t.model={key:n,value:o};}function ma(t,e){var i=new zi(t.view);return function(n,o,r){var s=i.match(o.viewItem);if(!s)return;var a=t.model.key,c="function"==typeof t.model.value?t.model.value(o.viewItem,r):t.model.value;if(null===c)return;if(!function(t,e){var i="function"==typeof t?t(e):t;if("object"==_typeof(i)&&!ua(i))return!1;return!i.classes&&!i.attributes&&!i.styles;}(t.view,o.viewItem)?delete s.match.name:s.match.name=!0,!r.consumable.test(o.viewItem,s.match))return;o.modelRange||(o=Object.assign(o,r.convertChildren(o.viewItem,o.modelCursor)));(function(t,e,i,n){var o=!1;for(var _i124=0,_Array$from3=Array.from(t.getItems({shallow:i}));_i124<_Array$from3.length;_i124++){var _r15=_Array$from3[_i124];n.schema.checkAttribute(_r15,e.key)&&(n.writer.setAttribute(e.key,e.value,_r15),o=!0);}return o;})(o.modelRange,{key:a,value:c},e,r)&&r.consumable.consume(o.viewItem,s.match);};}function ga(t,e){var i={};return i.view=t.view+"-"+e,i.model=function(e,i){var n=e.getAttribute("name"),o=t.model(n,i);return i.writer.createElement("$marker",{"data-name":o});},i;}var pa=/*#__PURE__*/function(){function pa(t,e){var _this47=this;_classCallCheck(this,pa);this.model=t,this.view=new _s(e),this.mapper=new Os(),this.downcastDispatcher=new Ls({mapper:this.mapper,schema:t.schema});var i=this.model.document,n=i.selection,o=this.model.markers;this.listenTo(this.model,"_beforeChanges",function(){_this47.view._disableRendering(!0);},{priority:"highest"}),this.listenTo(this.model,"_afterChanges",function(){_this47.view._disableRendering(!1);},{priority:"lowest"}),this.listenTo(i,"change",function(){_this47.view.change(function(t){_this47.downcastDispatcher.convertChanges(i.differ,o,t),_this47.downcastDispatcher.convertSelection(n,o,t);});},{priority:"low"}),this.listenTo(this.view.document,"selectionChange",function(t,e){return function(i,n){var o=n.newSelection,r=[];var _iterator165=_createForOfIteratorHelper(o.getRanges()),_step165;try{for(_iterator165.s();!(_step165=_iterator165.n()).done;){var _t128=_step165.value;r.push(e.toModelRange(_t128));}}catch(err){_iterator165.e(err);}finally{_iterator165.f();}var s=t.createSelection(r,{backward:o.isBackward});s.isEqual(t.document.selection)||t.change(function(t){t.setSelection(s);});};}(this.model,this.mapper)),this.downcastDispatcher.on("insert:$text",function(t,e,i){if(!i.consumable.consume(e.item,"insert"))return;var n=i.writer,o=i.mapper.toViewPosition(e.range.start),r=n.createText(e.item.data);n.insert(o,r);},{priority:"lowest"}),this.downcastDispatcher.on("remove",function(t,e,i){var n=i.mapper.toViewPosition(e.position),o=e.position.getShiftedBy(e.length),r=i.mapper.toViewPosition(o,{isPhantom:!0}),s=i.writer.createRange(n,r),a=i.writer.remove(s.getTrimmed());var _iterator166=_createForOfIteratorHelper(i.writer.createRangeIn(a).getItems()),_step166;try{for(_iterator166.s();!(_step166=_iterator166.n()).done;){var _t129=_step166.value;i.mapper.unbindViewElement(_t129);}}catch(err){_iterator166.e(err);}finally{_iterator166.f();}},{priority:"low"}),this.downcastDispatcher.on("selection",function(t,e,i){var n=i.writer,o=n.document.selection;var _iterator167=_createForOfIteratorHelper(o.getRanges()),_step167;try{for(_iterator167.s();!(_step167=_iterator167.n()).done;){var _t130=_step167.value;_t130.isCollapsed&&_t130.end.parent.isAttached()&&i.writer.mergeAttributes(_t130.start);}}catch(err){_iterator167.e(err);}finally{_iterator167.f();}n.setSelection(null);},{priority:"low"}),this.downcastDispatcher.on("selection",function(t,e,i){var n=e.selection;if(n.isCollapsed)return;if(!i.consumable.consume(n,"selection"))return;var o=[];var _iterator168=_createForOfIteratorHelper(n.getRanges()),_step168;try{for(_iterator168.s();!(_step168=_iterator168.n()).done;){var _t131=_step168.value;var _e122=i.mapper.toViewRange(_t131);o.push(_e122);}}catch(err){_iterator168.e(err);}finally{_iterator168.f();}i.writer.setSelection(o,{backward:n.isBackward});},{priority:"low"}),this.downcastDispatcher.on("selection",function(t,e,i){var n=e.selection;if(!n.isCollapsed)return;if(!i.consumable.consume(n,"selection"))return;var o=i.writer,r=n.getFirstPosition(),s=i.mapper.toViewPosition(r),a=o.breakAttributes(s);o.setSelection(a);},{priority:"low"}),this.view.document.roots.bindTo(this.model.document.roots).using(function(t){if("$graveyard"==t.rootName)return null;var e=new Jn(_this47.view.document,t.name);return e.rootName=t.rootName,_this47.mapper.bindElements(t,e),e;});}_createClass(pa,[{key:"destroy",value:function destroy(){this.view.destroy(),this.stopListening();}}]);return pa;}();yi(pa,Un);var ba=/*#__PURE__*/function(){function ba(){_classCallCheck(this,ba);this._commands=new Map();}_createClass(ba,[{key:"add",value:function add(t,e){this._commands.set(t,e);}},{key:"get",value:function get(t){return this._commands.get(t);}},{key:"execute",value:function execute(t){var i=this.get(t);if(!i)throw new ui.a("commandcollection-command-not-found",this,{commandName:t});for(var _len16=arguments.length,e=new Array(_len16>1?_len16-1:0),_key16=1;_key16<_len16;_key16++){e[_key16-1]=arguments[_key16];}return i.execute.apply(i,e);}},{key:"names",value:/*#__PURE__*/regeneratorRuntime.mark(function names(){return regeneratorRuntime.wrap(function names$(_context20){while(1){switch(_context20.prev=_context20.next){case 0:return _context20.delegateYield(this._commands.keys(),"t0",1);case 1:case"end":return _context20.stop();}}},names,this);})},{key:"commands",value:/*#__PURE__*/regeneratorRuntime.mark(function commands(){return regeneratorRuntime.wrap(function commands$(_context21){while(1){switch(_context21.prev=_context21.next){case 0:return _context21.delegateYield(this._commands.values(),"t0",1);case 1:case"end":return _context21.stop();}}},commands,this);})},{key:Symbol.iterator,value:function value(){return this._commands[Symbol.iterator]();}},{key:"destroy",value:function destroy(){var _iterator169=_createForOfIteratorHelper(this.commands()),_step169;try{for(_iterator169.s();!(_step169=_iterator169.n()).done;){var _t132=_step169.value;_t132.destroy();}}catch(err){_iterator169.e(err);}finally{_iterator169.f();}}}]);return ba;}();var wa=/*#__PURE__*/function(){function wa(){_classCallCheck(this,wa);this._consumables=new Map();}_createClass(wa,[{key:"add",value:function add(t,e){var i;t.is("$text")||t.is("documentFragment")?this._consumables.set(t,!0):(this._consumables.has(t)?i=this._consumables.get(t):(i=new ka(t),this._consumables.set(t,i)),i.add(e));}},{key:"test",value:function test(t,e){var i=this._consumables.get(t);return void 0===i?null:t.is("$text")||t.is("documentFragment")?i:i.test(e);}},{key:"consume",value:function consume(t,e){return!!this.test(t,e)&&(t.is("$text")||t.is("documentFragment")?this._consumables.set(t,!1):this._consumables.get(t).consume(e),!0);}},{key:"revert",value:function revert(t,e){var i=this._consumables.get(t);void 0!==i&&(t.is("$text")||t.is("documentFragment")?this._consumables.set(t,!0):i.revert(e));}}],[{key:"consumablesFromElement",value:function consumablesFromElement(t){var e={element:t,name:!0,attributes:[],classes:[],styles:[]},i=t.getAttributeKeys();var _iterator170=_createForOfIteratorHelper(i),_step170;try{for(_iterator170.s();!(_step170=_iterator170.n()).done;){var _t133=_step170.value;"style"!=_t133&&"class"!=_t133&&e.attributes.push(_t133);}}catch(err){_iterator170.e(err);}finally{_iterator170.f();}var n=t.getClassNames();var _iterator171=_createForOfIteratorHelper(n),_step171;try{for(_iterator171.s();!(_step171=_iterator171.n()).done;){var _t134=_step171.value;e.classes.push(_t134);}}catch(err){_iterator171.e(err);}finally{_iterator171.f();}var o=t.getStyleNames();var _iterator172=_createForOfIteratorHelper(o),_step172;try{for(_iterator172.s();!(_step172=_iterator172.n()).done;){var _t135=_step172.value;e.styles.push(_t135);}}catch(err){_iterator172.e(err);}finally{_iterator172.f();}return e;}},{key:"createFrom",value:function createFrom(t,e){if(e||(e=new wa(t)),t.is("$text"))return e.add(t),e;t.is("element")&&e.add(t,wa.consumablesFromElement(t)),t.is("documentFragment")&&e.add(t);var _iterator173=_createForOfIteratorHelper(t.getChildren()),_step173;try{for(_iterator173.s();!(_step173=_iterator173.n()).done;){var _i125=_step173.value;e=wa.createFrom(_i125,e);}}catch(err){_iterator173.e(err);}finally{_iterator173.f();}return e;}}]);return wa;}();var ka=/*#__PURE__*/function(){function ka(t){_classCallCheck(this,ka);this.element=t,this._canConsumeName=null,this._consumables={attributes:new Map(),styles:new Map(),classes:new Map()};}_createClass(ka,[{key:"add",value:function add(t){t.name&&(this._canConsumeName=!0);for(var _e123 in this._consumables){_e123 in t&&this._add(_e123,t[_e123]);}}},{key:"test",value:function test(t){if(t.name&&!this._canConsumeName)return this._canConsumeName;for(var _e124 in this._consumables){if(_e124 in t){var _i126=this._test(_e124,t[_e124]);if(!0!==_i126)return _i126;}}return!0;}},{key:"consume",value:function consume(t){t.name&&(this._canConsumeName=!1);for(var _e125 in this._consumables){_e125 in t&&this._consume(_e125,t[_e125]);}}},{key:"revert",value:function revert(t){t.name&&(this._canConsumeName=!0);for(var _e126 in this._consumables){_e126 in t&&this._revert(_e126,t[_e126]);}}},{key:"_add",value:function _add(t,e){var i=Dt(e)?e:[e],n=this._consumables[t];var _iterator174=_createForOfIteratorHelper(i),_step174;try{for(_iterator174.s();!(_step174=_iterator174.n()).done;){var _e127=_step174.value;if("attributes"===t&&("class"===_e127||"style"===_e127))throw new ui.a("viewconsumable-invalid-attribute",this);if(n.set(_e127,!0),"styles"===t){var _iterator175=_createForOfIteratorHelper(this.element.document.stylesProcessor.getRelatedStyles(_e127)),_step175;try{for(_iterator175.s();!(_step175=_iterator175.n()).done;){var _t136=_step175.value;n.set(_t136,!0);}}catch(err){_iterator175.e(err);}finally{_iterator175.f();}}}}catch(err){_iterator174.e(err);}finally{_iterator174.f();}}},{key:"_test",value:function _test(t,e){var i=Dt(e)?e:[e],n=this._consumables[t];var _iterator176=_createForOfIteratorHelper(i),_step176;try{for(_iterator176.s();!(_step176=_iterator176.n()).done;){var _e128=_step176.value;if("attributes"!==t||"class"!==_e128&&"style"!==_e128){var _t137=n.get(_e128);if(void 0===_t137)return null;if(!_t137)return!1;}else{var _t138="class"==_e128?"classes":"styles",_i127=this._test(_t138,_toConsumableArray(this._consumables[_t138].keys()));if(!0!==_i127)return _i127;}}}catch(err){_iterator176.e(err);}finally{_iterator176.f();}return!0;}},{key:"_consume",value:function _consume(t,e){var i=Dt(e)?e:[e],n=this._consumables[t];var _iterator177=_createForOfIteratorHelper(i),_step177;try{for(_iterator177.s();!(_step177=_iterator177.n()).done;){var _e129=_step177.value;if("attributes"!==t||"class"!==_e129&&"style"!==_e129){if(n.set(_e129,!1),"styles"==t){var _iterator178=_createForOfIteratorHelper(this.element.document.stylesProcessor.getRelatedStyles(_e129)),_step178;try{for(_iterator178.s();!(_step178=_iterator178.n()).done;){var _t139=_step178.value;n.set(_t139,!1);}}catch(err){_iterator178.e(err);}finally{_iterator178.f();}}}else{var _t140="class"==_e129?"classes":"styles";this._consume(_t140,_toConsumableArray(this._consumables[_t140].keys()));}}}catch(err){_iterator177.e(err);}finally{_iterator177.f();}}},{key:"_revert",value:function _revert(t,e){var i=Dt(e)?e:[e],n=this._consumables[t];var _iterator179=_createForOfIteratorHelper(i),_step179;try{for(_iterator179.s();!(_step179=_iterator179.n()).done;){var _e130=_step179.value;if("attributes"!==t||"class"!==_e130&&"style"!==_e130){!1===n.get(_e130)&&n.set(_e130,!0);}else{var _t141="class"==_e130?"classes":"styles";this._revert(_t141,_toConsumableArray(this._consumables[_t141].keys()));}}}catch(err){_iterator179.e(err);}finally{_iterator179.f();}}}]);return ka;}();var _a=/*#__PURE__*/function(){function _a(){var _this48=this;_classCallCheck(this,_a);this._sourceDefinitions={},this._attributeProperties={},this.decorate("checkChild"),this.decorate("checkAttribute"),this.on("checkAttribute",function(t,e){e[0]=new va(e[0]);},{priority:"highest"}),this.on("checkChild",function(t,e){e[0]=new va(e[0]),e[1]=_this48.getDefinition(e[1]);},{priority:"highest"});}_createClass(_a,[{key:"register",value:function register(t,e){if(this._sourceDefinitions[t])throw new ui.a("schema-cannot-register-item-twice",this,{itemName:t});this._sourceDefinitions[t]=[Object.assign({},e)],this._clearCache();}},{key:"extend",value:function extend(t,e){if(!this._sourceDefinitions[t])throw new ui.a("schema-cannot-extend-missing-item",this,{itemName:t});this._sourceDefinitions[t].push(Object.assign({},e)),this._clearCache();}},{key:"getDefinitions",value:function getDefinitions(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions;}},{key:"getDefinition",value:function getDefinition(t){var e;return e="string"==typeof t?t:t.is&&(t.is("$text")||t.is("$textProxy"))?"$text":t.name,this.getDefinitions()[e];}},{key:"isRegistered",value:function isRegistered(t){return!!this.getDefinition(t);}},{key:"isBlock",value:function isBlock(t){var e=this.getDefinition(t);return!(!e||!e.isBlock);}},{key:"isLimit",value:function isLimit(t){var e=this.getDefinition(t);return!!e&&!(!e.isLimit&&!e.isObject);}},{key:"isObject",value:function isObject(t){var e=this.getDefinition(t);return!!e&&!!(e.isObject||e.isLimit&&e.isSelectable&&e.isContent);}},{key:"isInline",value:function isInline(t){var e=this.getDefinition(t);return!(!e||!e.isInline);}},{key:"isSelectable",value:function isSelectable(t){var e=this.getDefinition(t);return!!e&&!(!e.isSelectable&&!e.isObject);}},{key:"isContent",value:function isContent(t){var e=this.getDefinition(t);return!!e&&!(!e.isContent&&!e.isObject);}},{key:"checkChild",value:function checkChild(t,e){return!!e&&this._checkContextMatch(e,t);}},{key:"checkAttribute",value:function checkAttribute(t,e){var i=this.getDefinition(t.last);return!!i&&i.allowAttributes.includes(e);}},{key:"checkMerge",value:function checkMerge(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(t instanceof Es){var _e131=t.nodeBefore,_i128=t.nodeAfter;if(!(_e131 instanceof Ts))throw new ui.a("schema-check-merge-no-element-before",this);if(!(_i128 instanceof Ts))throw new ui.a("schema-check-merge-no-element-after",this);return this.checkMerge(_e131,_i128);}var _iterator180=_createForOfIteratorHelper(e.getChildren()),_step180;try{for(_iterator180.s();!(_step180=_iterator180.n()).done;){var _i129=_step180.value;if(!this.checkChild(t,_i129))return!1;}}catch(err){_iterator180.e(err);}finally{_iterator180.f();}return!0;}},{key:"addChildCheck",value:function addChildCheck(t){this.on("checkChild",function(e,_ref13){var _ref14=_slicedToArray(_ref13,2),i=_ref14[0],n=_ref14[1];if(!n)return;var o=t(i,n);"boolean"==typeof o&&(e.stop(),e["return"]=o);},{priority:"high"});}},{key:"addAttributeCheck",value:function addAttributeCheck(t){this.on("checkAttribute",function(e,_ref15){var _ref16=_slicedToArray(_ref15,2),i=_ref16[0],n=_ref16[1];var o=t(i,n);"boolean"==typeof o&&(e.stop(),e["return"]=o);},{priority:"high"});}},{key:"setAttributeProperties",value:function setAttributeProperties(t,e){this._attributeProperties[t]=Object.assign(this.getAttributeProperties(t),e);}},{key:"getAttributeProperties",value:function getAttributeProperties(t){return this._attributeProperties[t]||{};}},{key:"getLimitElement",value:function getLimitElement(t){var e;if(t instanceof Es)e=t.parent;else{e=(t instanceof Ns?[t]:Array.from(t.getRanges())).reduce(function(t,e){var i=e.getCommonAncestor();return t?t.getCommonAncestor(i,{includeSelf:!0}):i;},null);}for(;!this.isLimit(e)&&e.parent;){e=e.parent;}return e;}},{key:"checkAttributeInSelection",value:function checkAttributeInSelection(t,e){if(t.isCollapsed){var _i130=[].concat(_toConsumableArray(t.getFirstPosition().getAncestors()),[new ys("",t.getAttributes())]);return this.checkAttribute(_i130,e);}{var _i131=t.getRanges();var _iterator181=_createForOfIteratorHelper(_i131),_step181;try{for(_iterator181.s();!(_step181=_iterator181.n()).done;){var _t142=_step181.value;var _iterator182=_createForOfIteratorHelper(_t142),_step182;try{for(_iterator182.s();!(_step182=_iterator182.n()).done;){var _i132=_step182.value;if(this.checkAttribute(_i132.item,e))return!0;}}catch(err){_iterator182.e(err);}finally{_iterator182.f();}}}catch(err){_iterator181.e(err);}finally{_iterator181.f();}}return!1;}},{key:"getValidRanges",value:/*#__PURE__*/regeneratorRuntime.mark(function getValidRanges(t,e){var _iterator184,_step184,_i133;return regeneratorRuntime.wrap(function getValidRanges$(_context23){while(1){switch(_context23.prev=_context23.next){case 0:t=/*#__PURE__*/regeneratorRuntime.mark(function _callee(t){var _iterator183,_step183,_e132;return regeneratorRuntime.wrap(function _callee$(_context22){while(1){switch(_context22.prev=_context22.next){case 0:_iterator183=_createForOfIteratorHelper(t);_context22.prev=1;_iterator183.s();case 3:if((_step183=_iterator183.n()).done){_context22.next=8;break;}_e132=_step183.value;return _context22.delegateYield(_e132.getMinimalFlatRanges(),"t0",6);case 6:_context22.next=3;break;case 8:_context22.next=13;break;case 10:_context22.prev=10;_context22.t1=_context22["catch"](1);_iterator183.e(_context22.t1);case 13:_context22.prev=13;_iterator183.f();return _context22.finish(13);case 16:case"end":return _context22.stop();}}},_callee,null,[[1,10,13,16]]);})(t);_iterator184=_createForOfIteratorHelper(t);_context23.prev=2;_iterator184.s();case 4:if((_step184=_iterator184.n()).done){_context23.next=9;break;}_i133=_step184.value;return _context23.delegateYield(this._getValidRangesForRange(_i133,e),"t0",7);case 7:_context23.next=4;break;case 9:_context23.next=14;break;case 11:_context23.prev=11;_context23.t1=_context23["catch"](2);_iterator184.e(_context23.t1);case 14:_context23.prev=14;_iterator184.f();return _context23.finish(14);case 17:case"end":return _context23.stop();}}},getValidRanges,this,[[2,11,14,17]]);})},{key:"getNearestSelectionRange",value:function getNearestSelectionRange(t){var _this49=this;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"both";if(this.checkChild(t,"$text"))return new Ns(t);var i,n;var o=t.getAncestors().reverse().find(function(t){return _this49.isLimit(t);})||t.root;"both"!=e&&"backward"!=e||(i=new Cs({boundaries:Ns._createIn(o),startPosition:t,direction:"backward"})),"both"!=e&&"forward"!=e||(n=new Cs({boundaries:Ns._createIn(o),startPosition:t}));var _iterator185=_createForOfIteratorHelper(/*#__PURE__*/regeneratorRuntime.mark(function _callee2(t,e){var i,_e133,_t143;return regeneratorRuntime.wrap(function _callee2$(_context24){while(1){switch(_context24.prev=_context24.next){case 0:i=!1;case 1:if(i){_context24.next=18;break;}if(!(i=!0,t)){_context24.next=9;break;}_e133=t.next();_context24.t0=_e133.done;if(_context24.t0){_context24.next=9;break;}i=!1;_context24.next=9;return{walker:t,value:_e133.value};case 9:if(!e){_context24.next=16;break;}_t143=e.next();_context24.t1=_t143.done;if(_context24.t1){_context24.next=16;break;}i=!1;_context24.next=16;return{walker:e,value:_t143.value};case 16:_context24.next=1;break;case 18:case"end":return _context24.stop();}}},_callee2);})(i,n)),_step185;try{for(_iterator185.s();!(_step185=_iterator185.n()).done;){var _t144=_step185.value;var _e134=_t144.walker==i?"elementEnd":"elementStart",_n67=_t144.value;if(_n67.type==_e134&&this.isObject(_n67.item))return Ns._createOn(_n67.item);if(this.checkChild(_n67.nextPosition,"$text"))return new Ns(_n67.nextPosition);}}catch(err){_iterator185.e(err);}finally{_iterator185.f();}return null;}},{key:"findAllowedParent",value:function findAllowedParent(t,e){var i=t.parent;for(;i;){if(this.checkChild(i,e))return i;if(this.isLimit(i))return null;i=i.parent;}return null;}},{key:"removeDisallowedAttributes",value:function removeDisallowedAttributes(t,e){var _iterator186=_createForOfIteratorHelper(t),_step186;try{for(_iterator186.s();!(_step186=_iterator186.n()).done;){var _i134=_step186.value;if(_i134.is("$text"))Na(this,_i134,e);else{var _t145=Ns._createIn(_i134).getPositions();var _iterator187=_createForOfIteratorHelper(_t145),_step187;try{for(_iterator187.s();!(_step187=_iterator187.n()).done;){var _i135=_step187.value;Na(this,_i135.nodeBefore||_i135.parent,e);}}catch(err){_iterator187.e(err);}finally{_iterator187.f();}}}}catch(err){_iterator186.e(err);}finally{_iterator186.f();}}},{key:"createContext",value:function createContext(t){return new va(t);}},{key:"_clearCache",value:function _clearCache(){this._compiledDefinitions=null;}},{key:"_compile",value:function _compile(){var t={},e=this._sourceDefinitions,i=Object.keys(e);for(var _i137=0,_i136=i;_i137<_i136.length;_i137++){var _n68=_i136[_i137];t[_n68]=ya(e[_n68],_n68);}for(var _i139=0,_i138=i;_i139<_i138.length;_i139++){var _e135=_i138[_i139];xa(t,_e135);}for(var _i141=0,_i140=i;_i141<_i140.length;_i141++){var _e136=_i140[_i141];Aa(t,_e136);}for(var _i143=0,_i142=i;_i143<_i142.length;_i143++){var _e137=_i142[_i143];Ta(t,_e137),Ca(t,_e137);}for(var _i145=0,_i144=i;_i145<_i144.length;_i145++){var _e138=_i144[_i145];Sa(t,_e138),Ea(t,_e138);}this._compiledDefinitions=t;}},{key:"_checkContextMatch",value:function _checkContextMatch(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:e.length-1;var n=e.getItem(i);if(t.allowIn.includes(n.name)){if(0==i)return!0;{var _t146=this.getDefinition(n);return this._checkContextMatch(_t146,e,i-1);}}return!1;}},{key:"_getValidRangesForRange",value:/*#__PURE__*/regeneratorRuntime.mark(function _getValidRangesForRange(t,e){var i,n,_iterator188,_step188,_o44;return regeneratorRuntime.wrap(function _getValidRangesForRange$(_context25){while(1){switch(_context25.prev=_context25.next){case 0:i=t.start,n=t.start;_iterator188=_createForOfIteratorHelper(t.getItems({shallow:!0}));_context25.prev=2;_iterator188.s();case 4:if((_step188=_iterator188.n()).done){_context25.next=19;break;}_o44=_step188.value;_context25.t0=_o44.is("element");if(!_context25.t0){_context25.next=9;break;}return _context25.delegateYield(this._getValidRangesForRange(Ns._createIn(_o44),e),"t1",9);case 9:_context25.t2=this.checkAttribute(_o44,e);if(_context25.t2){_context25.next=16;break;}_context25.t3=i.isEqual(n);if(_context25.t3){_context25.next=15;break;}_context25.next=15;return new Ns(i,n);case 15:i=Es._createAfter(_o44);case 16:n=Es._createAfter(_o44);case 17:_context25.next=4;break;case 19:_context25.next=24;break;case 21:_context25.prev=21;_context25.t4=_context25["catch"](2);_iterator188.e(_context25.t4);case 24:_context25.prev=24;_iterator188.f();return _context25.finish(24);case 27:_context25.t5=i.isEqual(n);if(_context25.t5){_context25.next=31;break;}_context25.next=31;return new Ns(i,n);case 31:case"end":return _context25.stop();}}},_getValidRangesForRange,this,[[2,21,24,27]]);})}]);return _a;}();yi(_a,Un);var va=/*#__PURE__*/function(){function va(t){_classCallCheck(this,va);if(t instanceof va)return t;"string"==typeof t?t=[t]:Array.isArray(t)||(t=t.getAncestors({includeSelf:!0})),t[0]&&"string"!=typeof t[0]&&t[0].is("documentFragment")&&t.shift(),this._items=t.map(Ia);}_createClass(va,[{key:"length",get:function get(){return this._items.length;}},{key:"last",get:function get(){return this._items[this._items.length-1];}},{key:Symbol.iterator,value:function value(){return this._items[Symbol.iterator]();}},{key:"push",value:function push(t){var e=new va([t]);return e._items=[].concat(_toConsumableArray(this._items),_toConsumableArray(e._items)),e;}},{key:"getItem",value:function getItem(t){return this._items[t];}},{key:"getNames",value:/*#__PURE__*/regeneratorRuntime.mark(function getNames(){return regeneratorRuntime.wrap(function getNames$(_context26){while(1){switch(_context26.prev=_context26.next){case 0:return _context26.delegateYield(this._items.map(function(t){return t.name;}),"t0",1);case 1:case"end":return _context26.stop();}}},getNames,this);})},{key:"endsWith",value:function endsWith(t){return Array.from(this.getNames()).join(" ").endsWith(t);}},{key:"startsWith",value:function startsWith(t){return Array.from(this.getNames()).join(" ").startsWith(t);}}]);return va;}();function ya(t,e){var i={name:e,allowIn:[],allowContentOf:[],allowWhere:[],allowAttributes:[],allowAttributesOf:[],inheritTypesFrom:[]};return function(t,e){var _iterator189=_createForOfIteratorHelper(t),_step189;try{for(_iterator189.s();!(_step189=_iterator189.n()).done;){var _i146=_step189.value;var _t147=Object.keys(_i146).filter(function(t){return t.startsWith("is");});var _iterator190=_createForOfIteratorHelper(_t147),_step190;try{for(_iterator190.s();!(_step190=_iterator190.n()).done;){var _n69=_step190.value;e[_n69]=_i146[_n69];}}catch(err){_iterator190.e(err);}finally{_iterator190.f();}}}catch(err){_iterator189.e(err);}finally{_iterator189.f();}}(t,i),Pa(t,i,"allowIn"),Pa(t,i,"allowContentOf"),Pa(t,i,"allowWhere"),Pa(t,i,"allowAttributes"),Pa(t,i,"allowAttributesOf"),Pa(t,i,"inheritTypesFrom"),function(t,e){var _iterator191=_createForOfIteratorHelper(t),_step191;try{for(_iterator191.s();!(_step191=_iterator191.n()).done;){var _i147=_step191.value;var _t148=_i147.inheritAllFrom;_t148&&(e.allowContentOf.push(_t148),e.allowWhere.push(_t148),e.allowAttributesOf.push(_t148),e.inheritTypesFrom.push(_t148));}}catch(err){_iterator191.e(err);}finally{_iterator191.f();}}(t,i),i;}function xa(t,e){var _iterator192=_createForOfIteratorHelper(t[e].allowContentOf),_step192;try{for(_iterator192.s();!(_step192=_iterator192.n()).done;){var _i148=_step192.value;if(t[_i148]){Ma(t,_i148).forEach(function(t){t.allowIn.push(e);});}}}catch(err){_iterator192.e(err);}finally{_iterator192.f();}delete t[e].allowContentOf;}function Aa(t,e){var _iterator193=_createForOfIteratorHelper(t[e].allowWhere),_step193;try{for(_iterator193.s();!(_step193=_iterator193.n()).done;){var _i149=_step193.value;var _n70=t[_i149];if(_n70){var _t$e$allowIn;var _i150=_n70.allowIn;(_t$e$allowIn=t[e].allowIn).push.apply(_t$e$allowIn,_toConsumableArray(_i150));}}}catch(err){_iterator193.e(err);}finally{_iterator193.f();}delete t[e].allowWhere;}function Ta(t,e){var _iterator194=_createForOfIteratorHelper(t[e].allowAttributesOf),_step194;try{for(_iterator194.s();!(_step194=_iterator194.n()).done;){var _i151=_step194.value;var _n71=t[_i151];if(_n71){var _t$e$allowAttributes;var _i152=_n71.allowAttributes;(_t$e$allowAttributes=t[e].allowAttributes).push.apply(_t$e$allowAttributes,_toConsumableArray(_i152));}}}catch(err){_iterator194.e(err);}finally{_iterator194.f();}delete t[e].allowAttributesOf;}function Ca(t,e){var i=t[e];var _iterator195=_createForOfIteratorHelper(i.inheritTypesFrom),_step195;try{for(_iterator195.s();!(_step195=_iterator195.n()).done;){var _e139=_step195.value;var _n72=t[_e139];if(_n72){var _t149=Object.keys(_n72).filter(function(t){return t.startsWith("is");});var _iterator196=_createForOfIteratorHelper(_t149),_step196;try{for(_iterator196.s();!(_step196=_iterator196.n()).done;){var _e140=_step196.value;_e140 in i||(i[_e140]=_n72[_e140]);}}catch(err){_iterator196.e(err);}finally{_iterator196.f();}}}}catch(err){_iterator195.e(err);}finally{_iterator195.f();}delete i.inheritTypesFrom;}function Sa(t,e){var i=t[e],n=i.allowIn.filter(function(e){return t[e];});i.allowIn=Array.from(new Set(n));}function Ea(t,e){var i=t[e];i.allowAttributes=Array.from(new Set(i.allowAttributes));}function Pa(t,e,i){var _iterator197=_createForOfIteratorHelper(t),_step197;try{for(_iterator197.s();!(_step197=_iterator197.n()).done;){var _e$i;var _n73=_step197.value;"string"==typeof _n73[i]?e[i].push(_n73[i]):Array.isArray(_n73[i])&&(_e$i=e[i]).push.apply(_e$i,_toConsumableArray(_n73[i]));}}catch(err){_iterator197.e(err);}finally{_iterator197.f();}}function Ma(t,e){var i=t[e];return(n=t,Object.keys(n).map(function(t){return n[t];})).filter(function(t){return t.allowIn.includes(i.name);});var n;}function Ia(t){return"string"==typeof t?{name:t,getAttributeKeys:/*#__PURE__*/regeneratorRuntime.mark(function getAttributeKeys(){return regeneratorRuntime.wrap(function getAttributeKeys$(_context27){while(1){switch(_context27.prev=_context27.next){case 0:case"end":return _context27.stop();}}},getAttributeKeys);}),getAttribute:function getAttribute(){}}:{name:t.is("element")?t.name:"$text",getAttributeKeys:/*#__PURE__*/regeneratorRuntime.mark(function getAttributeKeys(){return regeneratorRuntime.wrap(function getAttributeKeys$(_context28){while(1){switch(_context28.prev=_context28.next){case 0:return _context28.delegateYield(t.getAttributeKeys(),"t0",1);case 1:case"end":return _context28.stop();}}},getAttributeKeys);}),getAttribute:function getAttribute(e){return t.getAttribute(e);}};}function Na(t,e,i){var _iterator198=_createForOfIteratorHelper(e.getAttributeKeys()),_step198;try{for(_iterator198.s();!(_step198=_iterator198.n()).done;){var _n74=_step198.value;t.checkAttribute(e,_n74)||i.removeAttribute(_n74,e);}}catch(err){_iterator198.e(err);}finally{_iterator198.f();}}var Oa=/*#__PURE__*/function(){function Oa(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,Oa);this._splitParts=new Map(),this._cursorParents=new Map(),this._modelCursor=null,this.conversionApi=Object.assign({},t),this.conversionApi.convertItem=this._convertItem.bind(this),this.conversionApi.convertChildren=this._convertChildren.bind(this),this.conversionApi.safeInsert=this._safeInsert.bind(this),this.conversionApi.updateConversionResult=this._updateConversionResult.bind(this),this.conversionApi.splitToAllowedParent=this._splitToAllowedParent.bind(this),this.conversionApi.getSplitParts=this._getSplitParts.bind(this);}_createClass(Oa,[{key:"convert",value:function convert(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:["$root"];this.fire("viewCleanup",t),this._modelCursor=function(t,e){var i;var _iterator199=_createForOfIteratorHelper(new va(t)),_step199;try{for(_iterator199.s();!(_step199=_iterator199.n()).done;){var _n75=_step199.value;var _t150={};var _iterator200=_createForOfIteratorHelper(_n75.getAttributeKeys()),_step200;try{for(_iterator200.s();!(_step200=_iterator200.n()).done;){var _e141=_step200.value;_t150[_e141]=_n75.getAttribute(_e141);}}catch(err){_iterator200.e(err);}finally{_iterator200.f();}var _o45=e.createElement(_n75.name,_t150);i&&e.append(_o45,i),i=Es._createAt(_o45,0);}}catch(err){_iterator199.e(err);}finally{_iterator199.f();}return i;}(i,e),this.conversionApi.writer=e,this.conversionApi.consumable=wa.createFrom(t),this.conversionApi.store={};var _this$_convertItem=this._convertItem(t,this._modelCursor),n=_this$_convertItem.modelRange,o=e.createDocumentFragment();if(n){this._removeEmptyElements();for(var _i153=0,_Array$from4=Array.from(this._modelCursor.parent.getChildren());_i153<_Array$from4.length;_i153++){var _t151=_Array$from4[_i153];e.append(_t151,o);}o.markers=function(t,e){var i=new Set(),n=new Map(),o=Ns._createIn(t).getItems();var _iterator201=_createForOfIteratorHelper(o),_step201;try{for(_iterator201.s();!(_step201=_iterator201.n()).done;){var _t152=_step201.value;"$marker"==_t152.name&&i.add(_t152);}}catch(err){_iterator201.e(err);}finally{_iterator201.f();}var _iterator202=_createForOfIteratorHelper(i),_step202;try{for(_iterator202.s();!(_step202=_iterator202.n()).done;){var _t153=_step202.value;var _i154=_t153.getAttribute("data-name"),_o46=e.createPositionBefore(_t153);n.has(_i154)?n.get(_i154).end=_o46.clone():n.set(_i154,new Ns(_o46.clone())),e.remove(_t153);}}catch(err){_iterator202.e(err);}finally{_iterator202.f();}return n;}(o,e);}return this._modelCursor=null,this._splitParts.clear(),this._cursorParents.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,o;}},{key:"_convertItem",value:function _convertItem(t,e){var i=Object.assign({viewItem:t,modelCursor:e,modelRange:null});if(t.is("element")?this.fire("element:"+t.name,i,this.conversionApi):t.is("$text")?this.fire("text",i,this.conversionApi):this.fire("documentFragment",i,this.conversionApi),i.modelRange&&!(i.modelRange instanceof Ns))throw new ui.a("view-conversion-dispatcher-incorrect-result",this);return{modelRange:i.modelRange,modelCursor:i.modelCursor};}},{key:"_convertChildren",value:function _convertChildren(t,e){var i=e.is("position")?e:Es._createAt(e,0);var n=new Ns(i);for(var _i155=0,_Array$from5=Array.from(t.getChildren());_i155<_Array$from5.length;_i155++){var _e142=_Array$from5[_i155];var _t154=this._convertItem(_e142,i);_t154.modelRange instanceof Ns&&(n.end=_t154.modelRange.end,i=_t154.modelCursor);}return{modelRange:n,modelCursor:i};}},{key:"_safeInsert",value:function _safeInsert(t,e){var i=this._splitToAllowedParent(t,e);return!!i&&(this.conversionApi.writer.insert(t,i.position),!0);}},{key:"_updateConversionResult",value:function _updateConversionResult(t,e){var i=this._getSplitParts(t),n=this.conversionApi.writer;e.modelRange||(e.modelRange=n.createRange(n.createPositionBefore(t),n.createPositionAfter(i[i.length-1])));var o=this._cursorParents.get(t);e.modelCursor=o?n.createPositionAt(o,0):e.modelRange.end;}},{key:"_splitToAllowedParent",value:function _splitToAllowedParent(t,e){var _this$conversionApi=this.conversionApi,i=_this$conversionApi.schema,n=_this$conversionApi.writer;var o=i.findAllowedParent(e,t);if(o){if(o===e.parent)return{position:e};this._modelCursor.parent.getAncestors().includes(o)&&(o=null);}if(!o)return aa(e,t,i)?{position:ca(e,n)}:null;var r=this.conversionApi.writer.split(e,o),s=[];var _iterator203=_createForOfIteratorHelper(r.range.getWalker()),_step203;try{for(_iterator203.s();!(_step203=_iterator203.n()).done;){var _t155=_step203.value;if("elementEnd"==_t155.type)s.push(_t155.item);else{var _e143=s.pop(),_i156=_t155.item;this._registerSplitPair(_e143,_i156);}}}catch(err){_iterator203.e(err);}finally{_iterator203.f();}var a=r.range.end.parent;return this._cursorParents.set(t,a),{position:r.position,cursorParent:a};}},{key:"_registerSplitPair",value:function _registerSplitPair(t,e){this._splitParts.has(t)||this._splitParts.set(t,[t]);var i=this._splitParts.get(t);this._splitParts.set(e,i),i.push(e);}},{key:"_getSplitParts",value:function _getSplitParts(t){var e;return e=this._splitParts.has(t)?this._splitParts.get(t):[t],e;}},{key:"_removeEmptyElements",value:function _removeEmptyElements(){var t=!1;var _iterator204=_createForOfIteratorHelper(this._splitParts.keys()),_step204;try{for(_iterator204.s();!(_step204=_iterator204.n()).done;){var _e144=_step204.value;_e144.isEmpty&&(this.conversionApi.writer.remove(_e144),this._splitParts["delete"](_e144),t=!0);}}catch(err){_iterator204.e(err);}finally{_iterator204.f();}t&&this._removeEmptyElements();}}]);return Oa;}();yi(Oa,mi);var Ra=/*#__PURE__*/function(){function Ra(){_classCallCheck(this,Ra);}_createClass(Ra,[{key:"getHtml",value:function getHtml(t){var e=document.implementation.createHTMLDocument("").createElement("div");return e.appendChild(t),e.innerHTML;}}]);return Ra;}();var Da=/*#__PURE__*/function(){function Da(t){_classCallCheck(this,Da);this._domParser=new DOMParser(),this._domConverter=new lr(t,{blockFillerMode:"nbsp"}),this._htmlWriter=new Ra();}_createClass(Da,[{key:"toData",value:function toData(t){var e=this._domConverter.viewToDom(t,document);return this._htmlWriter.getHtml(e);}},{key:"toView",value:function toView(t){var e=this._toDom(t);return this._domConverter.domToView(e);}},{key:"registerRawContentMatcher",value:function registerRawContentMatcher(t){this._domConverter.registerRawContentMatcher(t);}},{key:"_toDom",value:function _toDom(t){var e=this._domParser.parseFromString(t,"text/html"),i=e.createDocumentFragment(),n=e.body.childNodes;for(;n.length>0;){i.appendChild(n[0]);}return i;}}]);return Da;}();var La=/*#__PURE__*/function(){function La(t,e){var _this50=this;_classCallCheck(this,La);this.model=t,this.mapper=new Os(),this.downcastDispatcher=new Ls({mapper:this.mapper,schema:t.schema}),this.downcastDispatcher.on("insert:$text",function(t,e,i){if(!i.consumable.consume(e.item,"insert"))return;var n=i.writer,o=i.mapper.toViewPosition(e.range.start),r=n.createText(e.item.data);n.insert(o,r);},{priority:"lowest"}),this.upcastDispatcher=new Oa({schema:t.schema}),this.viewDocument=new ro(e),this.stylesProcessor=e,this.htmlProcessor=new Da(this.viewDocument),this.processor=this.htmlProcessor,this._viewWriter=new Mo(this.viewDocument),this.upcastDispatcher.on("text",function(t,e,_ref17){var i=_ref17.schema,n=_ref17.consumable,o=_ref17.writer;var r=e.modelCursor;if(!n.test(e.viewItem))return;if(!i.checkChild(r,"$text")){if(!aa(r,"$text",i))return;r=ca(r,o);}n.consume(e.viewItem);var s=o.createText(e.viewItem.data);o.insert(s,r),e.modelRange=o.createRange(r,r.getShiftedBy(s.offsetSize)),e.modelCursor=e.modelRange.end;},{priority:"lowest"}),this.upcastDispatcher.on("element",function(t,e,i){if(!e.modelRange&&i.consumable.consume(e.viewItem,{name:!0})){var _i$convertChildren=i.convertChildren(e.viewItem,e.modelCursor),_t156=_i$convertChildren.modelRange,_n76=_i$convertChildren.modelCursor;e.modelRange=_t156,e.modelCursor=_n76;}},{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",function(t,e,i){if(!e.modelRange&&i.consumable.consume(e.viewItem,{name:!0})){var _i$convertChildren2=i.convertChildren(e.viewItem,e.modelCursor),_t157=_i$convertChildren2.modelRange,_n77=_i$convertChildren2.modelCursor;e.modelRange=_t157,e.modelCursor=_n77;}},{priority:"lowest"}),this.decorate("init"),this.decorate("set"),this.on("init",function(){_this50.fire("ready");},{priority:"lowest"}),this.on("ready",function(){_this50.model.enqueueChange("transparent",sa);},{priority:"lowest"});}_createClass(La,[{key:"get",value:function get(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var _t$rootName=t.rootName,e=_t$rootName===void 0?"main":_t$rootName,_t$trim=t.trim,i=_t$trim===void 0?"empty":_t$trim;if(!this._checkIfRootsExists([e]))throw new ui.a("datacontroller-get-non-existent-root",this);var n=this.model.document.getRoot(e);return"empty"!==i||this.model.hasContent(n,{ignoreWhitespaces:!0})?this.stringify(n,t):"";}},{key:"stringify",value:function stringify(t,e){var i=this.toView(t,e);return this.processor.toData(i);}},{key:"toView",value:function toView(t,e){var i=this.viewDocument,n=this._viewWriter;this.mapper.clearBindings();var o=Ns._createIn(t),r=new Po(i);if(this.mapper.bindElements(t,r),this.downcastDispatcher.conversionApi.options=e,this.downcastDispatcher.convertInsert(o,n),!t.is("documentFragment")){var _e145=function(t){var e=[],i=t.root.document;if(!i)return[];var n=Ns._createIn(t);var _iterator205=_createForOfIteratorHelper(i.model.markers),_step205;try{for(_iterator205.s();!(_step205=_iterator205.n()).done;){var _t158=_step205.value;var _i157=n.getIntersection(_t158.getRange());_i157&&e.push([_t158.name,_i157]);}}catch(err){_iterator205.e(err);}finally{_iterator205.f();}return e;}(t);var _iterator206=_createForOfIteratorHelper(_e145),_step206;try{for(_iterator206.s();!(_step206=_iterator206.n()).done;){var _step206$value=_slicedToArray(_step206.value,2),_t159=_step206$value[0],_i158=_step206$value[1];this.downcastDispatcher.convertMarkerAdd(_t159,_i158,n);}}catch(err){_iterator206.e(err);}finally{_iterator206.f();}}return delete this.downcastDispatcher.conversionApi.options,r;}},{key:"init",value:function init(t){var _this51=this;if(this.model.document.version)throw new ui.a("datacontroller-init-document-not-empty",this);var e={};if("string"==typeof t?e.main=t:e=t,!this._checkIfRootsExists(Object.keys(e)))throw new ui.a("datacontroller-init-non-existent-root",this);return this.model.enqueueChange("transparent",function(t){for(var _i159=0,_Object$keys2=Object.keys(e);_i159<_Object$keys2.length;_i159++){var _i160=_Object$keys2[_i159];var _n78=_this51.model.document.getRoot(_i160);t.insert(_this51.parse(e[_i160],_n78),_n78,0);}}),Promise.resolve();}},{key:"set",value:function set(t){var _this52=this;var e={};if("string"==typeof t?e.main=t:e=t,!this._checkIfRootsExists(Object.keys(e)))throw new ui.a("datacontroller-set-non-existent-root",this);this.model.enqueueChange("transparent",function(t){t.setSelection(null),t.removeSelectionAttribute(_this52.model.document.selection.getAttributeKeys());for(var _i161=0,_Object$keys3=Object.keys(e);_i161<_Object$keys3.length;_i161++){var _i162=_Object$keys3[_i161];var _n79=_this52.model.document.getRoot(_i162);t.remove(t.createRangeIn(_n79)),t.insert(_this52.parse(e[_i162],_n79),_n79,0);}});}},{key:"parse",value:function parse(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"$root";var i=this.processor.toView(t);return this.toModel(i,e);}},{key:"toModel",value:function toModel(t){var _this53=this;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"$root";return this.model.change(function(i){return _this53.upcastDispatcher.convert(t,i,e);});}},{key:"addStyleProcessorRules",value:function addStyleProcessorRules(t){t(this.stylesProcessor);}},{key:"registerRawContentMatcher",value:function registerRawContentMatcher(t){this.processor&&this.processor!==this.htmlProcessor&&this.processor.registerRawContentMatcher(t),this.htmlProcessor.registerRawContentMatcher(t);}},{key:"destroy",value:function destroy(){this.stopListening();}},{key:"_checkIfRootsExists",value:function _checkIfRootsExists(t){var _iterator207=_createForOfIteratorHelper(t),_step207;try{for(_iterator207.s();!(_step207=_iterator207.n()).done;){var _e146=_step207.value;if(!this.model.document.getRootNames().includes(_e146))return!1;}}catch(err){_iterator207.e(err);}finally{_iterator207.f();}return!0;}}]);return La;}();yi(La,Un);var za=/*#__PURE__*/function(){function za(t,e){_classCallCheck(this,za);this._helpers=new Map(),this._downcast=Ti(t),this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:!0}),this._upcast=Ti(e),this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:!1});}_createClass(za,[{key:"addAlias",value:function addAlias(t,e){var i=this._downcast.includes(e);if(!this._upcast.includes(e)&&!i)throw new ui.a("conversion-add-alias-dispatcher-not-registered",this);this._createConversionHelpers({name:t,dispatchers:[e],isDowncast:i});}},{key:"for",value:function _for(t){if(!this._helpers.has(t))throw new ui.a("conversion-for-unknown-group",this);return this._helpers.get(t);}},{key:"elementToElement",value:function elementToElement(t){this["for"]("downcast").elementToElement(t);var _iterator208=_createForOfIteratorHelper(Va(t)),_step208;try{for(_iterator208.s();!(_step208=_iterator208.n()).done;){var _step208$value=_step208.value,_e147=_step208$value.model,_i163=_step208$value.view;this["for"]("upcast").elementToElement({model:_e147,view:_i163,converterPriority:t.converterPriority});}}catch(err){_iterator208.e(err);}finally{_iterator208.f();}}},{key:"attributeToElement",value:function attributeToElement(t){this["for"]("downcast").attributeToElement(t);var _iterator209=_createForOfIteratorHelper(Va(t)),_step209;try{for(_iterator209.s();!(_step209=_iterator209.n()).done;){var _step209$value=_step209.value,_e148=_step209$value.model,_i164=_step209$value.view;this["for"]("upcast").elementToAttribute({view:_i164,model:_e148,converterPriority:t.converterPriority});}}catch(err){_iterator209.e(err);}finally{_iterator209.f();}}},{key:"attributeToAttribute",value:function attributeToAttribute(t){this["for"]("downcast").attributeToAttribute(t);var _iterator210=_createForOfIteratorHelper(Va(t)),_step210;try{for(_iterator210.s();!(_step210=_iterator210.n()).done;){var _step210$value=_step210.value,_e149=_step210$value.model,_i165=_step210$value.view;this["for"]("upcast").attributeToAttribute({view:_i165,model:_e149});}}catch(err){_iterator210.e(err);}finally{_iterator210.f();}}},{key:"_createConversionHelpers",value:function _createConversionHelpers(_ref18){var t=_ref18.name,e=_ref18.dispatchers,i=_ref18.isDowncast;if(this._helpers.has(t))throw new ui.a("conversion-group-exists",this);var n=i?new Xs(e):new la(e);this._helpers.set(t,n);}}]);return za;}();function Va(t){var _iterator211,_step211,_e150,_i166,_n80,_o47;return regeneratorRuntime.wrap(function Va$(_context29){while(1){switch(_context29.prev=_context29.next){case 0:if(!t.model.values){_context29.next=20;break;}_iterator211=_createForOfIteratorHelper(t.model.values);_context29.prev=2;_iterator211.s();case 4:if((_step211=_iterator211.n()).done){_context29.next=10;break;}_e150=_step211.value;_i166={key:t.model.key,value:_e150},_n80=t.view[_e150],_o47=t.upcastAlso?t.upcastAlso[_e150]:void 0;return _context29.delegateYield(ja(_i166,_n80,_o47),"t0",8);case 8:_context29.next=4;break;case 10:_context29.next=15;break;case 12:_context29.prev=12;_context29.t1=_context29["catch"](2);_iterator211.e(_context29.t1);case 15:_context29.prev=15;_iterator211.f();return _context29.finish(15);case 18:_context29.next=21;break;case 20:return _context29.delegateYield(ja(t.model,t.view,t.upcastAlso),"t2",21);case 21:case"end":return _context29.stop();}}},_marked,null,[[2,12,15,18]]);}function ja(t,e,i){var _iterator212,_step212,_e151;return regeneratorRuntime.wrap(function ja$(_context30){while(1){switch(_context30.prev=_context30.next){case 0:_context30.next=2;return{model:t,view:e};case 2:if(!i){_context30.next=20;break;}_iterator212=_createForOfIteratorHelper(Ti(i));_context30.prev=4;_iterator212.s();case 6:if((_step212=_iterator212.n()).done){_context30.next=12;break;}_e151=_step212.value;_context30.next=10;return{model:t,view:_e151};case 10:_context30.next=6;break;case 12:_context30.next=17;break;case 14:_context30.prev=14;_context30.t0=_context30["catch"](4);_iterator212.e(_context30.t0);case 17:_context30.prev=17;_iterator212.f();return _context30.finish(17);case 20:case"end":return _context30.stop();}}},_marked2,null,[[4,14,17,20]]);}var Ba=/*#__PURE__*/function(){function Ba(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"default";_classCallCheck(this,Ba);this.operations=[],this.type=t;}_createClass(Ba,[{key:"baseVersion",get:function get(){var _iterator213=_createForOfIteratorHelper(this.operations),_step213;try{for(_iterator213.s();!(_step213=_iterator213.n()).done;){var _t160=_step213.value;if(null!==_t160.baseVersion)return _t160.baseVersion;}}catch(err){_iterator213.e(err);}finally{_iterator213.f();}return null;}},{key:"addOperation",value:function addOperation(t){return t.batch=this,this.operations.push(t),t;}}]);return Ba;}();var Fa=/*#__PURE__*/function(){function Fa(t){_classCallCheck(this,Fa);this.baseVersion=t,this.isDocumentOperation=null!==this.baseVersion,this.batch=null;}_createClass(Fa,[{key:"_validate",value:function _validate(){}},{key:"toJSON",value:function toJSON(){var t=Object.assign({},this);return t.__className=this.constructor.className,delete t.batch,delete t.isDocumentOperation,t;}}],[{key:"className",get:function get(){return"Operation";}},{key:"fromJSON",value:function fromJSON(t){return new this(t.baseVersion);}}]);return Fa;}();var Ha=/*#__PURE__*/function(){function Ha(t){_classCallCheck(this,Ha);this.markers=new Map(),this._children=new As(),t&&this._insertChild(0,t);}_createClass(Ha,[{key:Symbol.iterator,value:function value(){return this.getChildren();}},{key:"childCount",get:function get(){return this._children.length;}},{key:"maxOffset",get:function get(){return this._children.maxOffset;}},{key:"isEmpty",get:function get(){return 0===this.childCount;}},{key:"root",get:function get(){return this;}},{key:"parent",get:function get(){return null;}},{key:"is",value:function is(t){return"documentFragment"===t||"model:documentFragment"===t;}},{key:"getChild",value:function getChild(t){return this._children.getNode(t);}},{key:"getChildren",value:function getChildren(){return this._children[Symbol.iterator]();}},{key:"getChildIndex",value:function getChildIndex(t){return this._children.getNodeIndex(t);}},{key:"getChildStartOffset",value:function getChildStartOffset(t){return this._children.getNodeStartOffset(t);}},{key:"getPath",value:function getPath(){return[];}},{key:"getNodeByPath",value:function getNodeByPath(t){var e=this;var _iterator214=_createForOfIteratorHelper(t),_step214;try{for(_iterator214.s();!(_step214=_iterator214.n()).done;){var _i167=_step214.value;e=e.getChild(e.offsetToIndex(_i167));}}catch(err){_iterator214.e(err);}finally{_iterator214.f();}return e;}},{key:"offsetToIndex",value:function offsetToIndex(t){return this._children.offsetToIndex(t);}},{key:"toJSON",value:function toJSON(){var t=[];var _iterator215=_createForOfIteratorHelper(this._children),_step215;try{for(_iterator215.s();!(_step215=_iterator215.n()).done;){var _e152=_step215.value;t.push(_e152.toJSON());}}catch(err){_iterator215.e(err);}finally{_iterator215.f();}return t;}},{key:"_appendChild",value:function _appendChild(t){this._insertChild(this.childCount,t);}},{key:"_insertChild",value:function _insertChild(t,e){var i=function(t){if("string"==typeof t)return[new ys(t)];vi(t)||(t=[t]);return Array.from(t).map(function(t){return"string"==typeof t?new ys(t):t instanceof xs?new ys(t.data,t.getAttributes()):t;});}(e);var _iterator216=_createForOfIteratorHelper(i),_step216;try{for(_iterator216.s();!(_step216=_iterator216.n()).done;){var _t161=_step216.value;null!==_t161.parent&&_t161._remove(),_t161.parent=this;}}catch(err){_iterator216.e(err);}finally{_iterator216.f();}this._children._insertNodes(t,i);}},{key:"_removeChildren",value:function _removeChildren(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var i=this._children._removeNodes(t,e);var _iterator217=_createForOfIteratorHelper(i),_step217;try{for(_iterator217.s();!(_step217=_iterator217.n()).done;){var _t162=_step217.value;_t162.parent=null;}}catch(err){_iterator217.e(err);}finally{_iterator217.f();}return i;}}],[{key:"fromJSON",value:function fromJSON(t){var e=[];var _iterator218=_createForOfIteratorHelper(t),_step218;try{for(_iterator218.s();!(_step218=_iterator218.n()).done;){var _i168=_step218.value;_i168.name?e.push(Ts.fromJSON(_i168)):e.push(ys.fromJSON(_i168));}}catch(err){_iterator218.e(err);}finally{_iterator218.f();}return new Ha(e);}}]);return Ha;}();function Ua(t,e){var i=(e=$a(e)).reduce(function(t,e){return t+e.offsetSize;},0),n=t.parent;Ga(t);var o=t.index;return n._insertChild(o,e),Ya(n,o+e.length),Ya(n,o),new Ns(t,t.getShiftedBy(i));}function Wa(t){if(!t.isFlat)throw new ui.a("operation-utils-remove-range-not-flat",this);var e=t.start.parent;Ga(t.start),Ga(t.end);var i=e._removeChildren(t.start.index,t.end.index-t.start.index);return Ya(e,t.start.index),i;}function qa(t,e){if(!t.isFlat)throw new ui.a("operation-utils-move-range-not-flat",this);var i=Wa(t);return Ua(e=e._getTransformedByDeletion(t.start,t.end.offset-t.start.offset),i);}function $a(t){var e=[];t instanceof Array||(t=[t]);for(var _i169=0;_i169<t.length;_i169++){if("string"==typeof t[_i169])e.push(new ys(t[_i169]));else if(t[_i169]instanceof xs)e.push(new ys(t[_i169].data,t[_i169].getAttributes()));else if(t[_i169]instanceof Ha||t[_i169]instanceof As){var _iterator219=_createForOfIteratorHelper(t[_i169]),_step219;try{for(_iterator219.s();!(_step219=_iterator219.n()).done;){var _n81=_step219.value;e.push(_n81);}}catch(err){_iterator219.e(err);}finally{_iterator219.f();}}else t[_i169]instanceof vs&&e.push(t[_i169]);}for(var _t163=1;_t163<e.length;_t163++){var _i170=e[_t163],_n82=e[_t163-1];_i170 instanceof ys&&_n82 instanceof ys&&Ka(_i170,_n82)&&(e.splice(_t163-1,2,new ys(_n82.data+_i170.data,_n82.getAttributes())),_t163--);}return e;}function Ya(t,e){var i=t.getChild(e-1),n=t.getChild(e);if(i&&n&&i.is("$text")&&n.is("$text")&&Ka(i,n)){var _o48=new ys(i.data+n.data,i.getAttributes());t._removeChildren(e-1,2),t._insertChild(e-1,_o48);}}function Ga(t){var e=t.textNode,i=t.parent;if(e){var _n83=t.offset-e.startOffset,_o49=e.index;i._removeChildren(_o49,1);var _r16=new ys(e.data.substr(0,_n83),e.getAttributes()),_s15=new ys(e.data.substr(_n83),e.getAttributes());i._insertChild(_o49,[_r16,_s15]);}}function Ka(t,e){var i=t.getAttributes(),n=e.getAttributes();var _iterator220=_createForOfIteratorHelper(i),_step220;try{for(_iterator220.s();!(_step220=_iterator220.n()).done;){var _t164=_step220.value;if(_t164[1]!==e.getAttribute(_t164[0]))return!1;n.next();}}catch(err){_iterator220.e(err);}finally{_iterator220.f();}return n.next().done;}var Qa=function Qa(t,e){return Rr(t,e);};var Ja=/*#__PURE__*/function(_Fa){_inherits(Ja,_Fa);var _super25=_createSuper(Ja);function Ja(t,e,i,n,o){var _this54;_classCallCheck(this,Ja);_this54=_super25.call(this,o),_this54.range=t.clone(),_this54.key=e,_this54.oldValue=void 0===i?null:i,_this54.newValue=void 0===n?null:n;return _this54;}_createClass(Ja,[{key:"type",get:function get(){return null===this.oldValue?"addAttribute":null===this.newValue?"removeAttribute":"changeAttribute";}},{key:"clone",value:function clone(){return new Ja(this.range,this.key,this.oldValue,this.newValue,this.baseVersion);}},{key:"getReversed",value:function getReversed(){return new Ja(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1);}},{key:"toJSON",value:function toJSON(){var t=_get(_getPrototypeOf(Ja.prototype),"toJSON",this).call(this);return t.range=this.range.toJSON(),t;}},{key:"_validate",value:function _validate(){if(!this.range.isFlat)throw new ui.a("attribute-operation-range-not-flat",this);var _iterator221=_createForOfIteratorHelper(this.range.getItems({shallow:!0})),_step221;try{for(_iterator221.s();!(_step221=_iterator221.n()).done;){var _t165=_step221.value;if(null!==this.oldValue&&!Qa(_t165.getAttribute(this.key),this.oldValue))throw new ui.a("attribute-operation-wrong-old-value",this,{item:_t165,key:this.key,value:this.oldValue});if(null===this.oldValue&&null!==this.newValue&&_t165.hasAttribute(this.key))throw new ui.a("attribute-operation-attribute-exists",this,{node:_t165,key:this.key});}}catch(err){_iterator221.e(err);}finally{_iterator221.f();}}},{key:"_execute",value:function _execute(){Qa(this.oldValue,this.newValue)||function(t,e,i){Ga(t.start),Ga(t.end);var _iterator222=_createForOfIteratorHelper(t.getItems({shallow:!0})),_step222;try{for(_iterator222.s();!(_step222=_iterator222.n()).done;){var _n84=_step222.value;var _t166=_n84.is("$textProxy")?_n84.textNode:_n84;null!==i?_t166._setAttribute(e,i):_t166._removeAttribute(e),Ya(_t166.parent,_t166.index);}}catch(err){_iterator222.e(err);}finally{_iterator222.f();}Ya(t.end.parent,t.end.index);}(this.range,this.key,this.newValue);}}],[{key:"className",get:function get(){return"AttributeOperation";}},{key:"fromJSON",value:function fromJSON(t,e){return new Ja(Ns.fromJSON(t.range,e),t.key,t.oldValue,t.newValue,t.baseVersion);}}]);return Ja;}(Fa);var Za=/*#__PURE__*/function(_Fa2){_inherits(Za,_Fa2);var _super26=_createSuper(Za);function Za(t,e){var _this55;_classCallCheck(this,Za);_this55=_super26.call(this,null),_this55.sourcePosition=t.clone(),_this55.howMany=e;return _this55;}_createClass(Za,[{key:"type",get:function get(){return"detach";}},{key:"toJSON",value:function toJSON(){var t=_get(_getPrototypeOf(Za.prototype),"toJSON",this).call(this);return t.sourcePosition=this.sourcePosition.toJSON(),t;}},{key:"_validate",value:function _validate(){if(this.sourcePosition.root.document)throw new ui.a("detach-operation-on-document-node",this);}},{key:"_execute",value:function _execute(){Wa(Ns._createFromPositionAndShift(this.sourcePosition,this.howMany));}}],[{key:"className",get:function get(){return"DetachOperation";}}]);return Za;}(Fa);var Xa=/*#__PURE__*/function(_Fa3){_inherits(Xa,_Fa3);var _super27=_createSuper(Xa);function Xa(t,e,i,n){var _this56;_classCallCheck(this,Xa);_this56=_super27.call(this,n),_this56.sourcePosition=t.clone(),_this56.sourcePosition.stickiness="toNext",_this56.howMany=e,_this56.targetPosition=i.clone(),_this56.targetPosition.stickiness="toNone";return _this56;}_createClass(Xa,[{key:"type",get:function get(){return"$graveyard"==this.targetPosition.root.rootName?"remove":"$graveyard"==this.sourcePosition.root.rootName?"reinsert":"move";}},{key:"clone",value:function clone(){return new this.constructor(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion);}},{key:"getMovedRangeStart",value:function getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany);}},{key:"getReversed",value:function getReversed(){var t=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new this.constructor(this.getMovedRangeStart(),this.howMany,t,this.baseVersion+1);}},{key:"_validate",value:function _validate(){var t=this.sourcePosition.parent,e=this.targetPosition.parent,i=this.sourcePosition.offset,n=this.targetPosition.offset;if(i+this.howMany>t.maxOffset)throw new ui.a("move-operation-nodes-do-not-exist",this);if(t===e&&i<n&&n<i+this.howMany)throw new ui.a("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&"prefix"==Ii(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())){var _t167=this.sourcePosition.path.length-1;if(this.targetPosition.path[_t167]>=i&&this.targetPosition.path[_t167]<i+this.howMany)throw new ui.a("move-operation-node-into-itself",this);}}},{key:"_execute",value:function _execute(){qa(Ns._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition);}},{key:"toJSON",value:function toJSON(){var t=_get(_getPrototypeOf(Xa.prototype),"toJSON",this).call(this);return t.sourcePosition=this.sourcePosition.toJSON(),t.targetPosition=this.targetPosition.toJSON(),t;}}],[{key:"className",get:function get(){return"MoveOperation";}},{key:"fromJSON",value:function fromJSON(t,e){var i=Es.fromJSON(t.sourcePosition,e),n=Es.fromJSON(t.targetPosition,e);return new this(i,t.howMany,n,t.baseVersion);}}]);return Xa;}(Fa);var tc=/*#__PURE__*/function(_Fa4){_inherits(tc,_Fa4);var _super28=_createSuper(tc);function tc(t,e,i){var _this57;_classCallCheck(this,tc);_this57=_super28.call(this,i),_this57.position=t.clone(),_this57.position.stickiness="toNone",_this57.nodes=new As($a(e)),_this57.shouldReceiveAttributes=!1;return _this57;}_createClass(tc,[{key:"type",get:function get(){return"insert";}},{key:"howMany",get:function get(){return this.nodes.maxOffset;}},{key:"clone",value:function clone(){var t=new As(_toConsumableArray(this.nodes).map(function(t){return t._clone(!0);})),e=new tc(this.position,t,this.baseVersion);return e.shouldReceiveAttributes=this.shouldReceiveAttributes,e;}},{key:"getReversed",value:function getReversed(){var t=this.position.root.document.graveyard,e=new Es(t,[0]);return new Xa(this.position,this.nodes.maxOffset,e,this.baseVersion+1);}},{key:"_validate",value:function _validate(){var t=this.position.parent;if(!t||t.maxOffset<this.position.offset)throw new ui.a("insert-operation-position-invalid",this);}},{key:"_execute",value:function _execute(){var t=this.nodes;this.nodes=new As(_toConsumableArray(t).map(function(t){return t._clone(!0);})),Ua(this.position,t);}},{key:"toJSON",value:function toJSON(){var t=_get(_getPrototypeOf(tc.prototype),"toJSON",this).call(this);return t.position=this.position.toJSON(),t.nodes=this.nodes.toJSON(),t;}}],[{key:"className",get:function get(){return"InsertOperation";}},{key:"fromJSON",value:function fromJSON(t,e){var i=[];var _iterator223=_createForOfIteratorHelper(t.nodes),_step223;try{for(_iterator223.s();!(_step223=_iterator223.n()).done;){var _e153=_step223.value;_e153.name?i.push(Ts.fromJSON(_e153)):i.push(ys.fromJSON(_e153));}}catch(err){_iterator223.e(err);}finally{_iterator223.f();}var n=new tc(Es.fromJSON(t.position,e),i,t.baseVersion);return n.shouldReceiveAttributes=t.shouldReceiveAttributes,n;}}]);return tc;}(Fa);var ec=/*#__PURE__*/function(_Fa5){_inherits(ec,_Fa5);var _super29=_createSuper(ec);function ec(t,e,i,n,o,r){var _this58;_classCallCheck(this,ec);_this58=_super29.call(this,r),_this58.name=t,_this58.oldRange=e?e.clone():null,_this58.newRange=i?i.clone():null,_this58.affectsData=o,_this58._markers=n;return _this58;}_createClass(ec,[{key:"type",get:function get(){return"marker";}},{key:"clone",value:function clone(){return new ec(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion);}},{key:"getReversed",value:function getReversed(){return new ec(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1);}},{key:"_execute",value:function _execute(){var t=this.newRange?"_set":"_remove";this._markers[t](this.name,this.newRange,!0,this.affectsData);}},{key:"toJSON",value:function toJSON(){var t=_get(_getPrototypeOf(ec.prototype),"toJSON",this).call(this);return this.oldRange&&(t.oldRange=this.oldRange.toJSON()),this.newRange&&(t.newRange=this.newRange.toJSON()),delete t._markers,t;}}],[{key:"className",get:function get(){return"MarkerOperation";}},{key:"fromJSON",value:function fromJSON(t,e){return new ec(t.name,t.oldRange?Ns.fromJSON(t.oldRange,e):null,t.newRange?Ns.fromJSON(t.newRange,e):null,e.model.markers,t.affectsData,t.baseVersion);}}]);return ec;}(Fa);var ic=/*#__PURE__*/function(_Fa6){_inherits(ic,_Fa6);var _super30=_createSuper(ic);function ic(t,e,i,n){var _this59;_classCallCheck(this,ic);_this59=_super30.call(this,n),_this59.position=t,_this59.position.stickiness="toNext",_this59.oldName=e,_this59.newName=i;return _this59;}_createClass(ic,[{key:"type",get:function get(){return"rename";}},{key:"clone",value:function clone(){return new ic(this.position.clone(),this.oldName,this.newName,this.baseVersion);}},{key:"getReversed",value:function getReversed(){return new ic(this.position.clone(),this.newName,this.oldName,this.baseVersion+1);}},{key:"_validate",value:function _validate(){var t=this.position.nodeAfter;if(!(t instanceof Ts))throw new ui.a("rename-operation-wrong-position",this);if(t.name!==this.oldName)throw new ui.a("rename-operation-wrong-name",this);}},{key:"_execute",value:function _execute(){this.position.nodeAfter.name=this.newName;}},{key:"toJSON",value:function toJSON(){var t=_get(_getPrototypeOf(ic.prototype),"toJSON",this).call(this);return t.position=this.position.toJSON(),t;}}],[{key:"className",get:function get(){return"RenameOperation";}},{key:"fromJSON",value:function fromJSON(t,e){return new ic(Es.fromJSON(t.position,e),t.oldName,t.newName,t.baseVersion);}}]);return ic;}(Fa);var nc=/*#__PURE__*/function(_Fa7){_inherits(nc,_Fa7);var _super31=_createSuper(nc);function nc(t,e,i,n,o){var _this60;_classCallCheck(this,nc);_this60=_super31.call(this,o),_this60.root=t,_this60.key=e,_this60.oldValue=i,_this60.newValue=n;return _this60;}_createClass(nc,[{key:"type",get:function get(){return null===this.oldValue?"addRootAttribute":null===this.newValue?"removeRootAttribute":"changeRootAttribute";}},{key:"clone",value:function clone(){return new nc(this.root,this.key,this.oldValue,this.newValue,this.baseVersion);}},{key:"getReversed",value:function getReversed(){return new nc(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1);}},{key:"_validate",value:function _validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new ui.a("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(null!==this.oldValue&&this.root.getAttribute(this.key)!==this.oldValue)throw new ui.a("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(null===this.oldValue&&null!==this.newValue&&this.root.hasAttribute(this.key))throw new ui.a("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key});}},{key:"_execute",value:function _execute(){null!==this.newValue?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key);}},{key:"toJSON",value:function toJSON(){var t=_get(_getPrototypeOf(nc.prototype),"toJSON",this).call(this);return t.root=this.root.toJSON(),t;}}],[{key:"className",get:function get(){return"RootAttributeOperation";}},{key:"fromJSON",value:function fromJSON(t,e){if(!e.getRoot(t.root))throw new ui.a("rootattribute-operation-fromjson-no-root",this,{rootName:t.root});return new nc(e.getRoot(t.root),t.key,t.oldValue,t.newValue,t.baseVersion);}}]);return nc;}(Fa);var oc=/*#__PURE__*/function(_Fa8){_inherits(oc,_Fa8);var _super32=_createSuper(oc);function oc(t,e,i,n,o){var _this61;_classCallCheck(this,oc);_this61=_super32.call(this,o),_this61.sourcePosition=t.clone(),_this61.sourcePosition.stickiness="toPrevious",_this61.howMany=e,_this61.targetPosition=i.clone(),_this61.targetPosition.stickiness="toNext",_this61.graveyardPosition=n.clone();return _this61;}_createClass(oc,[{key:"type",get:function get(){return"merge";}},{key:"deletionPosition",get:function get(){return new Es(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1));}},{key:"movedRange",get:function get(){var t=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new Ns(this.sourcePosition,t);}},{key:"clone",value:function clone(){return new this.constructor(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion);}},{key:"getReversed",value:function getReversed(){var t=this.targetPosition._getTransformedByMergeOperation(this),e=this.sourcePosition.path.slice(0,-1),i=new Es(this.sourcePosition.root,e)._getTransformedByMergeOperation(this);return new rc(t,this.howMany,i,this.graveyardPosition,this.baseVersion+1);}},{key:"_validate",value:function _validate(){var t=this.sourcePosition.parent,e=this.targetPosition.parent;if(!t.parent)throw new ui.a("merge-operation-source-position-invalid",this);if(!e.parent)throw new ui.a("merge-operation-target-position-invalid",this);if(this.howMany!=t.maxOffset)throw new ui.a("merge-operation-how-many-invalid",this);}},{key:"_execute",value:function _execute(){var t=this.sourcePosition.parent;qa(Ns._createIn(t),this.targetPosition),qa(Ns._createOn(t),this.graveyardPosition);}},{key:"toJSON",value:function toJSON(){var t=_get(_getPrototypeOf(oc.prototype),"toJSON",this).call(this);return t.sourcePosition=t.sourcePosition.toJSON(),t.targetPosition=t.targetPosition.toJSON(),t.graveyardPosition=t.graveyardPosition.toJSON(),t;}}],[{key:"className",get:function get(){return"MergeOperation";}},{key:"fromJSON",value:function fromJSON(t,e){var i=Es.fromJSON(t.sourcePosition,e),n=Es.fromJSON(t.targetPosition,e),o=Es.fromJSON(t.graveyardPosition,e);return new this(i,t.howMany,n,o,t.baseVersion);}}]);return oc;}(Fa);var rc=/*#__PURE__*/function(_Fa9){_inherits(rc,_Fa9);var _super33=_createSuper(rc);function rc(t,e,i,n,o){var _this62;_classCallCheck(this,rc);_this62=_super33.call(this,o),_this62.splitPosition=t.clone(),_this62.splitPosition.stickiness="toNext",_this62.howMany=e,_this62.insertionPosition=i,_this62.graveyardPosition=n?n.clone():null,_this62.graveyardPosition&&(_this62.graveyardPosition.stickiness="toNext");return _this62;}_createClass(rc,[{key:"type",get:function get(){return"split";}},{key:"moveTargetPosition",get:function get(){var t=this.insertionPosition.path.slice();return t.push(0),new Es(this.insertionPosition.root,t);}},{key:"movedRange",get:function get(){var t=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new Ns(this.splitPosition,t);}},{key:"clone",value:function clone(){return new this.constructor(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion);}},{key:"getReversed",value:function getReversed(){var t=this.splitPosition.root.document.graveyard,e=new Es(t,[0]);return new oc(this.moveTargetPosition,this.howMany,this.splitPosition,e,this.baseVersion+1);}},{key:"_validate",value:function _validate(){var t=this.splitPosition.parent,e=this.splitPosition.offset;if(!t||t.maxOffset<e)throw new ui.a("split-operation-position-invalid",this);if(!t.parent)throw new ui.a("split-operation-split-in-root",this);if(this.howMany!=t.maxOffset-this.splitPosition.offset)throw new ui.a("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new ui.a("split-operation-graveyard-position-invalid",this);}},{key:"_execute",value:function _execute(){var t=this.splitPosition.parent;if(this.graveyardPosition)qa(Ns._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{var _e154=t._clone();Ua(this.insertionPosition,_e154);}qa(new Ns(Es._createAt(t,this.splitPosition.offset),Es._createAt(t,t.maxOffset)),this.moveTargetPosition);}},{key:"toJSON",value:function toJSON(){var t=_get(_getPrototypeOf(rc.prototype),"toJSON",this).call(this);return t.splitPosition=this.splitPosition.toJSON(),t.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(t.graveyardPosition=this.graveyardPosition.toJSON()),t;}}],[{key:"className",get:function get(){return"SplitOperation";}},{key:"getInsertionPosition",value:function getInsertionPosition(t){var e=t.path.slice(0,-1);return e[e.length-1]++,new Es(t.root,e,"toPrevious");}},{key:"fromJSON",value:function fromJSON(t,e){var i=Es.fromJSON(t.splitPosition,e),n=Es.fromJSON(t.insertionPosition,e),o=t.graveyardPosition?Es.fromJSON(t.graveyardPosition,e):null;return new this(i,t.howMany,n,o,t.baseVersion);}}]);return rc;}(Fa);var sc=/*#__PURE__*/function(_Ts){_inherits(sc,_Ts);var _super34=_createSuper(sc);function sc(t,e){var _this63;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"main";_classCallCheck(this,sc);_this63=_super34.call(this,e),_this63._document=t,_this63.rootName=i;return _this63;}_createClass(sc,[{key:"document",get:function get(){return this._document;}},{key:"is",value:function is(t,e){return e?e===this.name&&("rootElement"===t||"model:rootElement"===t||"element"===t||"model:element"===t):"rootElement"===t||"model:rootElement"===t||"element"===t||"model:element"===t||"node"===t||"model:node"===t;}},{key:"toJSON",value:function toJSON(){return this.rootName;}}]);return sc;}(Ts);var ac=/*#__PURE__*/function(){function ac(t,e){_classCallCheck(this,ac);this.model=t,this.batch=e;}_createClass(ac,[{key:"createText",value:function createText(t,e){return new ys(t,e);}},{key:"createElement",value:function createElement(t,e){return new Ts(t,e);}},{key:"createDocumentFragment",value:function createDocumentFragment(){return new Ha();}},{key:"cloneElement",value:function cloneElement(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!0;return t._clone(e);}},{key:"insert",value:function insert(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;if(this._assertWriterUsedCorrectly(),t instanceof ys&&""==t.data)return;var n=Es._createAt(e,i);if(t.parent){if(hc(t.root,n.root))return void this.move(Ns._createOn(t),n);if(t.root.document)throw new ui.a("model-writer-insert-forbidden-move",this);this.remove(t);}var o=n.root.document?n.root.document.version:null,r=new tc(n,t,o);if(t instanceof ys&&(r.shouldReceiveAttributes=!0),this.batch.addOperation(r),this.model.applyOperation(r),t instanceof Ha){var _iterator224=_createForOfIteratorHelper(t.markers),_step224;try{for(_iterator224.s();!(_step224=_iterator224.n()).done;){var _step224$value=_slicedToArray(_step224.value,2),_e155=_step224$value[0],_i171=_step224$value[1];var _t168=Es._createAt(_i171.root,0),_o50={range:new Ns(_i171.start._getCombined(_t168,n),_i171.end._getCombined(_t168,n)),usingOperation:!0,affectsData:!0};this.model.markers.has(_e155)?this.updateMarker(_e155,_o50):this.addMarker(_e155,_o50);}}catch(err){_iterator224.e(err);}finally{_iterator224.f();}}}},{key:"insertText",value:function insertText(t,e,i,n){e instanceof Ha||e instanceof Ts||e instanceof Es?this.insert(this.createText(t),e,i):this.insert(this.createText(t,e),i,n);}},{key:"insertElement",value:function insertElement(t,e,i,n){e instanceof Ha||e instanceof Ts||e instanceof Es?this.insert(this.createElement(t),e,i):this.insert(this.createElement(t,e),i,n);}},{key:"append",value:function append(t,e){this.insert(t,e,"end");}},{key:"appendText",value:function appendText(t,e,i){e instanceof Ha||e instanceof Ts?this.insert(this.createText(t),e,"end"):this.insert(this.createText(t,e),i,"end");}},{key:"appendElement",value:function appendElement(t,e,i){e instanceof Ha||e instanceof Ts?this.insert(this.createElement(t),e,"end"):this.insert(this.createElement(t,e),i,"end");}},{key:"setAttribute",value:function setAttribute(t,e,i){if(this._assertWriterUsedCorrectly(),i instanceof Ns){var _n85=i.getMinimalFlatRanges();var _iterator225=_createForOfIteratorHelper(_n85),_step225;try{for(_iterator225.s();!(_step225=_iterator225.n()).done;){var _i172=_step225.value;cc(this,t,e,_i172);}}catch(err){_iterator225.e(err);}finally{_iterator225.f();}}else lc(this,t,e,i);}},{key:"setAttributes",value:function setAttributes(t,e){var _iterator226=_createForOfIteratorHelper(Li(t)),_step226;try{for(_iterator226.s();!(_step226=_iterator226.n()).done;){var _step226$value=_slicedToArray(_step226.value,2),_i173=_step226$value[0],_n86=_step226$value[1];this.setAttribute(_i173,_n86,e);}}catch(err){_iterator226.e(err);}finally{_iterator226.f();}}},{key:"removeAttribute",value:function removeAttribute(t,e){if(this._assertWriterUsedCorrectly(),e instanceof Ns){var _i174=e.getMinimalFlatRanges();var _iterator227=_createForOfIteratorHelper(_i174),_step227;try{for(_iterator227.s();!(_step227=_iterator227.n()).done;){var _e156=_step227.value;cc(this,t,null,_e156);}}catch(err){_iterator227.e(err);}finally{_iterator227.f();}}else lc(this,t,null,e);}},{key:"clearAttributes",value:function clearAttributes(t){var _this64=this;this._assertWriterUsedCorrectly();var e=function e(t){var _iterator228=_createForOfIteratorHelper(t.getAttributeKeys()),_step228;try{for(_iterator228.s();!(_step228=_iterator228.n()).done;){var _e157=_step228.value;_this64.removeAttribute(_e157,t);}}catch(err){_iterator228.e(err);}finally{_iterator228.f();}};if(t instanceof Ns){var _iterator229=_createForOfIteratorHelper(t.getItems()),_step229;try{for(_iterator229.s();!(_step229=_iterator229.n()).done;){var _i175=_step229.value;e(_i175);}}catch(err){_iterator229.e(err);}finally{_iterator229.f();}}else e(t);}},{key:"move",value:function move(t,e,i){if(this._assertWriterUsedCorrectly(),!(t instanceof Ns))throw new ui.a("writer-move-invalid-range",this);if(!t.isFlat)throw new ui.a("writer-move-range-not-flat",this);var n=Es._createAt(e,i);if(n.isEqual(t.start))return;if(this._addOperationForAffectedMarkers("move",t),!hc(t.root,n.root))throw new ui.a("writer-move-different-document",this);var o=t.root.document?t.root.document.version:null,r=new Xa(t.start,t.end.offset-t.start.offset,n,o);this.batch.addOperation(r),this.model.applyOperation(r);}},{key:"remove",value:function remove(t){this._assertWriterUsedCorrectly();var e=(t instanceof Ns?t:Ns._createOn(t)).getMinimalFlatRanges().reverse();var _iterator230=_createForOfIteratorHelper(e),_step230;try{for(_iterator230.s();!(_step230=_iterator230.n()).done;){var _t169=_step230.value;this._addOperationForAffectedMarkers("move",_t169),uc(_t169.start,_t169.end.offset-_t169.start.offset,this.batch,this.model);}}catch(err){_iterator230.e(err);}finally{_iterator230.f();}}},{key:"merge",value:function merge(t){this._assertWriterUsedCorrectly();var e=t.nodeBefore,i=t.nodeAfter;if(this._addOperationForAffectedMarkers("merge",t),!(e instanceof Ts))throw new ui.a("writer-merge-no-element-before",this);if(!(i instanceof Ts))throw new ui.a("writer-merge-no-element-after",this);t.root.document?this._merge(t):this._mergeDetached(t);}},{key:"createPositionFromPath",value:function createPositionFromPath(t,e,i){return this.model.createPositionFromPath(t,e,i);}},{key:"createPositionAt",value:function createPositionAt(t,e){return this.model.createPositionAt(t,e);}},{key:"createPositionAfter",value:function createPositionAfter(t){return this.model.createPositionAfter(t);}},{key:"createPositionBefore",value:function createPositionBefore(t){return this.model.createPositionBefore(t);}},{key:"createRange",value:function createRange(t,e){return this.model.createRange(t,e);}},{key:"createRangeIn",value:function createRangeIn(t){return this.model.createRangeIn(t);}},{key:"createRangeOn",value:function createRangeOn(t){return this.model.createRangeOn(t);}},{key:"createSelection",value:function createSelection(t,e,i){return this.model.createSelection(t,e,i);}},{key:"_mergeDetached",value:function _mergeDetached(t){var e=t.nodeBefore,i=t.nodeAfter;this.move(Ns._createIn(i),Es._createAt(e,"end")),this.remove(i);}},{key:"_merge",value:function _merge(t){var e=Es._createAt(t.nodeBefore,"end"),i=Es._createAt(t.nodeAfter,0),n=t.root.document.graveyard,o=new Es(n,[0]),r=t.root.document.version,s=new oc(i,t.nodeAfter.maxOffset,e,o,r);this.batch.addOperation(s),this.model.applyOperation(s);}},{key:"rename",value:function rename(t,e){if(this._assertWriterUsedCorrectly(),!(t instanceof Ts))throw new ui.a("writer-rename-not-element-instance",this);var i=t.root.document?t.root.document.version:null,n=new ic(Es._createBefore(t),t.name,e,i);this.batch.addOperation(n),this.model.applyOperation(n);}},{key:"split",value:function split(t,e){this._assertWriterUsedCorrectly();var i,n,o=t.parent;if(!o.parent)throw new ui.a("writer-split-element-no-parent",this);if(e||(e=o.parent),!t.parent.getAncestors({includeSelf:!0}).includes(e))throw new ui.a("writer-split-invalid-limit-element",this);do{var _e158=o.root.document?o.root.document.version:null,_r17=o.maxOffset-t.offset,_s16=rc.getInsertionPosition(t),_a8=new rc(t,_r17,_s16,null,_e158);this.batch.addOperation(_a8),this.model.applyOperation(_a8),i||n||(i=o,n=t.parent.nextSibling),o=(t=this.createPositionAfter(t.parent)).parent;}while(o!==e);return{position:t,range:new Ns(Es._createAt(i,"end"),Es._createAt(n,0))};}},{key:"wrap",value:function wrap(t,e){if(this._assertWriterUsedCorrectly(),!t.isFlat)throw new ui.a("writer-wrap-range-not-flat",this);var i=e instanceof Ts?e:new Ts(e);if(i.childCount>0)throw new ui.a("writer-wrap-element-not-empty",this);if(null!==i.parent)throw new ui.a("writer-wrap-element-attached",this);this.insert(i,t.start);var n=new Ns(t.start.getShiftedBy(1),t.end.getShiftedBy(1));this.move(n,Es._createAt(i,0));}},{key:"unwrap",value:function unwrap(t){if(this._assertWriterUsedCorrectly(),null===t.parent)throw new ui.a("writer-unwrap-element-no-parent",this);this.move(Ns._createIn(t),this.createPositionAfter(t)),this.remove(t);}},{key:"addMarker",value:function addMarker(t,e){if(this._assertWriterUsedCorrectly(),!e||"boolean"!=typeof e.usingOperation)throw new ui.a("writer-addmarker-no-usingoperation",this);var i=e.usingOperation,n=e.range,o=void 0!==e.affectsData&&e.affectsData;if(this.model.markers.has(t))throw new ui.a("writer-addmarker-marker-exists",this);if(!n)throw new ui.a("writer-addmarker-no-range",this);return i?(dc(this,t,null,n,o),this.model.markers.get(t)):this.model.markers._set(t,n,i,o);}},{key:"updateMarker",value:function updateMarker(t,e){this._assertWriterUsedCorrectly();var i="string"==typeof t?t:t.name,n=this.model.markers.get(i);if(!n)throw new ui.a("writer-updatemarker-marker-not-exists",this);if(!e)return void this.model.markers._refresh(n);var o="boolean"==typeof e.usingOperation,r="boolean"==typeof e.affectsData,s=r?e.affectsData:n.affectsData;if(!o&&!e.range&&!r)throw new ui.a("writer-updatemarker-wrong-options",this);var a=n.getRange(),c=e.range?e.range:a;o&&e.usingOperation!==n.managedUsingOperations?e.usingOperation?dc(this,i,null,c,s):(dc(this,i,a,null,s),this.model.markers._set(i,c,void 0,s)):n.managedUsingOperations?dc(this,i,a,c,s):this.model.markers._set(i,c,void 0,s);}},{key:"removeMarker",value:function removeMarker(t){this._assertWriterUsedCorrectly();var e="string"==typeof t?t:t.name;if(!this.model.markers.has(e))throw new ui.a("writer-removemarker-no-marker",this);var i=this.model.markers.get(e);if(!i.managedUsingOperations)return void this.model.markers._remove(e);dc(this,e,i.getRange(),null,i.affectsData);}},{key:"setSelection",value:function setSelection(t,e,i){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(t,e,i);}},{key:"setSelectionFocus",value:function setSelectionFocus(t,e){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(t,e);}},{key:"setSelectionAttribute",value:function setSelectionAttribute(t,e){if(this._assertWriterUsedCorrectly(),"string"==typeof t)this._setSelectionAttribute(t,e);else{var _iterator231=_createForOfIteratorHelper(Li(t)),_step231;try{for(_iterator231.s();!(_step231=_iterator231.n()).done;){var _step231$value=_slicedToArray(_step231.value,2),_e159=_step231$value[0],_i176=_step231$value[1];this._setSelectionAttribute(_e159,_i176);}}catch(err){_iterator231.e(err);}finally{_iterator231.f();}}}},{key:"removeSelectionAttribute",value:function removeSelectionAttribute(t){if(this._assertWriterUsedCorrectly(),"string"==typeof t)this._removeSelectionAttribute(t);else{var _iterator232=_createForOfIteratorHelper(t),_step232;try{for(_iterator232.s();!(_step232=_iterator232.n()).done;){var _e160=_step232.value;this._removeSelectionAttribute(_e160);}}catch(err){_iterator232.e(err);}finally{_iterator232.f();}}}},{key:"overrideSelectionGravity",value:function overrideSelectionGravity(){return this.model.document.selection._overrideGravity();}},{key:"restoreSelectionGravity",value:function restoreSelectionGravity(t){this.model.document.selection._restoreGravity(t);}},{key:"_setSelectionAttribute",value:function _setSelectionAttribute(t,e){var i=this.model.document.selection;if(i.isCollapsed&&i.anchor.parent.isEmpty){var _n87=Gs._getStoreAttributeKey(t);this.setAttribute(_n87,e,i.anchor.parent);}i._setAttribute(t,e);}},{key:"_removeSelectionAttribute",value:function _removeSelectionAttribute(t){var e=this.model.document.selection;if(e.isCollapsed&&e.anchor.parent.isEmpty){var _i177=Gs._getStoreAttributeKey(t);this.removeAttribute(_i177,e.anchor.parent);}e._removeAttribute(t);}},{key:"_assertWriterUsedCorrectly",value:function _assertWriterUsedCorrectly(){if(this.model._currentWriter!==this)throw new ui.a("writer-incorrect-use",this);}},{key:"_addOperationForAffectedMarkers",value:function _addOperationForAffectedMarkers(t,e){var _iterator233=_createForOfIteratorHelper(this.model.markers),_step233;try{for(_iterator233.s();!(_step233=_iterator233.n()).done;){var _i178=_step233.value;if(!_i178.managedUsingOperations)continue;var _n88=_i178.getRange();var _o51=!1;if("move"===t)_o51=e.containsPosition(_n88.start)||e.start.isEqual(_n88.start)||e.containsPosition(_n88.end)||e.end.isEqual(_n88.end);else{var _t170=e.nodeBefore,_i179=e.nodeAfter,_r18=_n88.start.parent==_t170&&_n88.start.isAtEnd,_s17=_n88.end.parent==_i179&&0==_n88.end.offset,_a9=_n88.end.nodeAfter==_i179,_c2=_n88.start.nodeAfter==_i179;_o51=_r18||_s17||_a9||_c2;}_o51&&this.updateMarker(_i178.name,{range:_n88});}}catch(err){_iterator233.e(err);}finally{_iterator233.f();}}}]);return ac;}();function cc(t,e,i,n){var o=t.model,r=o.document;var s,a,c,l=n.start;var _iterator234=_createForOfIteratorHelper(n.getWalker({shallow:!0})),_step234;try{for(_iterator234.s();!(_step234=_iterator234.n()).done;){var _t171=_step234.value;c=_t171.item.getAttribute(e),s&&a!=c&&(a!=i&&d(),l=s),s=_t171.nextPosition,a=c;}}catch(err){_iterator234.e(err);}finally{_iterator234.f();}function d(){var n=new Ns(l,s),c=n.root.document?r.version:null,d=new Ja(n,e,a,i,c);t.batch.addOperation(d),o.applyOperation(d);}s instanceof Es&&s!=l&&a!=i&&d();}function lc(t,e,i,n){var o=t.model,r=o.document,s=n.getAttribute(e);var a,c;if(s!=i){if(n.root===n){var _t172=n.document?r.version:null;c=new nc(n,e,s,i,_t172);}else{a=new Ns(Es._createBefore(n),t.createPositionAfter(n));var _o52=a.root.document?r.version:null;c=new Ja(a,e,s,i,_o52);}t.batch.addOperation(c),o.applyOperation(c);}}function dc(t,e,i,n,o){var r=t.model,s=r.document,a=new ec(e,i,n,r.markers,o,s.version);t.batch.addOperation(a),r.applyOperation(a);}function uc(t,e,i,n){var o;if(t.root.document){var _i180=n.document,_r19=new Es(_i180.graveyard,[0]);o=new Xa(t,e,_r19,_i180.version);}else o=new Za(t,e);i.addOperation(o),n.applyOperation(o);}function hc(t,e){return t===e||t instanceof sc&&e instanceof sc;}var fc=/*#__PURE__*/function(){function fc(t){_classCallCheck(this,fc);this._markerCollection=t,this._changesInElement=new Map(),this._elementSnapshots=new Map(),this._changedMarkers=new Map(),this._changeCount=0,this._cachedChanges=null,this._cachedChangesWithGraveyard=null;}_createClass(fc,[{key:"isEmpty",get:function get(){return 0==this._changesInElement.size&&0==this._changedMarkers.size;}},{key:"refreshItem",value:function refreshItem(t){if(this._isInInsertedElement(t.parent))return;this._markRemove(t.parent,t.startOffset,t.offsetSize),this._markInsert(t.parent,t.startOffset,t.offsetSize);var e=Ns._createOn(t);var _iterator235=_createForOfIteratorHelper(this._markerCollection.getMarkersIntersectingRange(e)),_step235;try{for(_iterator235.s();!(_step235=_iterator235.n()).done;){var _t173=_step235.value;var _e161=_t173.getRange();this.bufferMarkerChange(_t173.name,_e161,_e161,_t173.affectsData);}}catch(err){_iterator235.e(err);}finally{_iterator235.f();}this._cachedChanges=null;}},{key:"bufferOperation",value:function bufferOperation(t){switch(t.type){case"insert":if(this._isInInsertedElement(t.position.parent))return;this._markInsert(t.position.parent,t.position.offset,t.nodes.maxOffset);break;case"addAttribute":case"removeAttribute":case"changeAttribute":var _iterator236=_createForOfIteratorHelper(t.range.getItems({shallow:!0})),_step236;try{for(_iterator236.s();!(_step236=_iterator236.n()).done;){var _e162=_step236.value;this._isInInsertedElement(_e162.parent)||this._markAttribute(_e162);}}catch(err){_iterator236.e(err);}finally{_iterator236.f();}break;case"remove":case"move":case"reinsert":{if(t.sourcePosition.isEqual(t.targetPosition)||t.sourcePosition.getShiftedBy(t.howMany).isEqual(t.targetPosition))return;var _e163=this._isInInsertedElement(t.sourcePosition.parent),_i181=this._isInInsertedElement(t.targetPosition.parent);_e163||this._markRemove(t.sourcePosition.parent,t.sourcePosition.offset,t.howMany),_i181||this._markInsert(t.targetPosition.parent,t.getMovedRangeStart().offset,t.howMany);break;}case"rename":{if(this._isInInsertedElement(t.position.parent))return;this._markRemove(t.position.parent,t.position.offset,1),this._markInsert(t.position.parent,t.position.offset,1);var _e164=Ns._createFromPositionAndShift(t.position,1);var _iterator237=_createForOfIteratorHelper(this._markerCollection.getMarkersIntersectingRange(_e164)),_step237;try{for(_iterator237.s();!(_step237=_iterator237.n()).done;){var _t174=_step237.value;var _e165=_t174.getRange();this.bufferMarkerChange(_t174.name,_e165,_e165,_t174.affectsData);}}catch(err){_iterator237.e(err);}finally{_iterator237.f();}break;}case"split":{var _e166=t.splitPosition.parent;this._isInInsertedElement(_e166)||this._markRemove(_e166,t.splitPosition.offset,t.howMany),this._isInInsertedElement(t.insertionPosition.parent)||this._markInsert(t.insertionPosition.parent,t.insertionPosition.offset,1),t.graveyardPosition&&this._markRemove(t.graveyardPosition.parent,t.graveyardPosition.offset,1);break;}case"merge":{var _e167=t.sourcePosition.parent;this._isInInsertedElement(_e167.parent)||this._markRemove(_e167.parent,_e167.startOffset,1);var _i182=t.graveyardPosition.parent;this._markInsert(_i182,t.graveyardPosition.offset,1);var _n89=t.targetPosition.parent;this._isInInsertedElement(_n89)||this._markInsert(_n89,t.targetPosition.offset,_e167.maxOffset);break;}}this._cachedChanges=null;}},{key:"bufferMarkerChange",value:function bufferMarkerChange(t,e,i,n){var o=this._changedMarkers.get(t);o?(o.newRange=i,o.affectsData=n,null==o.oldRange&&null==o.newRange&&this._changedMarkers["delete"](t)):this._changedMarkers.set(t,{oldRange:e,newRange:i,affectsData:n});}},{key:"getMarkersToRemove",value:function getMarkersToRemove(){var t=[];var _iterator238=_createForOfIteratorHelper(this._changedMarkers),_step238;try{for(_iterator238.s();!(_step238=_iterator238.n()).done;){var _step238$value=_slicedToArray(_step238.value,2),_e168=_step238$value[0],_i183=_step238$value[1];null!=_i183.oldRange&&t.push({name:_e168,range:_i183.oldRange});}}catch(err){_iterator238.e(err);}finally{_iterator238.f();}return t;}},{key:"getMarkersToAdd",value:function getMarkersToAdd(){var t=[];var _iterator239=_createForOfIteratorHelper(this._changedMarkers),_step239;try{for(_iterator239.s();!(_step239=_iterator239.n()).done;){var _step239$value=_slicedToArray(_step239.value,2),_e169=_step239$value[0],_i184=_step239$value[1];null!=_i184.newRange&&t.push({name:_e169,range:_i184.newRange});}}catch(err){_iterator239.e(err);}finally{_iterator239.f();}return t;}},{key:"getChangedMarkers",value:function getChangedMarkers(){return Array.from(this._changedMarkers).map(function(t){return{name:t[0],data:{oldRange:t[1].oldRange,newRange:t[1].newRange}};});}},{key:"hasDataChanges",value:function hasDataChanges(){var _iterator240=_createForOfIteratorHelper(this._changedMarkers),_step240;try{for(_iterator240.s();!(_step240=_iterator240.n()).done;){var _step240$value=_slicedToArray(_step240.value,2),_t175=_step240$value[1];if(_t175.affectsData)return!0;}}catch(err){_iterator240.e(err);}finally{_iterator240.f();}return this._changesInElement.size>0;}},{key:"getChanges",value:function getChanges(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{includeChangesInGraveyard:!1};if(this._cachedChanges)return t.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();var e=[];var _iterator241=_createForOfIteratorHelper(this._changesInElement.keys()),_step241;try{for(_iterator241.s();!(_step241=_iterator241.n()).done;){var _t177=_step241.value;var _i186=this._changesInElement.get(_t177).sort(function(t,e){return t.offset===e.offset?t.type!=e.type?"remove"==t.type?-1:1:0:t.offset<e.offset?-1:1;}),_n91=this._elementSnapshots.get(_t177),_o54=mc(_t177.getChildren()),_r21=gc(_n91.length,_i186);var _s19=0,_a11=0;var _iterator243=_createForOfIteratorHelper(_r21),_step243;try{for(_iterator243.s();!(_step243=_iterator243.n()).done;){var _i187=_step243.value;if("i"===_i187)e.push(this._getInsertDiff(_t177,_s19,_o54[_s19].name)),_s19++;else if("r"===_i187)e.push(this._getRemoveDiff(_t177,_s19,_n91[_a11].name)),_a11++;else if("a"===_i187){var _e171;var _i188=_o54[_s19].attributes,_r22=_n91[_a11].attributes;var _c3=void 0;if("$text"==_o54[_s19].name)_c3=new Ns(Es._createAt(_t177,_s19),Es._createAt(_t177,_s19+1));else{var _e170=_t177.offsetToIndex(_s19);_c3=new Ns(Es._createAt(_t177,_s19),Es._createAt(_t177.getChild(_e170),0));}(_e171=e).push.apply(_e171,_toConsumableArray(this._getAttributesDiff(_c3,_r22,_i188))),_s19++,_a11++;}else _s19++,_a11++;}}catch(err){_iterator243.e(err);}finally{_iterator243.f();}}}catch(err){_iterator241.e(err);}finally{_iterator241.f();}e.sort(function(t,e){return t.position.root!=e.position.root?t.position.root.rootName<e.position.root.rootName?-1:1:t.position.isEqual(e.position)?t.changeCount-e.changeCount:t.position.isBefore(e.position)?-1:1;});for(var _t176=1,_i185=0;_t176<e.length;_t176++){var _n90=e[_i185],_o53=e[_t176],_r20="remove"==_n90.type&&"remove"==_o53.type&&"$text"==_n90.name&&"$text"==_o53.name&&_n90.position.isEqual(_o53.position),_s18="insert"==_n90.type&&"insert"==_o53.type&&"$text"==_n90.name&&"$text"==_o53.name&&_n90.position.parent==_o53.position.parent&&_n90.position.offset+_n90.length==_o53.position.offset,_a10="attribute"==_n90.type&&"attribute"==_o53.type&&_n90.position.parent==_o53.position.parent&&_n90.range.isFlat&&_o53.range.isFlat&&_n90.position.offset+_n90.length==_o53.position.offset&&_n90.attributeKey==_o53.attributeKey&&_n90.attributeOldValue==_o53.attributeOldValue&&_n90.attributeNewValue==_o53.attributeNewValue;_r20||_s18||_a10?(_n90.length++,_a10&&(_n90.range.end=_n90.range.end.getShiftedBy(1)),e[_t176]=null):_i185=_t176;}e=e.filter(function(t){return t;});var _iterator242=_createForOfIteratorHelper(e),_step242;try{for(_iterator242.s();!(_step242=_iterator242.n()).done;){var _t178=_step242.value;delete _t178.changeCount,"attribute"==_t178.type&&(delete _t178.position,delete _t178.length);}}catch(err){_iterator242.e(err);}finally{_iterator242.f();}return this._changeCount=0,this._cachedChangesWithGraveyard=e.slice(),this._cachedChanges=e.filter(pc),t.includeChangesInGraveyard?this._cachedChangesWithGraveyard:this._cachedChanges;}},{key:"reset",value:function reset(){this._changesInElement.clear(),this._elementSnapshots.clear(),this._changedMarkers.clear(),this._cachedChanges=null;}},{key:"_markInsert",value:function _markInsert(t,e,i){var n={type:"insert",offset:e,howMany:i,count:this._changeCount++};this._markChange(t,n);}},{key:"_markRemove",value:function _markRemove(t,e,i){var n={type:"remove",offset:e,howMany:i,count:this._changeCount++};this._markChange(t,n),this._removeAllNestedChanges(t,e,i);}},{key:"_markAttribute",value:function _markAttribute(t){var e={type:"attribute",offset:t.startOffset,howMany:t.offsetSize,count:this._changeCount++};this._markChange(t.parent,e);}},{key:"_markChange",value:function _markChange(t,e){this._makeSnapshot(t);var i=this._getChangesForElement(t);this._handleChange(e,i),i.push(e);for(var _t179=0;_t179<i.length;_t179++){i[_t179].howMany<1&&(i.splice(_t179,1),_t179--);}}},{key:"_getChangesForElement",value:function _getChangesForElement(t){var e;return this._changesInElement.has(t)?e=this._changesInElement.get(t):(e=[],this._changesInElement.set(t,e)),e;}},{key:"_makeSnapshot",value:function _makeSnapshot(t){this._elementSnapshots.has(t)||this._elementSnapshots.set(t,mc(t.getChildren()));}},{key:"_handleChange",value:function _handleChange(t,e){t.nodesToHandle=t.howMany;var _iterator244=_createForOfIteratorHelper(e),_step244;try{for(_iterator244.s();!(_step244=_iterator244.n()).done;){var _i189=_step244.value;var _n92=t.offset+t.howMany,_o55=_i189.offset+_i189.howMany;if("insert"==t.type&&("insert"==_i189.type&&(t.offset<=_i189.offset?_i189.offset+=t.howMany:t.offset<_o55&&(_i189.howMany+=t.nodesToHandle,t.nodesToHandle=0)),"remove"==_i189.type&&t.offset<_i189.offset&&(_i189.offset+=t.howMany),"attribute"==_i189.type))if(t.offset<=_i189.offset)_i189.offset+=t.howMany;else if(t.offset<_o55){var _o56=_i189.howMany;_i189.howMany=t.offset-_i189.offset,e.unshift({type:"attribute",offset:_n92,howMany:_o56-_i189.howMany,count:this._changeCount++});}if("remove"==t.type){if("insert"==_i189.type)if(_n92<=_i189.offset)_i189.offset-=t.howMany;else if(_n92<=_o55){if(t.offset<_i189.offset){var _e172=_n92-_i189.offset;_i189.offset=t.offset,_i189.howMany-=_e172,t.nodesToHandle-=_e172;}else _i189.howMany-=t.nodesToHandle,t.nodesToHandle=0;}else if(t.offset<=_i189.offset)t.nodesToHandle-=_i189.howMany,_i189.howMany=0;else if(t.offset<_o55){var _e173=_o55-t.offset;_i189.howMany-=_e173,t.nodesToHandle-=_e173;}if("remove"==_i189.type&&(_n92<=_i189.offset?_i189.offset-=t.howMany:t.offset<_i189.offset&&(t.nodesToHandle+=_i189.howMany,_i189.howMany=0)),"attribute"==_i189.type)if(_n92<=_i189.offset)_i189.offset-=t.howMany;else if(t.offset<_i189.offset){var _e174=_n92-_i189.offset;_i189.offset=t.offset,_i189.howMany-=_e174;}else if(t.offset<_o55)if(_n92<=_o55){var _n93=_i189.howMany;_i189.howMany=t.offset-_i189.offset;var _o57=_n93-_i189.howMany-t.nodesToHandle;e.unshift({type:"attribute",offset:t.offset,howMany:_o57,count:this._changeCount++});}else _i189.howMany-=_o55-t.offset;}if("attribute"==t.type){if("insert"==_i189.type)if(t.offset<_i189.offset&&_n92>_i189.offset){if(_n92>_o55){var _t180={type:"attribute",offset:_o55,howMany:_n92-_o55,count:this._changeCount++};this._handleChange(_t180,e),e.push(_t180);}t.nodesToHandle=_i189.offset-t.offset,t.howMany=t.nodesToHandle;}else t.offset>=_i189.offset&&t.offset<_o55&&(_n92>_o55?(t.nodesToHandle=_n92-_o55,t.offset=_o55):t.nodesToHandle=0);if("remove"==_i189.type&&t.offset<_i189.offset&&_n92>_i189.offset){var _o58={type:"attribute",offset:_i189.offset,howMany:_n92-_i189.offset,count:this._changeCount++};this._handleChange(_o58,e),e.push(_o58),t.nodesToHandle=_i189.offset-t.offset,t.howMany=t.nodesToHandle;}"attribute"==_i189.type&&(t.offset>=_i189.offset&&_n92<=_o55?(t.nodesToHandle=0,t.howMany=0,t.offset=0):t.offset<=_i189.offset&&_n92>=_o55&&(_i189.howMany=0));}}}catch(err){_iterator244.e(err);}finally{_iterator244.f();}t.howMany=t.nodesToHandle,delete t.nodesToHandle;}},{key:"_getInsertDiff",value:function _getInsertDiff(t,e,i){return{type:"insert",position:Es._createAt(t,e),name:i,length:1,changeCount:this._changeCount++};}},{key:"_getRemoveDiff",value:function _getRemoveDiff(t,e,i){return{type:"remove",position:Es._createAt(t,e),name:i,length:1,changeCount:this._changeCount++};}},{key:"_getAttributesDiff",value:function _getAttributesDiff(t,e,i){var n=[];i=new Map(i);var _iterator245=_createForOfIteratorHelper(e),_step245;try{for(_iterator245.s();!(_step245=_iterator245.n()).done;){var _step245$value=_slicedToArray(_step245.value,2),_o59=_step245$value[0],_r23=_step245$value[1];var _e175=i.has(_o59)?i.get(_o59):null;_e175!==_r23&&n.push({type:"attribute",position:t.start,range:t.clone(),length:1,attributeKey:_o59,attributeOldValue:_r23,attributeNewValue:_e175,changeCount:this._changeCount++}),i["delete"](_o59);}}catch(err){_iterator245.e(err);}finally{_iterator245.f();}var _iterator246=_createForOfIteratorHelper(i),_step246;try{for(_iterator246.s();!(_step246=_iterator246.n()).done;){var _step246$value=_slicedToArray(_step246.value,2),_e176=_step246$value[0],_o60=_step246$value[1];n.push({type:"attribute",position:t.start,range:t.clone(),length:1,attributeKey:_e176,attributeOldValue:null,attributeNewValue:_o60,changeCount:this._changeCount++});}}catch(err){_iterator246.e(err);}finally{_iterator246.f();}return n;}},{key:"_isInInsertedElement",value:function _isInInsertedElement(t){var e=t.parent;if(!e)return!1;var i=this._changesInElement.get(e),n=t.startOffset;if(i){var _iterator247=_createForOfIteratorHelper(i),_step247;try{for(_iterator247.s();!(_step247=_iterator247.n()).done;){var _t181=_step247.value;if("insert"==_t181.type&&n>=_t181.offset&&n<_t181.offset+_t181.howMany)return!0;}}catch(err){_iterator247.e(err);}finally{_iterator247.f();}}return this._isInInsertedElement(e);}},{key:"_removeAllNestedChanges",value:function _removeAllNestedChanges(t,e,i){var n=new Ns(Es._createAt(t,e),Es._createAt(t,e+i));var _iterator248=_createForOfIteratorHelper(n.getItems({shallow:!0})),_step248;try{for(_iterator248.s();!(_step248=_iterator248.n()).done;){var _t182=_step248.value;_t182.is("element")&&(this._elementSnapshots["delete"](_t182),this._changesInElement["delete"](_t182),this._removeAllNestedChanges(_t182,0,_t182.maxOffset));}}catch(err){_iterator248.e(err);}finally{_iterator248.f();}}}]);return fc;}();function mc(t){var e=[];var _iterator249=_createForOfIteratorHelper(t),_step249;try{for(_iterator249.s();!(_step249=_iterator249.n()).done;){var _i190=_step249.value;if(_i190.is("$text"))for(var _t183=0;_t183<_i190.data.length;_t183++){e.push({name:"$text",attributes:new Map(_i190.getAttributes())});}else e.push({name:_i190.name,attributes:new Map(_i190.getAttributes())});}}catch(err){_iterator249.e(err);}finally{_iterator249.f();}return e;}function gc(t,e){var i=[];var n=0,o=0;var _iterator250=_createForOfIteratorHelper(e),_step250;try{for(_iterator250.s();!(_step250=_iterator250.n()).done;){var _t184=_step250.value;if(_t184.offset>n){for(var _e178=0;_e178<_t184.offset-n;_e178++){i.push("e");}o+=_t184.offset-n;}if("insert"==_t184.type){for(var _e179=0;_e179<_t184.howMany;_e179++){i.push("i");}n=_t184.offset+_t184.howMany;}else if("remove"==_t184.type){for(var _e180=0;_e180<_t184.howMany;_e180++){i.push("r");}n=_t184.offset,o+=_t184.howMany;}else i.push.apply(i,_toConsumableArray("a".repeat(_t184.howMany).split(""))),n=_t184.offset+_t184.howMany,o+=_t184.howMany;}}catch(err){_iterator250.e(err);}finally{_iterator250.f();}if(o<t)for(var _e177=0;_e177<t-o-n;_e177++){i.push("e");}return i;}function pc(t){var e=t.position&&"$graveyard"==t.position.root.rootName,i=t.range&&"$graveyard"==t.range.root.rootName;return!e&&!i;}var bc=/*#__PURE__*/function(){function bc(){_classCallCheck(this,bc);this._operations=[],this._undoPairs=new Map(),this._undoneOperations=new Set();}_createClass(bc,[{key:"addOperation",value:function addOperation(t){this._operations.includes(t)||this._operations.push(t);}},{key:"getOperations",value:function getOperations(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:Number.NEGATIVE_INFINITY;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Number.POSITIVE_INFINITY;var i=[];var _iterator251=_createForOfIteratorHelper(this._operations),_step251;try{for(_iterator251.s();!(_step251=_iterator251.n()).done;){var _n94=_step251.value;_n94.baseVersion>=t&&_n94.baseVersion<e&&i.push(_n94);}}catch(err){_iterator251.e(err);}finally{_iterator251.f();}return i;}},{key:"getOperation",value:function getOperation(t){var _iterator252=_createForOfIteratorHelper(this._operations),_step252;try{for(_iterator252.s();!(_step252=_iterator252.n()).done;){var _e181=_step252.value;if(_e181.baseVersion==t)return _e181;}}catch(err){_iterator252.e(err);}finally{_iterator252.f();}}},{key:"setOperationAsUndone",value:function setOperationAsUndone(t,e){this._undoPairs.set(e,t),this._undoneOperations.add(t);}},{key:"isUndoingOperation",value:function isUndoingOperation(t){return this._undoPairs.has(t);}},{key:"isUndoneOperation",value:function isUndoneOperation(t){return this._undoneOperations.has(t);}},{key:"getUndoneOperation",value:function getUndoneOperation(t){return this._undoPairs.get(t);}}]);return bc;}();function wc(t,e){return!!(i=t.charAt(e-1))&&1==i.length&&/[\ud800-\udbff]/.test(i)&&function(t){return!!t&&1==t.length&&/[\udc00-\udfff]/.test(t);}(t.charAt(e));var i;}function kc(t,e){return!!(i=t.charAt(e))&&1==i.length&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(i);var i;}var _c=/*#__PURE__*/function(){function _c(t){var _this65=this;_classCallCheck(this,_c);this.model=t,this.version=0,this.history=new bc(this),this.selection=new Gs(this),this.roots=new xi({idProperty:"rootName"}),this.differ=new fc(t.markers),this._postFixers=new Set(),this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root","$graveyard"),this.listenTo(t,"applyOperation",function(t,e){var i=e[0];if(i.isDocumentOperation&&i.baseVersion!==_this65.version)throw new ui.a("model-document-applyoperation-wrong-version",_this65,{operation:i});},{priority:"highest"}),this.listenTo(t,"applyOperation",function(t,e){var i=e[0];i.isDocumentOperation&&_this65.differ.bufferOperation(i);},{priority:"high"}),this.listenTo(t,"applyOperation",function(t,e){var i=e[0];i.isDocumentOperation&&(_this65.version++,_this65.history.addOperation(i));},{priority:"low"}),this.listenTo(this.selection,"change",function(){_this65._hasSelectionChangedFromTheLastChangeBlock=!0;}),this.listenTo(t.markers,"update",function(t,e,i,n){_this65.differ.bufferMarkerChange(e.name,i,n,e.affectsData),null===i&&e.on("change",function(t,i){_this65.differ.bufferMarkerChange(e.name,i,e.getRange(),e.affectsData);});});}_createClass(_c,[{key:"graveyard",get:function get(){return this.getRoot("$graveyard");}},{key:"createRoot",value:function createRoot(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"$root";var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"main";if(this.roots.get(e))throw new ui.a("model-document-createroot-name-exists",this,{name:e});var i=new sc(this,t,e);return this.roots.add(i),i;}},{key:"destroy",value:function destroy(){this.selection.destroy(),this.stopListening();}},{key:"getRoot",value:function getRoot(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"main";return this.roots.get(t);}},{key:"getRootNames",value:function getRootNames(){return Array.from(this.roots,function(t){return t.rootName;}).filter(function(t){return"$graveyard"!=t;});}},{key:"registerPostFixer",value:function registerPostFixer(t){this._postFixers.add(t);}},{key:"toJSON",value:function toJSON(){var t=Ni(this);return t.selection="[engine.model.DocumentSelection]",t.model="[engine.model.Model]",t;}},{key:"_handleChangeBlock",value:function _handleChangeBlock(t){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(t),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",t.batch):this.fire("change",t.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1;}},{key:"_hasDocumentChangedFromTheLastChangeBlock",value:function _hasDocumentChangedFromTheLastChangeBlock(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock;}},{key:"_getDefaultRoot",value:function _getDefaultRoot(){var _iterator253=_createForOfIteratorHelper(this.roots),_step253;try{for(_iterator253.s();!(_step253=_iterator253.n()).done;){var _t185=_step253.value;if(_t185!==this.graveyard)return _t185;}}catch(err){_iterator253.e(err);}finally{_iterator253.f();}return this.graveyard;}},{key:"_getDefaultRange",value:function _getDefaultRange(){var t=this._getDefaultRoot(),e=this.model,i=e.schema,n=e.createPositionFromPath(t,[0]);return i.getNearestSelectionRange(n)||e.createRange(n);}},{key:"_validateSelectionRange",value:function _validateSelectionRange(t){return vc(t.start)&&vc(t.end);}},{key:"_callPostFixers",value:function _callPostFixers(t){var e=!1;do{var _iterator254=_createForOfIteratorHelper(this._postFixers),_step254;try{for(_iterator254.s();!(_step254=_iterator254.n()).done;){var _i191=_step254.value;if(this.selection.refresh(),e=_i191(t),e)break;}}catch(err){_iterator254.e(err);}finally{_iterator254.f();}}while(e);}}]);return _c;}();function vc(t){var e=t.textNode;if(e){var _i192=e.data,_n95=t.offset-e.startOffset;return!wc(_i192,_n95)&&!kc(_i192,_n95);}return!0;}yi(_c,mi);var yc=/*#__PURE__*/function(){function yc(){_classCallCheck(this,yc);this._markers=new Map();}_createClass(yc,[{key:Symbol.iterator,value:function value(){return this._markers.values();}},{key:"has",value:function has(t){return this._markers.has(t);}},{key:"get",value:function get(t){return this._markers.get(t)||null;}},{key:"_set",value:function _set(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:!1;var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:!1;var o=t instanceof xc?t.name:t;if(o.includes(","))throw new ui.a("markercollection-incorrect-marker-name",this);var r=this._markers.get(o);if(r){var _t186=r.getRange();var _s20=!1;return _t186.isEqual(e)||(r._attachLiveRange(qs.fromRange(e)),_s20=!0),i!=r.managedUsingOperations&&(r._managedUsingOperations=i,_s20=!0),"boolean"==typeof n&&n!=r.affectsData&&(r._affectsData=n,_s20=!0),_s20&&this.fire("update:"+o,r,_t186,e),r;}var s=qs.fromRange(e),a=new xc(o,s,i,n);return this._markers.set(o,a),this.fire("update:"+o,a,null,e),a;}},{key:"_remove",value:function _remove(t){var e=t instanceof xc?t.name:t,i=this._markers.get(e);return!!i&&(this._markers["delete"](e),this.fire("update:"+e,i,i.getRange(),null),this._destroyMarker(i),!0);}},{key:"_refresh",value:function _refresh(t){var e=t instanceof xc?t.name:t,i=this._markers.get(e);if(!i)throw new ui.a("markercollection-refresh-marker-not-exists",this);var n=i.getRange();this.fire("update:"+e,i,n,n,i.managedUsingOperations,i.affectsData);}},{key:"getMarkersAtPosition",value:/*#__PURE__*/regeneratorRuntime.mark(function getMarkersAtPosition(t){var _iterator255,_step255,_e182;return regeneratorRuntime.wrap(function getMarkersAtPosition$(_context31){while(1){switch(_context31.prev=_context31.next){case 0:_iterator255=_createForOfIteratorHelper(this);_context31.prev=1;_iterator255.s();case 3:if((_step255=_iterator255.n()).done){_context31.next=11;break;}_e182=_step255.value;_context31.t0=_e182.getRange().containsPosition(t);if(!_context31.t0){_context31.next=9;break;}_context31.next=9;return _e182;case 9:_context31.next=3;break;case 11:_context31.next=16;break;case 13:_context31.prev=13;_context31.t1=_context31["catch"](1);_iterator255.e(_context31.t1);case 16:_context31.prev=16;_iterator255.f();return _context31.finish(16);case 19:case"end":return _context31.stop();}}},getMarkersAtPosition,this,[[1,13,16,19]]);})},{key:"getMarkersIntersectingRange",value:/*#__PURE__*/regeneratorRuntime.mark(function getMarkersIntersectingRange(t){var _iterator256,_step256,_e183;return regeneratorRuntime.wrap(function getMarkersIntersectingRange$(_context32){while(1){switch(_context32.prev=_context32.next){case 0:_iterator256=_createForOfIteratorHelper(this);_context32.prev=1;_iterator256.s();case 3:if((_step256=_iterator256.n()).done){_context32.next=11;break;}_e183=_step256.value;_context32.t0=null!==_e183.getRange().getIntersection(t);if(!_context32.t0){_context32.next=9;break;}_context32.next=9;return _e183;case 9:_context32.next=3;break;case 11:_context32.next=16;break;case 13:_context32.prev=13;_context32.t1=_context32["catch"](1);_iterator256.e(_context32.t1);case 16:_context32.prev=16;_iterator256.f();return _context32.finish(16);case 19:case"end":return _context32.stop();}}},getMarkersIntersectingRange,this,[[1,13,16,19]]);})},{key:"destroy",value:function destroy(){var _iterator257=_createForOfIteratorHelper(this._markers.values()),_step257;try{for(_iterator257.s();!(_step257=_iterator257.n()).done;){var _t187=_step257.value;this._destroyMarker(_t187);}}catch(err){_iterator257.e(err);}finally{_iterator257.f();}this._markers=null,this.stopListening();}},{key:"getMarkersGroup",value:/*#__PURE__*/regeneratorRuntime.mark(function getMarkersGroup(t){var _iterator258,_step258,_e184;return regeneratorRuntime.wrap(function getMarkersGroup$(_context33){while(1){switch(_context33.prev=_context33.next){case 0:_iterator258=_createForOfIteratorHelper(this._markers.values());_context33.prev=1;_iterator258.s();case 3:if((_step258=_iterator258.n()).done){_context33.next=11;break;}_e184=_step258.value;_context33.t0=_e184.name.startsWith(t+":");if(!_context33.t0){_context33.next=9;break;}_context33.next=9;return _e184;case 9:_context33.next=3;break;case 11:_context33.next=16;break;case 13:_context33.prev=13;_context33.t1=_context33["catch"](1);_iterator258.e(_context33.t1);case 16:_context33.prev=16;_iterator258.f();return _context33.finish(16);case 19:case"end":return _context33.stop();}}},getMarkersGroup,this,[[1,13,16,19]]);})},{key:"_destroyMarker",value:function _destroyMarker(t){t.stopListening(),t._detachLiveRange();}}]);return yc;}();yi(yc,mi);var xc=/*#__PURE__*/function(){function xc(t,e,i,n){_classCallCheck(this,xc);this.name=t,this._liveRange=this._attachLiveRange(e),this._managedUsingOperations=i,this._affectsData=n;}_createClass(xc,[{key:"managedUsingOperations",get:function get(){if(!this._liveRange)throw new ui.a("marker-destroyed",this);return this._managedUsingOperations;}},{key:"affectsData",get:function get(){if(!this._liveRange)throw new ui.a("marker-destroyed",this);return this._affectsData;}},{key:"getStart",value:function getStart(){if(!this._liveRange)throw new ui.a("marker-destroyed",this);return this._liveRange.start.clone();}},{key:"getEnd",value:function getEnd(){if(!this._liveRange)throw new ui.a("marker-destroyed",this);return this._liveRange.end.clone();}},{key:"getRange",value:function getRange(){if(!this._liveRange)throw new ui.a("marker-destroyed",this);return this._liveRange.toRange();}},{key:"is",value:function is(t){return"marker"===t||"model:marker"===t;}},{key:"_attachLiveRange",value:function _attachLiveRange(t){return this._liveRange&&this._detachLiveRange(),t.delegate("change:range").to(this),t.delegate("change:content").to(this),this._liveRange=t,t;}},{key:"_detachLiveRange",value:function _detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null;}}]);return xc;}();yi(xc,mi);var Ac=/*#__PURE__*/function(_Fa10){_inherits(Ac,_Fa10);var _super35=_createSuper(Ac);function Ac(){_classCallCheck(this,Ac);return _super35.apply(this,arguments);}_createClass(Ac,[{key:"type",get:function get(){return"noop";}},{key:"clone",value:function clone(){return new Ac(this.baseVersion);}},{key:"getReversed",value:function getReversed(){return new Ac(this.baseVersion+1);}},{key:"_execute",value:function _execute(){}}],[{key:"className",get:function get(){return"NoOperation";}}]);return Ac;}(Fa);var Tc={};Tc[Ja.className]=Ja,Tc[tc.className]=tc,Tc[ec.className]=ec,Tc[Xa.className]=Xa,Tc[Ac.className]=Ac,Tc[Fa.className]=Fa,Tc[ic.className]=ic,Tc[nc.className]=nc,Tc[rc.className]=rc,Tc[oc.className]=oc;var Cc=/*#__PURE__*/function(_Es){_inherits(Cc,_Es);var _super36=_createSuper(Cc);function Cc(t,e){var _this66;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"toNone";_classCallCheck(this,Cc);if(_this66=_super36.call(this,t,e,i),!_this66.root.is("rootElement"))throw new ui.a("model-liveposition-root-not-rootelement",t);Sc.call(_assertThisInitialized(_this66));return _possibleConstructorReturn(_this66);}_createClass(Cc,[{key:"detach",value:function detach(){this.stopListening();}},{key:"is",value:function is(t){return"livePosition"===t||"model:livePosition"===t||"position"==t||"model:position"===t;}},{key:"toPosition",value:function toPosition(){return new Es(this.root,this.path.slice(),this.stickiness);}}],[{key:"fromPosition",value:function fromPosition(t,e){return new this(t.root,t.path.slice(),e||t.stickiness);}}]);return Cc;}(Es);function Sc(){var _this67=this;this.listenTo(this.root.document.model,"applyOperation",function(t,e){var i=e[0];i.isDocumentOperation&&Ec.call(_this67,i);},{priority:"low"});}function Ec(t){var e=this.getTransformedByOperation(t);if(!this.isEqual(e)){var _t188=this.toPosition();this.path=e.path,this.root=e.root,this.fire("change",_t188);}}yi(Cc,mi);var Pc=/*#__PURE__*/function(){function Pc(t,e,i){_classCallCheck(this,Pc);this.model=t,this.writer=e,this.position=i,this.canMergeWith=new Set([this.position.parent]),this.schema=t.schema,this._documentFragment=e.createDocumentFragment(),this._documentFragmentPosition=e.createPositionAt(this._documentFragment,0),this._firstNode=null,this._lastNode=null,this._lastAutoParagraph=null,this._filterAttributesOf=[],this._affectedStart=null,this._affectedEnd=null;}_createClass(Pc,[{key:"handleNodes",value:function handleNodes(t){for(var _i193=0,_Array$from6=Array.from(t);_i193<_Array$from6.length;_i193++){var _e185=_Array$from6[_i193];this._handleNode(_e185);}this._insertPartialFragment(),this._lastAutoParagraph&&this._updateLastNodeFromAutoParagraph(this._lastAutoParagraph),this._mergeOnRight(),this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[];}},{key:"_updateLastNodeFromAutoParagraph",value:function _updateLastNodeFromAutoParagraph(t){var e=this.writer.createPositionAfter(this._lastNode),i=this.writer.createPositionAfter(t);if(i.isAfter(e)){if(this._lastNode=t,this.position.parent!=t||!this.position.isAtEnd)throw new ui.a("insertcontent-invalid-insertion-position",this);this.position=i,this._setAffectedBoundaries(this.position);}}},{key:"getSelectionRange",value:function getSelectionRange(){return this.nodeToSelect?Ns._createOn(this.nodeToSelect):this.model.schema.getNearestSelectionRange(this.position);}},{key:"getAffectedRange",value:function getAffectedRange(){return this._affectedStart?new Ns(this._affectedStart,this._affectedEnd):null;}},{key:"destroy",value:function destroy(){this._affectedStart&&this._affectedStart.detach(),this._affectedEnd&&this._affectedEnd.detach();}},{key:"_handleNode",value:function _handleNode(t){if(this.schema.isObject(t))return void this._handleObject(t);var e=this._checkAndAutoParagraphToAllowedPosition(t);e||(e=this._checkAndSplitToAllowedPosition(t),e)?(this._appendToFragment(t),this._firstNode||(this._firstNode=t),this._lastNode=t):this._handleDisallowedNode(t);}},{key:"_insertPartialFragment",value:function _insertPartialFragment(){if(this._documentFragment.isEmpty)return;var t=Cc.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position),this._documentFragment.getChild(0)==this._firstNode&&(this.writer.insert(this._firstNode,this.position),this._mergeOnLeft(),this.position=t.toPosition()),this._documentFragment.isEmpty||this.writer.insert(this._documentFragment,this.position),this._documentFragmentPosition=this.writer.createPositionAt(this._documentFragment,0),this.position=t.toPosition(),t.detach();}},{key:"_handleObject",value:function _handleObject(t){this._checkAndSplitToAllowedPosition(t)?this._appendToFragment(t):this._tryAutoparagraphing(t);}},{key:"_handleDisallowedNode",value:function _handleDisallowedNode(t){t.is("element")?this.handleNodes(t.getChildren()):this._tryAutoparagraphing(t);}},{key:"_appendToFragment",value:function _appendToFragment(t){if(!this.schema.checkChild(this.position,t))throw new ui.a("insertcontent-wrong-position",this,{node:t,position:this.position});this.writer.insert(t,this._documentFragmentPosition),this._documentFragmentPosition=this._documentFragmentPosition.getShiftedBy(t.offsetSize),this.schema.isObject(t)&&!this.schema.checkChild(this.position,"$text")?this.nodeToSelect=t:this.nodeToSelect=null,this._filterAttributesOf.push(t);}},{key:"_setAffectedBoundaries",value:function _setAffectedBoundaries(t){this._affectedStart||(this._affectedStart=Cc.fromPosition(t,"toPrevious")),this._affectedEnd&&!this._affectedEnd.isBefore(t)||(this._affectedEnd&&this._affectedEnd.detach(),this._affectedEnd=Cc.fromPosition(t,"toNext"));}},{key:"_mergeOnLeft",value:function _mergeOnLeft(){var t=this._firstNode;if(!(t instanceof Ts))return;if(!this._canMergeLeft(t))return;var e=Cc._createBefore(t);e.stickiness="toNext";var i=Cc.fromPosition(this.position,"toNext");this._affectedStart.isEqual(e)&&(this._affectedStart.detach(),this._affectedStart=Cc._createAt(e.nodeBefore,"end","toPrevious")),this._firstNode===this._lastNode&&(this._firstNode=e.nodeBefore,this._lastNode=e.nodeBefore),this.writer.merge(e),e.isEqual(this._affectedEnd)&&this._firstNode===this._lastNode&&(this._affectedEnd.detach(),this._affectedEnd=Cc._createAt(e.nodeBefore,"end","toNext")),this.position=i.toPosition(),i.detach(),this._filterAttributesOf.push(this.position.parent),e.detach();}},{key:"_mergeOnRight",value:function _mergeOnRight(){var t=this._lastNode;if(!(t instanceof Ts))return;if(!this._canMergeRight(t))return;var e=Cc._createAfter(t);if(e.stickiness="toNext",!this.position.isEqual(e))throw new ui.a("insertcontent-invalid-insertion-position",this);this.position=Es._createAt(e.nodeBefore,"end");var i=Cc.fromPosition(this.position,"toPrevious");this._affectedEnd.isEqual(e)&&(this._affectedEnd.detach(),this._affectedEnd=Cc._createAt(e.nodeBefore,"end","toNext")),this._firstNode===this._lastNode&&(this._firstNode=e.nodeBefore,this._lastNode=e.nodeBefore),this.writer.merge(e),e.getShiftedBy(-1).isEqual(this._affectedStart)&&this._firstNode===this._lastNode&&(this._affectedStart.detach(),this._affectedStart=Cc._createAt(e.nodeBefore,0,"toPrevious")),this.position=i.toPosition(),i.detach(),this._filterAttributesOf.push(this.position.parent),e.detach();}},{key:"_canMergeLeft",value:function _canMergeLeft(t){var e=t.previousSibling;return e instanceof Ts&&this.canMergeWith.has(e)&&this.model.schema.checkMerge(e,t);}},{key:"_canMergeRight",value:function _canMergeRight(t){var e=t.nextSibling;return e instanceof Ts&&this.canMergeWith.has(e)&&this.model.schema.checkMerge(t,e);}},{key:"_tryAutoparagraphing",value:function _tryAutoparagraphing(t){var e=this.writer.createElement("paragraph");this._getAllowedIn(e,this.position.parent)&&this.schema.checkChild(e,t)&&(e._appendChild(t),this._handleNode(e));}},{key:"_checkAndAutoParagraphToAllowedPosition",value:function _checkAndAutoParagraphToAllowedPosition(t){if(this.schema.checkChild(this.position.parent,t))return!0;if(!this.schema.checkChild(this.position.parent,"paragraph")||!this.schema.checkChild("paragraph",t))return!1;this._insertPartialFragment();var e=this.writer.createElement("paragraph");return this.writer.insert(e,this.position),this._setAffectedBoundaries(this.position),this._lastAutoParagraph=e,this.position=this.writer.createPositionAt(e,0),!0;}},{key:"_checkAndSplitToAllowedPosition",value:function _checkAndSplitToAllowedPosition(t){var e=this._getAllowedIn(t,this.position.parent);if(!e)return!1;for(e!=this.position.parent&&this._insertPartialFragment();e!=this.position.parent;){if(this.schema.isLimit(this.position.parent))return!1;if(this.position.isAtStart){var _t189=this.position.parent;this.position=this.writer.createPositionBefore(_t189),_t189.isEmpty&&_t189.parent===e&&this.writer.remove(_t189);}else if(this.position.isAtEnd)this.position=this.writer.createPositionAfter(this.position.parent);else{var _t190=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position),this.writer.split(this.position),this.position=_t190,this.canMergeWith.add(this.position.nodeAfter);}}return!0;}},{key:"_getAllowedIn",value:function _getAllowedIn(t,e){return this.schema.checkChild(e,t)?e:e.parent?this._getAllowedIn(t,e.parent):null;}}]);return Pc;}();function Mc(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(e.isCollapsed)return;var n=e.getFirstRange();if("$graveyard"==n.root.rootName)return;var o=t.schema;t.change(function(t){if(!i.doNotResetEntireContent&&function(t,e){var i=t.getLimitElement(e);if(!e.containsEntireContent(i))return!1;var n=e.getFirstRange();if(n.start.parent==n.end.parent)return!1;return t.checkChild(i,"paragraph");}(o,e))return void function(t,e){var i=t.model.schema.getLimitElement(e);t.remove(t.createRangeIn(i)),Nc(t,t.createPositionAt(i,0),e);}(t,e);var _ref19=function(t){var e=t.root.document.model,i=t.start;var n=t.end;if(e.hasContent(t,{ignoreMarkers:!0})){var _i194=function(t){var e=t.parent,i=e.root.document.model.schema,n=e.getAncestors({parentFirst:!0,includeSelf:!0});var _iterator259=_createForOfIteratorHelper(n),_step259;try{for(_iterator259.s();!(_step259=_iterator259.n()).done;){var _t191=_step259.value;if(i.isLimit(_t191))return null;if(i.isBlock(_t191))return _t191;}}catch(err){_iterator259.e(err);}finally{_iterator259.f();}}(n);if(_i194&&n.isTouching(e.createPositionAt(_i194,0))){var _i195=e.createSelection(t);e.modifySelection(_i195,{direction:"backward"}),n=_i195.getLastPosition();}}return[Cc.fromPosition(i,"toPrevious"),Cc.fromPosition(n,"toNext")];}(n),_ref20=_slicedToArray(_ref19,2),r=_ref20[0],s=_ref20[1];r.isTouching(s)||t.remove(t.createRange(r,s)),i.leaveUnmerged||(!function(t,e,i){var n=t.model;if(!Ic(t.model.schema,e,i))return;var _ref21=function(t,e){var i=t.getAncestors(),n=e.getAncestors();var o=0;for(;i[o]&&i[o]==n[o];){o++;}return[i[o],n[o]];}(e,i),_ref22=_slicedToArray(_ref21,2),o=_ref22[0],r=_ref22[1];if(!o||!r)return;!n.hasContent(o,{ignoreMarkers:!0})&&n.hasContent(r,{ignoreMarkers:!0})?function t(e,i,n,o){var r=i.parent,s=n.parent;if(r==o||s==o)return;i=e.createPositionAfter(r),(n=e.createPositionBefore(s)).isEqual(i)||e.insert(r,n);for(;i.parent.isEmpty;){var _t192=i.parent;i=e.createPositionBefore(_t192),e.remove(_t192);}if(n=e.createPositionBefore(s),function(t,e){var i=e.nodeBefore,n=e.nodeAfter;i.name!=n.name&&t.rename(i,n.name);t.clearAttributes(i),t.setAttributes(Object.fromEntries(n.getAttributes()),i),t.merge(e);}(e,n),!Ic(e.model.schema,i,n))return;t(e,i,n,o);}(t,e,i,o.parent):function t(e,i,n,o){var r=i.parent,s=n.parent;if(r==o||s==o)return;i=e.createPositionAfter(r),(n=e.createPositionBefore(s)).isEqual(i)||e.insert(s,i);e.merge(i);for(;n.parent.isEmpty;){var _t193=n.parent;n=e.createPositionBefore(_t193),e.remove(_t193);}if(!Ic(e.model.schema,i,n))return;t(e,i,n,o);}(t,e,i,o.parent);}(t,r,s),o.removeDisallowedAttributes(r.parent.getChildren(),t)),Oc(t,e,r),!i.doNotAutoparagraph&&function(t,e){var i=t.checkChild(e,"$text"),n=t.checkChild(e,"paragraph");return!i&&n;}(o,r)&&Nc(t,r,e),r.detach(),s.detach();});}function Ic(t,e,i){var n=e.parent,o=i.parent;return n!=o&&!t.isLimit(n)&&!t.isLimit(o)&&function(t,e,i){var n=new Ns(t,e);var _iterator260=_createForOfIteratorHelper(n.getWalker()),_step260;try{for(_iterator260.s();!(_step260=_iterator260.n()).done;){var _t194=_step260.value;if(i.isLimit(_t194.item))return!1;}}catch(err){_iterator260.e(err);}finally{_iterator260.f();}return!0;}(e,i,t);}function Nc(t,e,i){var n=t.createElement("paragraph");t.insert(n,e),Oc(t,i,t.createPositionAt(n,0));}function Oc(t,e,i){e instanceof Gs?t.setSelection(i):e.setTo(i);}function Rc(t,e){var i=t.isForward,n=t.walker,o=t.unit,r=t.schema,s=e.type,a=e.item,c=e.nextPosition;if("text"==s)return"word"===t.unit?function(t,e){var i=t.position.textNode;if(i){var _n96=t.position.offset-i.startOffset;for(;!Lc(i.data,_n96,e)&&!zc(i,_n96,e);){t.next();var _o61=e?t.position.nodeAfter:t.position.nodeBefore;if(_o61&&_o61.is("$text")){var _n97=_o61.data.charAt(e?0:_o61.data.length-1);' ,.?!:;"-()'.includes(_n97)||(t.next(),i=t.position.textNode);}_n96=t.position.offset-i.startOffset;}}return t.position;}(n,i):function(t,e){var i=t.position.textNode;if(i){var _n98=i.data;var _o62=t.position.offset-i.startOffset;for(;wc(_n98,_o62)||"character"==e&&kc(_n98,_o62);){t.next(),_o62=t.position.offset-i.startOffset;}}return t.position;}(n,o);if(s==(i?"elementStart":"elementEnd")){if(r.isSelectable(a))return Es._createAt(a,i?"after":"before");if(r.checkChild(c,"$text"))return c;}else{if(r.isLimit(a))return void n.skip(function(){return!0;});if(r.checkChild(c,"$text"))return c;}}function Dc(t,e){var i=t.root,n=Es._createAt(i,e?"end":0);return e?new Ns(t,n):new Ns(n,t);}function Lc(t,e,i){var n=e+(i?0:-1);return' ,.?!:;"-()'.includes(t.charAt(n));}function zc(t,e,i){return e===(i?t.endOffset:0);}function Vc(t,e){var i=[];Array.from(t.getItems({direction:"backward"})).map(function(t){return e.createRangeOn(t);}).filter(function(e){return(e.start.isAfter(t.start)||e.start.isEqual(t.start))&&(e.end.isBefore(t.end)||e.end.isEqual(t.end));}).forEach(function(t){i.push(t.start.parent),e.remove(t);}),i.forEach(function(t){var i=t;for(;i.parent&&i.isEmpty;){var _t195=e.createRangeOn(i);i=i.parent,e.remove(_t195);}});}function jc(t){t.document.registerPostFixer(function(e){return function(t,e){var i=e.document.selection,n=e.schema,o=[];var r=!1;var _iterator261=_createForOfIteratorHelper(i.getRanges()),_step261;try{for(_iterator261.s();!(_step261=_iterator261.n()).done;){var _t197=_step261.value;var _e186=Bc(_t197,n);_e186&&!_e186.isEqual(_t197)?(o.push(_e186),r=!0):o.push(_t197);}}catch(err){_iterator261.e(err);}finally{_iterator261.f();}r&&t.setSelection(function(t){var e=[];e.push(t.shift());var _iterator262=_createForOfIteratorHelper(t),_step262;try{for(_iterator262.s();!(_step262=_iterator262.n()).done;){var _i196=_step262.value;var _t196=e.pop();if(_i196.isEqual(_t196))e.push(_t196);else if(_i196.isIntersecting(_t196)){var _n99=_t196.start.isAfter(_i196.start)?_i196.start:_t196.start,_o63=_t196.end.isAfter(_i196.end)?_t196.end:_i196.end,_r24=new Ns(_n99,_o63);e.push(_r24);}else e.push(_t196),e.push(_i196);}}catch(err){_iterator262.e(err);}finally{_iterator262.f();}return e;}(o),{backward:i.isBackward});}(e,t);});}function Bc(t,e){return t.isCollapsed?function(t,e){var i=t.start,n=e.getNearestSelectionRange(i);if(!n)return null;if(!n.isCollapsed)return n;var o=n.start;if(i.isEqual(o))return null;return new Ns(o);}(t,e):function(t,e){var i=t.start,n=t.end,o=e.checkChild(i,"$text"),r=e.checkChild(n,"$text"),s=e.getLimitElement(i),a=e.getLimitElement(n);if(s===a){if(o&&r)return null;if(function(t,e,i){var n=t.nodeAfter&&!i.isLimit(t.nodeAfter)||i.checkChild(t,"$text"),o=e.nodeBefore&&!i.isLimit(e.nodeBefore)||i.checkChild(e,"$text");return n||o;}(i,n,e)){var _t198=i.nodeAfter&&e.isSelectable(i.nodeAfter)?null:e.getNearestSelectionRange(i,"forward"),_o64=n.nodeBefore&&e.isSelectable(n.nodeBefore)?null:e.getNearestSelectionRange(n,"backward"),_r25=_t198?_t198.start:i,_s21=_o64?_o64.end:n;return new Ns(_r25,_s21);}}var c=s&&!s.is("rootElement"),l=a&&!a.is("rootElement");if(c||l){var _t199=i.nodeAfter&&n.nodeBefore&&i.nodeAfter.parent===n.nodeBefore.parent,_o65=c&&(!_t199||!Hc(i.nodeAfter,e)),_r26=l&&(!_t199||!Hc(n.nodeBefore,e));var _d2=i,_u2=n;return _o65&&(_d2=Es._createBefore(Fc(s,e))),_r26&&(_u2=Es._createAfter(Fc(a,e))),new Ns(_d2,_u2);}return null;}(t,e);}function Fc(t,e){var i=t,n=i;for(;e.isLimit(n)&&n.parent;){i=n,n=n.parent;}return i;}function Hc(t,e){return t&&e.isSelectable(t);}var Uc=/*#__PURE__*/function(){function Uc(){var _this68=this;_classCallCheck(this,Uc);this.markers=new yc(),this.document=new _c(this),this.schema=new _a(),this._pendingChanges=[],this._currentWriter=null,["insertContent","deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach(function(t){return _this68.decorate(t);}),this.on("applyOperation",function(t,e){e[0]._validate();},{priority:"highest"}),this.schema.register("$root",{isLimit:!0}),this.schema.register("$block",{allowIn:"$root",isBlock:!0}),this.schema.register("$text",{allowIn:"$block",isInline:!0,isContent:!0}),this.schema.register("$clipboardHolder",{allowContentOf:"$root",isLimit:!0}),this.schema.extend("$text",{allowIn:"$clipboardHolder"}),this.schema.register("$marker"),this.schema.addChildCheck(function(t,e){if("$marker"===e.name)return!0;}),jc(this),this.document.registerPostFixer(sa);}_createClass(Uc,[{key:"change",value:function change(t){try{return 0===this._pendingChanges.length?(this._pendingChanges.push({batch:new Ba(),callback:t}),this._runPendingChanges()[0]):t(this._currentWriter);}catch(t){ui.a.rethrowUnexpectedError(t,this);}}},{key:"enqueueChange",value:function enqueueChange(t,e){try{"string"==typeof t?t=new Ba(t):"function"==typeof t&&(e=t,t=new Ba()),this._pendingChanges.push({batch:t,callback:e}),1==this._pendingChanges.length&&this._runPendingChanges();}catch(t){ui.a.rethrowUnexpectedError(t,this);}}},{key:"applyOperation",value:function applyOperation(t){t._execute();}},{key:"insertContent",value:function insertContent(t,e,i){return function(t,e,i,n){return t.change(function(o){var r;r=i?i instanceof Bs||i instanceof Gs?i:o.createSelection(i,n):t.document.selection,r.isCollapsed||t.deleteContent(r,{doNotAutoparagraph:!0});var s=new Pc(t,o,r.anchor);var a;a=e.is("documentFragment")?e.getChildren():[e],s.handleNodes(a);var c=s.getSelectionRange();c&&(r instanceof Gs?o.setSelection(c):r.setTo(c));var l=s.getAffectedRange()||t.createRange(r.anchor);return s.destroy(),l;});}(this,t,e,i);}},{key:"deleteContent",value:function deleteContent(t,e){Mc(this,t,e);}},{key:"modifySelection",value:function modifySelection(t,e){!function(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var n=t.schema,o="backward"!=i.direction,r=i.unit?i.unit:"character",s=e.focus,a=new Cs({boundaries:Dc(s,o),singleCharacters:!0,direction:o?"forward":"backward"}),c={walker:a,schema:n,isForward:o,unit:r};var l;var _loop3=function _loop3(){if(l.done)return{v:void 0};var i=Rc(c,l.value);if(i)return{v:void(e instanceof Gs?t.change(function(t){t.setSelectionFocus(i);}):e.setFocus(i))};};for(;l=a.next();){var _ret2=_loop3();if(_typeof(_ret2)==="object")return _ret2.v;}}(this,t,e);}},{key:"getSelectedContent",value:function getSelectedContent(t){return function(t,e){return t.change(function(t){var i=t.createDocumentFragment(),n=e.getFirstRange();if(!n||n.isCollapsed)return i;var o=n.start.root,r=n.start.getCommonPath(n.end),s=o.getNodeByPath(r);var a;a=n.start.parent==n.end.parent?n:t.createRange(t.createPositionAt(s,n.start.path[r.length]),t.createPositionAt(s,n.end.path[r.length]+1));var c=a.end.offset-a.start.offset;var _iterator263=_createForOfIteratorHelper(a.getItems({shallow:!0})),_step263;try{for(_iterator263.s();!(_step263=_iterator263.n()).done;){var _e188=_step263.value;_e188.is("$textProxy")?t.appendText(_e188.data,_e188.getAttributes(),i):t.append(t.cloneElement(_e188,!0),i);}}catch(err){_iterator263.e(err);}finally{_iterator263.f();}if(a!=n){var _e187=n._getTransformedByMove(a.start,t.createPositionAt(i,0),c)[0],_o66=t.createRange(t.createPositionAt(i,0),_e187.start);Vc(t.createRange(_e187.end,t.createPositionAt(i,"end")),t),Vc(_o66,t);}return i;});}(this,t);}},{key:"hasContent",value:function hasContent(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=t instanceof Ts?Ns._createIn(t):t;if(i.isCollapsed)return!1;var _e$ignoreWhitespaces=e.ignoreWhitespaces,n=_e$ignoreWhitespaces===void 0?!1:_e$ignoreWhitespaces,_e$ignoreMarkers=e.ignoreMarkers,o=_e$ignoreMarkers===void 0?!1:_e$ignoreMarkers;if(!o){var _iterator264=_createForOfIteratorHelper(this.markers.getMarkersIntersectingRange(i)),_step264;try{for(_iterator264.s();!(_step264=_iterator264.n()).done;){var _t200=_step264.value;if(_t200.affectsData)return!0;}}catch(err){_iterator264.e(err);}finally{_iterator264.f();}}var _iterator265=_createForOfIteratorHelper(i.getItems()),_step265;try{for(_iterator265.s();!(_step265=_iterator265.n()).done;){var _t201=_step265.value;if(this.schema.isContent(_t201)){if(!_t201.is("$textProxy"))return!0;if(!n)return!0;if(-1!==_t201.data.search(/\S/))return!0;}}}catch(err){_iterator265.e(err);}finally{_iterator265.f();}return!1;}},{key:"createPositionFromPath",value:function createPositionFromPath(t,e,i){return new Es(t,e,i);}},{key:"createPositionAt",value:function createPositionAt(t,e){return Es._createAt(t,e);}},{key:"createPositionAfter",value:function createPositionAfter(t){return Es._createAfter(t);}},{key:"createPositionBefore",value:function createPositionBefore(t){return Es._createBefore(t);}},{key:"createRange",value:function createRange(t,e){return new Ns(t,e);}},{key:"createRangeIn",value:function createRangeIn(t){return Ns._createIn(t);}},{key:"createRangeOn",value:function createRangeOn(t){return Ns._createOn(t);}},{key:"createSelection",value:function createSelection(t,e,i){return new Bs(t,e,i);}},{key:"createBatch",value:function createBatch(t){return new Ba(t);}},{key:"createOperationFromJSON",value:function createOperationFromJSON(t){return/*#__PURE__*/function(){function _class(){_classCallCheck(this,_class);}_createClass(_class,null,[{key:"fromJSON",value:function fromJSON(t,e){return Tc[t.__className].fromJSON(t,e);}}]);return _class;}().fromJSON(t,this.document);}},{key:"destroy",value:function destroy(){this.document.destroy(),this.stopListening();}},{key:"_runPendingChanges",value:function _runPendingChanges(){var t=[];for(this.fire("_beforeChanges");this._pendingChanges.length;){var _e189=this._pendingChanges[0].batch;this._currentWriter=new ac(this,_e189);var _i197=this._pendingChanges[0].callback(this._currentWriter);t.push(_i197),this.document._handleChangeBlock(this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null;}return this.fire("_afterChanges"),t;}}]);return Uc;}();yi(Uc,Un);var Wc=/*#__PURE__*/function(){function Wc(){_classCallCheck(this,Wc);this._listener=Object.create(mr);}_createClass(Wc,[{key:"listenTo",value:function listenTo(t){var _this69=this;this._listener.listenTo(t,"keydown",function(t,e){_this69._listener.fire("_keydown:"+wo(e),e);});}},{key:"set",value:function set(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var n=ko(t),o=i.priority;this._listener.listenTo(this._listener,"_keydown:"+n,function(t,i){e(i,function(){i.preventDefault(),i.stopPropagation(),t.stop();}),t["return"]=!0;},{priority:o});}},{key:"press",value:function press(t){return!!this._listener.fire("_keydown:"+wo(t),t);}},{key:"destroy",value:function destroy(){this._listener.stopListening();}}]);return Wc;}();var qc=/*#__PURE__*/function(_Wc){_inherits(qc,_Wc);var _super37=_createSuper(qc);function qc(t){var _this70;_classCallCheck(this,qc);_this70=_super37.call(this),_this70.editor=t;return _this70;}_createClass(qc,[{key:"set",value:function set(t,e){var _this71=this;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if("string"==typeof e){var _t202=e;e=function e(_e190,i){_this71.editor.execute(_t202),i();};}_get(_getPrototypeOf(qc.prototype),"set",this).call(this,t,e,i);}}]);return qc;}(Wc);var $c=/*#__PURE__*/function(){function $c(){var _this72=this;var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,$c);this._context=t.context||new Mi({language:t.language}),this._context._addEditor(this,!t.context);var e=Array.from(this.constructor.builtinPlugins||[]);this.config=new ni(t,this.constructor.defaultConfig),this.config.define("plugins",e),this.config.define(this._context._getEditorConfig()),this.plugins=new Ai(this,e,this._context.plugins),this.locale=this._context.locale,this.t=this.locale.t,this.commands=new ba(),this.set("state","initializing"),this.once("ready",function(){return _this72.state="ready";},{priority:"high"}),this.once("destroy",function(){return _this72.state="destroyed";},{priority:"high"}),this.set("isReadOnly",!1),this.model=new Uc();var i=new In();this.data=new La(this.model,i),this.editing=new pa(this.model,i),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new za([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new qc(this),this.keystrokes.listenTo(this.editing.view.document);}_createClass($c,[{key:"initPlugins",value:function initPlugins(){var t=this.config,e=t.get("plugins"),i=t.get("removePlugins")||[],n=t.get("extraPlugins")||[];return this.plugins.init(e.concat(n),i);}},{key:"destroy",value:function destroy(){var _this73=this;var t=Promise.resolve();return"initializing"==this.state&&(t=new Promise(function(t){return _this73.once("ready",t);})),t.then(function(){_this73.fire("destroy"),_this73.stopListening(),_this73.commands.destroy();}).then(function(){return _this73.plugins.destroy();}).then(function(){_this73.model.destroy(),_this73.data.destroy(),_this73.editing.destroy(),_this73.keystrokes.destroy();}).then(function(){return _this73._context._removeEditor(_this73);});}},{key:"execute",value:function execute(){try{var _this$commands;return(_this$commands=this.commands).execute.apply(_this$commands,arguments);}catch(t){ui.a.rethrowUnexpectedError(t,this);}}},{key:"focus",value:function focus(){this.editing.view.focus();}}]);return $c;}();yi($c,Un);var Yc={setData:function setData(t){this.data.set(t);},getData:function getData(t){return this.data.get(t);}};var Gc={updateSourceElement:function updateSourceElement(){if(!this.sourceElement)throw new ui.a("editor-missing-sourceelement",this);var t,e;t=this.sourceElement,e=this.data.get(),t instanceof HTMLTextAreaElement&&(t.value=e),t.innerHTML=e;}};var Kc=/*#__PURE__*/function(){function Kc(t){_classCallCheck(this,Kc);this.editor=t,this._components=new Map();}_createClass(Kc,[{key:"names",value:/*#__PURE__*/regeneratorRuntime.mark(function names(){var _iterator266,_step266,_t203;return regeneratorRuntime.wrap(function names$(_context34){while(1){switch(_context34.prev=_context34.next){case 0:_iterator266=_createForOfIteratorHelper(this._components.values());_context34.prev=1;_iterator266.s();case 3:if((_step266=_iterator266.n()).done){_context34.next=9;break;}_t203=_step266.value;_context34.next=7;return _t203.originalName;case 7:_context34.next=3;break;case 9:_context34.next=14;break;case 11:_context34.prev=11;_context34.t0=_context34["catch"](1);_iterator266.e(_context34.t0);case 14:_context34.prev=14;_iterator266.f();return _context34.finish(14);case 17:case"end":return _context34.stop();}}},names,this,[[1,11,14,17]]);})},{key:"add",value:function add(t,e){this._components.set(Qc(t),{callback:e,originalName:t});}},{key:"create",value:function create(t){if(!this.has(t))throw new ui.a("componentfactory-item-missing",this,{name:t});return this._components.get(Qc(t)).callback(this.editor.locale);}},{key:"has",value:function has(t){return this._components.has(Qc(t));}}]);return Kc;}();function Qc(t){return String(t).toLowerCase();}var Jc=/*#__PURE__*/function(){function Jc(){_classCallCheck(this,Jc);this.set("isFocused",!1),this.set("focusedElement",null),this._elements=new Set(),this._nextEventLoopTimeout=null;}_createClass(Jc,[{key:"add",value:function add(t){var _this74=this;if(this._elements.has(t))throw new ui.a("focustracker-add-element-already-exist",this);this.listenTo(t,"focus",function(){return _this74._focus(t);},{useCapture:!0}),this.listenTo(t,"blur",function(){return _this74._blur();},{useCapture:!0}),this._elements.add(t);}},{key:"remove",value:function remove(t){t===this.focusedElement&&this._blur(t),this._elements.has(t)&&(this.stopListening(t),this._elements["delete"](t));}},{key:"destroy",value:function destroy(){this.stopListening();}},{key:"_focus",value:function _focus(t){clearTimeout(this._nextEventLoopTimeout),this.focusedElement=t,this.isFocused=!0;}},{key:"_blur",value:function _blur(){var _this75=this;clearTimeout(this._nextEventLoopTimeout),this._nextEventLoopTimeout=setTimeout(function(){_this75.focusedElement=null,_this75.isFocused=!1;},0);}}]);return Jc;}();yi(Jc,mr),yi(Jc,Un);var Zc=/*#__PURE__*/function(){function Zc(t){var _this76=this;_classCallCheck(this,Zc);this.editor=t,this.componentFactory=new Kc(t),this.focusTracker=new Jc(),this._editableElementsMap=new Map(),this.listenTo(t.editing.view.document,"layoutChanged",function(){return _this76.update();});}_createClass(Zc,[{key:"element",get:function get(){return null;}},{key:"update",value:function update(){this.fire("update");}},{key:"destroy",value:function destroy(){this.stopListening(),this.focusTracker.destroy();var _iterator267=_createForOfIteratorHelper(this._editableElementsMap.values()),_step267;try{for(_iterator267.s();!(_step267=_iterator267.n()).done;){var _t204=_step267.value;_t204.ckeditorInstance=null;}}catch(err){_iterator267.e(err);}finally{_iterator267.f();}this._editableElementsMap=new Map();}},{key:"setEditableElement",value:function setEditableElement(t,e){this._editableElementsMap.set(t,e),e.ckeditorInstance||(e.ckeditorInstance=this.editor);}},{key:"getEditableElement",value:function getEditableElement(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"main";return this._editableElementsMap.get(t);}},{key:"getEditableElementsNames",value:function getEditableElementsNames(){return this._editableElementsMap.keys();}},{key:"_editableElements",get:function get(){return console.warn("editor-ui-deprecated-editable-elements: The EditorUI#_editableElements property has been deprecated and will be removed in the near future.",{editorUI:this}),this._editableElementsMap;}}]);return Zc;}();function Xc(t){return Array.isArray(t)?{items:t,removeItems:[]}:t?Object.assign({items:[],removeItems:[]},t):{items:[],removeItems:[]};}yi(Zc,mi);i(15);var tl=new WeakMap();function el(t){var e=t.view,i=t.element,n=t.text,_t$isDirectHost=t.isDirectHost,o=_t$isDirectHost===void 0?!0:_t$isDirectHost,_t$keepOnFocus=t.keepOnFocus,r=_t$keepOnFocus===void 0?!1:_t$keepOnFocus,s=e.document;tl.has(s)||(tl.set(s,new Map()),s.registerPostFixer(function(t){return nl(s,t);})),tl.get(s).set(i,{text:n,isDirectHost:o,keepOnFocus:r,hostElement:o?i:null}),e.change(function(t){return nl(s,t);});}function il(t,e){return!!e.hasClass("ck-placeholder")&&(t.removeClass("ck-placeholder",e),!0);}function nl(t,e){var i=tl.get(t),n=[];var o=!1;var _iterator268=_createForOfIteratorHelper(i),_step268;try{for(_iterator268.s();!(_step268=_iterator268.n()).done;){var _step268$value=_slicedToArray(_step268.value,2),_t205=_step268$value[0],_r27=_step268$value[1];_r27.isDirectHost&&(n.push(_t205),ol(e,_t205,_r27)&&(o=!0));}}catch(err){_iterator268.e(err);}finally{_iterator268.f();}var _iterator269=_createForOfIteratorHelper(i),_step269;try{for(_iterator269.s();!(_step269=_iterator269.n()).done;){var _step269$value=_slicedToArray(_step269.value,2),_t206=_step269$value[0],_r28=_step269$value[1];if(_r28.isDirectHost)continue;var _i198=rl(_t206);_i198&&(n.includes(_i198)||(_r28.hostElement=_i198,ol(e,_t206,_r28)&&(o=!0)));}}catch(err){_iterator269.e(err);}finally{_iterator269.f();}return o;}function ol(t,e,i){var n=i.text,o=i.isDirectHost,r=i.hostElement;var s=!1;r.getAttribute("data-placeholder")!==n&&(t.setAttribute("data-placeholder",n,r),s=!0);return(o||1==e.childCount)&&function(t,e){if(!t.isAttached())return!1;if(Array.from(t.getChildren()).some(function(t){return!t.is("uiElement");}))return!1;if(e)return!0;var i=t.document;if(!i.isFocused)return!0;var n=i.selection.anchor;return n&&n.parent!==t;}(r,i.keepOnFocus)?function(t,e){return!e.hasClass("ck-placeholder")&&(t.addClass("ck-placeholder",e),!0);}(t,r)&&(s=!0):il(t,r)&&(s=!0),s;}function rl(t){if(t.childCount){var _e191=t.getChild(0);if(_e191.is("element")&&!_e191.is("uiElement"))return _e191;}return null;}var sl=/*#__PURE__*/function(){function sl(){_classCallCheck(this,sl);this._replacedElements=[];}_createClass(sl,[{key:"replace",value:function replace(t,e){this._replacedElements.push({element:t,newElement:e}),t.style.display="none",e&&t.parentNode.insertBefore(e,t.nextSibling);}},{key:"restore",value:function restore(){this._replacedElements.forEach(function(_ref23){var t=_ref23.element,e=_ref23.newElement;t.style.display="",e&&e.remove();}),this._replacedElements=[];}}]);return sl;}();var al=/*#__PURE__*/function(_Zc){_inherits(al,_Zc);var _super38=_createSuper(al);function al(t,e){var _this77;_classCallCheck(this,al);_this77=_super38.call(this,t),_this77.view=e,_this77._toolbarConfig=Xc(t.config.get("toolbar")),_this77._elementReplacer=new sl();return _this77;}_createClass(al,[{key:"element",get:function get(){return this.view.element;}},{key:"init",value:function init(t){var e=this.editor,i=this.view,n=e.editing.view,o=i.editable,r=n.document.getRoot();o.name=r.rootName,i.render();var s=o.element;this.setEditableElement(o.name,s),this.focusTracker.add(s),i.editable.bind("isFocused").to(this.focusTracker),n.attachDomRoot(s),t&&this._elementReplacer.replace(t,this.element),this._initPlaceholder(),this._initToolbar(),this.fire("ready");}},{key:"destroy",value:function destroy(){var t=this.view,e=this.editor.editing.view;this._elementReplacer.restore(),e.detachDomRoot(t.editable.name),t.destroy(),_get(_getPrototypeOf(al.prototype),"destroy",this).call(this);}},{key:"_initToolbar",value:function _initToolbar(){var t=this.editor,e=this.view,i=t.editing.view;e.stickyPanel.bind("isActive").to(this.focusTracker,"isFocused"),e.stickyPanel.limiterElement=e.element,this._toolbarConfig.viewportTopOffset&&(e.stickyPanel.viewportTopOffset=this._toolbarConfig.viewportTopOffset),e.toolbar.fillFromConfig(this._toolbarConfig,this.componentFactory),function(_ref24){var t=_ref24.origin,e=_ref24.originKeystrokeHandler,i=_ref24.originFocusTracker,n=_ref24.toolbar,o=_ref24.beforeFocus,r=_ref24.afterBlur;i.add(n.element),e.set("Alt+F10",function(t,e){i.isFocused&&!n.focusTracker.isFocused&&(o&&o(),n.focus(),e());}),n.keystrokes.set("Esc",function(e,i){n.focusTracker.isFocused&&(t.focus(),r&&r(),i());});}({origin:i,originFocusTracker:this.focusTracker,originKeystrokeHandler:t.keystrokes,toolbar:e.toolbar});}},{key:"_initPlaceholder",value:function _initPlaceholder(){var t=this.editor,e=t.editing.view,i=e.document.getRoot(),n=t.sourceElement,o=t.config.get("placeholder")||n&&"textarea"===n.tagName.toLowerCase()&&n.getAttribute("placeholder");o&&el({view:e,element:i,text:o,isDirectHost:!1});}}]);return al;}(Zc);var cl=/*#__PURE__*/function(_xi){_inherits(cl,_xi);var _super39=_createSuper(cl);function cl(){var _this78;var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];_classCallCheck(this,cl);_this78=_super39.call(this,t,{idProperty:"viewUid"}),_this78.on("add",function(t,e,i){_this78._renderViewIntoCollectionParent(e,i);}),_this78.on("remove",function(t,e){e.element&&_this78._parentElement&&e.element.remove();}),_this78._parentElement=null;return _this78;}_createClass(cl,[{key:"destroy",value:function destroy(){this.map(function(t){return t.destroy();});}},{key:"setParent",value:function setParent(t){this._parentElement=t;var _iterator270=_createForOfIteratorHelper(this),_step270;try{for(_iterator270.s();!(_step270=_iterator270.n()).done;){var _t207=_step270.value;this._renderViewIntoCollectionParent(_t207);}}catch(err){_iterator270.e(err);}finally{_iterator270.f();}}},{key:"delegate",value:function delegate(){var _this79=this;for(var _len17=arguments.length,t=new Array(_len17),_key17=0;_key17<_len17;_key17++){t[_key17]=arguments[_key17];}if(!t.length||!t.every(function(t){return"string"==typeof t;}))throw new ui.a("ui-viewcollection-delegate-wrong-events",this);return{to:function to(e){var _iterator271=_createForOfIteratorHelper(_this79),_step271;try{for(_iterator271.s();!(_step271=_iterator271.n()).done;){var _i201=_step271.value;var _iterator274=_createForOfIteratorHelper(t),_step274;try{for(_iterator274.s();!(_step274=_iterator274.n()).done;){var _n100=_step274.value;_i201.delegate(_n100).to(e);}}catch(err){_iterator274.e(err);}finally{_iterator274.f();}}}catch(err){_iterator271.e(err);}finally{_iterator271.f();}_this79.on("add",function(i,n){var _iterator272=_createForOfIteratorHelper(t),_step272;try{for(_iterator272.s();!(_step272=_iterator272.n()).done;){var _i199=_step272.value;n.delegate(_i199).to(e);}}catch(err){_iterator272.e(err);}finally{_iterator272.f();}}),_this79.on("remove",function(i,n){var _iterator273=_createForOfIteratorHelper(t),_step273;try{for(_iterator273.s();!(_step273=_iterator273.n()).done;){var _i200=_step273.value;n.stopDelegating(_i200,e);}}catch(err){_iterator273.e(err);}finally{_iterator273.f();}});}};}},{key:"_renderViewIntoCollectionParent",value:function _renderViewIntoCollectionParent(t,e){t.isRendered||t.render(),t.element&&this._parentElement&&this._parentElement.insertBefore(t.element,this._parentElement.children[e]);}}]);return cl;}(xi);var ll=/*#__PURE__*/function(){function ll(t){_classCallCheck(this,ll);Object.assign(this,kl(wl(t))),this._isRendered=!1,this._revertData=null;}_createClass(ll,[{key:"render",value:function render(){var t=this._renderNode({intoFragment:!0});return this._isRendered=!0,t;}},{key:"apply",value:function apply(t){return this._revertData={children:[],bindings:[],attributes:{}},this._renderNode({node:t,isApplying:!0,revertData:this._revertData}),t;}},{key:"revert",value:function revert(t){if(!this._revertData)throw new ui.a("ui-template-revert-not-applied",[this,t]);this._revertTemplateFromNode(t,this._revertData);}},{key:"getViews",value:/*#__PURE__*/regeneratorRuntime.mark(function getViews(){return regeneratorRuntime.wrap(function getViews$(_context36){while(1){switch(_context36.prev=_context36.next){case 0:return _context36.delegateYield(/*#__PURE__*/regeneratorRuntime.mark(function t(e){var _iterator275,_step275,_i202;return regeneratorRuntime.wrap(function t$(_context35){while(1){switch(_context35.prev=_context35.next){case 0:if(!e.children){_context35.next=24;break;}_iterator275=_createForOfIteratorHelper(e.children);_context35.prev=2;_iterator275.s();case 4:if((_step275=_iterator275.n()).done){_context35.next=16;break;}_i202=_step275.value;if(!Al(_i202)){_context35.next=11;break;}_context35.next=9;return _i202;case 9:_context35.next=14;break;case 11:_context35.t0=Tl(_i202);if(!_context35.t0){_context35.next=14;break;}return _context35.delegateYield(t(_i202),"t1",14);case 14:_context35.next=4;break;case 16:_context35.next=21;break;case 18:_context35.prev=18;_context35.t2=_context35["catch"](2);_iterator275.e(_context35.t2);case 21:_context35.prev=21;_iterator275.f();return _context35.finish(21);case 24:case"end":return _context35.stop();}}},t,null,[[2,18,21,24]]);})(this),"t0",1);case 1:case"end":return _context36.stop();}}},getViews,this);})},{key:"_renderNode",value:function _renderNode(t){var e;if(e=t.node?this.tag&&this.text:this.tag?this.text:!this.text,e)throw new ui.a("ui-template-wrong-syntax",this);return this.text?this._renderText(t):this._renderElement(t);}},{key:"_renderElement",value:function _renderElement(t){var e=t.node;return e||(e=t.node=document.createElementNS(this.ns||"http://www.w3.org/1999/xhtml",this.tag)),this._renderAttributes(t),this._renderElementChildren(t),this._setUpListeners(t),e;}},{key:"_renderText",value:function _renderText(t){var e=t.node;return e?t.revertData.text=e.textContent:e=t.node=document.createTextNode(""),fl(this.text)?this._bindToObservable({schema:this.text,updater:gl(e),data:t}):e.textContent=this.text.join(""),e;}},{key:"_renderAttributes",value:function _renderAttributes(t){var e,i,n,o;if(!this.attributes)return;var r=t.node,s=t.revertData;for(e in this.attributes){if(n=r.getAttribute(e),i=this.attributes[e],s&&(s.attributes[e]=n),o=z(i[0])&&i[0].ns?i[0].ns:null,fl(i)){var _a12=o?i[0].value:i;s&&Sl(e)&&_a12.unshift(n),this._bindToObservable({schema:_a12,updater:pl(r,e,o),data:t});}else"style"==e&&"string"!=typeof i[0]?this._renderStyleAttribute(i[0],t):(s&&n&&Sl(e)&&i.unshift(n),i=i.map(function(t){return t&&t.value||t;}).reduce(function(t,e){return t.concat(e);},[]).reduce(vl,""),xl(i)||r.setAttributeNS(o,e,i));}}},{key:"_renderStyleAttribute",value:function _renderStyleAttribute(t,e){var i=e.node;for(var _n101 in t){var _o67=t[_n101];fl(_o67)?this._bindToObservable({schema:[_o67],updater:bl(i,_n101),data:e}):i.style[_n101]=_o67;}}},{key:"_renderElementChildren",value:function _renderElementChildren(t){var e=t.node,i=t.intoFragment?document.createDocumentFragment():e,n=t.isApplying;var o=0;var _iterator276=_createForOfIteratorHelper(this.children),_step276;try{for(_iterator276.s();!(_step276=_iterator276.n()).done;){var _r29=_step276.value;if(Cl(_r29)){if(!n){_r29.setParent(e);var _iterator277=_createForOfIteratorHelper(_r29),_step277;try{for(_iterator277.s();!(_step277=_iterator277.n()).done;){var _t208=_step277.value;i.appendChild(_t208.element);}}catch(err){_iterator277.e(err);}finally{_iterator277.f();}}}else if(Al(_r29))n||(_r29.isRendered||_r29.render(),i.appendChild(_r29.element));else if(tr(_r29))i.appendChild(_r29);else if(n){var _e192={children:[],bindings:[],attributes:{}};t.revertData.children.push(_e192),_r29._renderNode({node:i.childNodes[o++],isApplying:!0,revertData:_e192});}else i.appendChild(_r29.render());}}catch(err){_iterator276.e(err);}finally{_iterator276.f();}t.intoFragment&&e.appendChild(i);}},{key:"_setUpListeners",value:function _setUpListeners(t){var _this80=this;if(this.eventListeners){var _loop4=function _loop4(_e193){var i=_this80.eventListeners[_e193].map(function(i){var _e193$split=_e193.split("@"),_e193$split2=_slicedToArray(_e193$split,2),n=_e193$split2[0],o=_e193$split2[1];return i.activateDomEventListener(n,o,t);});t.revertData&&t.revertData.bindings.push(i);};for(var _e193 in this.eventListeners){_loop4(_e193);}}}},{key:"_bindToObservable",value:function _bindToObservable(_ref25){var t=_ref25.schema,e=_ref25.updater,i=_ref25.data;var n=i.revertData;ml(t,e,i);var o=t.filter(function(t){return!xl(t);}).filter(function(t){return t.observable;}).map(function(n){return n.activateAttributeListener(t,e,i);});n&&n.bindings.push(o);}},{key:"_revertTemplateFromNode",value:function _revertTemplateFromNode(t,e){var _iterator278=_createForOfIteratorHelper(e.bindings),_step278;try{for(_iterator278.s();!(_step278=_iterator278.n()).done;){var _t209=_step278.value;var _iterator279=_createForOfIteratorHelper(_t209),_step279;try{for(_iterator279.s();!(_step279=_iterator279.n()).done;){var _e194=_step279.value;_e194();}}catch(err){_iterator279.e(err);}finally{_iterator279.f();}}}catch(err){_iterator278.e(err);}finally{_iterator278.f();}if(e.text)t.textContent=e.text;else{for(var _i203 in e.attributes){var _n102=e.attributes[_i203];null===_n102?t.removeAttribute(_i203):t.setAttribute(_i203,_n102);}for(var _i204=0;_i204<e.children.length;++_i204){this._revertTemplateFromNode(t.childNodes[_i204],e.children[_i204]);}}}}],[{key:"bind",value:function bind(t,e){return{to:function to(i,n){return new ul({eventNameOrFunction:i,attribute:i,observable:t,emitter:e,callback:n});},"if":function _if(i,n,o){return new hl({observable:t,emitter:e,attribute:i,valueIfTrue:n,callback:o});}};}},{key:"extend",value:function extend(t,e){if(t._isRendered)throw new ui.a("template-extend-render",[this,t]);!function t(e,i){var _e$text;i.attributes&&(e.attributes||(e.attributes={}),yl(e.attributes,i.attributes));i.eventListeners&&(e.eventListeners||(e.eventListeners={}),yl(e.eventListeners,i.eventListeners));i.text&&(_e$text=e.text).push.apply(_e$text,_toConsumableArray(i.text));if(i.children&&i.children.length){if(e.children.length!=i.children.length)throw new ui.a("ui-template-extend-children-mismatch",e);var _n103=0;var _iterator280=_createForOfIteratorHelper(i.children),_step280;try{for(_iterator280.s();!(_step280=_iterator280.n()).done;){var _o68=_step280.value;t(e.children[_n103++],_o68);}}catch(err){_iterator280.e(err);}finally{_iterator280.f();}}}(t,kl(wl(e)));}}]);return ll;}();yi(ll,mi);var dl=/*#__PURE__*/function(){function dl(t){_classCallCheck(this,dl);Object.assign(this,t);}_createClass(dl,[{key:"getValue",value:function getValue(t){var e=this.observable[this.attribute];return this.callback?this.callback(e,t):e;}},{key:"activateAttributeListener",value:function activateAttributeListener(t,e,i){var _this81=this;var n=function n(){return ml(t,e,i);};return this.emitter.listenTo(this.observable,"change:"+this.attribute,n),function(){_this81.emitter.stopListening(_this81.observable,"change:"+_this81.attribute,n);};}}]);return dl;}();var ul=/*#__PURE__*/function(_dl){_inherits(ul,_dl);var _super40=_createSuper(ul);function ul(){_classCallCheck(this,ul);return _super40.apply(this,arguments);}_createClass(ul,[{key:"activateDomEventListener",value:function activateDomEventListener(t,e,i){var _this82=this;var n=function n(t,i){e&&!i.target.matches(e)||("function"==typeof _this82.eventNameOrFunction?_this82.eventNameOrFunction(i):_this82.observable.fire(_this82.eventNameOrFunction,i));};return this.emitter.listenTo(i.node,t,n),function(){_this82.emitter.stopListening(i.node,t,n);};}}]);return ul;}(dl);var hl=/*#__PURE__*/function(_dl2){_inherits(hl,_dl2);var _super41=_createSuper(hl);function hl(){_classCallCheck(this,hl);return _super41.apply(this,arguments);}_createClass(hl,[{key:"getValue",value:function getValue(t){return!xl(_get(_getPrototypeOf(hl.prototype),"getValue",this).call(this,t))&&(this.valueIfTrue||!0);}}]);return hl;}(dl);function fl(t){return!!t&&(t.value&&(t=t.value),Array.isArray(t)?t.some(fl):t instanceof dl);}function ml(t,e,_ref26){var i=_ref26.node;var n=function(t,e){return t.map(function(t){return t instanceof dl?t.getValue(e):t;});}(t,i);n=1==t.length&&t[0]instanceof hl?n[0]:n.reduce(vl,""),xl(n)?e.remove():e.set(n);}function gl(t){return{set:function set(e){t.textContent=e;},remove:function remove(){t.textContent="";}};}function pl(t,e,i){return{set:function set(n){t.setAttributeNS(i,e,n);},remove:function remove(){t.removeAttributeNS(i,e);}};}function bl(t,e){return{set:function set(i){t.style[e]=i;},remove:function remove(){t.style[e]=null;}};}function wl(t){return ei(t,function(t){if(t&&(t instanceof dl||Tl(t)||Al(t)||Cl(t)))return t;});}function kl(t){if("string"==typeof t?t=function(t){return{text:[t]};}(t):t.text&&function(t){t.text=Ti(t.text);}(t),t.on&&(t.eventListeners=function(t){for(var _e195 in t){_l(t,_e195);}return t;}(t.on),delete t.on),!t.text){t.attributes&&function(t){for(var _e197 in t){t[_e197].value&&(t[_e197].value=Ti(t[_e197].value)),_l(t,_e197);}}(t.attributes);var _e196=[];if(t.children)if(Cl(t.children))_e196.push(t.children);else{var _iterator281=_createForOfIteratorHelper(t.children),_step281;try{for(_iterator281.s();!(_step281=_iterator281.n()).done;){var _i205=_step281.value;Tl(_i205)||Al(_i205)||tr(_i205)?_e196.push(_i205):_e196.push(new ll(_i205));}}catch(err){_iterator281.e(err);}finally{_iterator281.f();}}t.children=_e196;}return t;}function _l(t,e){t[e]=Ti(t[e]);}function vl(t,e){return xl(e)?t:xl(t)?e:"".concat(t," ").concat(e);}function yl(t,e){for(var _i206 in e){var _t$_i;t[_i206]?(_t$_i=t[_i206]).push.apply(_t$_i,_toConsumableArray(e[_i206])):t[_i206]=e[_i206];}}function xl(t){return!t&&0!==t;}function Al(t){return t instanceof El;}function Tl(t){return t instanceof ll;}function Cl(t){return t instanceof cl;}function Sl(t){return"class"==t||"style"==t;}i(17);var El=/*#__PURE__*/function(){function El(t){_classCallCheck(this,El);this.element=null,this.isRendered=!1,this.locale=t,this.t=t&&t.t,this._viewCollections=new xi(),this._unboundChildren=this.createCollection(),this._viewCollections.on("add",function(e,i){i.locale=t;}),this.decorate("render");}_createClass(El,[{key:"bindTemplate",get:function get(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=ll.bind(this,this);}},{key:"createCollection",value:function createCollection(t){var e=new cl(t);return this._viewCollections.add(e),e;}},{key:"registerChild",value:function registerChild(t){vi(t)||(t=[t]);var _iterator282=_createForOfIteratorHelper(t),_step282;try{for(_iterator282.s();!(_step282=_iterator282.n()).done;){var _e198=_step282.value;this._unboundChildren.add(_e198);}}catch(err){_iterator282.e(err);}finally{_iterator282.f();}}},{key:"deregisterChild",value:function deregisterChild(t){vi(t)||(t=[t]);var _iterator283=_createForOfIteratorHelper(t),_step283;try{for(_iterator283.s();!(_step283=_iterator283.n()).done;){var _e199=_step283.value;this._unboundChildren.remove(_e199);}}catch(err){_iterator283.e(err);}finally{_iterator283.f();}}},{key:"setTemplate",value:function setTemplate(t){this.template=new ll(t);}},{key:"extendTemplate",value:function extendTemplate(t){ll.extend(this.template,t);}},{key:"render",value:function render(){if(this.isRendered)throw new ui.a("ui-view-render-already-rendered",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0;}},{key:"destroy",value:function destroy(){this.stopListening(),this._viewCollections.map(function(t){return t.destroy();}),this.template&&this.template._revertData&&this.template.revert(this.element);}}]);return El;}();yi(El,mr),yi(El,Un);var Pl=function Pl(t){return"string"==typeof t||!Dt(t)&&p(t)&&"[object String]"==f(t);};var Ml=/*#__PURE__*/function(_cl){_inherits(Ml,_cl);var _super42=_createSuper(Ml);function Ml(t){var _this83;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];_classCallCheck(this,Ml);_this83=_super42.call(this,e),_this83.locale=t;return _this83;}_createClass(Ml,[{key:"attachToDom",value:function attachToDom(){this._bodyCollectionContainer=new ll({tag:"div",attributes:{"class":["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection},children:this}).render();var t=document.querySelector(".ck-body-wrapper");t||(t=function(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:[];var o=i&&i.xmlns,r=o?t.createElementNS(o,e):t.createElement(e);for(var _t210 in i){r.setAttribute(_t210,i[_t210]);}!Pl(n)&&vi(n)||(n=[n]);var _iterator284=_createForOfIteratorHelper(n),_step284;try{for(_iterator284.s();!(_step284=_iterator284.n()).done;){var _e200=_step284.value;Pl(_e200)&&(_e200=t.createTextNode(_e200)),r.appendChild(_e200);}}catch(err){_iterator284.e(err);}finally{_iterator284.f();}return r;}(document,"div",{"class":"ck-body-wrapper"}),document.body.appendChild(t)),t.appendChild(this._bodyCollectionContainer);}},{key:"detachFromDom",value:function detachFromDom(){_get(_getPrototypeOf(Ml.prototype),"destroy",this).call(this),this._bodyCollectionContainer&&this._bodyCollectionContainer.remove();var t=document.querySelector(".ck-body-wrapper");t&&0==t.childElementCount&&t.remove();}}]);return Ml;}(cl);i(19);var Il=/*#__PURE__*/function(_El){_inherits(Il,_El);var _super43=_createSuper(Il);function Il(t){var _this84;_classCallCheck(this,Il);_this84=_super43.call(this,t),_this84.body=new Ml(t);return _this84;}_createClass(Il,[{key:"render",value:function render(){_get(_getPrototypeOf(Il.prototype),"render",this).call(this),this.body.attachToDom();}},{key:"destroy",value:function destroy(){return this.body.detachFromDom(),_get(_getPrototypeOf(Il.prototype),"destroy",this).call(this);}}]);return Il;}(El);i(21);var Nl=/*#__PURE__*/function(_El2){_inherits(Nl,_El2);var _super44=_createSuper(Nl);function Nl(t){var _this85;_classCallCheck(this,Nl);_this85=_super44.call(this,t),_this85.set("text"),_this85.set("for"),_this85.id="ck-editor__label_"+li();var e=_this85.bindTemplate;_this85.setTemplate({tag:"label",attributes:{"class":["ck","ck-label"],id:_this85.id,"for":e.to("for")},children:[{text:e.to("text")}]});return _this85;}return Nl;}(El);var Ol=/*#__PURE__*/function(_Il){_inherits(Ol,_Il);var _super45=_createSuper(Ol);function Ol(t){var _this86;_classCallCheck(this,Ol);_this86=_super45.call(this,t),_this86.top=_this86.createCollection(),_this86.main=_this86.createCollection(),_this86._voiceLabelView=_this86._createVoiceLabel(),_this86.setTemplate({tag:"div",attributes:{"class":["ck","ck-reset","ck-editor","ck-rounded-corners"],role:"application",dir:t.uiLanguageDirection,lang:t.uiLanguage,"aria-labelledby":_this86._voiceLabelView.id},children:[_this86._voiceLabelView,{tag:"div",attributes:{"class":["ck","ck-editor__top","ck-reset_all"],role:"presentation"},children:_this86.top},{tag:"div",attributes:{"class":["ck","ck-editor__main"],role:"presentation"},children:_this86.main}]});return _this86;}_createClass(Ol,[{key:"_createVoiceLabel",value:function _createVoiceLabel(){var t=this.t,e=new Nl();return e.text=t("Rich Text Editor"),e.extendTemplate({attributes:{"class":"ck-voice-label"}}),e;}}]);return Ol;}(Il);var Rl=/*#__PURE__*/function(_El3){_inherits(Rl,_El3);var _super46=_createSuper(Rl);function Rl(t,e,i){var _this87;_classCallCheck(this,Rl);_this87=_super46.call(this,t),_this87.setTemplate({tag:"div",attributes:{"class":["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:t.contentLanguage,dir:t.contentLanguageDirection}}),_this87.name=null,_this87.set("isFocused",!1),_this87._editableElement=i,_this87._hasExternalElement=!!_this87._editableElement,_this87._editingView=e;return _this87;}_createClass(Rl,[{key:"render",value:function render(){var _this88=this;_get(_getPrototypeOf(Rl.prototype),"render",this).call(this),this._hasExternalElement?this.template.apply(this.element=this._editableElement):this._editableElement=this.element,this.on("change:isFocused",function(){return _this88._updateIsFocusedClasses();}),this._updateIsFocusedClasses();}},{key:"destroy",value:function destroy(){this._hasExternalElement&&this.template.revert(this._editableElement),_get(_getPrototypeOf(Rl.prototype),"destroy",this).call(this);}},{key:"_updateIsFocusedClasses",value:function _updateIsFocusedClasses(){var t=this._editingView;function e(e){t.change(function(i){var n=t.document.getRoot(e.name);i.addClass(e.isFocused?"ck-focused":"ck-blurred",n),i.removeClass(e.isFocused?"ck-blurred":"ck-focused",n);});}t.isRenderingInProgress?function i(n){t.once("change:isRenderingInProgress",function(t,o,r){r?i(n):e(n);});}(this):e(this);}}]);return Rl;}(El);var Dl=/*#__PURE__*/function(_Rl){_inherits(Dl,_Rl);var _super47=_createSuper(Dl);function Dl(t,e,i){var _this89;_classCallCheck(this,Dl);_this89=_super47.call(this,t,e,i),_this89.extendTemplate({attributes:{role:"textbox","class":"ck-editor__editable_inline"}});return _this89;}_createClass(Dl,[{key:"render",value:function render(){var _this90=this;_get(_getPrototypeOf(Dl.prototype),"render",this).call(this);var t=this._editingView,e=this.t;t.change(function(i){var n=t.document.getRoot(_this90.name);i.setAttribute("aria-label",e("Rich Text Editor, %0",_this90.name),n);});}}]);return Dl;}(Rl);function Ll(t){return function(e){return e+t;};}i(23);var zl=Ll("px");var Vl=/*#__PURE__*/function(_El4){_inherits(Vl,_El4);var _super48=_createSuper(Vl);function Vl(t){var _this91;_classCallCheck(this,Vl);_this91=_super48.call(this,t);var e=_this91.bindTemplate;_this91.set("isActive",!1),_this91.set("isSticky",!1),_this91.set("limiterElement",null),_this91.set("limiterBottomOffset",50),_this91.set("viewportTopOffset",0),_this91.set("_marginLeft",null),_this91.set("_isStickyToTheLimiter",!1),_this91.set("_hasViewportTopOffset",!1),_this91.content=_this91.createCollection(),_this91._contentPanelPlaceholder=new ll({tag:"div",attributes:{"class":["ck","ck-sticky-panel__placeholder"],style:{display:e.to("isSticky",function(t){return t?"block":"none";}),height:e.to("isSticky",function(t){return t?zl(_this91._panelRect.height):null;})}}}).render(),_this91._contentPanel=new ll({tag:"div",attributes:{"class":["ck","ck-sticky-panel__content",e["if"]("isSticky","ck-sticky-panel__content_sticky"),e["if"]("_isStickyToTheLimiter","ck-sticky-panel__content_sticky_bottom-limit")],style:{width:e.to("isSticky",function(t){return t?zl(_this91._contentPanelPlaceholder.getBoundingClientRect().width):null;}),top:e.to("_hasViewportTopOffset",function(t){return t?zl(_this91.viewportTopOffset):null;}),bottom:e.to("_isStickyToTheLimiter",function(t){return t?zl(_this91.limiterBottomOffset):null;}),marginLeft:e.to("_marginLeft")}},children:_this91.content}).render(),_this91.setTemplate({tag:"div",attributes:{"class":["ck","ck-sticky-panel"]},children:[_this91._contentPanelPlaceholder,_this91._contentPanel]});return _this91;}_createClass(Vl,[{key:"render",value:function render(){var _this92=this;_get(_getPrototypeOf(Vl.prototype),"render",this).call(this),this._checkIfShouldBeSticky(),this.listenTo(rr.window,"scroll",function(){_this92._checkIfShouldBeSticky();}),this.listenTo(this,"change:isActive",function(){_this92._checkIfShouldBeSticky();});}},{key:"_checkIfShouldBeSticky",value:function _checkIfShouldBeSticky(){var t=this._panelRect=this._contentPanel.getBoundingClientRect();var e;this.limiterElement?(e=this._limiterRect=this.limiterElement.getBoundingClientRect(),this.isSticky=this.isActive&&e.top<this.viewportTopOffset&&this._panelRect.height+this.limiterBottomOffset<e.height):this.isSticky=!1,this.isSticky?(this._isStickyToTheLimiter=e.bottom<t.height+this.limiterBottomOffset+this.viewportTopOffset,this._hasViewportTopOffset=!this._isStickyToTheLimiter&&!!this.viewportTopOffset,this._marginLeft=this._isStickyToTheLimiter?null:zl(-rr.window.scrollX)):(this._isStickyToTheLimiter=!1,this._hasViewportTopOffset=!1,this._marginLeft=null);}}]);return Vl;}(El);var jl=/*#__PURE__*/function(){function jl(t){var _this93=this;_classCallCheck(this,jl);if(Object.assign(this,t),t.actions&&t.keystrokeHandler){var _loop5=function _loop5(_e201){var i=t.actions[_e201];"string"==typeof i&&(i=[i]);var _iterator285=_createForOfIteratorHelper(i),_step285;try{for(_iterator285.s();!(_step285=_iterator285.n()).done;){var _n104=_step285.value;t.keystrokeHandler.set(_n104,function(t,i){_this93[_e201](),i();});}}catch(err){_iterator285.e(err);}finally{_iterator285.f();}};for(var _e201 in t.actions){_loop5(_e201);}}}_createClass(jl,[{key:"first",get:function get(){return this.focusables.find(Bl)||null;}},{key:"last",get:function get(){return this.focusables.filter(Bl).slice(-1)[0]||null;}},{key:"next",get:function get(){return this._getFocusableItem(1);}},{key:"previous",get:function get(){return this._getFocusableItem(-1);}},{key:"current",get:function get(){var _this94=this;var t=null;return null===this.focusTracker.focusedElement?null:(this.focusables.find(function(e,i){var n=e.element===_this94.focusTracker.focusedElement;return n&&(t=i),n;}),t);}},{key:"focusFirst",value:function focusFirst(){this._focus(this.first);}},{key:"focusLast",value:function focusLast(){this._focus(this.last);}},{key:"focusNext",value:function focusNext(){this._focus(this.next);}},{key:"focusPrevious",value:function focusPrevious(){this._focus(this.previous);}},{key:"_focus",value:function _focus(t){t&&t.focus();}},{key:"_getFocusableItem",value:function _getFocusableItem(t){var e=this.current,i=this.focusables.length;if(!i)return null;if(null===e)return this[1===t?"first":"last"];var n=(e+i+t)%i;do{var _e202=this.focusables.get(n);if(Bl(_e202))return _e202;n=(n+i+t)%i;}while(n!==e);return null;}}]);return jl;}();function Bl(t){return!(!t.focus||"none"==rr.window.getComputedStyle(t.element).display);}var Fl=/*#__PURE__*/function(_El5){_inherits(Fl,_El5);var _super49=_createSuper(Fl);function Fl(t){var _this95;_classCallCheck(this,Fl);_this95=_super49.call(this,t),_this95.setTemplate({tag:"span",attributes:{"class":["ck","ck-toolbar__separator"]}});return _this95;}return Fl;}(El);var Hl=/*#__PURE__*/function(_El6){_inherits(Hl,_El6);var _super50=_createSuper(Hl);function Hl(t){var _this96;_classCallCheck(this,Hl);_this96=_super50.call(this,t),_this96.setTemplate({tag:"span",attributes:{"class":["ck","ck-toolbar__line-break"]}});return _this96;}return Hl;}(El);var Ul=/*#__PURE__*/function(){function Ul(t,e){_classCallCheck(this,Ul);Ul._observerInstance||Ul._createObserver(),this._element=t,this._callback=e,Ul._addElementCallback(t,e),Ul._observerInstance.observe(t);}_createClass(Ul,[{key:"destroy",value:function destroy(){Ul._deleteElementCallback(this._element,this._callback);}}],[{key:"_addElementCallback",value:function _addElementCallback(t,e){Ul._elementCallbacks||(Ul._elementCallbacks=new Map());var i=Ul._elementCallbacks.get(t);i||(i=new Set(),Ul._elementCallbacks.set(t,i)),i.add(e);}},{key:"_deleteElementCallback",value:function _deleteElementCallback(t,e){var i=Ul._getElementCallbacks(t);i&&(i["delete"](e),i.size||(Ul._elementCallbacks["delete"](t),Ul._observerInstance.unobserve(t))),Ul._elementCallbacks&&!Ul._elementCallbacks.size&&(Ul._observerInstance=null,Ul._elementCallbacks=null);}},{key:"_getElementCallbacks",value:function _getElementCallbacks(t){return Ul._elementCallbacks?Ul._elementCallbacks.get(t):null;}},{key:"_createObserver",value:function _createObserver(){var t;t="function"==typeof rr.window.ResizeObserver?rr.window.ResizeObserver:Wl,Ul._observerInstance=new t(function(t){var _iterator286=_createForOfIteratorHelper(t),_step286;try{for(_iterator286.s();!(_step286=_iterator286.n()).done;){var _e203=_step286.value;var _t211=Ul._getElementCallbacks(_e203.target);if(_t211){var _iterator287=_createForOfIteratorHelper(_t211),_step287;try{for(_iterator287.s();!(_step287=_iterator287.n()).done;){var _i207=_step287.value;_i207(_e203);}}catch(err){_iterator287.e(err);}finally{_iterator287.f();}}}}catch(err){_iterator286.e(err);}finally{_iterator286.f();}});}}]);return Ul;}();Ul._observerInstance=null,Ul._elementCallbacks=null;var Wl=/*#__PURE__*/function(){function Wl(t){_classCallCheck(this,Wl);this._callback=t,this._elements=new Set(),this._previousRects=new Map(),this._periodicCheckTimeout=null;}_createClass(Wl,[{key:"observe",value:function observe(t){this._elements.add(t),this._checkElementRectsAndExecuteCallback(),1===this._elements.size&&this._startPeriodicCheck();}},{key:"unobserve",value:function unobserve(t){this._elements["delete"](t),this._previousRects["delete"](t),this._elements.size||this._stopPeriodicCheck();}},{key:"_startPeriodicCheck",value:function _startPeriodicCheck(){var _this97=this;var t=function t(){_this97._checkElementRectsAndExecuteCallback(),_this97._periodicCheckTimeout=setTimeout(t,100);};this.listenTo(rr.window,"resize",function(){_this97._checkElementRectsAndExecuteCallback();}),this._periodicCheckTimeout=setTimeout(t,100);}},{key:"_stopPeriodicCheck",value:function _stopPeriodicCheck(){clearTimeout(this._periodicCheckTimeout),this.stopListening(),this._previousRects.clear();}},{key:"_checkElementRectsAndExecuteCallback",value:function _checkElementRectsAndExecuteCallback(){var t=[];var _iterator288=_createForOfIteratorHelper(this._elements),_step288;try{for(_iterator288.s();!(_step288=_iterator288.n()).done;){var _e204=_step288.value;this._hasRectChanged(_e204)&&t.push({target:_e204,contentRect:this._previousRects.get(_e204)});}}catch(err){_iterator288.e(err);}finally{_iterator288.f();}t.length&&this._callback(t);}},{key:"_hasRectChanged",value:function _hasRectChanged(t){if(!t.ownerDocument.body.contains(t))return!1;var e=new as(t),i=this._previousRects.get(t),n=!i||!i.isEqual(e);return this._previousRects.set(t,e),n;}}]);return Wl;}();yi(Wl,mr);var ql=/*#__PURE__*/function(_El7){_inherits(ql,_El7);var _super51=_createSuper(ql);function ql(t){var _this98;_classCallCheck(this,ql);_this98=_super51.call(this,t);var e=_this98.bindTemplate;_this98.set("isVisible",!1),_this98.set("position","se"),_this98.children=_this98.createCollection(),_this98.setTemplate({tag:"div",attributes:{"class":["ck","ck-reset","ck-dropdown__panel",e.to("position",function(t){return"ck-dropdown__panel_"+t;}),e["if"]("isVisible","ck-dropdown__panel-visible")]},children:_this98.children,on:{selectstart:e.to(function(t){return t.preventDefault();})}});return _this98;}_createClass(ql,[{key:"focus",value:function focus(){this.children.length&&this.children.first.focus();}},{key:"focusLast",value:function focusLast(){if(this.children.length){var _t212=this.children.last;"function"==typeof _t212.focusLast?_t212.focusLast():_t212.focus();}}}]);return ql;}(El);i(25);function $l(_ref27){var t=_ref27.element,e=_ref27.target,i=_ref27.positions,n=_ref27.limiter,o=_ref27.fitInViewport;j(e)&&(e=e()),j(n)&&(n=n());var r=function(t){return t&&t.parentNode?t.offsetParent===rr.document.body?null:t.offsetParent:null;}(t),s=new as(t),a=new as(e);var c,l;if(n||o){var _t213=function(t,e){var i=e.elementRect,n=e.viewportRect,o=i.getArea(),r=function(t,_ref28){var e=_ref28.targetRect,i=_ref28.elementRect,n=_ref28.limiterRect,o=_ref28.viewportRect;var r=[],s=i.getArea();var _iterator289=_createForOfIteratorHelper(t),_step289;try{for(_iterator289.s();!(_step289=_iterator289.n()).done;){var _a13=_step289.value;var _t214=Yl(_a13,e,i);if(!_t214)continue;var _t215=_slicedToArray(_t214,2),_c4=_t215[0],_l2=_t215[1];var _d3=0,_u3=0;if(n)if(o){var _t216=n.getIntersection(o);_t216&&(_d3=_t216.getIntersectionArea(_l2));}else _d3=n.getIntersectionArea(_l2);o&&(_u3=o.getIntersectionArea(_l2));var _h2={positionName:_c4,positionRect:_l2,limiterIntersectArea:_d3,viewportIntersectArea:_u3};if(_d3===s)return[_h2];r.push(_h2);}}catch(err){_iterator289.e(err);}finally{_iterator289.f();}return r;}(t,e);if(n){var _t217=Gl(r.filter(function(_ref29){var t=_ref29.viewportIntersectArea;return t===o;}),o);if(_t217)return _t217;}return Gl(r,o);}(i,{targetRect:a,elementRect:s,limiterRect:n&&new as(n).getVisible(),viewportRect:o&&new as(rr.window)});var _ref30=_t213||Yl(i[0],a,s);var _ref31=_slicedToArray(_ref30,2);l=_ref31[0];c=_ref31[1];}else{var _Yl=Yl(i[0],a,s);var _Yl2=_slicedToArray(_Yl,2);l=_Yl2[0];c=_Yl2[1];}var d=Kl(c);return r&&(d=function(_ref32,i){var t=_ref32.left,e=_ref32.top;var n=Kl(new as(i)),o=rs(i);return t-=n.left,e-=n.top,t+=i.scrollLeft,e+=i.scrollTop,t-=o.left,e-=o.top,{left:t,top:e};}(d,r)),{left:d.left,top:d.top,name:l};}function Yl(t,e,i){var n=t(e,i);if(!n)return null;var o=n.left,r=n.top,s=n.name;return[s,i.clone().moveTo(o,r)];}function Gl(t,e){var i,n,o=0;var _iterator290=_createForOfIteratorHelper(t),_step290;try{for(_iterator290.s();!(_step290=_iterator290.n()).done;){var _step290$value=_step290.value,_r30=_step290$value.positionName,_s22=_step290$value.positionRect,_a14=_step290$value.limiterIntersectArea,_c5=_step290$value.viewportIntersectArea;if(_a14===e)return[_r30,_s22];var _t218=Math.pow(_c5,2)+Math.pow(_a14,2);_t218>o&&(o=_t218,i=_s22,n=_r30);}}catch(err){_iterator290.e(err);}finally{_iterator290.f();}return i?[n,i]:null;}function Kl(_ref33){var t=_ref33.left,e=_ref33.top;var _rr$window2=rr.window,i=_rr$window2.scrollX,n=_rr$window2.scrollY;return{left:t+i,top:e+n};}var Ql=/*#__PURE__*/function(_El8){_inherits(Ql,_El8);var _super52=_createSuper(Ql);function Ql(t,e,i){var _this99;_classCallCheck(this,Ql);_this99=_super52.call(this,t);var n=_this99.bindTemplate;_this99.buttonView=e,_this99.panelView=i,_this99.set("isOpen",!1),_this99.set("isEnabled",!0),_this99.set("class"),_this99.set("id"),_this99.set("panelPosition","auto"),_this99.keystrokes=new Wc(),_this99.setTemplate({tag:"div",attributes:{"class":["ck","ck-dropdown",n.to("class"),n["if"]("isEnabled","ck-disabled",function(t){return!t;})],id:n.to("id"),"aria-describedby":n.to("ariaDescribedById")},children:[e,i]}),e.extendTemplate({attributes:{"class":["ck-dropdown__button"]}});return _this99;}_createClass(Ql,[{key:"render",value:function render(){var _this100=this;_get(_getPrototypeOf(Ql.prototype),"render",this).call(this),this.listenTo(this.buttonView,"open",function(){_this100.isOpen=!_this100.isOpen;}),this.panelView.bind("isVisible").to(this,"isOpen"),this.on("change:isOpen",function(){_this100.isOpen&&("auto"===_this100.panelPosition?_this100.panelView.position=Ql._getOptimalPosition({element:_this100.panelView.element,target:_this100.buttonView.element,fitInViewport:!0,positions:_this100._panelPositions}).name:_this100.panelView.position=_this100.panelPosition);}),this.keystrokes.listenTo(this.element);var t=function t(_t219,e){_this100.isOpen&&(_this100.buttonView.focus(),_this100.isOpen=!1,e());};this.keystrokes.set("arrowdown",function(t,e){_this100.buttonView.isEnabled&&!_this100.isOpen&&(_this100.isOpen=!0,e());}),this.keystrokes.set("arrowright",function(t,e){_this100.isOpen&&e();}),this.keystrokes.set("arrowleft",t),this.keystrokes.set("esc",t);}},{key:"focus",value:function focus(){this.buttonView.focus();}},{key:"_panelPositions",get:function get(){var _Ql$defaultPanelPosit=Ql.defaultPanelPositions,t=_Ql$defaultPanelPosit.south,e=_Ql$defaultPanelPosit.north,i=_Ql$defaultPanelPosit.southEast,n=_Ql$defaultPanelPosit.southWest,o=_Ql$defaultPanelPosit.northEast,r=_Ql$defaultPanelPosit.northWest,s=_Ql$defaultPanelPosit.southMiddleEast,a=_Ql$defaultPanelPosit.southMiddleWest,c=_Ql$defaultPanelPosit.northMiddleEast,l=_Ql$defaultPanelPosit.northMiddleWest;return"rtl"!==this.locale.uiLanguageDirection?[i,n,s,a,t,o,r,c,l,e]:[n,i,a,s,t,r,o,l,c,e];}}]);return Ql;}(El);Ql.defaultPanelPositions={south:function south(t,e){return{top:t.bottom,left:t.left-(e.width-t.width)/2,name:"s"};},southEast:function southEast(t){return{top:t.bottom,left:t.left,name:"se"};},southWest:function southWest(t,e){return{top:t.bottom,left:t.left-e.width+t.width,name:"sw"};},southMiddleEast:function southMiddleEast(t,e){return{top:t.bottom,left:t.left-(e.width-t.width)/4,name:"sme"};},southMiddleWest:function southMiddleWest(t,e){return{top:t.bottom,left:t.left-3*(e.width-t.width)/4,name:"smw"};},north:function north(t,e){return{top:t.top-e.height,left:t.left-(e.width-t.width)/2,name:"n"};},northEast:function northEast(t,e){return{top:t.top-e.height,left:t.left,name:"ne"};},northWest:function northWest(t,e){return{top:t.top-e.height,left:t.left-e.width+t.width,name:"nw"};},northMiddleEast:function northMiddleEast(t,e){return{top:t.top-e.height,left:t.left-(e.width-t.width)/4,name:"nme"};},northMiddleWest:function northMiddleWest(t,e){return{top:t.top-e.height,left:t.left-3*(e.width-t.width)/4,name:"nmw"};}},Ql._getOptimalPosition=$l;i(27);var Jl=/*#__PURE__*/function(_El9){_inherits(Jl,_El9);var _super53=_createSuper(Jl);function Jl(){var _this101;_classCallCheck(this,Jl);_this101=_super53.call(this);var t=_this101.bindTemplate;_this101.set("content",""),_this101.set("viewBox","0 0 20 20"),_this101.set("fillColor",""),_this101.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{"class":["ck","ck-icon"],viewBox:t.to("viewBox")}});return _this101;}_createClass(Jl,[{key:"render",value:function render(){var _this102=this;_get(_getPrototypeOf(Jl.prototype),"render",this).call(this),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",function(){_this102._updateXMLContent(),_this102._colorFillPaths();}),this.on("change:fillColor",function(){_this102._colorFillPaths();});}},{key:"_updateXMLContent",value:function _updateXMLContent(){if(this.content){var _t220=new DOMParser().parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg"),_e205=_t220.getAttribute("viewBox");for(_e205&&(this.viewBox=_e205),this.element.innerHTML="";_t220.childNodes.length>0;){this.element.appendChild(_t220.childNodes[0]);}}}},{key:"_colorFillPaths",value:function _colorFillPaths(){var _this103=this;this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach(function(t){t.style.fill=_this103.fillColor;});}}]);return Jl;}(El);i(29);var Zl=/*#__PURE__*/function(_El10){_inherits(Zl,_El10);var _super54=_createSuper(Zl);function Zl(t){var _this104;_classCallCheck(this,Zl);_this104=_super54.call(this,t),_this104.set("text",""),_this104.set("position","s");var e=_this104.bindTemplate;_this104.setTemplate({tag:"span",attributes:{"class":["ck","ck-tooltip",e.to("position",function(t){return"ck-tooltip_"+t;}),e["if"]("text","ck-hidden",function(t){return!t.trim();})]},children:[{tag:"span",attributes:{"class":["ck","ck-tooltip__text"]},children:[{text:e.to("text")}]}]});return _this104;}return Zl;}(El);i(31);var Xl=/*#__PURE__*/function(_El11){_inherits(Xl,_El11);var _super55=_createSuper(Xl);function Xl(t){var _this105;_classCallCheck(this,Xl);_this105=_super55.call(this,t);var e=_this105.bindTemplate,i=li();_this105.set("class"),_this105.set("labelStyle"),_this105.set("icon"),_this105.set("isEnabled",!0),_this105.set("isOn",!1),_this105.set("isVisible",!0),_this105.set("isToggleable",!1),_this105.set("keystroke"),_this105.set("label"),_this105.set("tabindex",-1),_this105.set("tooltip"),_this105.set("tooltipPosition","s"),_this105.set("type","button"),_this105.set("withText",!1),_this105.set("withKeystroke",!1),_this105.children=_this105.createCollection(),_this105.tooltipView=_this105._createTooltipView(),_this105.labelView=_this105._createLabelView(i),_this105.iconView=new Jl(),_this105.iconView.extendTemplate({attributes:{"class":"ck-button__icon"}}),_this105.keystrokeView=_this105._createKeystrokeView(),_this105.bind("_tooltipString").to(_assertThisInitialized(_this105),"tooltip",_assertThisInitialized(_this105),"label",_assertThisInitialized(_this105),"keystroke",_this105._getTooltipString.bind(_assertThisInitialized(_this105))),_this105.setTemplate({tag:"button",attributes:{"class":["ck","ck-button",e.to("class"),e["if"]("isEnabled","ck-disabled",function(t){return!t;}),e["if"]("isVisible","ck-hidden",function(t){return!t;}),e.to("isOn",function(t){return t?"ck-on":"ck-off";}),e["if"]("withText","ck-button_with-text"),e["if"]("withKeystroke","ck-button_with-keystroke")],type:e.to("type",function(t){return t||"button";}),tabindex:e.to("tabindex"),"aria-labelledby":"ck-editor__aria-label_"+i,"aria-disabled":e["if"]("isEnabled",!0,function(t){return!t;}),"aria-pressed":e.to("isOn",function(t){return!!_this105.isToggleable&&String(t);})},children:_this105.children,on:{mousedown:e.to(function(t){t.preventDefault();}),click:e.to(function(t){_this105.isEnabled?_this105.fire("execute"):t.preventDefault();})}});return _this105;}_createClass(Xl,[{key:"render",value:function render(){_get(_getPrototypeOf(Xl.prototype),"render",this).call(this),this.icon&&(this.iconView.bind("content").to(this,"icon"),this.children.add(this.iconView)),this.children.add(this.tooltipView),this.children.add(this.labelView),this.withKeystroke&&this.children.add(this.keystrokeView);}},{key:"focus",value:function focus(){this.element.focus();}},{key:"_createTooltipView",value:function _createTooltipView(){var t=new Zl();return t.bind("text").to(this,"_tooltipString"),t.bind("position").to(this,"tooltipPosition"),t;}},{key:"_createLabelView",value:function _createLabelView(t){var e=new El(),i=this.bindTemplate;return e.setTemplate({tag:"span",attributes:{"class":["ck","ck-button__label"],style:i.to("labelStyle"),id:"ck-editor__aria-label_"+t},children:[{text:this.bindTemplate.to("label")}]}),e;}},{key:"_createKeystrokeView",value:function _createKeystrokeView(){var t=new El();return t.setTemplate({tag:"span",attributes:{"class":["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",function(t){return _o(t);})}]}),t;}},{key:"_getTooltipString",value:function _getTooltipString(t,e,i){return"";}}]);return Xl;}(El);var td='<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>';var ed=/*#__PURE__*/function(_Xl){_inherits(ed,_Xl);var _super56=_createSuper(ed);function ed(t){var _this106;_classCallCheck(this,ed);_this106=_super56.call(this,t),_this106.arrowView=_this106._createArrowView(),_this106.extendTemplate({attributes:{"aria-haspopup":!0}}),_this106.delegate("execute").to(_assertThisInitialized(_this106),"open");return _this106;}_createClass(ed,[{key:"render",value:function render(){_get(_getPrototypeOf(ed.prototype),"render",this).call(this),this.children.add(this.arrowView);}},{key:"_createArrowView",value:function _createArrowView(){var t=new Jl();return t.content=td,t.extendTemplate({attributes:{"class":"ck-dropdown__arrow"}}),t;}}]);return ed;}(Xl);i(33);var id=/*#__PURE__*/function(_El12){_inherits(id,_El12);var _super57=_createSuper(id);function id(){var _this107;_classCallCheck(this,id);_this107=_super57.call(this),_this107.items=_this107.createCollection(),_this107.focusTracker=new Jc(),_this107.keystrokes=new Wc(),_this107._focusCycler=new jl({focusables:_this107.items,focusTracker:_this107.focusTracker,keystrokeHandler:_this107.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),_this107.setTemplate({tag:"ul",attributes:{"class":["ck","ck-reset","ck-list"]},children:_this107.items});return _this107;}_createClass(id,[{key:"render",value:function render(){var _this108=this;_get(_getPrototypeOf(id.prototype),"render",this).call(this);var _iterator291=_createForOfIteratorHelper(this.items),_step291;try{for(_iterator291.s();!(_step291=_iterator291.n()).done;){var _t221=_step291.value;this.focusTracker.add(_t221.element);}}catch(err){_iterator291.e(err);}finally{_iterator291.f();}this.items.on("add",function(t,e){_this108.focusTracker.add(e.element);}),this.items.on("remove",function(t,e){_this108.focusTracker.remove(e.element);}),this.keystrokes.listenTo(this.element);}},{key:"focus",value:function focus(){this._focusCycler.focusFirst();}},{key:"focusLast",value:function focusLast(){this._focusCycler.focusLast();}}]);return id;}(El);var nd=/*#__PURE__*/function(_El13){_inherits(nd,_El13);var _super58=_createSuper(nd);function nd(t){var _this109;_classCallCheck(this,nd);_this109=_super58.call(this,t),_this109.children=_this109.createCollection(),_this109.setTemplate({tag:"li",attributes:{"class":["ck","ck-list__item"]},children:_this109.children});return _this109;}_createClass(nd,[{key:"focus",value:function focus(){this.children.first.focus();}}]);return nd;}(El);var od=/*#__PURE__*/function(_El14){_inherits(od,_El14);var _super59=_createSuper(od);function od(t){var _this110;_classCallCheck(this,od);_this110=_super59.call(this,t),_this110.setTemplate({tag:"li",attributes:{"class":["ck","ck-list__separator"]}});return _this110;}return od;}(El);i(35);var rd=/*#__PURE__*/function(_Xl2){_inherits(rd,_Xl2);var _super60=_createSuper(rd);function rd(t){var _this111;_classCallCheck(this,rd);_this111=_super60.call(this,t),_this111.isToggleable=!0,_this111.toggleSwitchView=_this111._createToggleView(),_this111.extendTemplate({attributes:{"class":"ck-switchbutton"}});return _this111;}_createClass(rd,[{key:"render",value:function render(){_get(_getPrototypeOf(rd.prototype),"render",this).call(this),this.children.add(this.toggleSwitchView);}},{key:"_createToggleView",value:function _createToggleView(){var t=new El();return t.setTemplate({tag:"span",attributes:{"class":["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{"class":["ck","ck-button__toggle__inner"]}}]}),t;}}]);return rd;}(Xl);function sd(_ref34){var t=_ref34.emitter,e=_ref34.activator,i=_ref34.callback,n=_ref34.contextElements;t.listenTo(document,"mousedown",function(t,o){if(!e())return;var r="function"==typeof o.composedPath?o.composedPath():[];var _iterator292=_createForOfIteratorHelper(n),_step292;try{for(_iterator292.s();!(_step292=_iterator292.n()).done;){var _t222=_step292.value;if(_t222.contains(o.target)||r.includes(_t222))return;}}catch(err){_iterator292.e(err);}finally{_iterator292.f();}i();});}i(37),i(39);function ad(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:ed;var i=new e(t),n=new ql(t),o=new Ql(t,i,n);return i.bind("isEnabled").to(o),i instanceof ed?i.bind("isOn").to(o,"isOpen"):i.arrowView.bind("isOn").to(o,"isOpen"),function(t){(function(t){t.on("render",function(){sd({emitter:t,activator:function activator(){return t.isOpen;},callback:function callback(){t.isOpen=!1;},contextElements:[t.element]});});})(t),function(t){t.on("execute",function(e){e.source instanceof rd||(t.isOpen=!1);});}(t),function(t){t.keystrokes.set("arrowdown",function(e,i){t.isOpen&&(t.panelView.focus(),i());}),t.keystrokes.set("arrowup",function(e,i){t.isOpen&&(t.panelView.focusLast(),i());});}(t);}(o),o;}function cd(t,e){var i=t.locale,n=i.t,o=t.toolbarView=new dd(i);o.set("ariaLabel",n("Dropdown toolbar")),t.extendTemplate({attributes:{"class":["ck-toolbar-dropdown"]}}),e.map(function(t){return o.items.add(t);}),t.panelView.children.add(o),o.items.delegate("execute").to(t);}function ld(t,e){var i=t.locale,n=t.listView=new id(i);n.items.bindTo(e).using(function(_ref35){var t=_ref35.type,e=_ref35.model;if("separator"===t)return new od(i);if("button"===t||"switchbutton"===t){var _o70;var _n105=new nd(i);var _o69;return _o69="button"===t?new Xl(i):new rd(i),(_o70=_o69).bind.apply(_o70,_toConsumableArray(Object.keys(e))).to(e),_o69.delegate("execute").to(_n105),_n105.children.add(_o69),_n105;}}),t.panelView.children.add(n),n.items.delegate("execute").to(t);}i(41);var dd=/*#__PURE__*/function(_El15){_inherits(dd,_El15);var _super61=_createSuper(dd);function dd(t,e){var _this112;_classCallCheck(this,dd);_this112=_super61.call(this,t);var i=_this112.bindTemplate,n=_this112.t;_this112.options=e||{},_this112.set("ariaLabel",n("Editor toolbar")),_this112.set("maxWidth","auto"),_this112.items=_this112.createCollection(),_this112.focusTracker=new Jc(),_this112.keystrokes=new Wc(),_this112.set("class"),_this112.set("isCompact",!1),_this112.itemsView=new ud(t),_this112.children=_this112.createCollection(),_this112.children.add(_this112.itemsView),_this112.focusables=_this112.createCollection(),_this112._focusCycler=new jl({focusables:_this112.focusables,focusTracker:_this112.focusTracker,keystrokeHandler:_this112.keystrokes,actions:{focusPrevious:["arrowleft","arrowup"],focusNext:["arrowright","arrowdown"]}});var o=["ck","ck-toolbar",i.to("class"),i["if"]("isCompact","ck-toolbar_compact")];var r;_this112.options.shouldGroupWhenFull&&_this112.options.isFloating&&o.push("ck-toolbar_floating"),_this112.setTemplate({tag:"div",attributes:{"class":o,role:"toolbar","aria-label":i.to("ariaLabel"),style:{maxWidth:i.to("maxWidth")}},children:_this112.children,on:{mousedown:(r=_assertThisInitialized(_this112),r.bindTemplate.to(function(t){t.target===r.element&&t.preventDefault();}))}}),_this112._behavior=_this112.options.shouldGroupWhenFull?new fd(_assertThisInitialized(_this112)):new hd(_assertThisInitialized(_this112));return _this112;}_createClass(dd,[{key:"render",value:function render(){var _this113=this;_get(_getPrototypeOf(dd.prototype),"render",this).call(this);var _iterator293=_createForOfIteratorHelper(this.items),_step293;try{for(_iterator293.s();!(_step293=_iterator293.n()).done;){var _t223=_step293.value;this.focusTracker.add(_t223.element);}}catch(err){_iterator293.e(err);}finally{_iterator293.f();}this.items.on("add",function(t,e){_this113.focusTracker.add(e.element);}),this.items.on("remove",function(t,e){_this113.focusTracker.remove(e.element);}),this.keystrokes.listenTo(this.element),this._behavior.render(this);}},{key:"destroy",value:function destroy(){return this._behavior.destroy(),_get(_getPrototypeOf(dd.prototype),"destroy",this).call(this);}},{key:"focus",value:function focus(){this._focusCycler.focusFirst();}},{key:"focusLast",value:function focusLast(){this._focusCycler.focusLast();}},{key:"fillFromConfig",value:function fillFromConfig(t,e){var _this114=this;var i=Xc(t),n=i.items.filter(function(t,n,o){return"|"===t||-1===i.removeItems.indexOf(t)&&("-"===t?!_this114.options.shouldGroupWhenFull||(Object(ui.c)("toolbarview-line-break-ignored-when-grouping-items",o),!1):!!e.has(t)||(Object(ui.c)("toolbarview-item-unavailable",{name:t}),!1));}),o=this._cleanSeparators(n).map(function(t){return"|"===t?new Fl():"-"===t?new Hl():e.create(t);});this.items.addMany(o);}},{key:"_cleanSeparators",value:function _cleanSeparators(t){var e=function e(t){return"-"!==t&&"|"!==t;},i=t.length,n=t.findIndex(e),o=i-t.slice().reverse().findIndex(e);return t.slice(n,o).filter(function(t,i,n){if(e(t))return!0;return!(i>0&&n[i-1]===t);});}}]);return dd;}(El);var ud=/*#__PURE__*/function(_El16){_inherits(ud,_El16);var _super62=_createSuper(ud);function ud(t){var _this115;_classCallCheck(this,ud);_this115=_super62.call(this,t),_this115.children=_this115.createCollection(),_this115.setTemplate({tag:"div",attributes:{"class":["ck","ck-toolbar__items"]},children:_this115.children});return _this115;}return ud;}(El);var hd=/*#__PURE__*/function(){function hd(t){_classCallCheck(this,hd);var e=t.bindTemplate;t.set("isVertical",!1),t.itemsView.children.bindTo(t.items).using(function(t){return t;}),t.focusables.bindTo(t.items).using(function(t){return t;}),t.extendTemplate({attributes:{"class":[e["if"]("isVertical","ck-toolbar_vertical")]}});}_createClass(hd,[{key:"render",value:function render(){}},{key:"destroy",value:function destroy(){}}]);return hd;}();var fd=/*#__PURE__*/function(){function fd(t){var _this116=this;_classCallCheck(this,fd);this.view=t,this.viewChildren=t.children,this.viewFocusables=t.focusables,this.viewItemsView=t.itemsView,this.viewFocusTracker=t.focusTracker,this.viewLocale=t.locale,this.ungroupedItems=t.createCollection(),this.groupedItems=t.createCollection(),this.groupedItemsDropdown=this._createGroupedItemsDropdown(),this.resizeObserver=null,this.cachedPadding=null,this.shouldUpdateGroupingOnNextResize=!1,t.itemsView.children.bindTo(this.ungroupedItems).using(function(t){return t;}),this.ungroupedItems.on("add",this._updateFocusCycleableItems.bind(this)),this.ungroupedItems.on("remove",this._updateFocusCycleableItems.bind(this)),t.children.on("add",this._updateFocusCycleableItems.bind(this)),t.children.on("remove",this._updateFocusCycleableItems.bind(this)),t.items.on("change",function(t,e){var i=e.index;var _iterator294=_createForOfIteratorHelper(e.removed),_step294;try{for(_iterator294.s();!(_step294=_iterator294.n()).done;){var _t225=_step294.value;i>=_this116.ungroupedItems.length?_this116.groupedItems.remove(_t225):_this116.ungroupedItems.remove(_t225);}}catch(err){_iterator294.e(err);}finally{_iterator294.f();}for(var _t224=i;_t224<i+e.added.length;_t224++){var _n106=e.added[_t224-i];_t224>_this116.ungroupedItems.length?_this116.groupedItems.add(_n106,_t224-_this116.ungroupedItems.length):_this116.ungroupedItems.add(_n106,_t224);}_this116._updateGrouping();}),t.extendTemplate({attributes:{"class":["ck-toolbar_grouping"]}});}_createClass(fd,[{key:"render",value:function render(t){this.viewElement=t.element,this._enableGroupingOnResize(),this._enableGroupingOnMaxWidthChange(t);}},{key:"destroy",value:function destroy(){this.groupedItemsDropdown.destroy(),this.resizeObserver.destroy();}},{key:"_updateGrouping",value:function _updateGrouping(){if(!this.viewElement.ownerDocument.body.contains(this.viewElement))return;if(!this.viewElement.offsetParent)return void(this.shouldUpdateGroupingOnNextResize=!0);var t=this.groupedItems.length;var e;for(;this._areItemsOverflowing;){this._groupLastItem(),e=!0;}if(!e&&this.groupedItems.length){for(;this.groupedItems.length&&!this._areItemsOverflowing;){this._ungroupFirstItem();}this._areItemsOverflowing&&this._groupLastItem();}this.groupedItems.length!==t&&this.view.fire("groupedItemsUpdate");}},{key:"_areItemsOverflowing",get:function get(){if(!this.ungroupedItems.length)return!1;var t=this.viewElement,e=this.viewLocale.uiLanguageDirection,i=new as(t.lastChild),n=new as(t);if(!this.cachedPadding){var _i208=rr.window.getComputedStyle(t),_n107="ltr"===e?"paddingRight":"paddingLeft";this.cachedPadding=Number.parseInt(_i208[_n107]);}return"ltr"===e?i.right>n.right-this.cachedPadding:i.left<n.left+this.cachedPadding;}},{key:"_enableGroupingOnResize",value:function _enableGroupingOnResize(){var _this117=this;var t;this.resizeObserver=new Ul(this.viewElement,function(e){t&&t===e.contentRect.width&&!_this117.shouldUpdateGroupingOnNextResize||(_this117.shouldUpdateGroupingOnNextResize=!1,_this117._updateGrouping(),t=e.contentRect.width);}),this._updateGrouping();}},{key:"_enableGroupingOnMaxWidthChange",value:function _enableGroupingOnMaxWidthChange(t){var _this118=this;t.on("change:maxWidth",function(){_this118._updateGrouping();});}},{key:"_groupLastItem",value:function _groupLastItem(){this.groupedItems.length||(this.viewChildren.add(new Fl()),this.viewChildren.add(this.groupedItemsDropdown),this.viewFocusTracker.add(this.groupedItemsDropdown.element)),this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0);}},{key:"_ungroupFirstItem",value:function _ungroupFirstItem(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)),this.groupedItems.length||(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last),this.viewFocusTracker.remove(this.groupedItemsDropdown.element));}},{key:"_createGroupedItemsDropdown",value:function _createGroupedItemsDropdown(){var t=this.viewLocale,e=t.t,i=ad(t);return i["class"]="ck-toolbar__grouped-dropdown",i.panelPosition="ltr"===t.uiLanguageDirection?"sw":"se",cd(i,[]),i.buttonView.set({label:e("Show more items"),tooltip:!0,tooltipPosition:"rtl"===t.uiLanguageDirection?"se":"sw",icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>'}),i.toolbarView.items.bindTo(this.groupedItems).using(function(t){return t;}),i;}},{key:"_updateFocusCycleableItems",value:function _updateFocusCycleableItems(){var _this119=this;this.viewFocusables.clear(),this.ungroupedItems.map(function(t){_this119.viewFocusables.add(t);}),this.groupedItems.length&&this.viewFocusables.add(this.groupedItemsDropdown);}}]);return fd;}();i(43);var md=/*#__PURE__*/function(_Ol){_inherits(md,_Ol);var _super63=_createSuper(md);function md(t,e){var _this120;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};_classCallCheck(this,md);_this120=_super63.call(this,t),_this120.stickyPanel=new Vl(t),_this120.toolbar=new dd(t,{shouldGroupWhenFull:i.shouldToolbarGroupWhenFull}),_this120.editable=new Dl(t,e);return _this120;}_createClass(md,[{key:"render",value:function render(){_get(_getPrototypeOf(md.prototype),"render",this).call(this),this.stickyPanel.content.add(this.toolbar),this.top.add(this.stickyPanel),this.main.add(this.editable);}}]);return md;}(Ol);var gd=/*#__PURE__*/function(_$c){_inherits(gd,_$c);var _super64=_createSuper(gd);function gd(t,e){var _this121;_classCallCheck(this,gd);_this121=_super64.call(this,e),ii(t)&&(_this121.sourceElement=t),_this121.model.document.createRoot();var i=!_this121.config.get("toolbar.shouldNotGroupWhenFull"),n=new md(_this121.locale,_this121.editing.view,{shouldToolbarGroupWhenFull:i});_this121.ui=new al(_assertThisInitialized(_this121),n),function(t){if(!j(t.updateSourceElement))throw new ui.a("attachtoform-missing-elementapi-interface",t);var e=t.sourceElement;if(e&&"textarea"===e.tagName.toLowerCase()&&e.form){var _i209;var _n108=e.form,_o71=function _o71(){return t.updateSourceElement();};j(_n108.submit)&&(_i209=_n108.submit,_n108.submit=function(){_o71(),_i209.apply(_n108);}),_n108.addEventListener("submit",_o71),t.on("destroy",function(){_n108.removeEventListener("submit",_o71),_i209&&(_n108.submit=_i209);});}}(_assertThisInitialized(_this121));return _this121;}_createClass(gd,[{key:"destroy",value:function destroy(){return this.sourceElement&&this.updateSourceElement(),this.ui.destroy(),_get(_getPrototypeOf(gd.prototype),"destroy",this).call(this);}}],[{key:"create",value:function create(t){var _this122=this;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return new Promise(function(i){var n=new _this122(t,e);i(n.initPlugins().then(function(){return n.ui.init(ii(t)?t:null);}).then(function(){if(!ii(t)&&e.initialData)throw new ui.a("editor-create-initial-data",null);var i=e.initialData||function(t){return ii(t)?(e=t,e instanceof HTMLTextAreaElement?e.value:e.innerHTML):t;var e;}(t);return n.data.init(i);}).then(function(){return n.fire("ready");}).then(function(){return n;}));});}}]);return gd;}($c);yi(gd,Yc),yi(gd,Gc);var pd=/*#__PURE__*/function(){function pd(t){_classCallCheck(this,pd);this.editor=t,this.set("isEnabled",!0),this._disableStack=new Set();}_createClass(pd,[{key:"forceDisabled",value:function forceDisabled(t){this._disableStack.add(t),1==this._disableStack.size&&(this.on("set:isEnabled",bd,{priority:"highest"}),this.isEnabled=!1);}},{key:"clearForceDisabled",value:function clearForceDisabled(t){this._disableStack["delete"](t),0==this._disableStack.size&&(this.off("set:isEnabled",bd),this.isEnabled=!0);}},{key:"destroy",value:function destroy(){this.stopListening();}}],[{key:"isContextPlugin",get:function get(){return!1;}}]);return pd;}();function bd(t){t["return"]=!1,t.stop();}yi(pd,Un);var wd=/*#__PURE__*/function(){function wd(t){var _this123=this;_classCallCheck(this,wd);this.editor=t,this.set("value",void 0),this.set("isEnabled",!1),this._disableStack=new Set(),this.decorate("execute"),this.listenTo(this.editor.model.document,"change",function(){_this123.refresh();}),this.on("execute",function(t){_this123.isEnabled||t.stop();},{priority:"high"}),this.listenTo(t,"change:isReadOnly",function(t,e,i){i?_this123.forceDisabled("readOnlyMode"):_this123.clearForceDisabled("readOnlyMode");});}_createClass(wd,[{key:"refresh",value:function refresh(){this.isEnabled=!0;}},{key:"forceDisabled",value:function forceDisabled(t){this._disableStack.add(t),1==this._disableStack.size&&(this.on("set:isEnabled",kd,{priority:"highest"}),this.isEnabled=!1);}},{key:"clearForceDisabled",value:function clearForceDisabled(t){this._disableStack["delete"](t),0==this._disableStack.size&&(this.off("set:isEnabled",kd),this.refresh());}},{key:"execute",value:function execute(){}},{key:"destroy",value:function destroy(){this.stopListening();}}]);return wd;}();function kd(t){t["return"]=!1,t.stop();}function _d(t){var e=t.next();return e.done?null:e.value;}yi(wd,Un);var vd=["left","right","center","justify"];function yd(t){return vd.includes(t);}function xd(t,e){return"rtl"==e.contentLanguageDirection?"right"===t:"left"===t;}var Ad=/*#__PURE__*/function(_wd){_inherits(Ad,_wd);var _super65=_createSuper(Ad);function Ad(){_classCallCheck(this,Ad);return _super65.apply(this,arguments);}_createClass(Ad,[{key:"refresh",value:function refresh(){var t=this.editor.locale,e=_d(this.editor.model.document.selection.getSelectedBlocks());this.isEnabled=!!e&&this._canBeAligned(e),this.isEnabled&&e.hasAttribute("alignment")?this.value=e.getAttribute("alignment"):this.value="rtl"===t.contentLanguageDirection?"right":"left";}},{key:"execute",value:function execute(){var _this124=this;var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=this.editor,i=e.locale,n=e.model,o=n.document,r=t.value;n.change(function(t){var e=Array.from(o.selection.getSelectedBlocks()).filter(function(t){return _this124._canBeAligned(t);}),n=e[0].getAttribute("alignment");xd(r,i)||n===r||!r?function(t,e){var _iterator295=_createForOfIteratorHelper(t),_step295;try{for(_iterator295.s();!(_step295=_iterator295.n()).done;){var _i210=_step295.value;e.removeAttribute("alignment",_i210);}}catch(err){_iterator295.e(err);}finally{_iterator295.f();}}(e,t):function(t,e,i){var _iterator296=_createForOfIteratorHelper(t),_step296;try{for(_iterator296.s();!(_step296=_iterator296.n()).done;){var _n109=_step296.value;e.setAttribute("alignment",i,_n109);}}catch(err){_iterator296.e(err);}finally{_iterator296.f();}}(e,t,r);});}},{key:"_canBeAligned",value:function _canBeAligned(t){return this.editor.model.schema.checkAttribute(t,"alignment");}}]);return Ad;}(wd);var Td=/*#__PURE__*/function(_pd){_inherits(Td,_pd);var _super66=_createSuper(Td);function Td(t){var _this125;_classCallCheck(this,Td);_this125=_super66.call(this,t),t.config.define("alignment",{options:[].concat(vd)});return _this125;}_createClass(Td,[{key:"init",value:function init(){var t=this.editor,e=t.locale,i=t.model.schema,n=t.config.get("alignment.options").filter(yd);i.extend("$block",{allowAttributes:"alignment"}),t.model.schema.setAttributeProperties("alignment",{isFormatting:!0});var o=function(t){var e={model:{key:"alignment",values:t.slice()},view:{}};var _iterator297=_createForOfIteratorHelper(t),_step297;try{for(_iterator297.s();!(_step297=_iterator297.n()).done;){var _i211=_step297.value;e.view[_i211]={key:"style",value:{"text-align":_i211}};}}catch(err){_iterator297.e(err);}finally{_iterator297.f();}return e;}(n.filter(function(t){return!xd(t,e);}));t.conversion.attributeToAttribute(o),t.commands.add("alignment",new Ad(t));}}],[{key:"pluginName",get:function get(){return"AlignmentEditing";}}]);return Td;}(pd);var Cd='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',Sd='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18 3.75a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 8a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 4a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75zm0-8a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75z"/></svg>';var Ed=new Map([["left",Cd],["right",Sd],["center",'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm2.286 4c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75z"/></svg>'],["justify",'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>']]);var Pd=/*#__PURE__*/function(_pd2){_inherits(Pd,_pd2);var _super67=_createSuper(Pd);function Pd(){_classCallCheck(this,Pd);return _super67.apply(this,arguments);}_createClass(Pd,[{key:"localizedOptionTitles",get:function get(){var t=this.editor.t;return{left:t("Align left"),right:t("Align right"),center:t("Align center"),justify:t("Justify")};}},{key:"init",value:function init(){var _this126=this;var t=this.editor,e=t.ui.componentFactory,i=t.t,n=t.config.get("alignment.options");n.filter(yd).forEach(function(t){return _this126._addButton(t);}),e.add("alignment",function(t){var o=ad(t),r=n.map(function(t){return e.create("alignment:"+t);});cd(o,r),o.buttonView.set({label:i("Text alignment"),tooltip:!0}),o.toolbarView.isVertical=!0,o.toolbarView.ariaLabel=i("Text alignment toolbar"),o.extendTemplate({attributes:{"class":"ck-alignment-dropdown"}});var s="rtl"===t.contentLanguageDirection?Sd:Cd;return o.buttonView.bind("icon").toMany(r,"isOn",function(){for(var _len18=arguments.length,t=new Array(_len18),_key18=0;_key18<_len18;_key18++){t[_key18]=arguments[_key18];}var e=t.findIndex(function(t){return t;});return e<0?s:r[e].icon;}),o.bind("isEnabled").toMany(r,"isEnabled",function(){for(var _len19=arguments.length,t=new Array(_len19),_key19=0;_key19<_len19;_key19++){t[_key19]=arguments[_key19];}return t.some(function(t){return t;});}),o;});}},{key:"_addButton",value:function _addButton(t){var _this127=this;var e=this.editor;e.ui.componentFactory.add("alignment:"+t,function(i){var n=e.commands.get("alignment"),o=new Xl(i);return o.set({label:_this127.localizedOptionTitles[t],icon:Ed.get(t),tooltip:!0,isToggleable:!0}),o.bind("isEnabled").to(n),o.bind("isOn").to(n,"value",function(e){return e===t;}),_this127.listenTo(o,"execute",function(){e.execute("alignment",{value:t}),e.editing.view.focus();}),o;});}}],[{key:"pluginName",get:function get(){return"AlignmentUI";}}]);return Pd;}(pd);var Md=/*#__PURE__*/function(){function Md(t){_classCallCheck(this,Md);this.files=function(t){var e=t.files?Array.from(t.files):[],i=t.items?Array.from(t.items):[];if(e.length)return e;return i.filter(function(t){return"file"===t.kind;}).map(function(t){return t.getAsFile();});}(t),this._native=t;}_createClass(Md,[{key:"types",get:function get(){return this._native.types;}},{key:"getData",value:function getData(t){return this._native.getData(t);}},{key:"setData",value:function setData(t,e){this._native.setData(t,e);}}]);return Md;}();var Id=/*#__PURE__*/function(_Vr5){_inherits(Id,_Vr5);var _super68=_createSuper(Id);function Id(t){var _this128;_classCallCheck(this,Id);_this128=_super68.call(this,t);var e=_this128.document;function i(t,i){i.preventDefault();var n=i.dropRange?[i.dropRange]:Array.from(e.selection.getRanges()),o=new ai(e,"clipboardInput");e.fire(o,{dataTransfer:i.dataTransfer,targetRanges:n}),o.stop.called&&i.stopPropagation();}_this128.domEventType=["paste","copy","cut","drop","dragover"],_this128.listenTo(e,"paste",i,{priority:"low"}),_this128.listenTo(e,"drop",i,{priority:"low"});return _this128;}_createClass(Id,[{key:"onDomEvent",value:function onDomEvent(t){var e={dataTransfer:new Md(t.clipboardData?t.clipboardData:t.dataTransfer)};"drop"==t.type&&(e.dropRange=function(t,e){var i=e.target.ownerDocument,n=e.clientX,o=e.clientY;var r;i.caretRangeFromPoint&&i.caretRangeFromPoint(n,o)?r=i.caretRangeFromPoint(n,o):e.rangeParent&&(r=i.createRange(),r.setStart(e.rangeParent,e.rangeOffset),r.collapse(!0));return r?t.domConverter.domRangeToView(r):t.document.selection.getFirstRange();}(this.view,t)),this.fire(t.type,t,e);}}]);return Id;}(Vr);var Nd=/*#__PURE__*/function(_pd3){_inherits(Nd,_pd3);var _super69=_createSuper(Nd);function Nd(){_classCallCheck(this,Nd);return _super69.apply(this,arguments);}_createClass(Nd,[{key:"init",value:function init(){var t=this.editor.editing.view,e=t.document;var i=!1;t.addObserver(Id),this.listenTo(e,"keydown",function(t,e){i=e.shiftKey;}),this.listenTo(e,"clipboardInput",function(t,e){i&&(e.asPlainText=!0);},{priority:"high"});}}],[{key:"pluginName",get:function get(){return"PastePlainText";}}]);return Nd;}(pd);var Od=["figcaption","li"];var Rd=/*#__PURE__*/function(_pd4){_inherits(Rd,_pd4);var _super70=_createSuper(Rd);function Rd(){_classCallCheck(this,Rd);return _super70.apply(this,arguments);}_createClass(Rd,[{key:"init",value:function init(){var _this129=this;var t=this.editor,e=t.model.document,i=t.editing.view,n=i.document;function o(i,o){var r=o.dataTransfer;o.preventDefault();var s=t.data.toView(t.model.getSelectedContent(e.selection));n.fire("clipboardOutput",{dataTransfer:r,content:s,method:i.name});}i.addObserver(Id),this.listenTo(n,"clipboardInput",function(e){t.isReadOnly&&e.stop();},{priority:"highest"}),this.listenTo(n,"clipboardInput",function(t,e){var n=e.dataTransfer;var o="";var r;n.getData("text/html")?o=function(t){return t.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,function(t,e){return 1==e.length?" ":e;});}(n.getData("text/html")):n.getData("text/plain")&&(((r=(r=n.getData("text/plain")).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br>").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;")).includes("</p><p>")||r.includes("<br>"))&&(r="<p>".concat(r,"</p>")),o=r),o=_this129.editor.data.htmlProcessor.toView(o);var s=new ai(_this129,"inputTransformation");_this129.fire(s,{content:o,dataTransfer:n,asPlainText:e.asPlainText}),s.stop.called&&t.stop(),i.scrollToTheSelection();},{priority:"low"}),this.listenTo(this,"inputTransformation",function(t,e){if(!e.content.isEmpty){var _i212=_this129.editor.data,_n110=_this129.editor.model,_o72=_i212.toModel(e.content,"$clipboardHolder");if(0==_o72.childCount)return;_n110.change(function(t){var i=_n110.document.selection;if(e.asPlainText||function(t,e){if(t.childCount>1)return!1;var i=t.getChild(0);if(e.isObject(i))return!1;return 0==_toConsumableArray(i.getAttributeKeys()).length;}(_o72,_n110.schema)){var _e206=Array.from(i.getAttributes()).filter(function(_ref36){var _ref37=_slicedToArray(_ref36,1),t=_ref37[0];return _n110.schema.getAttributeProperties(t).isFormatting;});i.isCollapsed||_n110.deleteContent(i,{doNotAutoparagraph:!0}),_e206.push.apply(_e206,_toConsumableArray(i.getAttributes()));var _r31=t.createRangeIn(_o72);var _iterator298=_createForOfIteratorHelper(_r31.getItems()),_step298;try{for(_iterator298.s();!(_step298=_iterator298.n()).done;){var _i213=_step298.value;(_i213.is("$text")||_i213.is("$textProxy"))&&t.setAttributes(_e206,_i213);}}catch(err){_iterator298.e(err);}finally{_iterator298.f();}}_n110.insertContent(_o72);}),t.stop();}},{priority:"low"}),this.listenTo(n,"copy",o,{priority:"low"}),this.listenTo(n,"cut",function(e,i){t.isReadOnly?i.preventDefault():o(e,i);},{priority:"low"}),this.listenTo(n,"clipboardOutput",function(i,n){n.content.isEmpty||(n.dataTransfer.setData("text/html",_this129.editor.data.htmlProcessor.toData(n.content)),n.dataTransfer.setData("text/plain",function t(e){var i="";if(e.is("$text")||e.is("$textProxy"))i=e.data;else if(e.is("element","img")&&e.hasAttribute("alt"))i=e.getAttribute("alt");else if(e.is("element","br"))i="\n";else{var _n111=null;var _iterator299=_createForOfIteratorHelper(e.getChildren()),_step299;try{for(_iterator299.s();!(_step299=_iterator299.n()).done;){var _o73=_step299.value;var _e207=t(_o73);_n111&&(_n111.is("containerElement")||_o73.is("containerElement"))&&(Od.includes(_n111.name)||Od.includes(_o73.name)?i+="\n":i+="\n\n"),i+=_e207,_n111=_o73;}}catch(err){_iterator299.e(err);}finally{_iterator299.f();}}return i;}(n.content))),"cut"==n.method&&t.model.deleteContent(e.selection);},{priority:"low"});}}],[{key:"pluginName",get:function get(){return"Clipboard";}},{key:"requires",get:function get(){return[Nd];}}]);return Rd;}(pd);function Dd(t,e){var _iterator300,_step300,_i214;return regeneratorRuntime.wrap(function Dd$(_context37){while(1){switch(_context37.prev=_context37.next){case 0:_iterator300=_createForOfIteratorHelper(e);_context37.prev=1;_iterator300.s();case 3:if((_step300=_iterator300.n()).done){_context37.next=11;break;}_i214=_step300.value;_context37.t0=_i214&&t.getAttributeProperties(_i214[0]).copyOnEnter;if(!_context37.t0){_context37.next=9;break;}_context37.next=9;return _i214;case 9:_context37.next=3;break;case 11:_context37.next=16;break;case 13:_context37.prev=13;_context37.t1=_context37["catch"](1);_iterator300.e(_context37.t1);case 16:_context37.prev=16;_iterator300.f();return _context37.finish(16);case 19:case"end":return _context37.stop();}}},_marked3,null,[[1,13,16,19]]);}var Ld=/*#__PURE__*/function(_wd2){_inherits(Ld,_wd2);var _super71=_createSuper(Ld);function Ld(){_classCallCheck(this,Ld);return _super71.apply(this,arguments);}_createClass(Ld,[{key:"execute",value:function execute(){var _this130=this;var t=this.editor.model,e=t.document;t.change(function(i){!function(t,e,i,n){var o=i.isCollapsed,r=i.getFirstRange(),s=r.start.parent,a=r.end.parent;if(n.isLimit(s)||n.isLimit(a))return void(o||s!=a||t.deleteContent(i));if(o){var _t226=Dd(e.model.schema,i.getAttributes());zd(e,r.start),e.setSelectionAttribute(_t226);}else{var _n112=!(r.start.isAtStart&&r.end.isAtEnd),_o74=s==a;t.deleteContent(i,{leaveUnmerged:_n112}),_n112&&(_o74?zd(e,i.focus):e.setSelection(a,0));}}(_this130.editor.model,i,e.selection,t.schema),_this130.fire("afterExecute",{writer:i});});}}]);return Ld;}(wd);function zd(t,e){t.split(e),t.setSelection(e.parent.nextSibling,0);}var Vd=/*#__PURE__*/function(_br5){_inherits(Vd,_br5);var _super72=_createSuper(Vd);function Vd(t){var _this131;_classCallCheck(this,Vd);_this131=_super72.call(this,t);var e=_this131.document;e.on("keydown",function(t,i){if(_this131.isEnabled&&i.keyCode==po.enter){var _n113;e.once("enter",function(t){return _n113=t;},{priority:"highest"}),e.fire("enter",new zr(e,i.domEvent,{isSoft:i.shiftKey})),_n113&&_n113.stop.called&&t.stop();}});return _this131;}_createClass(Vd,[{key:"observe",value:function observe(){}}]);return Vd;}(br);var jd=/*#__PURE__*/function(_pd5){_inherits(jd,_pd5);var _super73=_createSuper(jd);function jd(){_classCallCheck(this,jd);return _super73.apply(this,arguments);}_createClass(jd,[{key:"init",value:function init(){var t=this.editor,e=t.editing.view,i=e.document;e.addObserver(Vd),t.commands.add("enter",new Ld(t)),this.listenTo(i,"enter",function(i,n){n.preventDefault(),n.isSoft||(t.execute("enter"),e.scrollToTheSelection());},{priority:"low"});}}],[{key:"pluginName",get:function get(){return"Enter";}}]);return jd;}(pd);var Bd=/*#__PURE__*/function(_wd3){_inherits(Bd,_wd3);var _super74=_createSuper(Bd);function Bd(){_classCallCheck(this,Bd);return _super74.apply(this,arguments);}_createClass(Bd,[{key:"execute",value:function execute(){var _this132=this;var t=this.editor.model,e=t.document;t.change(function(i){!function(t,e,i){var n=i.isCollapsed,o=i.getFirstRange(),r=o.start.parent,s=o.end.parent,a=r==s;if(n){var _n114=Dd(t.schema,i.getAttributes());Fd(t,e,o.end),e.removeSelectionAttribute(i.getAttributeKeys()),e.setSelectionAttribute(_n114);}else{var _n115=!(o.start.isAtStart&&o.end.isAtEnd);t.deleteContent(i,{leaveUnmerged:_n115}),a?Fd(t,e,i.focus):_n115&&e.setSelection(s,0);}}(t,i,e.selection),_this132.fire("afterExecute",{writer:i});});}},{key:"refresh",value:function refresh(){var t=this.editor.model,e=t.document;this.isEnabled=function(t,e){if(e.rangeCount>1)return!1;var i=e.anchor;if(!i||!t.checkChild(i,"softBreak"))return!1;var n=e.getFirstRange(),o=n.start.parent,r=n.end.parent;if((Hd(o,t)||Hd(r,t))&&o!==r)return!1;return!0;}(t.schema,e.selection);}}]);return Bd;}(wd);function Fd(t,e,i){var n=e.createElement("softBreak");t.insertContent(n,i),e.setSelection(n,"after");}function Hd(t,e){return!t.is("rootElement")&&(e.isLimit(t)||Hd(t.parent,e));}var Ud=/*#__PURE__*/function(_pd6){_inherits(Ud,_pd6);var _super75=_createSuper(Ud);function Ud(){_classCallCheck(this,Ud);return _super75.apply(this,arguments);}_createClass(Ud,[{key:"init",value:function init(){var t=this.editor,e=t.model.schema,i=t.conversion,n=t.editing.view,o=n.document;e.register("softBreak",{allowWhere:"$text",isInline:!0}),i["for"]("upcast").elementToElement({model:"softBreak",view:"br"}),i["for"]("downcast").elementToElement({model:"softBreak",view:function view(t,_ref38){var e=_ref38.writer;return e.createEmptyElement("br");}}),n.addObserver(Vd),t.commands.add("shiftEnter",new Bd(t)),this.listenTo(o,"enter",function(e,i){i.preventDefault(),i.isSoft&&(t.execute("shiftEnter"),n.scrollToTheSelection());},{priority:"low"});}}],[{key:"pluginName",get:function get(){return"ShiftEnter";}}]);return Ud;}(pd);var Wd=/*#__PURE__*/function(_wd4){_inherits(Wd,_wd4);var _super76=_createSuper(Wd);function Wd(){_classCallCheck(this,Wd);return _super76.apply(this,arguments);}_createClass(Wd,[{key:"execute",value:function execute(){var t=this.editor.model,e=t.document.selection;var i=t.schema.getLimitElement(e);if(e.containsEntireContent(i)||!qd(t.schema,i))do{if(i=i.parent,!i)return;}while(!qd(t.schema,i));t.change(function(t){t.setSelection(i,"in");});}}]);return Wd;}(wd);function qd(t,e){return t.isLimit(e)&&(t.checkChild(e,"$text")||t.checkChild(e,"paragraph"));}var $d=ko("Ctrl+A");var Yd=/*#__PURE__*/function(_pd7){_inherits(Yd,_pd7);var _super77=_createSuper(Yd);function Yd(){_classCallCheck(this,Yd);return _super77.apply(this,arguments);}_createClass(Yd,[{key:"init",value:function init(){var t=this.editor,e=t.editing.view.document;t.commands.add("selectAll",new Wd(t)),this.listenTo(e,"keydown",function(e,i){wo(i)===$d&&(t.execute("selectAll"),i.preventDefault());});}}],[{key:"pluginName",get:function get(){return"SelectAllEditing";}}]);return Yd;}(pd);var Gd=/*#__PURE__*/function(_pd8){_inherits(Gd,_pd8);var _super78=_createSuper(Gd);function Gd(){_classCallCheck(this,Gd);return _super78.apply(this,arguments);}_createClass(Gd,[{key:"init",value:function init(){var _this133=this;var t=this.editor;t.ui.componentFactory.add("selectAll",function(e){var i=t.commands.get("selectAll"),n=new Xl(e),o=e.t;return n.set({label:o("Select all"),icon:'<svg width="20" height="20" xmlns="http://www.w3.org/2000/svg"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75zm18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75zm-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5h2.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5h5.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0h2.25zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5h2.25zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6z"/></svg>',keystroke:"Ctrl+A",tooltip:!0}),n.bind("isOn","isEnabled").to(i,"value","isEnabled"),_this133.listenTo(n,"execute",function(){t.execute("selectAll"),t.editing.view.focus();}),n;});}}],[{key:"pluginName",get:function get(){return"SelectAllUI";}}]);return Gd;}(pd);var Kd=/*#__PURE__*/function(_pd9){_inherits(Kd,_pd9);var _super79=_createSuper(Kd);function Kd(){_classCallCheck(this,Kd);return _super79.apply(this,arguments);}_createClass(Kd,null,[{key:"requires",get:function get(){return[Yd,Gd];}},{key:"pluginName",get:function get(){return"SelectAll";}}]);return Kd;}(pd);var Qd=/*#__PURE__*/function(){function Qd(t){var _this134=this;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:20;_classCallCheck(this,Qd);this.model=t,this.size=0,this.limit=e,this.isLocked=!1,this._changeCallback=function(t,e){"transparent"!=e.type&&e!==_this134._batch&&_this134._reset(!0);},this._selectionChangeCallback=function(){_this134._reset();},this.model.document.on("change",this._changeCallback),this.model.document.selection.on("change:range",this._selectionChangeCallback),this.model.document.selection.on("change:attribute",this._selectionChangeCallback);}_createClass(Qd,[{key:"batch",get:function get(){return this._batch||(this._batch=this.model.createBatch()),this._batch;}},{key:"input",value:function input(t){this.size+=t,this.size>=this.limit&&this._reset(!0);}},{key:"lock",value:function lock(){this.isLocked=!0;}},{key:"unlock",value:function unlock(){this.isLocked=!1;}},{key:"destroy",value:function destroy(){this.model.document.off("change",this._changeCallback),this.model.document.selection.off("change:range",this._selectionChangeCallback),this.model.document.selection.off("change:attribute",this._selectionChangeCallback);}},{key:"_reset",value:function _reset(t){this.isLocked&&!t||(this._batch=null,this.size=0);}}]);return Qd;}();var Jd=/*#__PURE__*/function(_wd5){_inherits(Jd,_wd5);var _super80=_createSuper(Jd);function Jd(t,e){var _this135;_classCallCheck(this,Jd);_this135=_super80.call(this,t),_this135._buffer=new Qd(t.model,e),_this135._batches=new WeakSet();return _this135;}_createClass(Jd,[{key:"buffer",get:function get(){return this._buffer;}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(Jd.prototype),"destroy",this).call(this),this._buffer.destroy();}},{key:"execute",value:function execute(){var _this136=this;var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=this.editor.model,i=e.document,n=t.text||"",o=n.length,r=t.range?e.createSelection(t.range):i.selection,s=t.resultRange;e.enqueueChange(this._buffer.batch,function(t){_this136._buffer.lock(),_this136._batches.add(_this136._buffer.batch),e.deleteContent(r),n&&e.insertContent(t.createText(n,i.selection.getAttributes()),r),s?t.setSelection(s):r.is("documentSelection")||t.setSelection(r),_this136._buffer.unlock(),_this136._buffer.input(o);});}}]);return Jd;}(wd);var Zd=[wo("arrowUp"),wo("arrowRight"),wo("arrowDown"),wo("arrowLeft"),9,16,17,18,19,20,27,33,34,35,36,45,91,93,144,145,173,174,175,176,177,178,179,255];for(var _t227=112;_t227<=135;_t227++){Zd.push(_t227);}function Xd(t){return!(!t.ctrlKey&&!t.metaKey)||Zd.includes(t.keyCode);}function tu(t){if(t.newChildren.length-t.oldChildren.length!=1)return;var e=function(t,e){var i=[];var n,o=0;return t.forEach(function(t){"equal"==t?(r(),o++):"insert"==t?(s("insert")?n.values.push(e[o]):(r(),n={type:"insert",index:o,values:[e[o]]}),o++):s("delete")?n.howMany++:(r(),n={type:"delete",index:o,howMany:1});}),r(),i;function r(){n&&(i.push(n),n=null);}function s(t){return n&&n.type==t;}}(Jo(t.oldChildren,t.newChildren,eu),t.newChildren);if(e.length>1)return;var i=e[0];return i.values[0]&&i.values[0].is("$text")?i:void 0;}function eu(t,e){return t&&t.is("$text")&&e&&e.is("$text")?t.data===e.data:t===e;}var iu=/*#__PURE__*/function(){function iu(t){_classCallCheck(this,iu);this.editor=t,this.editing=this.editor.editing;}_createClass(iu,[{key:"handle",value:function handle(t,e){if(function(t){if(0==t.length)return!1;var _iterator301=_createForOfIteratorHelper(t),_step301;try{for(_iterator301.s();!(_step301=_iterator301.n()).done;){var _e208=_step301.value;if("children"===_e208.type&&!tu(_e208))return!0;}}catch(err){_iterator301.e(err);}finally{_iterator301.f();}return!1;}(t))this._handleContainerChildrenMutations(t,e);else{var _iterator302=_createForOfIteratorHelper(t),_step302;try{for(_iterator302.s();!(_step302=_iterator302.n()).done;){var _i215=_step302.value;this._handleTextMutation(_i215,e),this._handleTextNodeInsertion(_i215);}}catch(err){_iterator302.e(err);}finally{_iterator302.f();}}}},{key:"_handleContainerChildrenMutations",value:function _handleContainerChildrenMutations(t,e){var i=function(t){var e=t.map(function(t){return t.node;}).reduce(function(t,e){return t.getCommonAncestor(e,{includeSelf:!0});});if(!e)return;return e.getAncestors({includeSelf:!0,parentFirst:!0}).find(function(t){return t.is("containerElement")||t.is("rootElement");});}(t);if(!i)return;var n=this.editor.editing.view.domConverter.mapViewToDom(i),o=new lr(this.editor.editing.view.document),r=this.editor.data.toModel(o.domToView(n)).getChild(0),s=this.editor.editing.mapper.toModelElement(i);if(!s)return;var a=Array.from(r.getChildren()),c=Array.from(s.getChildren()),l=a[a.length-1],d=c[c.length-1],u=l&&l.is("element","softBreak"),h=d&&!d.is("element","softBreak");u&&h&&a.pop();var f=this.editor.model.schema;if(!nu(a,f)||!nu(c,f))return;var m=a.map(function(t){return t.is("$text")?t.data:"@";}).join("").replace(/\u00A0/g," "),g=c.map(function(t){return t.is("$text")?t.data:"@";}).join("").replace(/\u00A0/g," ");if(g===m)return;var p=Jo(g,m),_ou=ou(p),b=_ou.firstChangeAt,w=_ou.insertions,k=_ou.deletions;var _=null;e&&(_=this.editing.mapper.toModelRange(e.getFirstRange()));var v=m.substr(b,w),y=this.editor.model.createRange(this.editor.model.createPositionAt(s,b),this.editor.model.createPositionAt(s,b+k));this.editor.execute("input",{text:v,range:y,resultRange:_});}},{key:"_handleTextMutation",value:function _handleTextMutation(t,e){if("text"!=t.type)return;var i=t.newText.replace(/\u00A0/g," "),n=t.oldText.replace(/\u00A0/g," ");if(n===i)return;var o=Jo(n,i),_ou2=ou(o),r=_ou2.firstChangeAt,s=_ou2.insertions,a=_ou2.deletions;var c=null;e&&(c=this.editing.mapper.toModelRange(e.getFirstRange()));var l=this.editing.view.createPositionAt(t.node,r),d=this.editing.mapper.toModelPosition(l),u=this.editor.model.createRange(d,d.getShiftedBy(a)),h=i.substr(r,s);this.editor.execute("input",{text:h,range:u,resultRange:c});}},{key:"_handleTextNodeInsertion",value:function _handleTextNodeInsertion(t){if("children"!=t.type)return;var e=tu(t),i=this.editing.view.createPositionAt(t.node,e.index),n=this.editing.mapper.toModelPosition(i),o=e.values[0].data;this.editor.execute("input",{text:o.replace(/\u00A0/g," "),range:this.editor.model.createRange(n)});}}]);return iu;}();function nu(t,e){return t.every(function(t){return e.isInline(t);});}function ou(t){var e=null,i=null;for(var _n116=0;_n116<t.length;_n116++){"equal"!=t[_n116]&&(e=null===e?_n116:e,i=_n116);}var n=0,o=0;for(var _r32=e;_r32<=i;_r32++){"insert"!=t[_r32]&&n++,"delete"!=t[_r32]&&o++;}return{insertions:o,deletions:n,firstChangeAt:e};}var ru=/*#__PURE__*/function(_pd10){_inherits(ru,_pd10);var _super81=_createSuper(ru);function ru(){_classCallCheck(this,ru);return _super81.apply(this,arguments);}_createClass(ru,[{key:"init",value:function init(){var t=this.editor,e=new Jd(t,t.config.get("typing.undoStep")||20);t.commands.add("input",e),function(t){var e=null;var i=t.model,n=t.editing.view,o=t.commands.get("input");function r(t){var r=i.document,a=n.document.isComposing,c=e&&e.isEqual(r.selection);e=null,o.isEnabled&&(Xd(t)||r.selection.isCollapsed||a&&229===t.keyCode||!a&&229===t.keyCode&&c||s());}function s(){var t=o.buffer;t.lock();var e=t.batch;o._batches.add(e),i.enqueueChange(e,function(){i.deleteContent(i.document.selection);}),t.unlock();}fo.isAndroid?n.document.on("beforeinput",function(t,e){return r(e);},{priority:"lowest"}):n.document.on("keydown",function(t,e){return r(e);},{priority:"lowest"}),n.document.on("compositionstart",function(){var t=i.document,e=1!==t.selection.rangeCount||t.selection.getFirstRange().isFlat;if(t.selection.isCollapsed||e)return;s();},{priority:"lowest"}),n.document.on("compositionend",function(){e=i.createSelection(i.document.selection);},{priority:"lowest"});}(t),function(t){t.editing.view.document.on("mutations",function(e,i,n){new iu(t).handle(i,n);});}(t);}},{key:"isInput",value:function isInput(t){return this.editor.commands.get("input")._batches.has(t);}}],[{key:"pluginName",get:function get(){return"Input";}}]);return ru;}(pd);var su=/*#__PURE__*/function(_wd6){_inherits(su,_wd6);var _super82=_createSuper(su);function su(t,e){var _this137;_classCallCheck(this,su);_this137=_super82.call(this,t),_this137.direction=e,_this137._buffer=new Qd(t.model,t.config.get("typing.undoStep"));return _this137;}_createClass(su,[{key:"buffer",get:function get(){return this._buffer;}},{key:"execute",value:function execute(){var _this138=this;var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=this.editor.model,i=e.document;e.enqueueChange(this._buffer.batch,function(n){_this138._buffer.lock();var o=n.createSelection(t.selection||i.selection),r=t.sequence||1,s=o.isCollapsed;if(o.isCollapsed&&e.modifySelection(o,{direction:_this138.direction,unit:t.unit}),_this138._shouldEntireContentBeReplacedWithParagraph(r))return void _this138._replaceEntireContentWithParagraph(n);if(_this138._shouldReplaceFirstBlockWithParagraph(o,r))return void _this138.editor.execute("paragraph",{selection:o});if(o.isCollapsed)return;var a=0;o.getFirstRange().getMinimalFlatRanges().forEach(function(t){a+=io(t.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}));}),e.deleteContent(o,{doNotResetEntireContent:s,direction:_this138.direction}),_this138._buffer.input(a),n.setSelection(o),_this138._buffer.unlock();});}},{key:"_shouldEntireContentBeReplacedWithParagraph",value:function _shouldEntireContentBeReplacedWithParagraph(t){if(t>1)return!1;var e=this.editor.model,i=e.document.selection,n=e.schema.getLimitElement(i);if(!(i.isCollapsed&&i.containsEntireContent(n)))return!1;if(!e.schema.checkChild(n,"paragraph"))return!1;var o=n.getChild(0);return!o||"paragraph"!==o.name;}},{key:"_replaceEntireContentWithParagraph",value:function _replaceEntireContentWithParagraph(t){var e=this.editor.model,i=e.document.selection,n=e.schema.getLimitElement(i),o=t.createElement("paragraph");t.remove(t.createRangeIn(n)),t.insert(o,n),t.setSelection(o,0);}},{key:"_shouldReplaceFirstBlockWithParagraph",value:function _shouldReplaceFirstBlockWithParagraph(t,e){var i=this.editor.model;if(e>1||"backward"!=this.direction)return!1;if(!t.isCollapsed)return!1;var n=t.getFirstPosition(),o=i.schema.getLimitElement(n),r=o.getChild(0);return n.parent==r&&!!t.containsEntireContent(r)&&!!i.schema.checkChild(o,"paragraph")&&"paragraph"!=r.name;}}]);return su;}(wd);var au=/*#__PURE__*/function(_br6){_inherits(au,_br6);var _super83=_createSuper(au);function au(t){var _this139;_classCallCheck(this,au);_this139=_super83.call(this,t);var e=t.document;var i=0;function n(t,i,n){var o;e.once("delete",function(t){return o=t;},{priority:Number.POSITIVE_INFINITY}),e.fire("delete",new zr(e,i,n)),o&&o.stop.called&&t.stop();}e.on("keyup",function(t,e){e.keyCode!=po["delete"]&&e.keyCode!=po.backspace||(i=0);}),e.on("keydown",function(t,e){var o={};if(e.keyCode==po["delete"])o.direction="forward",o.unit="character";else{if(e.keyCode!=po.backspace)return;o.direction="backward",o.unit="codePoint";}var r=fo.isMac?e.altKey:e.ctrlKey;o.unit=r?"word":o.unit,o.sequence=++i,n(t,e.domEvent,o);}),fo.isAndroid&&e.on("beforeinput",function(i,o){if("deleteContentBackward"!=o.domEvent.inputType)return;var r={unit:"codepoint",direction:"backward",sequence:1},s=e.getElementsByTagName("mobi-html-editor")[0].shadowRoot.getSelection();s.anchorNode==s.focusNode&&s.anchorOffset+1!=s.focusOffset&&(r.selectionToRemove=t.domConverter.domSelectionToView(s)),n(i,o.domEvent,r);});return _this139;}_createClass(au,[{key:"observe",value:function observe(){}}]);return au;}(br);var cu=/*#__PURE__*/function(_pd11){_inherits(cu,_pd11);var _super84=_createSuper(cu);function cu(){_classCallCheck(this,cu);return _super84.apply(this,arguments);}_createClass(cu,[{key:"init",value:function init(){var t=this.editor,e=t.editing.view,i=e.document;if(e.addObserver(au),t.commands.add("forwardDelete",new su(t,"forward")),t.commands.add("delete",new su(t,"backward")),this.listenTo(i,"delete",function(i,n){var o={unit:n.unit,sequence:n.sequence};if(n.selectionToRemove){var _e209=t.model.createSelection(),_i216=[];var _iterator303=_createForOfIteratorHelper(n.selectionToRemove.getRanges()),_step303;try{for(_iterator303.s();!(_step303=_iterator303.n()).done;){var _e210=_step303.value;_i216.push(t.editing.mapper.toModelRange(_e210));}}catch(err){_iterator303.e(err);}finally{_iterator303.f();}_e209.setTo(_i216),o.selection=_e209;}t.execute("forward"==n.direction?"forwardDelete":"delete",o),n.preventDefault(),e.scrollToTheSelection();}),fo.isAndroid){var _t228=null;this.listenTo(i,"delete",function(e,i){var n=document.getElementsByTagName("mobi-html-editor")[0].shadowRoot.getSelection();_t228={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset};},{priority:"lowest"}),this.listenTo(i,"keyup",function(e,i){if(_t228){var _e211=document.getElementsByTagName("mobi-html-editor")[0].shadowRoot.getSelection();_e211.collapse(_t228.anchorNode,_t228.anchorOffset),_e211.extend(_t228.focusNode,_t228.focusOffset),_t228=null;}});}}}],[{key:"pluginName",get:function get(){return"Delete";}}]);return cu;}(pd);var lu=/*#__PURE__*/function(_pd12){_inherits(lu,_pd12);var _super85=_createSuper(lu);function lu(){_classCallCheck(this,lu);return _super85.apply(this,arguments);}_createClass(lu,null,[{key:"requires",get:function get(){return[ru,cu];}},{key:"pluginName",get:function get(){return"Typing";}}]);return lu;}(pd);var du=new Map();function uu(t,e,i){var n=du.get(t);n||(n=new Map(),du.set(t,n)),n.set(e,i);}function hu(t){return[t];}function fu(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var n=function(t,e){var i=du.get(t);return i&&i.has(e)?i.get(e):hu;}(t.constructor,e.constructor);try{return n(t=t.clone(),e,i);}catch(t){throw t;}}function mu(t,e,i){t=t.slice(),e=e.slice();var n=new gu(i.document,i.useRelations,i.forceWeakRemove);n.setOriginalOperations(t),n.setOriginalOperations(e);var o=n.originalOperations;if(0==t.length||0==e.length)return{operationsA:t,operationsB:e,originalOperations:o};var r=new WeakMap();var _iterator304=_createForOfIteratorHelper(t),_step304;try{for(_iterator304.s();!(_step304=_iterator304.n()).done;){var _e213=_step304.value;r.set(_e213,0);}}catch(err){_iterator304.e(err);}finally{_iterator304.f();}var s={nextBaseVersionA:t[t.length-1].baseVersion+1,nextBaseVersionB:e[e.length-1].baseVersion+1,originalOperationsACount:t.length,originalOperationsBCount:e.length};var a=0;for(;a<t.length;){var _t229,_e212;var _i217=t[a],_o75=r.get(_i217);if(_o75==e.length){a++;continue;}var _s23=e[_o75],_c6=fu(_i217,_s23,n.getContext(_i217,_s23,!0)),_l3=fu(_s23,_i217,n.getContext(_s23,_i217,!1));n.updateRelation(_i217,_s23),n.setOriginalOperations(_c6,_i217),n.setOriginalOperations(_l3,_s23);var _iterator305=_createForOfIteratorHelper(_c6),_step305;try{for(_iterator305.s();!(_step305=_iterator305.n()).done;){var _t230=_step305.value;r.set(_t230,_o75+_l3.length);}}catch(err){_iterator305.e(err);}finally{_iterator305.f();}(_t229=t).splice.apply(_t229,[a,1].concat(_toConsumableArray(_c6))),(_e212=e).splice.apply(_e212,[_o75,1].concat(_toConsumableArray(_l3)));}if(i.padWithNoOps){var _i218=t.length-s.originalOperationsACount,_n117=e.length-s.originalOperationsBCount;bu(t,_n117-_i218),bu(e,_i218-_n117);}return pu(t,s.nextBaseVersionB),pu(e,s.nextBaseVersionA),{operationsA:t,operationsB:e,originalOperations:o};}var gu=/*#__PURE__*/function(){function gu(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:!1;_classCallCheck(this,gu);this.originalOperations=new Map(),this._history=t.history,this._useRelations=e,this._forceWeakRemove=!!i,this._relations=new Map();}_createClass(gu,[{key:"setOriginalOperations",value:function setOriginalOperations(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var i=e?this.originalOperations.get(e):null;var _iterator306=_createForOfIteratorHelper(t),_step306;try{for(_iterator306.s();!(_step306=_iterator306.n()).done;){var _e214=_step306.value;this.originalOperations.set(_e214,i||_e214);}}catch(err){_iterator306.e(err);}finally{_iterator306.f();}}},{key:"updateRelation",value:function updateRelation(t,e){switch(t.constructor){case Xa:switch(e.constructor){case oc:t.targetPosition.isEqual(e.sourcePosition)||e.movedRange.containsPosition(t.targetPosition)?this._setRelation(t,e,"insertAtSource"):t.targetPosition.isEqual(e.deletionPosition)?this._setRelation(t,e,"insertBetween"):t.targetPosition.isAfter(e.sourcePosition)&&this._setRelation(t,e,"moveTargetAfter");break;case Xa:t.targetPosition.isEqual(e.sourcePosition)||t.targetPosition.isBefore(e.sourcePosition)?this._setRelation(t,e,"insertBefore"):this._setRelation(t,e,"insertAfter");}break;case rc:switch(e.constructor){case oc:t.splitPosition.isBefore(e.sourcePosition)&&this._setRelation(t,e,"splitBefore");break;case Xa:if(t.splitPosition.isEqual(e.sourcePosition)||t.splitPosition.isBefore(e.sourcePosition))this._setRelation(t,e,"splitBefore");else{var _i219=Ns._createFromPositionAndShift(e.sourcePosition,e.howMany);if(t.splitPosition.hasSameParentAs(e.sourcePosition)&&_i219.containsPosition(t.splitPosition)){var _n118=_i219.end.offset-t.splitPosition.offset,_o76=t.splitPosition.offset-_i219.start.offset;this._setRelation(t,e,{howMany:_n118,offset:_o76});}}}break;case oc:switch(e.constructor){case oc:t.targetPosition.isEqual(e.sourcePosition)||this._setRelation(t,e,"mergeTargetNotMoved"),t.sourcePosition.isEqual(e.targetPosition)&&this._setRelation(t,e,"mergeSourceNotMoved"),t.sourcePosition.isEqual(e.sourcePosition)&&this._setRelation(t,e,"mergeSameElement");break;case rc:t.sourcePosition.isEqual(e.splitPosition)&&this._setRelation(t,e,"splitAtSource");}break;case ec:{var _i220=t.newRange;if(!_i220)return;switch(e.constructor){case Xa:{var _n119=Ns._createFromPositionAndShift(e.sourcePosition,e.howMany),_o77=_n119.containsPosition(_i220.start)||_n119.start.isEqual(_i220.start),_r33=_n119.containsPosition(_i220.end)||_n119.end.isEqual(_i220.end);!_o77&&!_r33||_n119.containsRange(_i220)||this._setRelation(t,e,{side:_o77?"left":"right",path:_o77?_i220.start.path.slice():_i220.end.path.slice()});break;}case oc:{var _n120=_i220.start.isEqual(e.targetPosition),_o78=_i220.start.isEqual(e.deletionPosition),_r34=_i220.end.isEqual(e.deletionPosition),_s24=_i220.end.isEqual(e.sourcePosition);(_n120||_o78||_r34||_s24)&&this._setRelation(t,e,{wasInLeftElement:_n120,wasStartBeforeMergedElement:_o78,wasEndBeforeMergedElement:_r34,wasInRightElement:_s24});break;}}break;}}}},{key:"getContext",value:function getContext(t,e,i){return{aIsStrong:i,aWasUndone:this._wasUndone(t),bWasUndone:this._wasUndone(e),abRelation:this._useRelations?this._getRelation(t,e):null,baRelation:this._useRelations?this._getRelation(e,t):null,forceWeakRemove:this._forceWeakRemove};}},{key:"_wasUndone",value:function _wasUndone(t){var e=this.originalOperations.get(t);return e.wasUndone||this._history.isUndoneOperation(e);}},{key:"_getRelation",value:function _getRelation(t,e){var i=this.originalOperations.get(e),n=this._history.getUndoneOperation(i);if(!n)return null;var o=this.originalOperations.get(t),r=this._relations.get(o);return r&&r.get(n)||null;}},{key:"_setRelation",value:function _setRelation(t,e,i){var n=this.originalOperations.get(t),o=this.originalOperations.get(e);var r=this._relations.get(n);r||(r=new Map(),this._relations.set(n,r)),r.set(o,i);}}]);return gu;}();function pu(t,e){var _iterator307=_createForOfIteratorHelper(t),_step307;try{for(_iterator307.s();!(_step307=_iterator307.n()).done;){var _i221=_step307.value;_i221.baseVersion=e++;}}catch(err){_iterator307.e(err);}finally{_iterator307.f();}}function bu(t,e){for(var _i222=0;_i222<e;_i222++){t.push(new Ac(0));}}function wu(t,e,i){var n=t.nodes.getNode(0).getAttribute(e);if(n==i)return null;var o=new Ns(t.position,t.position.getShiftedBy(t.howMany));return new Ja(o,e,n,i,0);}function ku(t,e){return null===t.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany);}function _u(t,e){var i=[];for(var _n121=0;_n121<t.length;_n121++){var _o79=t[_n121],_r35=new Xa(_o79.start,_o79.end.offset-_o79.start.offset,e,0);i.push(_r35);for(var _e215=_n121+1;_e215<t.length;_e215++){t[_e215]=t[_e215]._getTransformedByMove(_r35.sourcePosition,_r35.targetPosition,_r35.howMany)[0];}e=e._getTransformedByMove(_r35.sourcePosition,_r35.targetPosition,_r35.howMany);}return i;}uu(Ja,Ja,function(t,e,i){if(t.key===e.key&&t.range.start.hasSameParentAs(e.range.start)){var _n122=t.range.getDifference(e.range).map(function(e){return new Ja(e,t.key,t.oldValue,t.newValue,0);}),_o80=t.range.getIntersection(e.range);return _o80&&i.aIsStrong&&_n122.push(new Ja(_o80,e.key,e.newValue,t.newValue,0)),0==_n122.length?[new Ac(0)]:_n122;}return[t];}),uu(Ja,tc,function(t,e){if(t.range.start.hasSameParentAs(e.position)&&t.range.containsPosition(e.position)){var _i223=t.range._getTransformedByInsertion(e.position,e.howMany,!e.shouldReceiveAttributes).map(function(e){return new Ja(e,t.key,t.oldValue,t.newValue,t.baseVersion);});if(e.shouldReceiveAttributes){var _n123=wu(e,t.key,t.oldValue);_n123&&_i223.unshift(_n123);}return _i223;}return t.range=t.range._getTransformedByInsertion(e.position,e.howMany,!1)[0],[t];}),uu(Ja,oc,function(t,e){var i=[];t.range.start.hasSameParentAs(e.deletionPosition)&&(t.range.containsPosition(e.deletionPosition)||t.range.start.isEqual(e.deletionPosition))&&i.push(Ns._createFromPositionAndShift(e.graveyardPosition,1));var n=t.range._getTransformedByMergeOperation(e);return n.isCollapsed||i.push(n),i.map(function(e){return new Ja(e,t.key,t.oldValue,t.newValue,t.baseVersion);});}),uu(Ja,Xa,function(t,e){return function(t,e){var i=Ns._createFromPositionAndShift(e.sourcePosition,e.howMany);var n=null,o=[];i.containsRange(t,!0)?n=t:t.start.hasSameParentAs(i.start)?(o=t.getDifference(i),n=t.getIntersection(i)):o=[t];var r=[];var _iterator308=_createForOfIteratorHelper(o),_step308;try{for(_iterator308.s();!(_step308=_iterator308.n()).done;){var _t231=_step308.value;_t231=_t231._getTransformedByDeletion(e.sourcePosition,e.howMany);var _i224=e.getMovedRangeStart(),_n124=_t231.start.hasSameParentAs(_i224);_t231=_t231._getTransformedByInsertion(_i224,e.howMany,_n124),r.push.apply(r,_toConsumableArray(_t231));}}catch(err){_iterator308.e(err);}finally{_iterator308.f();}n&&r.push(n._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany,!1)[0]);return r;}(t.range,e).map(function(e){return new Ja(e,t.key,t.oldValue,t.newValue,t.baseVersion);});}),uu(Ja,rc,function(t,e){if(t.range.end.isEqual(e.insertionPosition))return e.graveyardPosition||t.range.end.offset++,[t];if(t.range.start.hasSameParentAs(e.splitPosition)&&t.range.containsPosition(e.splitPosition)){var _i225=t.clone();return _i225.range=new Ns(e.moveTargetPosition.clone(),t.range.end._getCombined(e.splitPosition,e.moveTargetPosition)),t.range.end=e.splitPosition.clone(),t.range.end.stickiness="toPrevious",[t,_i225];}return t.range=t.range._getTransformedBySplitOperation(e),[t];}),uu(tc,Ja,function(t,e){var i=[t];if(t.shouldReceiveAttributes&&t.position.hasSameParentAs(e.range.start)&&e.range.containsPosition(t.position)){var _n125=wu(t,e.key,e.newValue);_n125&&i.push(_n125);}return i;}),uu(tc,tc,function(t,e,i){return t.position.isEqual(e.position)&&i.aIsStrong||(t.position=t.position._getTransformedByInsertOperation(e)),[t];}),uu(tc,Xa,function(t,e){return t.position=t.position._getTransformedByMoveOperation(e),[t];}),uu(tc,rc,function(t,e){return t.position=t.position._getTransformedBySplitOperation(e),[t];}),uu(tc,oc,function(t,e){return t.position=t.position._getTransformedByMergeOperation(e),[t];}),uu(ec,tc,function(t,e){return t.oldRange&&(t.oldRange=t.oldRange._getTransformedByInsertOperation(e)[0]),t.newRange&&(t.newRange=t.newRange._getTransformedByInsertOperation(e)[0]),[t];}),uu(ec,ec,function(t,e,i){if(t.name==e.name){if(!i.aIsStrong)return[new Ac(0)];t.oldRange=e.newRange?e.newRange.clone():null;}return[t];}),uu(ec,oc,function(t,e){return t.oldRange&&(t.oldRange=t.oldRange._getTransformedByMergeOperation(e)),t.newRange&&(t.newRange=t.newRange._getTransformedByMergeOperation(e)),[t];}),uu(ec,Xa,function(t,e,i){if(t.oldRange&&(t.oldRange=Ns._createFromRanges(t.oldRange._getTransformedByMoveOperation(e))),t.newRange){if(i.abRelation){var _n126=Ns._createFromRanges(t.newRange._getTransformedByMoveOperation(e));if("left"==i.abRelation.side&&e.targetPosition.isEqual(t.newRange.start))return t.newRange.start.path=i.abRelation.path,t.newRange.end=_n126.end,[t];if("right"==i.abRelation.side&&e.targetPosition.isEqual(t.newRange.end))return t.newRange.start=_n126.start,t.newRange.end.path=i.abRelation.path,[t];}t.newRange=Ns._createFromRanges(t.newRange._getTransformedByMoveOperation(e));}return[t];}),uu(ec,rc,function(t,e,i){if(t.oldRange&&(t.oldRange=t.oldRange._getTransformedBySplitOperation(e)),t.newRange){if(i.abRelation){var _n127=t.newRange._getTransformedBySplitOperation(e);return t.newRange.start.isEqual(e.splitPosition)&&i.abRelation.wasStartBeforeMergedElement?t.newRange.start=Es._createAt(e.insertionPosition):t.newRange.start.isEqual(e.splitPosition)&&!i.abRelation.wasInLeftElement&&(t.newRange.start=Es._createAt(e.moveTargetPosition)),t.newRange.end.isEqual(e.splitPosition)&&i.abRelation.wasInRightElement?t.newRange.end=Es._createAt(e.moveTargetPosition):t.newRange.end.isEqual(e.splitPosition)&&i.abRelation.wasEndBeforeMergedElement?t.newRange.end=Es._createAt(e.insertionPosition):t.newRange.end=_n127.end,[t];}t.newRange=t.newRange._getTransformedBySplitOperation(e);}return[t];}),uu(oc,tc,function(t,e){return t.sourcePosition.hasSameParentAs(e.position)&&(t.howMany+=e.howMany),t.sourcePosition=t.sourcePosition._getTransformedByInsertOperation(e),t.targetPosition=t.targetPosition._getTransformedByInsertOperation(e),[t];}),uu(oc,oc,function(t,e,i){if(t.sourcePosition.isEqual(e.sourcePosition)&&t.targetPosition.isEqual(e.targetPosition)){if(i.bWasUndone){var _i226=e.graveyardPosition.path.slice();return _i226.push(0),t.sourcePosition=new Es(e.graveyardPosition.root,_i226),t.howMany=0,[t];}return[new Ac(0)];}if(t.sourcePosition.isEqual(e.sourcePosition)&&!t.targetPosition.isEqual(e.targetPosition)&&!i.bWasUndone&&"splitAtSource"!=i.abRelation){var _n128="$graveyard"==t.targetPosition.root.rootName,_o81="$graveyard"==e.targetPosition.root.rootName,_r36=_n128&&!_o81;if(_o81&&!_n128||!_r36&&i.aIsStrong){var _i227=e.targetPosition._getTransformedByMergeOperation(e),_n129=t.targetPosition._getTransformedByMergeOperation(e);return[new Xa(_i227,t.howMany,_n129,0)];}return[new Ac(0)];}return t.sourcePosition.hasSameParentAs(e.targetPosition)&&(t.howMany+=e.howMany),t.sourcePosition=t.sourcePosition._getTransformedByMergeOperation(e),t.targetPosition=t.targetPosition._getTransformedByMergeOperation(e),t.graveyardPosition.isEqual(e.graveyardPosition)&&i.aIsStrong||(t.graveyardPosition=t.graveyardPosition._getTransformedByMergeOperation(e)),[t];}),uu(oc,Xa,function(t,e,i){var n=Ns._createFromPositionAndShift(e.sourcePosition,e.howMany);return"remove"==e.type&&!i.bWasUndone&&!i.forceWeakRemove&&t.deletionPosition.hasSameParentAs(e.sourcePosition)&&n.containsPosition(t.sourcePosition)?[new Ac(0)]:(t.sourcePosition.hasSameParentAs(e.targetPosition)&&(t.howMany+=e.howMany),t.sourcePosition.hasSameParentAs(e.sourcePosition)&&(t.howMany-=e.howMany),t.sourcePosition=t.sourcePosition._getTransformedByMoveOperation(e),t.targetPosition=t.targetPosition._getTransformedByMoveOperation(e),t.graveyardPosition.isEqual(e.targetPosition)||(t.graveyardPosition=t.graveyardPosition._getTransformedByMoveOperation(e)),[t]);}),uu(oc,rc,function(t,e,i){if(e.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedByDeletion(e.graveyardPosition,1),t.deletionPosition.isEqual(e.graveyardPosition)&&(t.howMany=e.howMany)),t.targetPosition.isEqual(e.splitPosition)){var _n130=0!=e.howMany,_o82=e.graveyardPosition&&t.deletionPosition.isEqual(e.graveyardPosition);if(_n130||_o82||"mergeTargetNotMoved"==i.abRelation)return t.sourcePosition=t.sourcePosition._getTransformedBySplitOperation(e),[t];}if(t.sourcePosition.isEqual(e.splitPosition)){if("mergeSourceNotMoved"==i.abRelation)return t.howMany=0,t.targetPosition=t.targetPosition._getTransformedBySplitOperation(e),[t];if("mergeSameElement"==i.abRelation||t.sourcePosition.offset>0)return t.sourcePosition=e.moveTargetPosition.clone(),t.targetPosition=t.targetPosition._getTransformedBySplitOperation(e),[t];}return t.sourcePosition.hasSameParentAs(e.splitPosition)&&(t.howMany=e.splitPosition.offset),t.sourcePosition=t.sourcePosition._getTransformedBySplitOperation(e),t.targetPosition=t.targetPosition._getTransformedBySplitOperation(e),[t];}),uu(Xa,tc,function(t,e){var i=Ns._createFromPositionAndShift(t.sourcePosition,t.howMany)._getTransformedByInsertOperation(e,!1)[0];return t.sourcePosition=i.start,t.howMany=i.end.offset-i.start.offset,t.targetPosition.isEqual(e.position)||(t.targetPosition=t.targetPosition._getTransformedByInsertOperation(e)),[t];}),uu(Xa,Xa,function(t,e,i){var n=Ns._createFromPositionAndShift(t.sourcePosition,t.howMany),o=Ns._createFromPositionAndShift(e.sourcePosition,e.howMany);var r,s=i.aIsStrong,a=!i.aIsStrong;if("insertBefore"==i.abRelation||"insertAfter"==i.baRelation?a=!0:"insertAfter"!=i.abRelation&&"insertBefore"!=i.baRelation||(a=!1),r=t.targetPosition.isEqual(e.targetPosition)&&a?t.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany):t.targetPosition._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),ku(t,e)&&ku(e,t))return[e.getReversed()];if(n.containsPosition(e.targetPosition)&&n.containsRange(o,!0))return n.start=n.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),n.end=n.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),_u([n],r);if(o.containsPosition(t.targetPosition)&&o.containsRange(n,!0))return n.start=n.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),n.end=n.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),_u([n],r);var c=Ii(t.sourcePosition.getParentPath(),e.sourcePosition.getParentPath());if("prefix"==c||"extension"==c)return n.start=n.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),n.end=n.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),_u([n],r);"remove"!=t.type||"remove"==e.type||i.aWasUndone||i.forceWeakRemove?"remove"==t.type||"remove"!=e.type||i.bWasUndone||i.forceWeakRemove||(s=!1):s=!0;var l=[],d=n.getDifference(o);var _iterator309=_createForOfIteratorHelper(d),_step309;try{for(_iterator309.s();!(_step309=_iterator309.n()).done;){var _t232=_step309.value;_t232.start=_t232.start._getTransformedByDeletion(e.sourcePosition,e.howMany),_t232.end=_t232.end._getTransformedByDeletion(e.sourcePosition,e.howMany);var _i228="same"==Ii(_t232.start.getParentPath(),e.getMovedRangeStart().getParentPath()),_n131=_t232._getTransformedByInsertion(e.getMovedRangeStart(),e.howMany,_i228);l.push.apply(l,_toConsumableArray(_n131));}}catch(err){_iterator309.e(err);}finally{_iterator309.f();}var u=n.getIntersection(o);return null!==u&&s&&(u.start=u.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),u.end=u.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),0===l.length?l.push(u):1==l.length?o.start.isBefore(n.start)||o.start.isEqual(n.start)?l.unshift(u):l.push(u):l.splice(1,0,u)),0===l.length?[new Ac(t.baseVersion)]:_u(l,r);}),uu(Xa,rc,function(t,e,i){var n=t.targetPosition.clone();t.targetPosition.isEqual(e.insertionPosition)&&e.graveyardPosition&&"moveTargetAfter"!=i.abRelation||(n=t.targetPosition._getTransformedBySplitOperation(e));var o=Ns._createFromPositionAndShift(t.sourcePosition,t.howMany);if(o.end.isEqual(e.insertionPosition))return e.graveyardPosition||t.howMany++,t.targetPosition=n,[t];if(o.start.hasSameParentAs(e.splitPosition)&&o.containsPosition(e.splitPosition)){var _t233=new Ns(e.splitPosition,o.end);_t233=_t233._getTransformedBySplitOperation(e);return _u([new Ns(o.start,e.splitPosition),_t233],n);}t.targetPosition.isEqual(e.splitPosition)&&"insertAtSource"==i.abRelation&&(n=e.moveTargetPosition),t.targetPosition.isEqual(e.insertionPosition)&&"insertBetween"==i.abRelation&&(n=t.targetPosition);var r=[o._getTransformedBySplitOperation(e)];if(e.graveyardPosition){var _n132=o.start.isEqual(e.graveyardPosition)||o.containsPosition(e.graveyardPosition);t.howMany>1&&_n132&&!i.aWasUndone&&r.push(Ns._createFromPositionAndShift(e.insertionPosition,1));}return _u(r,n);}),uu(Xa,oc,function(t,e,i){var n=Ns._createFromPositionAndShift(t.sourcePosition,t.howMany);if(e.deletionPosition.hasSameParentAs(t.sourcePosition)&&n.containsPosition(e.sourcePosition))if("remove"!=t.type||i.forceWeakRemove){if(1==t.howMany)return i.bWasUndone?(t.sourcePosition=e.graveyardPosition.clone(),t.targetPosition=t.targetPosition._getTransformedByMergeOperation(e),[t]):[new Ac(0)];}else if(!i.aWasUndone){var _i229=[];var _n133=e.graveyardPosition.clone(),_o83=e.targetPosition._getTransformedByMergeOperation(e);t.howMany>1&&(_i229.push(new Xa(t.sourcePosition,t.howMany-1,t.targetPosition,0)),_n133=_n133._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany-1),_o83=_o83._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany-1));var _r37=e.deletionPosition._getCombined(t.sourcePosition,t.targetPosition),_s25=new Xa(_n133,1,_r37,0),_a15=_s25.getMovedRangeStart().path.slice();_a15.push(0);var _c7=new Es(_s25.targetPosition.root,_a15);_o83=_o83._getTransformedByMove(_n133,_r37,1);var _l4=new Xa(_o83,e.howMany,_c7,0);return _i229.push(_s25),_i229.push(_l4),_i229;}var o=Ns._createFromPositionAndShift(t.sourcePosition,t.howMany)._getTransformedByMergeOperation(e);return t.sourcePosition=o.start,t.howMany=o.end.offset-o.start.offset,t.targetPosition=t.targetPosition._getTransformedByMergeOperation(e),[t];}),uu(ic,tc,function(t,e){return t.position=t.position._getTransformedByInsertOperation(e),[t];}),uu(ic,oc,function(t,e){return t.position.isEqual(e.deletionPosition)?(t.position=e.graveyardPosition.clone(),t.position.stickiness="toNext",[t]):(t.position=t.position._getTransformedByMergeOperation(e),[t]);}),uu(ic,Xa,function(t,e){return t.position=t.position._getTransformedByMoveOperation(e),[t];}),uu(ic,ic,function(t,e,i){if(t.position.isEqual(e.position)){if(!i.aIsStrong)return[new Ac(0)];t.oldName=e.newName;}return[t];}),uu(ic,rc,function(t,e){if("same"==Ii(t.position.path,e.splitPosition.getParentPath())&&!e.graveyardPosition){var _e216=new ic(t.position.getShiftedBy(1),t.oldName,t.newName,0);return[t,_e216];}return t.position=t.position._getTransformedBySplitOperation(e),[t];}),uu(nc,nc,function(t,e,i){if(t.root===e.root&&t.key===e.key){if(!i.aIsStrong||t.newValue===e.newValue)return[new Ac(0)];t.oldValue=e.newValue;}return[t];}),uu(rc,tc,function(t,e){return t.splitPosition.hasSameParentAs(e.position)&&t.splitPosition.offset<e.position.offset&&(t.howMany+=e.howMany),t.splitPosition=t.splitPosition._getTransformedByInsertOperation(e),t.insertionPosition=t.insertionPosition._getTransformedByInsertOperation(e),[t];}),uu(rc,oc,function(t,e,i){if(!t.graveyardPosition&&!i.bWasUndone&&t.splitPosition.hasSameParentAs(e.sourcePosition)){var _i230=e.graveyardPosition.path.slice();_i230.push(0);var _n134=new Es(e.graveyardPosition.root,_i230),_o84=rc.getInsertionPosition(new Es(e.graveyardPosition.root,_i230)),_r38=new rc(_n134,0,_o84,null,0);return t.splitPosition=t.splitPosition._getTransformedByMergeOperation(e),t.insertionPosition=rc.getInsertionPosition(t.splitPosition),t.graveyardPosition=_r38.insertionPosition.clone(),t.graveyardPosition.stickiness="toNext",[_r38,t];}return t.splitPosition.hasSameParentAs(e.deletionPosition)&&!t.splitPosition.isAfter(e.deletionPosition)&&t.howMany--,t.splitPosition.hasSameParentAs(e.targetPosition)&&(t.howMany+=e.howMany),t.splitPosition=t.splitPosition._getTransformedByMergeOperation(e),t.insertionPosition=rc.getInsertionPosition(t.splitPosition),t.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedByMergeOperation(e)),[t];}),uu(rc,Xa,function(t,e,i){var n=Ns._createFromPositionAndShift(e.sourcePosition,e.howMany);if(t.graveyardPosition){var _o85=n.start.isEqual(t.graveyardPosition)||n.containsPosition(t.graveyardPosition);if(!i.bWasUndone&&_o85){var _i231=t.splitPosition._getTransformedByMoveOperation(e),_n135=t.graveyardPosition._getTransformedByMoveOperation(e),_o86=_n135.path.slice();_o86.push(0);var _r39=new Es(_n135.root,_o86);return[new Xa(_i231,t.howMany,_r39,0)];}t.graveyardPosition=t.graveyardPosition._getTransformedByMoveOperation(e);}var o=t.splitPosition.isEqual(e.targetPosition);if(o&&("insertAtSource"==i.baRelation||"splitBefore"==i.abRelation))return t.howMany+=e.howMany,t.splitPosition=t.splitPosition._getTransformedByDeletion(e.sourcePosition,e.howMany),t.insertionPosition=rc.getInsertionPosition(t.splitPosition),[t];if(o&&i.abRelation&&i.abRelation.howMany){var _i$abRelation=i.abRelation,_e217=_i$abRelation.howMany,_n136=_i$abRelation.offset;return t.howMany+=_e217,t.splitPosition=t.splitPosition.getShiftedBy(_n136),[t];}if(t.splitPosition.hasSameParentAs(e.sourcePosition)&&n.containsPosition(t.splitPosition)){var _i232=e.howMany-(t.splitPosition.offset-e.sourcePosition.offset);return t.howMany-=_i232,t.splitPosition.hasSameParentAs(e.targetPosition)&&t.splitPosition.offset<e.targetPosition.offset&&(t.howMany+=e.howMany),t.splitPosition=e.sourcePosition.clone(),t.insertionPosition=rc.getInsertionPosition(t.splitPosition),[t];}return e.sourcePosition.isEqual(e.targetPosition)||(t.splitPosition.hasSameParentAs(e.sourcePosition)&&t.splitPosition.offset<=e.sourcePosition.offset&&(t.howMany-=e.howMany),t.splitPosition.hasSameParentAs(e.targetPosition)&&t.splitPosition.offset<e.targetPosition.offset&&(t.howMany+=e.howMany)),t.splitPosition.stickiness="toNone",t.splitPosition=t.splitPosition._getTransformedByMoveOperation(e),t.splitPosition.stickiness="toNext",t.graveyardPosition?t.insertionPosition=t.insertionPosition._getTransformedByMoveOperation(e):t.insertionPosition=rc.getInsertionPosition(t.splitPosition),[t];}),uu(rc,rc,function(t,e,i){if(t.splitPosition.isEqual(e.splitPosition)){if(!t.graveyardPosition&&!e.graveyardPosition)return[new Ac(0)];if(t.graveyardPosition&&e.graveyardPosition&&t.graveyardPosition.isEqual(e.graveyardPosition))return[new Ac(0)];if("splitBefore"==i.abRelation)return t.howMany=0,t.graveyardPosition=t.graveyardPosition._getTransformedBySplitOperation(e),[t];}if(t.graveyardPosition&&e.graveyardPosition&&t.graveyardPosition.isEqual(e.graveyardPosition)){var _n137="$graveyard"==t.splitPosition.root.rootName,_o87="$graveyard"==e.splitPosition.root.rootName,_r40=_n137&&!_o87;if(_o87&&!_n137||!_r40&&i.aIsStrong){var _i233=[];return e.howMany&&_i233.push(new Xa(e.moveTargetPosition,e.howMany,e.splitPosition,0)),t.howMany&&_i233.push(new Xa(t.splitPosition,t.howMany,t.moveTargetPosition,0)),_i233;}return[new Ac(0)];}if(t.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedBySplitOperation(e)),t.splitPosition.isEqual(e.insertionPosition)&&"splitBefore"==i.abRelation)return t.howMany++,[t];if(e.splitPosition.isEqual(t.insertionPosition)&&"splitBefore"==i.baRelation){var _i234=e.insertionPosition.path.slice();_i234.push(0);var _n138=new Es(e.insertionPosition.root,_i234);return[t,new Xa(t.insertionPosition,1,_n138,0)];}return t.splitPosition.hasSameParentAs(e.splitPosition)&&t.splitPosition.offset<e.splitPosition.offset&&(t.howMany-=e.howMany),t.splitPosition=t.splitPosition._getTransformedBySplitOperation(e),t.insertionPosition=rc.getInsertionPosition(t.splitPosition),[t];});var vu=/*#__PURE__*/function(_wd7){_inherits(vu,_wd7);var _super86=_createSuper(vu);function vu(t){var _this140;_classCallCheck(this,vu);_this140=_super86.call(this,t),_this140._stack=[],_this140._createdBatches=new WeakSet(),_this140.refresh(),_this140.listenTo(t.data,"set",function(){return _this140.clearStack();});return _this140;}_createClass(vu,[{key:"refresh",value:function refresh(){this.isEnabled=this._stack.length>0;}},{key:"addBatch",value:function addBatch(t){var e=this.editor.model.document.selection,i={ranges:e.hasOwnRange?Array.from(e.getRanges()):[],isBackward:e.isBackward};this._stack.push({batch:t,selection:i}),this.refresh();}},{key:"clearStack",value:function clearStack(){this._stack=[],this.refresh();}},{key:"_restoreSelection",value:function _restoreSelection(t,e,i){var n=this.editor.model,o=n.document,r=[],s=t.map(function(t){return t.getTransformedByOperations(i);}),a=s.flat();var _iterator310=_createForOfIteratorHelper(s),_step310;try{for(_iterator310.s();!(_step310=_iterator310.n()).done;){var _t234=_step310.value;var _e218=_t234.filter(function(t){return t.root!=o.graveyard;}).filter(function(t){return!xu(t,a);});_e218.length&&(yu(_e218),r.push(_e218[0]));}}catch(err){_iterator310.e(err);}finally{_iterator310.f();}r.length&&n.change(function(t){t.setSelection(r,{backward:e});});}},{key:"_undo",value:function _undo(t,e){var i=this.editor.model,n=i.document;this._createdBatches.add(e);var o=t.operations.slice().filter(function(t){return t.isDocumentOperation;});o.reverse();var _iterator311=_createForOfIteratorHelper(o),_step311;try{for(_iterator311.s();!(_step311=_iterator311.n()).done;){var _t235=_step311.value;var _o88=_t235.baseVersion+1,_r41=Array.from(n.history.getOperations(_o88)),_s26=mu([_t235.getReversed()],_r41,{useRelations:!0,document:this.editor.model.document,padWithNoOps:!1,forceWeakRemove:!0}).operationsA;var _iterator312=_createForOfIteratorHelper(_s26),_step312;try{for(_iterator312.s();!(_step312=_iterator312.n()).done;){var _o89=_step312.value;e.addOperation(_o89),i.applyOperation(_o89),n.history.setOperationAsUndone(_t235,_o89);}}catch(err){_iterator312.e(err);}finally{_iterator312.f();}}}catch(err){_iterator311.e(err);}finally{_iterator311.f();}}}]);return vu;}(wd);function yu(t){t.sort(function(t,e){return t.start.isBefore(e.start)?-1:1;});for(var _e219=1;_e219<t.length;_e219++){var _i235=t[_e219-1].getJoined(t[_e219],!0);_i235&&(_e219--,t.splice(_e219,2,_i235));}}function xu(t,e){return e.some(function(e){return e!==t&&e.containsRange(t,!0);});}var Au=/*#__PURE__*/function(_vu){_inherits(Au,_vu);var _super87=_createSuper(Au);function Au(){_classCallCheck(this,Au);return _super87.apply(this,arguments);}_createClass(Au,[{key:"execute",value:function execute(){var _this141=this;var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var e=t?this._stack.findIndex(function(e){return e.batch==t;}):this._stack.length-1,i=this._stack.splice(e,1)[0],n=this.editor.model.createBatch("transparent");this.editor.model.enqueueChange(n,function(){_this141._undo(i.batch,n);var t=_this141.editor.model.document.history.getOperations(i.batch.baseVersion);_this141._restoreSelection(i.selection.ranges,i.selection.isBackward,t),_this141.fire("revert",i.batch,n);}),this.refresh();}}]);return Au;}(vu);var Tu=/*#__PURE__*/function(_vu2){_inherits(Tu,_vu2);var _super88=_createSuper(Tu);function Tu(){_classCallCheck(this,Tu);return _super88.apply(this,arguments);}_createClass(Tu,[{key:"execute",value:function execute(){var _this142=this;var t=this._stack.pop(),e=this.editor.model.createBatch("transparent");this.editor.model.enqueueChange(e,function(){var i=t.batch.operations[t.batch.operations.length-1].baseVersion+1,n=_this142.editor.model.document.history.getOperations(i);_this142._restoreSelection(t.selection.ranges,t.selection.isBackward,n),_this142._undo(t.batch,e);}),this.refresh();}}]);return Tu;}(vu);var Cu=/*#__PURE__*/function(_pd13){_inherits(Cu,_pd13);var _super89=_createSuper(Cu);function Cu(t){var _this143;_classCallCheck(this,Cu);_this143=_super89.call(this,t),_this143._batchRegistry=new WeakSet();return _this143;}_createClass(Cu,[{key:"init",value:function init(){var _this144=this;var t=this.editor;this._undoCommand=new Au(t),this._redoCommand=new Tu(t),t.commands.add("undo",this._undoCommand),t.commands.add("redo",this._redoCommand),this.listenTo(t.model,"applyOperation",function(t,e){var i=e[0];if(!i.isDocumentOperation)return;var n=i.batch,o=_this144._redoCommand._createdBatches.has(n),r=_this144._undoCommand._createdBatches.has(n);_this144._batchRegistry.has(n)||"transparent"==n.type&&!o&&!r||(o?_this144._undoCommand.addBatch(n):r||(_this144._undoCommand.addBatch(n),_this144._redoCommand.clearStack()),_this144._batchRegistry.add(n));},{priority:"highest"}),this.listenTo(this._undoCommand,"revert",function(t,e,i){_this144._redoCommand.addBatch(i);}),t.keystrokes.set("CTRL+Z","undo"),t.keystrokes.set("CTRL+Y","redo"),t.keystrokes.set("CTRL+SHIFT+Z","redo");}}],[{key:"pluginName",get:function get(){return"UndoEditing";}}]);return Cu;}(pd);var Su='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.042 9.367l2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z"/></svg>',Eu='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M14.958 9.367l-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z"/></svg>';var Pu=/*#__PURE__*/function(_pd14){_inherits(Pu,_pd14);var _super90=_createSuper(Pu);function Pu(){_classCallCheck(this,Pu);return _super90.apply(this,arguments);}_createClass(Pu,[{key:"init",value:function init(){var t=this.editor,e=t.locale,i=t.t,n="ltr"==e.uiLanguageDirection?Su:Eu,o="ltr"==e.uiLanguageDirection?Eu:Su;this._addButton("undo",i("Undo"),"CTRL+Z",n),this._addButton("redo",i("Redo"),"CTRL+Y",o);}},{key:"_addButton",value:function _addButton(t,e,i,n){var _this145=this;var o=this.editor;o.ui.componentFactory.add(t,function(r){var s=o.commands.get(t),a=new Xl(r);return a.set({label:e,icon:n,keystroke:i,tooltip:!0}),a.bind("isEnabled").to(s,"isEnabled"),_this145.listenTo(a,"execute",function(){o.execute(t),o.editing.view.focus();}),a;});}}]);return Pu;}(pd);var Mu=/*#__PURE__*/function(_pd15){_inherits(Mu,_pd15);var _super91=_createSuper(Mu);function Mu(){_classCallCheck(this,Mu);return _super91.apply(this,arguments);}_createClass(Mu,null,[{key:"requires",get:function get(){return[Cu,Pu];}},{key:"pluginName",get:function get(){return"Undo";}}]);return Mu;}(pd);var Iu=/*#__PURE__*/function(){function Iu(t){_classCallCheck(this,Iu);this.context=t;}_createClass(Iu,[{key:"destroy",value:function destroy(){this.stopListening();}}],[{key:"isContextPlugin",get:function get(){return!0;}}]);return Iu;}();yi(Iu,Un);var Nu=/*#__PURE__*/function(_Iu){_inherits(Nu,_Iu);var _super92=_createSuper(Nu);function Nu(){_classCallCheck(this,Nu);return _super92.apply(this,arguments);}_createClass(Nu,[{key:"init",value:function init(){this.set("hasAny",!1),this._actions=new xi({idProperty:"_id"}),this._actions.delegate("add","remove").to(this);}},{key:"add",value:function add(t){if("string"!=typeof t)throw new ui.a("pendingactions-add-invalid-message",this);var e=Object.create(Un);return e.set("message",t),this._actions.add(e),this.hasAny=!0,e;}},{key:"remove",value:function remove(t){this._actions.remove(t),this.hasAny=!!this._actions.length;}},{key:"first",get:function get(){return this._actions.get(0);}},{key:Symbol.iterator,value:function value(){return this._actions[Symbol.iterator]();}}],[{key:"pluginName",get:function get(){return"PendingActions";}}]);return Nu;}(Iu);var Ou=/*#__PURE__*/function(){function Ou(){var _this146=this;_classCallCheck(this,Ou);var t=new window.FileReader();this._reader=t,this._data=void 0,this.set("loaded",0),t.onprogress=function(t){_this146.loaded=t.loaded;};}_createClass(Ou,[{key:"error",get:function get(){return this._reader.error;}},{key:"data",get:function get(){return this._data;}},{key:"read",value:function read(t){var _this147=this;var e=this._reader;return this.total=t.size,new Promise(function(i,n){e.onload=function(){var t=e.result;_this147._data=t,i(t);},e.onerror=function(){n("error");},e.onabort=function(){n("aborted");},_this147._reader.readAsDataURL(t);});}},{key:"abort",value:function abort(){this._reader.abort();}}]);return Ou;}();yi(Ou,Un);var Ru=/*#__PURE__*/function(_pd16){_inherits(Ru,_pd16);var _super93=_createSuper(Ru);function Ru(){_classCallCheck(this,Ru);return _super93.apply(this,arguments);}_createClass(Ru,[{key:"init",value:function init(){var _this148=this;this.loaders=new xi(),this.loaders.on("add",function(){return _this148._updatePendingAction();}),this.loaders.on("remove",function(){return _this148._updatePendingAction();}),this._loadersMap=new Map(),this._pendingAction=null,this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",function(t,e){return e?t/e*100:0;});}},{key:"getLoader",value:function getLoader(t){return this._loadersMap.get(t)||null;}},{key:"createLoader",value:function createLoader(t){var _this149=this;if(!this.createUploadAdapter)return Object(ui.c)("filerepository-no-upload-adapter"),null;var e=new Du(Promise.resolve(t),this.createUploadAdapter);return this.loaders.add(e),this._loadersMap.set(t,e),t instanceof Promise&&e.file.then(function(t){_this149._loadersMap.set(t,e);})["catch"](function(){}),e.on("change:uploaded",function(){var t=0;var _iterator313=_createForOfIteratorHelper(_this149.loaders),_step313;try{for(_iterator313.s();!(_step313=_iterator313.n()).done;){var _e220=_step313.value;t+=_e220.uploaded;}}catch(err){_iterator313.e(err);}finally{_iterator313.f();}_this149.uploaded=t;}),e.on("change:uploadTotal",function(){var t=0;var _iterator314=_createForOfIteratorHelper(_this149.loaders),_step314;try{for(_iterator314.s();!(_step314=_iterator314.n()).done;){var _e221=_step314.value;_e221.uploadTotal&&(t+=_e221.uploadTotal);}}catch(err){_iterator314.e(err);}finally{_iterator314.f();}_this149.uploadTotal=t;}),e;}},{key:"destroyLoader",value:function destroyLoader(t){var _this150=this;var e=t instanceof Du?t:this.getLoader(t);e._destroy(),this.loaders.remove(e),this._loadersMap.forEach(function(t,i){t===e&&_this150._loadersMap["delete"](i);});}},{key:"_updatePendingAction",value:function _updatePendingAction(){var t=this.editor.plugins.get(Nu);if(this.loaders.length){if(!this._pendingAction){var _e222=this.editor.t,_i236=function _i236(t){return"".concat(_e222("Upload in progress")," ").concat(parseInt(t),"%.");};this._pendingAction=t.add(_i236(this.uploadedPercent)),this._pendingAction.bind("message").to(this,"uploadedPercent",_i236);}}else t.remove(this._pendingAction),this._pendingAction=null;}}],[{key:"pluginName",get:function get(){return"FileRepository";}},{key:"requires",get:function get(){return[Nu];}}]);return Ru;}(pd);yi(Ru,Un);var Du=/*#__PURE__*/function(){function Du(t,e){_classCallCheck(this,Du);this.id=li(),this._filePromiseWrapper=this._createFilePromiseWrapper(t),this._adapter=e(this),this._reader=new Ou(),this.set("status","idle"),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",function(t,e){return e?t/e*100:0;}),this.set("uploadResponse",null);}_createClass(Du,[{key:"file",get:function get(){var _this151=this;return this._filePromiseWrapper?this._filePromiseWrapper.promise.then(function(t){return _this151._filePromiseWrapper?t:null;}):Promise.resolve(null);}},{key:"data",get:function get(){return this._reader.data;}},{key:"read",value:function read(){var _this152=this;if("idle"!=this.status)throw new ui.a("filerepository-read-wrong-status",this);return this.status="reading",this.file.then(function(t){return _this152._reader.read(t);}).then(function(t){if("reading"!==_this152.status)throw _this152.status;return _this152.status="idle",t;})["catch"](function(t){if("aborted"===t)throw _this152.status="aborted","aborted";throw _this152.status="error",_this152._reader.error?_this152._reader.error:t;});}},{key:"upload",value:function upload(){var _this153=this;if("idle"!=this.status)throw new ui.a("filerepository-upload-wrong-status",this);return this.status="uploading",this.file.then(function(){return _this153._adapter.upload();}).then(function(t){return _this153.uploadResponse=t,_this153.status="idle",t;})["catch"](function(t){if("aborted"===_this153.status)throw"aborted";throw _this153.status="error",t;});}},{key:"abort",value:function abort(){var t=this.status;this.status="aborted",this._filePromiseWrapper.isFulfilled?"reading"==t?this._reader.abort():"uploading"==t&&this._adapter.abort&&this._adapter.abort():(this._filePromiseWrapper.promise["catch"](function(){}),this._filePromiseWrapper.rejecter("aborted")),this._destroy();}},{key:"_destroy",value:function _destroy(){this._filePromiseWrapper=void 0,this._reader=void 0,this._adapter=void 0,this.uploadResponse=void 0;}},{key:"_createFilePromiseWrapper",value:function _createFilePromiseWrapper(t){var e={};return e.promise=new Promise(function(i,n){e.rejecter=n,e.isFulfilled=!1,t.then(function(t){e.isFulfilled=!0,i(t);})["catch"](function(t){e.isFulfilled=!0,n(t);});}),e;}}]);return Du;}();yi(Du,Un);function Lu(){var t=function(t){t=t.toLowerCase();var e=document.cookie.split(";");var _iterator315=_createForOfIteratorHelper(e),_step315;try{for(_iterator315.s();!(_step315=_iterator315.n()).done;){var _i237=_step315.value;var _e223=_i237.split("=");if(decodeURIComponent(_e223[0].trim().toLowerCase())===t)return decodeURIComponent(_e223[1]);}}catch(err){_iterator315.e(err);}finally{_iterator315.f();}return null;}("ckCsrfToken");var e,i;return t&&40==t.length||(t=function(t){var e="";var i=new Uint8Array(t);window.crypto.getRandomValues(i);for(var _t236=0;_t236<i.length;_t236++){var _n139="abcdefghijklmnopqrstuvwxyz0123456789".charAt(i[_t236]%"abcdefghijklmnopqrstuvwxyz0123456789".length);e+=Math.random()>.5?_n139.toUpperCase():_n139;}return e;}(40),e="ckCsrfToken",i=t,document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(i)+";path=/"),t;}var zu=/*#__PURE__*/function(_pd17){_inherits(zu,_pd17);var _super94=_createSuper(zu);function zu(){_classCallCheck(this,zu);return _super94.apply(this,arguments);}_createClass(zu,[{key:"init",value:function init(){var _this154=this;var t=this.editor.config.get("ckfinder.uploadUrl");t&&(this.editor.plugins.get(Ru).createUploadAdapter=function(e){return new Vu(e,t,_this154.editor.t);});}}],[{key:"requires",get:function get(){return[Ru];}},{key:"pluginName",get:function get(){return"CKFinderUploadAdapter";}}]);return zu;}(pd);var Vu=/*#__PURE__*/function(){function Vu(t,e,i){_classCallCheck(this,Vu);this.loader=t,this.url=e,this.t=i;}_createClass(Vu,[{key:"upload",value:function upload(){var _this155=this;return this.loader.file.then(function(t){return new Promise(function(e,i){_this155._initRequest(),_this155._initListeners(e,i,t),_this155._sendRequest(t);});});}},{key:"abort",value:function abort(){this.xhr&&this.xhr.abort();}},{key:"_initRequest",value:function _initRequest(){var t=this.xhr=new XMLHttpRequest();t.open("POST",this.url,!0),t.responseType="json";}},{key:"_initListeners",value:function _initListeners(t,e,i){var n=this.xhr,o=this.loader,r=(0,this.t)("Cannot upload file:")+" ".concat(i.name,".");n.addEventListener("error",function(){return e(r);}),n.addEventListener("abort",function(){return e();}),n.addEventListener("load",function(){var i=n.response;if(!i||!i.uploaded)return e(i&&i.error&&i.error.message?i.error.message:r);t({"default":i.url});}),n.upload&&n.upload.addEventListener("progress",function(t){t.lengthComputable&&(o.uploadTotal=t.total,o.uploaded=t.loaded);});}},{key:"_sendRequest",value:function _sendRequest(t){var e=new FormData();e.append("upload",t),e.append("ckCsrfToken",Lu()),this.xhr.send(e);}}]);return Vu;}();function ju(t,e,i,n){var o,r=null;"function"==typeof n?o=n:(r=t.commands.get(n),o=function o(){t.execute(n);}),t.model.document.on("change:data",function(s,a){if(r&&!r.isEnabled||!e.isEnabled)return;var c=_d(t.model.document.selection.getRanges());if(!c.isCollapsed)return;if("transparent"==a.type)return;var l=Array.from(t.model.document.differ.getChanges()),d=l[0];if(1!=l.length||"insert"!==d.type||"$text"!=d.name||1!=d.length)return;var u=d.position.parent;if(u.is("element","codeBlock"))return;if(u.is("element","listItem")&&!["numberedList","bulletedList","todoList"].includes(n))return;if(r&&!0===r.value)return;var h=u.getChild(0),f=t.model.createRangeOn(h);if(!f.containsRange(c)&&!c.end.isEqual(f.end))return;var m=i.exec(h.data.substr(0,c.end.offset));m&&t.model.enqueueChange(function(e){var i=e.createPositionAt(u,0),n=e.createPositionAt(u,m[0].length),r=new qs(i,n);if(!1!==o({match:m})){e.remove(r);var _i238=t.model.document.selection.getFirstRange(),_n140=e.createRangeIn(u);!u.isEmpty||_n140.isEqual(_i238)||_n140.containsRange(_i238,!0)||e.remove(u);}r.detach();});});}function Bu(t,e,i,n){var o,r;i instanceof RegExp?o=i:r=i,r=r||function(t){var e;var i=[],n=[];for(;null!==(e=o.exec(t))&&!(e&&e.length<4);){var _e224=e,_t237=_e224.index,_o90=_e224[1],_r42=_e224[2],_s27=_e224[3];var _a16=_o90+_r42+_s27;_t237+=e[0].length-_a16.length;var _c8=[_t237,_t237+_o90.length],_l5=[_t237+_o90.length+_r42.length,_t237+_o90.length+_r42.length+_s27.length];i.push(_c8),i.push(_l5),n.push([_t237+_o90.length,_t237+_o90.length+_r42.length]);}return{remove:i,format:n};},t.model.document.on("change:data",function(i,o){if("transparent"==o.type||!e.isEnabled)return;var s=t.model,a=s.document.selection;if(!a.isCollapsed)return;var c=Array.from(s.document.differ.getChanges()),l=c[0];if(1!=c.length||"insert"!==l.type||"$text"!=l.name||1!=l.length)return;var d=a.focus,u=d.parent,_ref39=function(t,e){var i=t.start;return{text:Array.from(t.getItems()).reduce(function(t,n){return!n.is("$text")&&!n.is("$textProxy")||n.getAttribute("code")?(i=e.createPositionAfter(n),""):t+n.data;},""),range:e.createRange(i,t.end)};}(s.createRange(s.createPositionAt(u,0),d),s),h=_ref39.text,f=_ref39.range,m=r(h),g=Fu(f.start,m.format,s),p=Fu(f.start,m.remove,s);g.length&&p.length&&s.enqueueChange(function(t){if(!1!==n(t,g)){var _iterator316=_createForOfIteratorHelper(p.reverse()),_step316;try{for(_iterator316.s();!(_step316=_iterator316.n()).done;){var _e225=_step316.value;t.remove(_e225);}}catch(err){_iterator316.e(err);}finally{_iterator316.f();}}});});}function Fu(t,e,i){return e.filter(function(t){return void 0!==t[0]&&void 0!==t[1];}).map(function(e){return i.createRange(t.getShiftedBy(e[0]),t.getShiftedBy(e[1]));});}function Hu(t,e){return function(i,n){if(!t.commands.get(e).isEnabled)return!1;var o=t.model.schema.getValidRanges(n,e);var _iterator317=_createForOfIteratorHelper(o),_step317;try{for(_iterator317.s();!(_step317=_iterator317.n()).done;){var _t238=_step317.value;i.setAttribute(e,!0,_t238);}}catch(err){_iterator317.e(err);}finally{_iterator317.f();}i.removeSelectionAttribute(e);};}var Uu=/*#__PURE__*/function(_wd8){_inherits(Uu,_wd8);var _super95=_createSuper(Uu);function Uu(t,e){var _this156;_classCallCheck(this,Uu);_this156=_super95.call(this,t),_this156.attributeKey=e;return _this156;}_createClass(Uu,[{key:"refresh",value:function refresh(){var t=this.editor.model,e=t.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=t.schema.checkAttributeInSelection(e.selection,this.attributeKey);}},{key:"execute",value:function execute(){var _this157=this;var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=this.editor.model,i=e.document.selection,n=void 0===t.forceValue?!this.value:t.forceValue;e.change(function(t){if(i.isCollapsed)n?t.setSelectionAttribute(_this157.attributeKey,!0):t.removeSelectionAttribute(_this157.attributeKey);else{var _o91=e.schema.getValidRanges(i.getRanges(),_this157.attributeKey);var _iterator318=_createForOfIteratorHelper(_o91),_step318;try{for(_iterator318.s();!(_step318=_iterator318.n()).done;){var _e226=_step318.value;n?t.setAttribute(_this157.attributeKey,n,_e226):t.removeAttribute(_this157.attributeKey,_e226);}}catch(err){_iterator318.e(err);}finally{_iterator318.f();}}});}},{key:"_getValueFromFirstAllowedNode",value:function _getValueFromFirstAllowedNode(){var t=this.editor.model,e=t.schema,i=t.document.selection;if(i.isCollapsed)return i.hasAttribute(this.attributeKey);var _iterator319=_createForOfIteratorHelper(i.getRanges()),_step319;try{for(_iterator319.s();!(_step319=_iterator319.n()).done;){var _t239=_step319.value;var _iterator320=_createForOfIteratorHelper(_t239.getItems()),_step320;try{for(_iterator320.s();!(_step320=_iterator320.n()).done;){var _i239=_step320.value;if(e.checkAttribute(_i239,this.attributeKey))return _i239.hasAttribute(this.attributeKey);}}catch(err){_iterator320.e(err);}finally{_iterator320.f();}}}catch(err){_iterator319.e(err);}finally{_iterator319.f();}return!1;}}]);return Uu;}(wd);var Wu=/*#__PURE__*/function(_pd18){_inherits(Wu,_pd18);var _super96=_createSuper(Wu);function Wu(){_classCallCheck(this,Wu);return _super96.apply(this,arguments);}_createClass(Wu,[{key:"init",value:function init(){var t=this.editor;t.model.schema.extend("$text",{allowAttributes:"bold"}),t.model.schema.setAttributeProperties("bold",{isFormatting:!0,copyOnEnter:!0}),t.conversion.attributeToElement({model:"bold",view:"strong",upcastAlso:["b",function(t){var e=t.getStyle("font-weight");return e?"bold"==e||Number(e)>=600?{name:!0,styles:["font-weight"]}:void 0:null;}]}),t.commands.add("bold",new Uu(t,"bold")),t.keystrokes.set("CTRL+B","bold");}}],[{key:"pluginName",get:function get(){return"BoldEditing";}}]);return Wu;}(pd);var qu=/*#__PURE__*/function(_pd19){_inherits(qu,_pd19);var _super97=_createSuper(qu);function qu(){_classCallCheck(this,qu);return _super97.apply(this,arguments);}_createClass(qu,[{key:"init",value:function init(){var _this158=this;var t=this.editor,e=t.t;t.ui.componentFactory.add("bold",function(i){var n=t.commands.get("bold"),o=new Xl(i);return o.set({label:e("Bold"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>',keystroke:"CTRL+B",tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(n,"value","isEnabled"),_this158.listenTo(o,"execute",function(){t.execute("bold"),t.editing.view.focus();}),o;});}}]);return qu;}(pd);var $u=/*#__PURE__*/function(_pd20){_inherits($u,_pd20);var _super98=_createSuper($u);function $u(){_classCallCheck(this,$u);return _super98.apply(this,arguments);}_createClass($u,[{key:"init",value:function init(){var t=this.editor;t.model.schema.extend("$text",{allowAttributes:"italic"}),t.model.schema.setAttributeProperties("italic",{isFormatting:!0,copyOnEnter:!0}),t.conversion.attributeToElement({model:"italic",view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]}),t.commands.add("italic",new Uu(t,"italic")),t.keystrokes.set("CTRL+I","italic");}}],[{key:"pluginName",get:function get(){return"ItalicEditing";}}]);return $u;}(pd);var Yu=/*#__PURE__*/function(_pd21){_inherits(Yu,_pd21);var _super99=_createSuper(Yu);function Yu(){_classCallCheck(this,Yu);return _super99.apply(this,arguments);}_createClass(Yu,[{key:"init",value:function init(){var _this159=this;var t=this.editor,e=t.t;t.ui.componentFactory.add("italic",function(i){var n=t.commands.get("italic"),o=new Xl(i);return o.set({label:e("Italic"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.586 14.633l.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z"/></svg>',keystroke:"CTRL+I",tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(n,"value","isEnabled"),_this159.listenTo(o,"execute",function(){t.execute("italic"),t.editing.view.focus();}),o;});}}]);return Yu;}(pd);var Gu=/*#__PURE__*/function(_pd22){_inherits(Gu,_pd22);var _super100=_createSuper(Gu);function Gu(){_classCallCheck(this,Gu);return _super100.apply(this,arguments);}_createClass(Gu,[{key:"init",value:function init(){var t=this.editor;t.model.schema.extend("$text",{allowAttributes:"underline"}),t.model.schema.setAttributeProperties("underline",{isFormatting:!0,copyOnEnter:!0}),t.conversion.attributeToElement({model:"underline",view:"u",upcastAlso:{styles:{"text-decoration":"underline"}}}),t.commands.add("underline",new Uu(t,"underline")),t.keystrokes.set("CTRL+U","underline");}}],[{key:"pluginName",get:function get(){return"UnderlineEditing";}}]);return Gu;}(pd);var Ku=/*#__PURE__*/function(_pd23){_inherits(Ku,_pd23);var _super101=_createSuper(Ku);function Ku(){_classCallCheck(this,Ku);return _super101.apply(this,arguments);}_createClass(Ku,[{key:"init",value:function init(){var _this160=this;var t=this.editor,e=t.t;t.ui.componentFactory.add("underline",function(i){var n=t.commands.get("underline"),o=new Xl(i);return o.set({label:e("Underline"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 18v-1.5h14V18zm2.2-8V3.6c0-.4.4-.6.8-.6.3 0 .7.2.7.6v6.2c0 2 1.3 2.8 3.2 2.8 1.9 0 3.4-.9 3.4-2.9V3.6c0-.3.4-.5.8-.5.3 0 .7.2.7.5V10c0 2.7-2.2 4-4.9 4-2.6 0-4.7-1.2-4.7-4z"/></svg>',keystroke:"CTRL+U",tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(n,"value","isEnabled"),_this160.listenTo(o,"execute",function(){t.execute("underline"),t.editing.view.focus();}),o;});}}]);return Ku;}(pd);var Qu=/*#__PURE__*/function(_wd9){_inherits(Qu,_wd9);var _super102=_createSuper(Qu);function Qu(){_classCallCheck(this,Qu);return _super102.apply(this,arguments);}_createClass(Qu,[{key:"refresh",value:function refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled();}},{key:"execute",value:function execute(){var _this161=this;var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=this.editor.model,i=e.schema,n=e.document.selection,o=Array.from(n.getSelectedBlocks()),r=void 0===t.forceValue?!this.value:t.forceValue;e.change(function(t){if(r){var _e227=o.filter(function(t){return Ju(t)||Xu(i,t);});_this161._applyQuote(t,_e227);}else _this161._removeQuote(t,o.filter(Ju));});}},{key:"_getValue",value:function _getValue(){var t=_d(this.editor.model.document.selection.getSelectedBlocks());return!(!t||!Ju(t));}},{key:"_checkEnabled",value:function _checkEnabled(){if(this.value)return!0;var t=this.editor.model.document.selection,e=this.editor.model.schema,i=_d(t.getSelectedBlocks());return!!i&&Xu(e,i);}},{key:"_removeQuote",value:function _removeQuote(t,e){Zu(t,e).reverse().forEach(function(e){if(e.start.isAtStart&&e.end.isAtEnd)return void t.unwrap(e.start.parent);if(e.start.isAtStart){var _i240=t.createPositionBefore(e.start.parent);return void t.move(e,_i240);}e.end.isAtEnd||t.split(e.end);var i=t.createPositionAfter(e.end.parent);t.move(e,i);});}},{key:"_applyQuote",value:function _applyQuote(t,e){var i=[];Zu(t,e).reverse().forEach(function(e){var n=Ju(e.start);n||(n=t.createElement("blockQuote"),t.wrap(e,n)),i.push(n);}),i.reverse().reduce(function(e,i){return e.nextSibling==i?(t.merge(t.createPositionAfter(e)),e):i;});}}]);return Qu;}(wd);function Ju(t){return"blockQuote"==t.parent.name?t.parent:null;}function Zu(t,e){var i,n=0;var o=[];for(;n<e.length;){var _r43=e[n],_s28=e[n+1];i||(i=t.createPositionBefore(_r43)),_s28&&_r43.nextSibling==_s28||(o.push(t.createRange(i,t.createPositionAfter(_r43))),i=null),n++;}return o;}function Xu(t,e){var i=t.checkChild(e.parent,"blockQuote"),n=t.checkChild(["$root","blockQuote"],e);return i&&n;}var th=/*#__PURE__*/function(_pd24){_inherits(th,_pd24);var _super103=_createSuper(th);function th(){_classCallCheck(this,th);return _super103.apply(this,arguments);}_createClass(th,[{key:"init",value:function init(){var t=this.editor,e=t.model.schema;t.commands.add("blockQuote",new Qu(t)),e.register("blockQuote",{allowWhere:"$block",allowContentOf:"$root"}),e.addChildCheck(function(t,e){if(t.endsWith("blockQuote")&&"blockQuote"==e.name)return!1;}),t.conversion.elementToElement({model:"blockQuote",view:"blockquote"}),t.model.document.registerPostFixer(function(i){var n=t.model.document.differ.getChanges();var _iterator321=_createForOfIteratorHelper(n),_step321;try{for(_iterator321.s();!(_step321=_iterator321.n()).done;){var _t240=_step321.value;if("insert"==_t240.type){var _n141=_t240.position.nodeAfter;if(!_n141)continue;if(_n141.is("element","blockQuote")&&_n141.isEmpty)return i.remove(_n141),!0;if(_n141.is("element","blockQuote")&&!e.checkChild(_t240.position,_n141))return i.unwrap(_n141),!0;if(_n141.is("element")){var _t241=i.createRangeIn(_n141);var _iterator322=_createForOfIteratorHelper(_t241.getItems()),_step322;try{for(_iterator322.s();!(_step322=_iterator322.n()).done;){var _n142=_step322.value;if(_n142.is("element","blockQuote")&&!e.checkChild(i.createPositionBefore(_n142),_n142))return i.unwrap(_n142),!0;}}catch(err){_iterator322.e(err);}finally{_iterator322.f();}}}else if("remove"==_t240.type){var _e228=_t240.position.parent;if(_e228.is("element","blockQuote")&&_e228.isEmpty)return i.remove(_e228),!0;}}}catch(err){_iterator321.e(err);}finally{_iterator321.f();}return!1;});var i=this.editor.editing.view.document,n=t.model.document.selection,o=t.commands.get("blockQuote");this.listenTo(i,"enter",function(e,i){if(!n.isCollapsed||!o.value)return;n.getLastPosition().parent.isEmpty&&(t.execute("blockQuote"),t.editing.view.scrollToTheSelection(),i.preventDefault(),e.stop());},{priority:di.normal-10}),this.listenTo(i,"delete",function(e,i){if("backward"!=i.direction||!n.isCollapsed||!o.value)return;var r=n.getLastPosition().parent;r.isEmpty&&!r.previousSibling&&(t.execute("blockQuote"),t.editing.view.scrollToTheSelection(),i.preventDefault(),e.stop());},{priority:di.high+5});}}],[{key:"pluginName",get:function get(){return"BlockQuoteEditing";}}]);return th;}(pd);i(45);var eh=/*#__PURE__*/function(_pd25){_inherits(eh,_pd25);var _super104=_createSuper(eh);function eh(){_classCallCheck(this,eh);return _super104.apply(this,arguments);}_createClass(eh,[{key:"init",value:function init(){var _this162=this;var t=this.editor,e=t.t;t.ui.componentFactory.add("blockQuote",function(i){var n=t.commands.get("blockQuote"),o=new Xl(i);return o.set({label:e("Block quote"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574zm8 0a6.5 6.5 0 0 1 6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574z"/></svg>',tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(n,"value","isEnabled"),_this162.listenTo(o,"execute",function(){t.execute("blockQuote"),t.editing.view.focus();}),o;});}}]);return eh;}(pd);var ih=/*#__PURE__*/function(_pd26){_inherits(ih,_pd26);var _super105=_createSuper(ih);function ih(){_classCallCheck(this,ih);return _super105.apply(this,arguments);}_createClass(ih,[{key:"init",value:function init(){var t=this.editor,e=t.ui.componentFactory,i=t.t;e.add("ckfinder",function(e){var n=t.commands.get("ckfinder"),o=new Xl(e);return o.set({label:i("Insert image or file"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.627 16.5zm5.873-.196zm0-7.001V8h-13v8.5h4.341c.191.54.457 1.044.785 1.5H2a1.5 1.5 0 0 1-1.5-1.5v-13A1.5 1.5 0 0 1 2 2h4.5a1.5 1.5 0 0 1 1.06.44L9.122 4H16a1.5 1.5 0 0 1 1.5 1.5v1A1.5 1.5 0 0 1 19 8v2.531a6.027 6.027 0 0 0-1.5-1.228zM16 6.5v-1H8.5l-2-2H2v13h1V8a1.5 1.5 0 0 1 1.5-1.5H16z"/><path d="M14.5 19.5a5 5 0 1 1 0-10 5 5 0 0 1 0 10zM15 14v-2h-1v2h-2v1h2v2h1v-2h2v-1h-2z"/></svg>',tooltip:!0}),o.bind("isEnabled").to(n),o.on("execute",function(){t.execute("ckfinder"),t.editing.view.focus();}),o;});}}],[{key:"pluginName",get:function get(){return"CKFinderUI";}}]);return ih;}(pd);var nh=/*#__PURE__*/function(_br7){_inherits(nh,_br7);var _super106=_createSuper(nh);function nh(){_classCallCheck(this,nh);return _super106.apply(this,arguments);}_createClass(nh,[{key:"observe",value:function observe(t){var _this163=this;this.listenTo(t,"load",function(t,e){var i=e.target;_this163.checkShouldIgnoreEventFromTarget(i)||"IMG"==i.tagName&&_this163._fireEvents(e);},{useCapture:!0});}},{key:"_fireEvents",value:function _fireEvents(t){this.isEnabled&&(this.document.fire("layoutChanged"),this.document.fire("imageLoaded",t));}}]);return nh;}(br);var oh=/*#__PURE__*/function(){function oh(){_classCallCheck(this,oh);this._stack=[];}_createClass(oh,[{key:"add",value:function add(t,e){var i=this._stack,n=i[0];this._insertDescriptor(t);var o=i[0];n===o||rh(n,o)||this.fire("change:top",{oldDescriptor:n,newDescriptor:o,writer:e});}},{key:"remove",value:function remove(t,e){var i=this._stack,n=i[0];this._removeDescriptor(t);var o=i[0];n===o||rh(n,o)||this.fire("change:top",{oldDescriptor:n,newDescriptor:o,writer:e});}},{key:"_insertDescriptor",value:function _insertDescriptor(t){var e=this._stack,i=e.findIndex(function(e){return e.id===t.id;});if(rh(t,e[i]))return;i>-1&&e.splice(i,1);var n=0;for(;e[n]&&sh(e[n],t);){n++;}e.splice(n,0,t);}},{key:"_removeDescriptor",value:function _removeDescriptor(t){var e=this._stack,i=e.findIndex(function(e){return e.id===t;});i>-1&&e.splice(i,1);}}]);return oh;}();function rh(t,e){return t&&e&&t.priority==e.priority&&ah(t.classes)==ah(e.classes);}function sh(t,e){return t.priority>e.priority||!(t.priority<e.priority)&&ah(t.classes)>ah(e.classes);}function ah(t){return Array.isArray(t)?t.sort().join(","):t;}yi(oh,mi);i(47);var ch=Ll("px"),lh=rr.document.body;var dh=/*#__PURE__*/function(_El17){_inherits(dh,_El17);var _super107=_createSuper(dh);function dh(t){var _this164;_classCallCheck(this,dh);_this164=_super107.call(this,t);var e=_this164.bindTemplate;_this164.set("top",0),_this164.set("left",0),_this164.set("position","arrow_nw"),_this164.set("isVisible",!1),_this164.set("withArrow",!0),_this164.set("class"),_this164.content=_this164.createCollection(),_this164.setTemplate({tag:"div",attributes:{"class":["ck","ck-balloon-panel",e.to("position",function(t){return"ck-balloon-panel_"+t;}),e["if"]("isVisible","ck-balloon-panel_visible"),e["if"]("withArrow","ck-balloon-panel_with-arrow"),e.to("class")],style:{top:e.to("top",ch),left:e.to("left",ch)}},children:_this164.content});return _this164;}_createClass(dh,[{key:"show",value:function show(){this.isVisible=!0;}},{key:"hide",value:function hide(){this.isVisible=!1;}},{key:"attachTo",value:function attachTo(t){this.show();var e=dh.defaultPositions,i=Object.assign({},{element:this.element,positions:[e.southArrowNorth,e.southArrowNorthMiddleWest,e.southArrowNorthMiddleEast,e.southArrowNorthWest,e.southArrowNorthEast,e.northArrowSouth,e.northArrowSouthMiddleWest,e.northArrowSouthMiddleEast,e.northArrowSouthWest,e.northArrowSouthEast],limiter:lh,fitInViewport:!0},t),n=dh._getOptimalPosition(i),o=parseInt(n.left),r=parseInt(n.top),s=n.name;Object.assign(this,{top:r,left:o,position:s});}},{key:"pin",value:function pin(t){var _this165=this;this.unpin(),this._pinWhenIsVisibleCallback=function(){_this165.isVisible?_this165._startPinning(t):_this165._stopPinning();},this._startPinning(t),this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback);}},{key:"unpin",value:function unpin(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide());}},{key:"_startPinning",value:function _startPinning(t){var _this166=this;this.attachTo(t);var e=uh(t.target),i=t.limiter?uh(t.limiter):lh;this.listenTo(rr.document,"scroll",function(n,o){var r=o.target,s=e&&r.contains(e),a=i&&r.contains(i);!s&&!a&&e&&i||_this166.attachTo(t);},{useCapture:!0}),this.listenTo(rr.window,"resize",function(){_this166.attachTo(t);});}},{key:"_stopPinning",value:function _stopPinning(){this.stopListening(rr.document,"scroll"),this.stopListening(rr.window,"resize");}}]);return dh;}(El);function uh(t){return ii(t)?t:os(t)?t.commonAncestorContainer:"function"==typeof t?uh(t()):null;}function hh(t,e){return t.top-e.height-dh.arrowVerticalOffset;}function fh(t){return t.bottom+dh.arrowVerticalOffset;}dh.arrowHorizontalOffset=25,dh.arrowVerticalOffset=10,dh._getOptimalPosition=$l,dh.defaultPositions={northWestArrowSouthWest:function northWestArrowSouthWest(t,e){return{top:hh(t,e),left:t.left-dh.arrowHorizontalOffset,name:"arrow_sw"};},northWestArrowSouthMiddleWest:function northWestArrowSouthMiddleWest(t,e){return{top:hh(t,e),left:t.left-.25*e.width-dh.arrowHorizontalOffset,name:"arrow_smw"};},northWestArrowSouth:function northWestArrowSouth(t,e){return{top:hh(t,e),left:t.left-e.width/2,name:"arrow_s"};},northWestArrowSouthMiddleEast:function northWestArrowSouthMiddleEast(t,e){return{top:hh(t,e),left:t.left-.75*e.width+dh.arrowHorizontalOffset,name:"arrow_sme"};},northWestArrowSouthEast:function northWestArrowSouthEast(t,e){return{top:hh(t,e),left:t.left-e.width+dh.arrowHorizontalOffset,name:"arrow_se"};},northArrowSouthWest:function northArrowSouthWest(t,e){return{top:hh(t,e),left:t.left+t.width/2-dh.arrowHorizontalOffset,name:"arrow_sw"};},northArrowSouthMiddleWest:function northArrowSouthMiddleWest(t,e){return{top:hh(t,e),left:t.left+t.width/2-.25*e.width-dh.arrowHorizontalOffset,name:"arrow_smw"};},northArrowSouth:function northArrowSouth(t,e){return{top:hh(t,e),left:t.left+t.width/2-e.width/2,name:"arrow_s"};},northArrowSouthMiddleEast:function northArrowSouthMiddleEast(t,e){return{top:hh(t,e),left:t.left+t.width/2-.75*e.width+dh.arrowHorizontalOffset,name:"arrow_sme"};},northArrowSouthEast:function northArrowSouthEast(t,e){return{top:hh(t,e),left:t.left+t.width/2-e.width+dh.arrowHorizontalOffset,name:"arrow_se"};},northEastArrowSouthWest:function northEastArrowSouthWest(t,e){return{top:hh(t,e),left:t.right-dh.arrowHorizontalOffset,name:"arrow_sw"};},northEastArrowSouthMiddleWest:function northEastArrowSouthMiddleWest(t,e){return{top:hh(t,e),left:t.right-.25*e.width-dh.arrowHorizontalOffset,name:"arrow_smw"};},northEastArrowSouth:function northEastArrowSouth(t,e){return{top:hh(t,e),left:t.right-e.width/2,name:"arrow_s"};},northEastArrowSouthMiddleEast:function northEastArrowSouthMiddleEast(t,e){return{top:hh(t,e),left:t.right-.75*e.width+dh.arrowHorizontalOffset,name:"arrow_sme"};},northEastArrowSouthEast:function northEastArrowSouthEast(t,e){return{top:hh(t,e),left:t.right-e.width+dh.arrowHorizontalOffset,name:"arrow_se"};},southWestArrowNorthWest:function southWestArrowNorthWest(t,e){return{top:fh(t),left:t.left-dh.arrowHorizontalOffset,name:"arrow_nw"};},southWestArrowNorthMiddleWest:function southWestArrowNorthMiddleWest(t,e){return{top:fh(t),left:t.left-.25*e.width-dh.arrowHorizontalOffset,name:"arrow_nmw"};},southWestArrowNorth:function southWestArrowNorth(t,e){return{top:fh(t),left:t.left-e.width/2,name:"arrow_n"};},southWestArrowNorthMiddleEast:function southWestArrowNorthMiddleEast(t,e){return{top:fh(t),left:t.left-.75*e.width+dh.arrowHorizontalOffset,name:"arrow_nme"};},southWestArrowNorthEast:function southWestArrowNorthEast(t,e){return{top:fh(t),left:t.left-e.width+dh.arrowHorizontalOffset,name:"arrow_ne"};},southArrowNorthWest:function southArrowNorthWest(t,e){return{top:fh(t),left:t.left+t.width/2-dh.arrowHorizontalOffset,name:"arrow_nw"};},southArrowNorthMiddleWest:function southArrowNorthMiddleWest(t,e){return{top:fh(t),left:t.left+t.width/2-.25*e.width-dh.arrowHorizontalOffset,name:"arrow_nmw"};},southArrowNorth:function southArrowNorth(t,e){return{top:fh(t),left:t.left+t.width/2-e.width/2,name:"arrow_n"};},southArrowNorthMiddleEast:function southArrowNorthMiddleEast(t,e){return{top:fh(t),left:t.left+t.width/2-.75*e.width+dh.arrowHorizontalOffset,name:"arrow_nme"};},southArrowNorthEast:function southArrowNorthEast(t,e){return{top:fh(t),left:t.left+t.width/2-e.width+dh.arrowHorizontalOffset,name:"arrow_ne"};},southEastArrowNorthWest:function southEastArrowNorthWest(t,e){return{top:fh(t),left:t.right-dh.arrowHorizontalOffset,name:"arrow_nw"};},southEastArrowNorthMiddleWest:function southEastArrowNorthMiddleWest(t,e){return{top:fh(t),left:t.right-.25*e.width-dh.arrowHorizontalOffset,name:"arrow_nmw"};},southEastArrowNorth:function southEastArrowNorth(t,e){return{top:fh(t),left:t.right-e.width/2,name:"arrow_n"};},southEastArrowNorthMiddleEast:function southEastArrowNorthMiddleEast(t,e){return{top:fh(t),left:t.right-.75*e.width+dh.arrowHorizontalOffset,name:"arrow_nme"};},southEastArrowNorthEast:function southEastArrowNorthEast(t,e){return{top:fh(t),left:t.right-e.width+dh.arrowHorizontalOffset,name:"arrow_ne"};}};function mh(t,e,i){return t&&ph(t)&&!i.isInline(e);}function gh(t){return t.getAttribute("widget-type-around");}function ph(t){return!!t.is("element")&&!!t.getCustomProperty("widget");}function bh(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(!t.is("containerElement"))throw new ui.a("widget-to-widget-wrong-element-type",null,{element:t});return e.setAttribute("contenteditable","false",t),e.addClass("ck-widget",t),e.setCustomProperty("widget",!0,t),t.getFillerOffset=xh,i.label&&function(t,e,i){i.setCustomProperty("widgetLabel",e,t);}(t,i.label,e),i.hasSelectionHandle&&function(t,e){var i=e.createUIElement("div",{"class":"ck ck-widget__selection-handle"},function(t){var e=this.toDomElement(t),i=new Jl();return i.set("content",'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0H4zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3V0zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3v1zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5H12z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7V0zM0 7h1v2H0V7zm15 0h1v2h-1V7zm-8 8h2v1H7v-1z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>'),i.render(),e.appendChild(i.element),e;});e.insert(e.createPositionAt(t,0),i),e.addClass(["ck-widget_with-selection-handle"],t);}(t,e),wh(t,e,function(t,e,i){return i.addClass(Ti(e.classes),t);},function(t,e,i){return i.removeClass(Ti(e.classes),t);}),t;}function wh(t,e,i,n){var o=new oh();o.on("change:top",function(e,o){o.oldDescriptor&&n(t,o.oldDescriptor,o.writer),o.newDescriptor&&i(t,o.newDescriptor,o.writer);}),e.setCustomProperty("addHighlight",function(t,e,i){return o.add(e,i);},t),e.setCustomProperty("removeHighlight",function(t,e,i){return o.remove(e,i);},t);}function kh(t){var e=t.getCustomProperty("widgetLabel");return e?"function"==typeof e?e():e:"";}function _h(t,e){return e.addClass(["ck-editor__editable","ck-editor__nested-editable"],t),e.setAttribute("contenteditable",t.isReadOnly?"false":"true",t),t.on("change:isReadOnly",function(i,n,o){e.setAttribute("contenteditable",o?"false":"true",t);}),t.on("change:isFocused",function(i,n,o){o?e.addClass("ck-editor__nested-editable_focused",t):e.removeClass("ck-editor__nested-editable_focused",t);}),t;}function vh(t,e){var i=t.getSelectedElement();if(i){var _n143=gh(t);if(_n143)return e.createPositionAt(i,_n143);if(e.schema.isBlock(i))return e.createPositionAfter(i);}var n=t.getSelectedBlocks().next().value;if(n){if(n.isEmpty)return e.createPositionAt(n,0);var _i241=e.createPositionAfter(n);return t.focus.isTouching(_i241)?_i241:e.createPositionBefore(n);}return t.focus;}function yh(t,e){var i=new as(rr.window),n=i.getIntersection(t),o=e.height+dh.arrowVerticalOffset;if(t.top-o>i.top||t.bottom+o<i.bottom)return null;var r=n||t,s=r.left+r.width/2-e.width/2;return{top:Math.max(t.top,0)+dh.arrowVerticalOffset,left:s,name:"arrow_n"};}function xh(){return null;}function Ah(t){var e=t.getSelectedElement();return e&&function(t){return!!t.getCustomProperty("image")&&ph(t);}(e)?e:null;}function Th(t){return!!t&&t.is("element","image");}function Ch(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;t.change(function(n){var o=n.createElement("image",e),r=i||vh(t.document.selection,t);t.insertContent(o,r),o.parent&&n.setSelection(o,"on");});}function Sh(t){var e=t.schema,i=t.document.selection;return function(t,e,i){var n=function(t,e){var i=vh(t,e).parent;if(i.isEmpty&&!i.is("element","$root"))return i.parent;return i;}(t,i);return e.checkChild(n,"image");}(i,e,t)&&!function(t,e){var i=t.getSelectedElement();return i&&e.isObject(i);}(i,e)&&function(t){return _toConsumableArray(t.focus.getAncestors()).every(function(t){return!t.is("element","image");});}(i);}function Eh(t){var e=[];var _iterator323=_createForOfIteratorHelper(t.getChildren()),_step323;try{for(_iterator323.s();!(_step323=_iterator323.n()).done;){var _i242=_step323.value;e.push(_i242),_i242.is("element")&&e.push.apply(e,_toConsumableArray(_i242.getChildren()));}}catch(err){_iterator323.e(err);}finally{_iterator323.f();}return e.find(function(t){return t.is("element","img");});}function Ph(t){return function(i){i.on("attribute:".concat(t,":image"),e);};function e(t,e,i){if(!i.consumable.consume(e.item,t.name))return;var n=i.writer,o=Eh(i.mapper.toViewElement(e.item));n.setAttribute(e.attributeKey,e.attributeNewValue||"",o);}}var Mh=/*#__PURE__*/function(_wd10){_inherits(Mh,_wd10);var _super108=_createSuper(Mh);function Mh(){_classCallCheck(this,Mh);return _super108.apply(this,arguments);}_createClass(Mh,[{key:"refresh",value:function refresh(){this.isEnabled=Sh(this.editor.model);}},{key:"execute",value:function execute(t){var e=this.editor.model;var _iterator324=_createForOfIteratorHelper(Ti(t.source)),_step324;try{for(_iterator324.s();!(_step324=_iterator324.n()).done;){var _i243=_step324.value;Ch(e,{src:_i243});}}catch(err){_iterator324.e(err);}finally{_iterator324.f();}}}]);return Mh;}(wd);var Ih=/*#__PURE__*/function(_pd27){_inherits(Ih,_pd27);var _super109=_createSuper(Ih);function Ih(){_classCallCheck(this,Ih);return _super109.apply(this,arguments);}_createClass(Ih,[{key:"init",value:function init(){var t=this.editor,e=t.model.schema,i=t.t,n=t.conversion;t.editing.view.addObserver(nh),e.register("image",{isObject:!0,isBlock:!0,allowWhere:"$block",allowAttributes:["alt","src","srcset"]}),n["for"]("dataDowncast").elementToElement({model:"image",view:function view(t,_ref40){var e=_ref40.writer;return Nh(e);}}),n["for"]("editingDowncast").elementToElement({model:"image",view:function view(t,_ref41){var e=_ref41.writer;return function(t,e,i){return e.setCustomProperty("image",!0,t),bh(t,e,{label:function label(){var e=Eh(t).getAttribute("alt");return e?"".concat(e," ").concat(i):i;}});}(Nh(e),e,i("image widget"));}}),n["for"]("downcast").add(Ph("src")).add(Ph("alt")).add(function(){return function(e){e.on("attribute:srcset:image",t);};function t(t,e,i){if(!i.consumable.consume(e.item,t.name))return;var n=i.writer,o=Eh(i.mapper.toViewElement(e.item));if(null===e.attributeNewValue){var _t242=e.attributeOldValue;_t242.data&&(n.removeAttribute("srcset",o),n.removeAttribute("sizes",o),_t242.width&&n.removeAttribute("width",o));}else{var _t243=e.attributeNewValue;_t243.data&&(n.setAttribute("srcset",_t243.data,o),n.setAttribute("sizes","100vw",o),_t243.width&&n.setAttribute("width",_t243.width,o));}}}()),n["for"]("upcast").elementToElement({view:{name:"img",attributes:{src:!0}},model:function model(t,_ref42){var e=_ref42.writer;return e.createElement("image",{src:t.getAttribute("src")});}}).attributeToAttribute({view:{name:"img",key:"alt"},model:"alt"}).attributeToAttribute({view:{name:"img",key:"srcset"},model:{key:"srcset",value:function value(t){var e={data:t.getAttribute("srcset")};return t.hasAttribute("width")&&(e.width=t.getAttribute("width")),e;}}}).add(function(){return function(e){e.on("element:figure",t);};function t(t,e,i){if(!i.consumable.test(e.viewItem,{name:!0,classes:"image"}))return;var n=Eh(e.viewItem);if(!n||!n.hasAttribute("src")||!i.consumable.test(n,{name:!0}))return;var o=_d(i.convertItem(n,e.modelCursor).modelRange.getItems());o&&(i.convertChildren(e.viewItem,o),i.updateConversionResult(o,e));}}()),t.commands.add("imageInsert",new Mh(t));}}],[{key:"pluginName",get:function get(){return"ImageEditing";}}]);return Ih;}(pd);function Nh(t){var e=t.createEmptyElement("img"),i=t.createContainerElement("figure",{"class":"image"});return t.insert(t.createPositionAt(i,0),e),i;}var Oh=/*#__PURE__*/function(_Vr6){_inherits(Oh,_Vr6);var _super110=_createSuper(Oh);function Oh(t){var _this167;_classCallCheck(this,Oh);_this167=_super110.call(this,t),_this167.domEventType="mousedown";return _this167;}_createClass(Oh,[{key:"onDomEvent",value:function onDomEvent(t){this.fire(t.type,t);}}]);return Oh;}(Vr);var Rh=/*#__PURE__*/function(_pd28){_inherits(Rh,_pd28);var _super111=_createSuper(Rh);function Rh(t){var _this168;_classCallCheck(this,Rh);_this168=_super111.call(this,t),_this168.attributes=new Set(),_this168._overrideUid=null;return _this168;}_createClass(Rh,[{key:"init",value:function init(){var _this169=this;var t=this.editor,e=t.model,i=t.editing.view,n=t.locale,o=e.document.selection;this.listenTo(i.document,"keydown",function(t,e){if(!o.isCollapsed)return;if(e.shiftKey||e.altKey||e.ctrlKey)return;var i=e.keyCode==po.arrowright,r=e.keyCode==po.arrowleft;if(!i&&!r)return;var s=n.contentLanguageDirection;var a=!1;a="ltr"===s&&i||"rtl"===s&&r?_this169._handleForwardMovement(e):_this169._handleBackwardMovement(e),!0===a&&t.stop();},{priority:di.get("high")+1}),this._isNextGravityRestorationSkipped=!1,this.listenTo(o,"change:range",function(t,e){_this169._isNextGravityRestorationSkipped?_this169._isNextGravityRestorationSkipped=!1:_this169._isGravityOverridden&&(!e.directChange&&Vh(o.getFirstPosition(),_this169.attributes)||_this169._restoreGravity());});}},{key:"registerAttribute",value:function registerAttribute(t){this.attributes.add(t);}},{key:"_handleForwardMovement",value:function _handleForwardMovement(t){var e=this.attributes,i=this.editor.model.document.selection,n=i.getFirstPosition();return!this._isGravityOverridden&&(!n.isAtStart||!Dh(i,e))&&(Vh(n,e)?(zh(t),this._overrideGravity(),!0):void 0);}},{key:"_handleBackwardMovement",value:function _handleBackwardMovement(t){var e=this.attributes,i=this.editor.model,n=i.document.selection,o=n.getFirstPosition();return this._isGravityOverridden?(zh(t),this._restoreGravity(),Lh(i,e,o),!0):o.isAtStart?!!Dh(n,e)&&(zh(t),Lh(i,e,o),!0):function(t,e){return Vh(t.getShiftedBy(-1),e);}(o,e)?o.isAtEnd&&!Dh(n,e)&&Vh(o,e)?(zh(t),Lh(i,e,o),!0):(this._isNextGravityRestorationSkipped=!0,this._overrideGravity(),!1):void 0;}},{key:"_isGravityOverridden",get:function get(){return!!this._overrideUid;}},{key:"_overrideGravity",value:function _overrideGravity(){this._overrideUid=this.editor.model.change(function(t){return t.overrideSelectionGravity();});}},{key:"_restoreGravity",value:function _restoreGravity(){var _this170=this;this.editor.model.change(function(t){t.restoreSelectionGravity(_this170._overrideUid),_this170._overrideUid=null;});}}],[{key:"pluginName",get:function get(){return"TwoStepCaretMovement";}}]);return Rh;}(pd);function Dh(t,e){var _iterator325=_createForOfIteratorHelper(e),_step325;try{for(_iterator325.s();!(_step325=_iterator325.n()).done;){var _i244=_step325.value;if(t.hasAttribute(_i244))return!0;}}catch(err){_iterator325.e(err);}finally{_iterator325.f();}return!1;}function Lh(t,e,i){var n=i.nodeBefore;t.change(function(t){n?t.setSelectionAttribute(n.getAttributes()):t.removeSelectionAttribute(e);});}function zh(t){t.preventDefault();}function Vh(t,e){var i=t.nodeBefore,n=t.nodeAfter;var _iterator326=_createForOfIteratorHelper(e),_step326;try{for(_iterator326.s();!(_step326=_iterator326.n()).done;){var _t244=_step326.value;var _e229=i?i.getAttribute(_t244):void 0;if((n?n.getAttribute(_t244):void 0)!==_e229)return!0;}}catch(err){_iterator326.e(err);}finally{_iterator326.f();}return!1;}function jh(t,e,i,n){return n.createRange(Bh(t,e,i,!0,n),Bh(t,e,i,!1,n));}function Bh(t,e,i,n,o){var r=t.textNode||(n?t.nodeBefore:t.nodeAfter),s=null;for(;r&&r.getAttribute(e)==i;){s=r,r=n?r.previousSibling:r.nextSibling;}return s?o.createPositionAt(s,n?"before":"after"):t;}function Fh(t,e,i,n){var o=t.editing.view,r=new Set();o.document.registerPostFixer(function(o){var s=t.model.document.selection;var a=!1;if(s.hasAttribute(e)){var _c9=jh(s.getFirstPosition(),e,s.getAttribute(e),t.model),_l6=t.editing.mapper.toViewRange(_c9);var _iterator327=_createForOfIteratorHelper(_l6.getItems()),_step327;try{for(_iterator327.s();!(_step327=_iterator327.n()).done;){var _t245=_step327.value;_t245.is("element",i)&&!_t245.hasClass(n)&&(o.addClass(n,_t245),r.add(_t245),a=!0);}}catch(err){_iterator327.e(err);}finally{_iterator327.f();}}return a;}),t.conversion["for"]("editingDowncast").add(function(t){function e(){o.change(function(t){var _iterator328=_createForOfIteratorHelper(r.values()),_step328;try{for(_iterator328.s();!(_step328=_iterator328.n()).done;){var _e230=_step328.value;t.removeClass(n,_e230),r["delete"](_e230);}}catch(err){_iterator328.e(err);}finally{_iterator328.f();}});}t.on("insert",e,{priority:"highest"}),t.on("remove",e,{priority:"highest"}),t.on("attribute",e,{priority:"highest"}),t.on("selection",e,{priority:"highest"});});}var Hh=/*#__PURE__*/function(){function Hh(){_classCallCheck(this,Hh);this._definitions=new Set();}_createClass(Hh,[{key:"length",get:function get(){return this._definitions.size;}},{key:"add",value:function add(t){var _this171=this;Array.isArray(t)?t.forEach(function(t){return _this171._definitions.add(t);}):this._definitions.add(t);}},{key:"getDispatcher",value:function getDispatcher(){var _this172=this;return function(t){t.on("attribute:linkHref",function(t,e,i){if(!i.consumable.test(e.item,"attribute:linkHref"))return;var n=i.writer,o=n.document.selection;var _iterator329=_createForOfIteratorHelper(_this172._definitions),_step329;try{for(_iterator329.s();!(_step329=_iterator329.n()).done;){var _t246=_step329.value;var _r44=n.createAttributeElement("a",_t246.attributes,{priority:5});n.setCustomProperty("link",!0,_r44),_t246.callback(e.attributeNewValue)?e.item.is("selection")?n.wrap(o.getFirstRange(),_r44):n.wrap(i.mapper.toViewRange(e.range),_r44):n.unwrap(i.mapper.toViewRange(e.range),_r44);}}catch(err){_iterator329.e(err);}finally{_iterator329.f();}},{priority:"high"});};}},{key:"getDispatcherForLinkedImage",value:function getDispatcherForLinkedImage(){var _this173=this;return function(t){t.on("attribute:linkHref:image",function(t,e,i){var n=i.mapper.toViewElement(e.item),o=Array.from(n.getChildren()).find(function(t){return"a"===t.name;});var _iterator330=_createForOfIteratorHelper(_this173._definitions),_step330;try{for(_iterator330.s();!(_step330=_iterator330.n()).done;){var _t247=_step330.value;var _n144=Li(_t247.attributes);if(_t247.callback(e.attributeNewValue)){var _iterator331=_createForOfIteratorHelper(_n144),_step331;try{for(_iterator331.s();!(_step331=_iterator331.n()).done;){var _step331$value=_slicedToArray(_step331.value,2),_t248=_step331$value[0],_e231=_step331$value[1];"class"===_t248?i.writer.addClass(_e231,o):i.writer.setAttribute(_t248,_e231,o);}}catch(err){_iterator331.e(err);}finally{_iterator331.f();}}else{var _iterator332=_createForOfIteratorHelper(_n144),_step332;try{for(_iterator332.s();!(_step332=_iterator332.n()).done;){var _step332$value=_slicedToArray(_step332.value,2),_t249=_step332$value[0],_e232=_step332$value[1];"class"===_t249?i.writer.removeClass(_e232,o):i.writer.removeAttribute(_t249,o);}}catch(err){_iterator332.e(err);}finally{_iterator332.f();}}}}catch(err){_iterator330.e(err);}finally{_iterator330.f();}});};}}]);return Hh;}();var Uh=function Uh(t,e,i){var n=t.length;return i=void 0===i?n:i,!e&&i>=n?t:on(t,e,i);},Wh=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var qh=function qh(t){return Wh.test(t);};var $h=function $h(t){return t.split("");},Yh="[\\ud800-\\udfff]",Gh="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Kh="\\ud83c[\\udffb-\\udfff]",Qh="[^\\ud800-\\udfff]",Jh="(?:\\ud83c[\\udde6-\\uddff]){2}",Zh="[\\ud800-\\udbff][\\udc00-\\udfff]",Xh="(?:"+Gh+"|"+Kh+")"+"?",tf="[\\ufe0e\\ufe0f]?"+Xh+("(?:\\u200d(?:"+[Qh,Jh,Zh].join("|")+")[\\ufe0e\\ufe0f]?"+Xh+")*"),ef="(?:"+[Qh+Gh+"?",Gh,Jh,Zh,Yh].join("|")+")",nf=RegExp(Kh+"(?="+Kh+")|"+ef+tf,"g");var of=function of(t){return t.match(nf)||[];};var rf=function rf(t){return qh(t)?of(t):$h(t);};var sf=function(t){return function(e){e=Zi(e);var i=qh(e)?rf(e):void 0,n=i?i[0]:e.charAt(0),o=i?Uh(i,1).join(""):e.slice(1);return n[t]()+o;};}("toUpperCase");var af=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,cf=/^(?:(?:https?|ftps?|mailto):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))/i,lf=/^[\S]+@((?![-_])(?:[-\w\u00a1-\uffff]{0,63}[^-_]\.))+(?:[a-z\u00a1-\uffff]{2,})$/i,df=/^((\w+:(\/{2,})?)|(\W))/i;function uf(t,_ref43){var e=_ref43.writer;var i=e.createAttributeElement("a",{href:t},{priority:5});return e.setCustomProperty("link",!0,i),i;}function hf(t){return function(t){return t.replace(af,"").match(cf);}(t=String(t))?t:"#";}function ff(t,e){return!!t&&t.is("element","image")&&e.checkAttribute("image","linkHref");}function mf(t,e){var i=(n=t,lf.test(n)?"mailto:":e);var n;var o=!!i&&!df.test(t);return t&&o?i+t:t;}var gf=/*#__PURE__*/function(_wd11){_inherits(gf,_wd11);var _super112=_createSuper(gf);function gf(t){var _this174;_classCallCheck(this,gf);_this174=_super112.call(this,t),_this174.manualDecorators=new xi(),_this174.automaticDecorators=new Hh();return _this174;}_createClass(gf,[{key:"restoreManualDecoratorStates",value:function restoreManualDecoratorStates(){var _iterator333=_createForOfIteratorHelper(this.manualDecorators),_step333;try{for(_iterator333.s();!(_step333=_iterator333.n()).done;){var _t250=_step333.value;_t250.value=this._getDecoratorStateFromModel(_t250.id);}}catch(err){_iterator333.e(err);}finally{_iterator333.f();}}},{key:"refresh",value:function refresh(){var t=this.editor.model,e=t.document,i=_d(e.selection.getSelectedBlocks());ff(i,t.schema)?(this.value=i.getAttribute("linkHref"),this.isEnabled=t.schema.checkAttribute(i,"linkHref")):(this.value=e.selection.getAttribute("linkHref"),this.isEnabled=t.schema.checkAttributeInSelection(e.selection,"linkHref"));var _iterator334=_createForOfIteratorHelper(this.manualDecorators),_step334;try{for(_iterator334.s();!(_step334=_iterator334.n()).done;){var _t251=_step334.value;_t251.value=this._getDecoratorStateFromModel(_t251.id);}}catch(err){_iterator334.e(err);}finally{_iterator334.f();}}},{key:"execute",value:function execute(t){var _this175=this;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=this.editor.model,n=i.document.selection,o=[],r=[];for(var _t252 in e){e[_t252]?o.push(_t252):r.push(_t252);}i.change(function(e){if(n.isCollapsed){var _s29=n.getFirstPosition();if(n.hasAttribute("linkHref")){var _a17=jh(_s29,"linkHref",n.getAttribute("linkHref"),i);e.setAttribute("linkHref",t,_a17),o.forEach(function(t){e.setAttribute(t,!0,_a17);}),r.forEach(function(t){e.removeAttribute(t,_a17);}),e.setSelection(e.createPositionAfter(_a17.end.nodeBefore));}else if(""!==t){var _r45=Li(n.getAttributes());_r45.set("linkHref",t),o.forEach(function(t){_r45.set(t,!0);});var _i$insertContent=i.insertContent(e.createText(t,_r45),_s29),_a18=_i$insertContent.end;e.setSelection(_a18);}["linkHref"].concat(o,r).forEach(function(t){e.removeSelectionAttribute(t);});}else{var _s30=i.schema.getValidRanges(n.getRanges(),"linkHref"),_a19=[];var _iterator335=_createForOfIteratorHelper(n.getSelectedBlocks()),_step335;try{for(_iterator335.s();!(_step335=_iterator335.n()).done;){var _t253=_step335.value;i.schema.checkAttribute(_t253,"linkHref")&&_a19.push(e.createRangeOn(_t253));}}catch(err){_iterator335.e(err);}finally{_iterator335.f();}var _c10=_a19.slice();var _iterator336=_createForOfIteratorHelper(_s30),_step336;try{for(_iterator336.s();!(_step336=_iterator336.n()).done;){var _t254=_step336.value;_this175._isRangeToUpdate(_t254,_a19)&&_c10.push(_t254);}}catch(err){_iterator336.e(err);}finally{_iterator336.f();}var _iterator337=_createForOfIteratorHelper(_c10),_step337;try{var _loop6=function _loop6(){var i=_step337.value;e.setAttribute("linkHref",t,i),o.forEach(function(t){e.setAttribute(t,!0,i);}),r.forEach(function(t){e.removeAttribute(t,i);});};for(_iterator337.s();!(_step337=_iterator337.n()).done;){_loop6();}}catch(err){_iterator337.e(err);}finally{_iterator337.f();}}});}},{key:"_getDecoratorStateFromModel",value:function _getDecoratorStateFromModel(t){var e=this.editor.model,i=e.document,n=_d(i.selection.getSelectedBlocks());return ff(n,e.schema)?n.getAttribute(t):i.selection.getAttribute(t);}},{key:"_isRangeToUpdate",value:function _isRangeToUpdate(t,e){var _iterator338=_createForOfIteratorHelper(e),_step338;try{for(_iterator338.s();!(_step338=_iterator338.n()).done;){var _i245=_step338.value;if(_i245.containsRange(t))return!1;}}catch(err){_iterator338.e(err);}finally{_iterator338.f();}return!0;}}]);return gf;}(wd);var pf=/*#__PURE__*/function(_wd12){_inherits(pf,_wd12);var _super113=_createSuper(pf);function pf(){_classCallCheck(this,pf);return _super113.apply(this,arguments);}_createClass(pf,[{key:"refresh",value:function refresh(){var t=this.editor.model,e=t.document,i=_d(e.selection.getSelectedBlocks());ff(i,t.schema)?this.isEnabled=t.schema.checkAttribute(i,"linkHref"):this.isEnabled=t.schema.checkAttributeInSelection(e.selection,"linkHref");}},{key:"execute",value:function execute(){var t=this.editor,e=this.editor.model,i=e.document.selection,n=t.commands.get("link");e.change(function(t){var o=i.isCollapsed?[jh(i.getFirstPosition(),"linkHref",i.getAttribute("linkHref"),e)]:e.schema.getValidRanges(i.getRanges(),"linkHref");var _iterator339=_createForOfIteratorHelper(o),_step339;try{for(_iterator339.s();!(_step339=_iterator339.n()).done;){var _e233=_step339.value;if(t.removeAttribute("linkHref",_e233),n){var _iterator340=_createForOfIteratorHelper(n.manualDecorators),_step340;try{for(_iterator340.s();!(_step340=_iterator340.n()).done;){var _i246=_step340.value;t.removeAttribute(_i246.id,_e233);}}catch(err){_iterator340.e(err);}finally{_iterator340.f();}}}}catch(err){_iterator339.e(err);}finally{_iterator339.f();}});}}]);return pf;}(wd);var bf=function bf(_ref44){var t=_ref44.id,e=_ref44.label,i=_ref44.attributes,n=_ref44.defaultValue;_classCallCheck(this,bf);this.id=t,this.set("value"),this.defaultValue=n,this.label=e,this.attributes=i;};yi(bf,Un);i(49);var wf=/^(https?:)?\/\//;var kf=/*#__PURE__*/function(_pd29){_inherits(kf,_pd29);var _super114=_createSuper(kf);function kf(t){var _this176;_classCallCheck(this,kf);_this176=_super114.call(this,t),t.config.define("link",{addTargetToExternalLinks:!1});return _this176;}_createClass(kf,[{key:"init",value:function init(){var t=this.editor;t.model.schema.extend("$text",{allowAttributes:"linkHref"}),t.conversion["for"]("dataDowncast").attributeToElement({model:"linkHref",view:uf}),t.conversion["for"]("editingDowncast").attributeToElement({model:"linkHref",view:function view(t,e){return uf(hf(t),e);}}),t.conversion["for"]("upcast").elementToAttribute({view:{name:"a",attributes:{href:!0}},model:{key:"linkHref",value:function value(t){return t.getAttribute("href");}}}),t.commands.add("link",new gf(t)),t.commands.add("unlink",new pf(t));var e=function(t,e){var i={"Open in a new tab":t("Open in a new tab"),Downloadable:t("Downloadable")};return e.forEach(function(t){return t.label&&i[t.label]&&(t.label=i[t.label]),t;}),e;}(t.t,function(t){var e=[];if(t)for(var _i247=0,_Object$entries2=Object.entries(t);_i247<_Object$entries2.length;_i247++){var _Object$entries2$_i=_slicedToArray(_Object$entries2[_i247],2),_i248=_Object$entries2$_i[0],_n145=_Object$entries2$_i[1];var _t255=Object.assign({},_n145,{id:"link"+sf(_i248)});e.push(_t255);}return e;}(t.config.get("link.decorators")));this._enableAutomaticDecorators(e.filter(function(t){return"automatic"===t.mode;})),this._enableManualDecorators(e.filter(function(t){return"manual"===t.mode;}));t.plugins.get(Rh).registerAttribute("linkHref"),Fh(t,"linkHref","a","ck-link_selected"),this._enableInsertContentSelectionAttributesFixer(),this._enableClickingAfterLink(),this._enableTypingOverLink(),this._handleDeleteContentAfterLink();}},{key:"_enableAutomaticDecorators",value:function _enableAutomaticDecorators(t){var e=this.editor,i=e.commands.get("link").automaticDecorators;e.config.get("link.addTargetToExternalLinks")&&i.add({id:"linkIsExternal",mode:"automatic",callback:function callback(t){return wf.test(t);},attributes:{target:"_blank",rel:"noopener noreferrer"}}),i.add(t),i.length&&e.conversion["for"]("downcast").add(i.getDispatcher());}},{key:"_enableManualDecorators",value:function _enableManualDecorators(t){if(!t.length)return;var e=this.editor,i=e.commands.get("link").manualDecorators;t.forEach(function(t){e.model.schema.extend("$text",{allowAttributes:t.id}),i.add(new bf(t)),e.conversion["for"]("downcast").attributeToElement({model:t.id,view:function view(e,_ref45){var n=_ref45.writer;if(e){var _e234=i.get(t.id).attributes,_o92=n.createAttributeElement("a",_e234,{priority:5});return n.setCustomProperty("link",!0,_o92),_o92;}}}),e.conversion["for"]("upcast").elementToAttribute({view:{name:"a",attributes:i.get(t.id).attributes},model:{key:t.id}});});}},{key:"_enableInsertContentSelectionAttributesFixer",value:function _enableInsertContentSelectionAttributesFixer(){var t=this.editor,e=t.model,i=e.document.selection,n=t.commands.get("link");this.listenTo(e,"insertContent",function(){var t=i.anchor.nodeBefore,o=i.anchor.nodeAfter;i.hasAttribute("linkHref")&&t&&t.hasAttribute("linkHref")&&(o&&o.hasAttribute("linkHref")||e.change(function(t){_f(t,n.manualDecorators);}));},{priority:"low"});}},{key:"_enableClickingAfterLink",value:function _enableClickingAfterLink(){var t=this.editor,e=t.commands.get("link");t.editing.view.addObserver(Oh);var i=!1;this.listenTo(t.editing.view.document,"mousedown",function(){i=!0;}),this.listenTo(t.editing.view.document,"selectionChange",function(){if(!i)return;i=!1;var n=t.model.document.selection;if(!n.isCollapsed)return;if(!n.hasAttribute("linkHref"))return;var o=n.getFirstPosition(),r=jh(o,"linkHref",n.getAttribute("linkHref"),t.model);(o.isTouching(r.start)||o.isTouching(r.end))&&t.model.change(function(t){_f(t,e.manualDecorators);});});}},{key:"_enableTypingOverLink",value:function _enableTypingOverLink(){var t=this.editor,e=t.editing.view;var i,n;this.listenTo(e.document,"delete",function(){n=!0;},{priority:"high"}),this.listenTo(t.model,"deleteContent",function(){var e=t.model.document.selection;e.isCollapsed||(n?n=!1:vf(t)&&function(t){var e=t.document.selection,i=e.getFirstPosition(),n=e.getLastPosition(),o=i.nodeAfter;if(!o)return!1;if(!o.is("$text"))return!1;if(!o.hasAttribute("linkHref"))return!1;var r=n.textNode||n.nodeBefore;if(o===r)return!0;return jh(i,"linkHref",o.getAttribute("linkHref"),t).containsRange(t.createRange(i,n),!0);}(t.model)&&(i=e.getAttributes()));},{priority:"high"}),this.listenTo(t.model,"insertContent",function(e,_ref46){var _ref47=_slicedToArray(_ref46,1),o=_ref47[0];n=!1,vf(t)&&i&&(t.model.change(function(t){var _iterator341=_createForOfIteratorHelper(i),_step341;try{for(_iterator341.s();!(_step341=_iterator341.n()).done;){var _step341$value=_slicedToArray(_step341.value,2),_e235=_step341$value[0],_n146=_step341$value[1];t.setAttribute(_e235,_n146,o);}}catch(err){_iterator341.e(err);}finally{_iterator341.f();}}),i=null);},{priority:"high"});}},{key:"_handleDeleteContentAfterLink",value:function _handleDeleteContentAfterLink(){var t=this.editor,e=t.model,i=e.document.selection,n=t.editing.view,o=t.commands.get("link");var r=!1,s=!1;this.listenTo(n.document,"delete",function(t,e){s=e.domEvent.keyCode===po.backspace;},{priority:"high"}),this.listenTo(e,"deleteContent",function(){r=!1;var t=i.getFirstPosition(),n=i.getAttribute("linkHref");if(!n)return;var o=jh(t,"linkHref",n,e);r=o.containsPosition(t)||o.end.isEqual(t);},{priority:"high"}),this.listenTo(e,"deleteContent",function(){s&&(s=!1,r||t.model.enqueueChange(function(t){_f(t,o.manualDecorators);}));},{priority:"low"});}}],[{key:"pluginName",get:function get(){return"LinkEditing";}},{key:"requires",get:function get(){return[Rh,ru,Rd];}}]);return kf;}(pd);function _f(t,e){t.removeSelectionAttribute("linkHref");var _iterator342=_createForOfIteratorHelper(e),_step342;try{for(_iterator342.s();!(_step342=_iterator342.n()).done;){var _i249=_step342.value;t.removeSelectionAttribute(_i249.id);}}catch(err){_iterator342.e(err);}finally{_iterator342.f();}}function vf(t){return t.plugins.get("Input").isInput(t.model.change(function(t){return t.batch;}));}var yf=/*#__PURE__*/function(_Iu2){_inherits(yf,_Iu2);var _super115=_createSuper(yf);function yf(){_classCallCheck(this,yf);return _super115.apply(this,arguments);}_createClass(yf,[{key:"init",value:function init(){this.on("show:warning",function(t,e){window.alert(e.message);},{priority:"lowest"});}},{key:"showSuccess",value:function showSuccess(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this._showNotification({message:t,type:"success",namespace:e.namespace,title:e.title});}},{key:"showInfo",value:function showInfo(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this._showNotification({message:t,type:"info",namespace:e.namespace,title:e.title});}},{key:"showWarning",value:function showWarning(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this._showNotification({message:t,type:"warning",namespace:e.namespace,title:e.title});}},{key:"_showNotification",value:function _showNotification(t){var e="show:"+t.type+(t.namespace?":"+t.namespace:"");this.fire(e,{message:t.message,type:t.type,title:t.title||""});}}],[{key:"pluginName",get:function get(){return"Notification";}}]);return yf;}(Iu);var xf=/*#__PURE__*/function(_wd13){_inherits(xf,_wd13);var _super116=_createSuper(xf);function xf(t){var _this177;_classCallCheck(this,xf);_this177=_super116.call(this,t),_this177.stopListening(_this177.editor.model.document,"change"),_this177.listenTo(_this177.editor.model.document,"change",function(){return _this177.refresh();},{priority:"low"});return _this177;}_createClass(xf,[{key:"refresh",value:function refresh(){var t=this.editor.commands.get("imageInsert"),e=this.editor.commands.get("link");this.isEnabled=t.isEnabled||e.isEnabled;}},{key:"execute",value:function execute(){var t=this.editor,e=this.editor.config.get("ckfinder.openerMethod")||"modal";if("popup"!=e&&"modal"!=e)throw new ui.a("ckfinder-unknown-openermethod",t);var i=this.editor.config.get("ckfinder.options")||{};i.chooseFiles=!0;var n=i.onInit;i.language||(i.language=t.locale.uiLanguage),i.onInit=function(e){n&&n(e),e.on("files:choose",function(i){var n=i.data.files.toArray(),o=n.filter(function(t){return!t.isImage();}),r=n.filter(function(t){return t.isImage();});var _iterator343=_createForOfIteratorHelper(o),_step343;try{for(_iterator343.s();!(_step343=_iterator343.n()).done;){var _e236=_step343.value;t.execute("link",_e236.getUrl());}}catch(err){_iterator343.e(err);}finally{_iterator343.f();}var s=[];var _iterator344=_createForOfIteratorHelper(r),_step344;try{for(_iterator344.s();!(_step344=_iterator344.n()).done;){var _t256=_step344.value;var _i250=_t256.getUrl();s.push(_i250||e.request("file:getProxyUrl",{file:_t256}));}}catch(err){_iterator344.e(err);}finally{_iterator344.f();}s.length&&Af(t,s);}),e.on("file:choose:resizedImage",function(e){var i=e.data.resizedUrl;if(i)Af(t,[i]);else{var _e237=t.plugins.get("Notification"),_i251=t.locale.t;_e237.showWarning(_i251("Could not obtain resized image URL."),{title:_i251("Selecting resized image failed"),namespace:"ckfinder"});}});},window.CKFinder[e](i);}}]);return xf;}(wd);function Af(t,e){if(t.commands.get("imageInsert").isEnabled)t.execute("imageInsert",{source:e});else{var _e238=t.plugins.get("Notification"),_i252=t.locale.t;_e238.showWarning(_i252("Could not insert image at the current position."),{title:_i252("Inserting image failed"),namespace:"ckfinder"});}}var Tf=/*#__PURE__*/function(_pd30){_inherits(Tf,_pd30);var _super117=_createSuper(Tf);function Tf(){_classCallCheck(this,Tf);return _super117.apply(this,arguments);}_createClass(Tf,[{key:"init",value:function init(){var t=this.editor;t.commands.add("ckfinder",new xf(t));}}],[{key:"pluginName",get:function get(){return"CKFinderEditing";}},{key:"requires",get:function get(){return[yf,Ih,kf];}}]);return Tf;}(pd);var Cf=/^data:(\S*?);base64,/;var Sf=/*#__PURE__*/function(){function Sf(t,e,i){_classCallCheck(this,Sf);if(!t)throw new ui.a("fileuploader-missing-file",null);if(!e)throw new ui.a("fileuploader-missing-token",null);if(!i)throw new ui.a("fileuploader-missing-api-address",null);this.file=function(t){if("string"!=typeof t)return!1;var e=t.match(Cf);return!(!e||!e.length);}(t)?function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:512;try{var _i253=t.match(Cf)[1],_n147=atob(t.replace(Cf,"")),_o93=[];for(var _t257=0;_t257<_n147.length;_t257+=e){var _i254=_n147.slice(_t257,_t257+e),_r46=new Array(_i254.length);for(var _t258=0;_t258<_i254.length;_t258++){_r46[_t258]=_i254.charCodeAt(_t258);}_o93.push(new Uint8Array(_r46));}return new Blob(_o93,{type:_i253});}catch(t){throw new ui.a("fileuploader-decoding-image-data-error",null);}}(t):t,this._token=e,this._apiAddress=i;}_createClass(Sf,[{key:"onProgress",value:function onProgress(t){return this.on("progress",function(e,i){return t(i);}),this;}},{key:"onError",value:function onError(t){return this.once("error",function(e,i){return t(i);}),this;}},{key:"abort",value:function abort(){this.xhr.abort();}},{key:"send",value:function send(){return this._prepareRequest(),this._attachXHRListeners(),this._sendRequest();}},{key:"_prepareRequest",value:function _prepareRequest(){var t=new XMLHttpRequest();t.open("POST",this._apiAddress),t.setRequestHeader("Authorization",this._token.value),t.responseType="json",this.xhr=t;}},{key:"_attachXHRListeners",value:function _attachXHRListeners(){var _this178=this;var t=this,e=this.xhr;function i(e){return function(){return t.fire("error",e);};}e.addEventListener("error",i("Network Error")),e.addEventListener("abort",i("Abort")),e.upload&&e.upload.addEventListener("progress",function(t){t.lengthComputable&&_this178.fire("progress",{total:t.total,uploaded:t.loaded});}),e.addEventListener("load",function(){var t=e.status,i=e.response;if(t<200||t>299)return _this178.fire("error",i.message||i.error);});}},{key:"_sendRequest",value:function _sendRequest(){var _this179=this;var t=new FormData(),e=this.xhr;return t.append("file",this.file),new Promise(function(i,n){e.addEventListener("load",function(){var t=e.status,o=e.response;return t<200||t>299?o.message?n(new ui.a("fileuploader-uploading-data-failed",_this179,{message:o.message})):n(o.error):i(o);}),e.addEventListener("error",function(){return n(new Error("Network Error"));}),e.addEventListener("abort",function(){return n(new Error("Abort"));}),e.send(t);});}}]);return Sf;}();yi(Sf,mi);var Ef={autoRefresh:!0};var Pf=/*#__PURE__*/function(){function Pf(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Ef;_classCallCheck(this,Pf);if(!t)throw new ui.a("token-missing-token-url",this);e.initValue&&this._validateTokenValue(e.initValue),this.set("value",e.initValue),this._refresh="function"==typeof t?t:function(){return e=t,new Promise(function(t,i){var n=new XMLHttpRequest();n.open("GET",e),n.addEventListener("load",function(){var e=n.status,o=n.response;return e<200||e>299?i(new ui.a("token-cannot-download-new-token",null)):t(o);}),n.addEventListener("error",function(){return i(new Error("Network Error"));}),n.addEventListener("abort",function(){return i(new Error("Abort"));}),n.send();});var e;},this._options=Object.assign({},Ef,e);}_createClass(Pf,[{key:"init",value:function init(){var _this180=this;return new Promise(function(t,e){_this180.value?(_this180._options.autoRefresh&&_this180._registerRefreshTokenTimeout(),t(_this180)):_this180.refreshToken().then(t)["catch"](e);});}},{key:"refreshToken",value:function refreshToken(){var _this181=this;return this._refresh().then(function(t){_this181._validateTokenValue(t),_this181.set("value",t),_this181._options.autoRefresh&&_this181._registerRefreshTokenTimeout();}).then(function(){return _this181;});}},{key:"destroy",value:function destroy(){clearTimeout(this._tokenRefreshTimeout);}},{key:"_validateTokenValue",value:function _validateTokenValue(t){var e="string"==typeof t,i=!/^".*"$/.test(t),n=e&&3===t.split(".").length;if(!i||!n)throw new ui.a("token-not-in-jwt-format",this);}},{key:"_registerRefreshTokenTimeout",value:function _registerRefreshTokenTimeout(){var _this182=this;var t=this._getTokenRefreshTimeoutTime();clearTimeout(this._tokenRefreshTimeout),this._tokenRefreshTimeout=setTimeout(function(){_this182.refreshToken();},t);}},{key:"_getTokenRefreshTimeoutTime",value:function _getTokenRefreshTimeoutTime(){try{var _this$value$split=this.value.split("."),_this$value$split2=_slicedToArray(_this$value$split,2),_t259=_this$value$split2[1],_JSON$parse=JSON.parse(atob(_t259)),_e239=_JSON$parse.exp;if(!_e239)return 36e5;return Math.floor((1e3*_e239-Date.now())/2);}catch(t){return 36e5;}}}],[{key:"create",value:function create(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Ef;return new Pf(t,e).init();}}]);return Pf;}();yi(Pf,Un);var Mf=Pf;var If=/*#__PURE__*/function(_Iu3){_inherits(If,_Iu3);var _super118=_createSuper(If);function If(){_classCallCheck(this,If);return _super118.apply(this,arguments);}_createClass(If,[{key:"init",value:function init(){var t=this.context.config.get("cloudServices")||{};for(var _e240 in t){this[_e240]=t[_e240];}if(this._tokens=new Map(),this.tokenUrl)return this.token=new If.Token(this.tokenUrl),this._tokens.set(this.tokenUrl,this.token),this.token.init();this.token=null;}},{key:"registerTokenUrl",value:function registerTokenUrl(t){if(this._tokens.has(t))return Promise.resolve(this.getTokenFor(t));var e=new If.Token(t);return this._tokens.set(t,e),e.init();}},{key:"getTokenFor",value:function getTokenFor(t){var e=this._tokens.get(t);if(!e)throw new ui.a("cloudservices-token-not-registered",this);return e;}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(If.prototype),"destroy",this).call(this);var _iterator345=_createForOfIteratorHelper(this._tokens.values()),_step345;try{for(_iterator345.s();!(_step345=_iterator345.n()).done;){var _t260=_step345.value;_t260.destroy();}}catch(err){_iterator345.e(err);}finally{_iterator345.f();}}}],[{key:"pluginName",get:function get(){return"CloudServices";}}]);return If;}(Iu);If.Token=Mf;var Nf=/*#__PURE__*/function(_pd31){_inherits(Nf,_pd31);var _super119=_createSuper(Nf);function Nf(){_classCallCheck(this,Nf);return _super119.apply(this,arguments);}_createClass(Nf,[{key:"init",value:function init(){var _this183=this;var t=this.editor,e=t.plugins.get(If),i=e.token,n=e.uploadUrl;i&&(this._uploadGateway=new Nf._UploadGateway(i,n),t.plugins.get(Ru).createUploadAdapter=function(t){return new Of(_this183._uploadGateway,t);});}}],[{key:"requires",get:function get(){return[Ru,If];}}]);return Nf;}(pd);var Of=/*#__PURE__*/function(){function Of(t,e){_classCallCheck(this,Of);this.uploadGateway=t,this.loader=e;}_createClass(Of,[{key:"upload",value:function upload(){var _this184=this;return this.loader.file.then(function(t){return _this184.fileUploader=_this184.uploadGateway.upload(t),_this184.fileUploader.on("progress",function(t,e){_this184.loader.uploadTotal=e.total,_this184.loader.uploaded=e.uploaded;}),_this184.fileUploader.send();});}},{key:"abort",value:function abort(){this.fileUploader.abort();}}]);return Of;}();Nf._UploadGateway=/*#__PURE__*/function(){function _class2(t,e){_classCallCheck(this,_class2);if(!t)throw new ui.a("uploadgateway-missing-token",null);if(!e)throw new ui.a("uploadgateway-missing-api-address",null);this._token=t,this._apiAddress=e;}_createClass(_class2,[{key:"upload",value:function upload(t){return new Sf(t,this._token,this._apiAddress);}}]);return _class2;}();i(51);var Rf=["before","after"],Df=new DOMParser().parseFromString('<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2l2 2.038"/></svg>',"image/svg+xml").firstChild;var Lf=/*#__PURE__*/function(_pd32){_inherits(Lf,_pd32);var _super120=_createSuper(Lf);function Lf(t){var _this185;_classCallCheck(this,Lf);_this185=_super120.call(this,t),_this185._currentFakeCaretModelElement=null;return _this185;}_createClass(Lf,[{key:"init",value:function init(){var t=this.editor,e=t.editing.view;this.on("change:isEnabled",function(i,n,o){e.change(function(t){var _iterator346=_createForOfIteratorHelper(e.document.roots),_step346;try{for(_iterator346.s();!(_step346=_iterator346.n()).done;){var _i255=_step346.value;o?t.removeClass("ck-widget__type-around_disabled",_i255):t.addClass("ck-widget__type-around_disabled",_i255);}}catch(err){_iterator346.e(err);}finally{_iterator346.f();}}),o||t.model.change(function(t){t.removeSelectionAttribute("widget-type-around");});}),this._enableTypeAroundUIInjection(),this._enableInsertingParagraphsOnButtonClick(),this._enableInsertingParagraphsOnEnterKeypress(),this._enableInsertingParagraphsOnTypingKeystroke(),this._enableTypeAroundFakeCaretActivationUsingKeyboardArrows(),this._enableDeleteIntegration(),this._enableInsertContentIntegration();}},{key:"destroy",value:function destroy(){this._currentFakeCaretModelElement=null;}},{key:"_insertParagraph",value:function _insertParagraph(t,e){var i=this.editor,n=i.editing.view;i.execute("insertParagraph",{position:i.model.createPositionAt(t,e)}),n.focus(),n.scrollToTheSelection();}},{key:"_listenToIfEnabled",value:function _listenToIfEnabled(t,e,i,n){var _this186=this;this.listenTo(t,e,function(){_this186.isEnabled&&i.apply(void 0,arguments);},n);}},{key:"_insertParagraphAccordingToFakeCaretPosition",value:function _insertParagraphAccordingToFakeCaretPosition(){var t=this.editor.model.document.selection,e=gh(t);if(!e)return!1;var i=t.getSelectedElement();return this._insertParagraph(i,e),!0;}},{key:"_enableTypeAroundUIInjection",value:function _enableTypeAroundUIInjection(){var t=this.editor,e=t.model.schema,i=t.locale.t,n={before:i("Insert paragraph before block"),after:i("Insert paragraph after block")};t.editing.downcastDispatcher.on("insert",function(t,i,o){var r=o.mapper.toViewElement(i.item);mh(r,i.item,e)&&function(t,e,i){var n=t.createUIElement("div",{"class":"ck ck-reset_all ck-widget__type-around"},function(t){var i=this.toDomElement(t);return function(t,e){var _iterator347=_createForOfIteratorHelper(Rf),_step347;try{for(_iterator347.s();!(_step347=_iterator347.n()).done;){var _i256=_step347.value;var _n148=new ll({tag:"div",attributes:{"class":["ck","ck-widget__type-around__button","ck-widget__type-around__button_"+_i256],title:e[_i256]},children:[t.ownerDocument.importNode(Df,!0)]});t.appendChild(_n148.render());}}catch(err){_iterator347.e(err);}finally{_iterator347.f();}}(i,e),function(t){var e=new ll({tag:"div",attributes:{"class":["ck","ck-widget__type-around__fake-caret"]}});t.appendChild(e.render());}(i),i;});t.insert(t.createPositionAt(i,"end"),n);}(o.writer,n,r);},{priority:"low"});}},{key:"_enableTypeAroundFakeCaretActivationUsingKeyboardArrows",value:function _enableTypeAroundFakeCaretActivationUsingKeyboardArrows(){var _this187=this;var t=this.editor,e=t.model,i=e.document.selection,n=e.schema,o=t.editing.view;function r(t){return"ck-widget_type-around_show-fake-caret_"+t;}this._listenToIfEnabled(o.document,"keydown",function(t,e){vo(e.keyCode)&&_this187._handleArrowKeyPress(t,e);},{priority:di.get("high")+10}),this._listenToIfEnabled(i,"change:range",function(e,i){i.directChange&&t.model.change(function(t){t.removeSelectionAttribute("widget-type-around");});}),this._listenToIfEnabled(e.document,"change:data",function(){var e=i.getSelectedElement();if(e){if(mh(t.editing.mapper.toViewElement(e),e,n))return;}t.model.change(function(t){t.removeSelectionAttribute("widget-type-around");});}),this._listenToIfEnabled(t.editing.downcastDispatcher,"selection",function(t,e,i){var o=i.writer;if(_this187._currentFakeCaretModelElement){var _t261=i.mapper.toViewElement(_this187._currentFakeCaretModelElement);_t261&&(o.removeClass(Rf.map(r),_t261),_this187._currentFakeCaretModelElement=null);}var s=e.selection.getSelectedElement();if(!s)return;var a=i.mapper.toViewElement(s);if(!mh(a,s,n))return;var c=gh(e.selection);c&&(o.addClass(r(c),a),_this187._currentFakeCaretModelElement=s);}),this._listenToIfEnabled(t.ui.focusTracker,"change:isFocused",function(e,i,n){n||t.model.change(function(t){t.removeSelectionAttribute("widget-type-around");});});}},{key:"_handleArrowKeyPress",value:function _handleArrowKeyPress(t,e){var i=this.editor,n=i.model,o=n.document.selection,r=n.schema,s=i.editing.view,a=xo(e.keyCode,i.locale.contentLanguageDirection),c=s.document.selection.getSelectedElement();var l;mh(c,i.editing.mapper.toModelElement(c),r)?l=this._handleArrowKeyPressOnSelectedWidget(a):o.isCollapsed&&(l=this._handleArrowKeyPressWhenSelectionNextToAWidget(a)),l&&(e.preventDefault(),t.stop());}},{key:"_handleArrowKeyPressOnSelectedWidget",value:function _handleArrowKeyPressOnSelectedWidget(t){var e=this.editor.model,i=gh(e.document.selection);return e.change(function(e){if(!i)return e.setSelectionAttribute("widget-type-around",t?"after":"before"),!0;if(!(i===(t?"after":"before")))return e.removeSelectionAttribute("widget-type-around"),!0;return!1;});}},{key:"_handleArrowKeyPressWhenSelectionNextToAWidget",value:function _handleArrowKeyPressWhenSelectionNextToAWidget(t){var e=this.editor,i=e.model,n=i.schema,o=e.plugins.get("Widget"),r=o._getObjectElementNextToSelection(t);return!!mh(e.editing.mapper.toViewElement(r),r,n)&&(i.change(function(e){o._setSelectionOverElement(r),e.setSelectionAttribute("widget-type-around",t?"before":"after");}),!0);}},{key:"_enableInsertingParagraphsOnButtonClick",value:function _enableInsertingParagraphsOnButtonClick(){var _this188=this;var t=this.editor,e=t.editing.view;this._listenToIfEnabled(e.document,"mousedown",function(i,n){var o=n.domTarget.closest(".ck-widget__type-around__button");if(!o)return;var r=function(t){return t.classList.contains("ck-widget__type-around__button_before")?"before":"after";}(o),s=function(t,e){var i=t.closest(".ck-widget");return e.mapDomToView(i);}(o,e.domConverter),a=t.editing.mapper.toModelElement(s);_this188._insertParagraph(a,r),n.preventDefault(),i.stop();});}},{key:"_enableInsertingParagraphsOnEnterKeypress",value:function _enableInsertingParagraphsOnEnterKeypress(){var _this189=this;var t=this.editor,e=t.editing.view;this._listenToIfEnabled(e.document,"enter",function(i,n){var o=e.document.selection.getSelectedElement(),r=t.editing.mapper.toModelElement(o),s=t.model.schema;var a;_this189._insertParagraphAccordingToFakeCaretPosition()?a=!0:mh(o,r,s)&&(_this189._insertParagraph(r,n.isSoft?"before":"after"),a=!0),a&&(n.preventDefault(),i.stop());});}},{key:"_enableInsertingParagraphsOnTypingKeystroke",value:function _enableInsertingParagraphsOnTypingKeystroke(){var _this190=this;var t=this.editor.editing.view,e=[po.enter,po["delete"],po.backspace];this._listenToIfEnabled(t.document,"keydown",function(t,i){e.includes(i.keyCode)||Xd(i)||_this190._insertParagraphAccordingToFakeCaretPosition();},{priority:di.get("high")+1});}},{key:"_enableDeleteIntegration",value:function _enableDeleteIntegration(){var t=this.editor,e=t.editing.view,i=t.model,n=i.schema;this._listenToIfEnabled(e.document,"delete",function(e,o){var r=gh(i.document.selection);if(!r)return;var s=o.direction,a=i.document.selection.getSelectedElement(),c="forward"==s;if("before"===r===c)t.execute("delete",{selection:i.createSelection(a,"on")});else{var _e241=n.getNearestSelectionRange(i.createPositionAt(a,r),s);if(_e241)if(_e241.isCollapsed){var _o94=i.createSelection(_e241.start);if(i.modifySelection(_o94,{direction:s}),_o94.focus.isEqual(_e241.start)){var _t262=function(t,e){var i=e;var _iterator348=_createForOfIteratorHelper(e.getAncestors({parentFirst:!0})),_step348;try{for(_iterator348.s();!(_step348=_iterator348.n()).done;){var _n149=_step348.value;if(_n149.childCount>1||t.isLimit(_n149))break;i=_n149;}}catch(err){_iterator348.e(err);}finally{_iterator348.f();}return i;}(n,_e241.start.parent);i.deleteContent(i.createSelection(_t262,"on"),{doNotAutoparagraph:!0});}else i.change(function(i){i.setSelection(_e241),t.execute(c?"forwardDelete":"delete");});}else i.change(function(i){i.setSelection(_e241),t.execute(c?"forwardDelete":"delete");});}o.preventDefault(),e.stop();},{priority:di.get("high")+1});}},{key:"_enableInsertContentIntegration",value:function _enableInsertContentIntegration(){var t=this.editor,e=this.editor.model,i=e.document.selection;this._listenToIfEnabled(t.model,"insertContent",function(t,_ref48){var _ref49=_slicedToArray(_ref48,2),n=_ref49[0],o=_ref49[1];if(o&&!o.is("documentSelection"))return;var r=gh(i);return r?(t.stop(),e.change(function(t){var o=i.getSelectedElement(),s=e.createPositionAt(o,r),a=t.createSelection(s),c=e.insertContent(n,a);return t.setSelection(a),c;})):void 0;},{priority:"high"});}}],[{key:"pluginName",get:function get(){return"WidgetTypeAround";}}]);return Lf;}(pd);i(53);function zf(t){var e=t.model;return function(i,n){var o=n.keyCode==po.arrowup,r=n.keyCode==po.arrowdown,s=n.shiftKey,a=e.document.selection;if(!o&&!r)return;var c=r;if(s&&function(t,e){return!t.isCollapsed&&t.isBackward==e;}(a,c))return;var l=function(t,e,i){var n=t.model;if(i){var _t263=e.isCollapsed?e.focus:e.getLastPosition(),_i257=Vf(n,_t263,"forward");if(!_i257)return null;var _o95=n.createRange(_t263,_i257),_r47=jf(n.schema,_o95,"backward");return _r47&&_t263.isBefore(_r47)?n.createRange(_t263,_r47):null;}{var _t264=e.isCollapsed?e.focus:e.getFirstPosition(),_i258=Vf(n,_t264,"backward");if(!_i258)return null;var _o96=n.createRange(_i258,_t264),_r48=jf(n.schema,_o96,"forward");return _r48&&_t264.isAfter(_r48)?n.createRange(_r48,_t264):null;}}(t,a,c);l&&!l.isCollapsed&&function(t,e,i){var n=t.model,o=t.view.domConverter;if(i){var _t265=n.createSelection(e.start);n.modifySelection(_t265),_t265.focus.isAtEnd||e.start.isEqual(_t265.focus)||(e=n.createRange(_t265.focus,e.end));}var r=t.mapper.toViewRange(e),s=o.viewRangeToDom(r),a=as.getDomRangeRects(s);var c;var _iterator349=_createForOfIteratorHelper(a),_step349;try{for(_iterator349.s();!(_step349=_iterator349.n()).done;){var _t266=_step349.value;if(void 0!==c){if(Math.round(_t266.top)>=c)return!1;c=Math.max(c,Math.round(_t266.bottom));}else c=Math.round(_t266.bottom);}}catch(err){_iterator349.e(err);}finally{_iterator349.f();}return!0;}(t,l,c)&&(e.change(function(t){var i=c?l.end:l.start;if(s){var _n150=e.createSelection(a.anchor);_n150.setFocus(i),t.setSelection(_n150);}else t.setSelection(i);}),i.stop(),n.preventDefault(),n.stopPropagation());};}function Vf(t,e,i){var n=t.schema,o=t.createRangeIn(e.root),r="forward"==i?"elementStart":"elementEnd";var _iterator350=_createForOfIteratorHelper(o.getWalker({startPosition:e,direction:i})),_step350;try{for(_iterator350.s();!(_step350=_iterator350.n()).done;){var _step350$value=_step350.value,_t267=_step350$value.previousPosition,_s31=_step350$value.item,_a20=_step350$value.type;if(n.isLimit(_s31)&&!n.isInline(_s31))return _t267;if(_a20==r&&n.isBlock(_s31))return null;}}catch(err){_iterator350.e(err);}finally{_iterator350.f();}return null;}function jf(t,e,i){var n="backward"==i?e.end:e.start;if(t.checkChild(n,"$text"))return n;var _iterator351=_createForOfIteratorHelper(e.getWalker({direction:i})),_step351;try{for(_iterator351.s();!(_step351=_iterator351.n()).done;){var _n151=_step351.value.nextPosition;if(t.checkChild(_n151,"$text"))return _n151;}}catch(err){_iterator351.e(err);}finally{_iterator351.f();}}var Bf=/*#__PURE__*/function(_pd33){_inherits(Bf,_pd33);var _super121=_createSuper(Bf);function Bf(){_classCallCheck(this,Bf);return _super121.apply(this,arguments);}_createClass(Bf,[{key:"init",value:function init(){var _this191=this;var t=this.editor.editing.view,e=t.document;this._previouslySelected=new Set(),this.editor.editing.downcastDispatcher.on("selection",function(t,e,i){_this191._clearPreviouslySelectedWidgets(i.writer);var n=i.writer,o=n.document.selection,r=o.getSelectedElement();var s=null;var _iterator352=_createForOfIteratorHelper(o.getRanges()),_step352;try{for(_iterator352.s();!(_step352=_iterator352.n()).done;){var _t268=_step352.value;var _iterator353=_createForOfIteratorHelper(_t268),_step353;try{for(_iterator353.s();!(_step353=_iterator353.n()).done;){var _e242=_step353.value;var _t269=_e242.item;ph(_t269)&&!Ff(_t269,s)&&(n.addClass("ck-widget_selected",_t269),_this191._previouslySelected.add(_t269),s=_t269,_t269==r&&n.setSelection(o.getRanges(),{fake:!0,label:kh(r)}));}}catch(err){_iterator353.e(err);}finally{_iterator353.f();}}}catch(err){_iterator352.e(err);}finally{_iterator352.f();}},{priority:"low"}),t.addObserver(Oh),this.listenTo(e,"mousedown",function(){return _this191._onMousedown.apply(_this191,arguments);}),this.listenTo(e,"keydown",function(){_this191._handleSelectionChangeOnArrowKeyPress.apply(_this191,arguments);},{priority:"high"}),this.listenTo(e,"keydown",function(){_this191._preventDefaultOnArrowKeyPress.apply(_this191,arguments);},{priority:di.get("high")-20}),this.listenTo(e,"keydown",zf(this.editor.editing)),this.listenTo(e,"delete",function(t,e){_this191._handleDelete("forward"==e.direction)&&(e.preventDefault(),t.stop());},{priority:"high"});}},{key:"_onMousedown",value:function _onMousedown(t,e){var i=this.editor,n=i.editing.view,o=n.document;var r=e.target;if(function(t){for(;t;){if(t.is("editableElement")&&!t.is("rootElement"))return!0;if(ph(t))return!1;t=t.parent;}return!1;}(r)){if((fo.isSafari||fo.isGecko)&&e.domEvent.detail>=3){var _t270=i.editing.mapper,_n152=r.is("attributeElement")?r.findAncestor(function(t){return!t.is("attributeElement");}):r,_o97=_t270.toModelElement(_n152);e.preventDefault(),this.editor.model.change(function(t){t.setSelection(_o97,"in");});}return;}if(!ph(r)&&(r=r.findAncestor(ph),!r))return;e.preventDefault(),o.isFocused||n.focus();var s=i.editing.mapper.toModelElement(r);this._setSelectionOverElement(s);}},{key:"_handleSelectionChangeOnArrowKeyPress",value:function _handleSelectionChangeOnArrowKeyPress(t,e){var i=e.keyCode;if(!vo(i))return;var n=this.editor.model,o=n.schema,r=n.document.selection,s=r.getSelectedElement(),a=xo(i,this.editor.locale.contentLanguageDirection);if(s&&o.isObject(s)){var _i259=a?r.getLastPosition():r.getFirstPosition(),_s32=o.getNearestSelectionRange(_i259,a?"forward":"backward");return void(_s32&&(n.change(function(t){t.setSelection(_s32);}),e.preventDefault(),t.stop()));}if(!r.isCollapsed)return;var c=this._getObjectElementNextToSelection(a);c&&o.isObject(c)&&(this._setSelectionOverElement(c),e.preventDefault(),t.stop());}},{key:"_preventDefaultOnArrowKeyPress",value:function _preventDefaultOnArrowKeyPress(t,e){if(!vo(e.keyCode))return;var i=this.editor.model,n=i.schema,o=i.document.selection.getSelectedElement();o&&n.isObject(o)&&(e.preventDefault(),t.stop());}},{key:"_handleDelete",value:function _handleDelete(t){var _this192=this;if(this.editor.isReadOnly)return;var e=this.editor.model.document.selection;if(!e.isCollapsed)return;var i=this._getObjectElementNextToSelection(t);return i?(this.editor.model.change(function(t){var n=e.anchor.parent;for(;n.isEmpty;){var _e243=n;n=_e243.parent,t.remove(_e243);}_this192._setSelectionOverElement(i);}),!0):void 0;}},{key:"_setSelectionOverElement",value:function _setSelectionOverElement(t){this.editor.model.change(function(e){e.setSelection(e.createRangeOn(t));});}},{key:"_getObjectElementNextToSelection",value:function _getObjectElementNextToSelection(t){var e=this.editor.model,i=e.schema,n=e.document.selection,o=e.createSelection(n);e.modifySelection(o,{direction:t?"forward":"backward"});var r=t?o.focus.nodeBefore:o.focus.nodeAfter;return r&&i.isObject(r)?r:null;}},{key:"_clearPreviouslySelectedWidgets",value:function _clearPreviouslySelectedWidgets(t){var _iterator354=_createForOfIteratorHelper(this._previouslySelected),_step354;try{for(_iterator354.s();!(_step354=_iterator354.n()).done;){var _e244=_step354.value;t.removeClass("ck-widget_selected",_e244);}}catch(err){_iterator354.e(err);}finally{_iterator354.f();}this._previouslySelected.clear();}}],[{key:"pluginName",get:function get(){return"Widget";}},{key:"requires",get:function get(){return[Lf];}}]);return Bf;}(pd);function Ff(t,e){return!!e&&Array.from(t.getAncestors()).includes(e);}var Hf=/*#__PURE__*/function(_wd14){_inherits(Hf,_wd14);var _super122=_createSuper(Hf);function Hf(){_classCallCheck(this,Hf);return _super122.apply(this,arguments);}_createClass(Hf,[{key:"refresh",value:function refresh(){var t=this.editor.model.document.selection.getSelectedElement();this.isEnabled=Th(t),Th(t)&&t.hasAttribute("alt")?this.value=t.getAttribute("alt"):this.value=!1;}},{key:"execute",value:function execute(t){var e=this.editor.model,i=e.document.selection.getSelectedElement();e.change(function(e){e.setAttribute("alt",t.newValue,i);});}}]);return Hf;}(wd);var Uf=/*#__PURE__*/function(_pd34){_inherits(Uf,_pd34);var _super123=_createSuper(Uf);function Uf(){_classCallCheck(this,Uf);return _super123.apply(this,arguments);}_createClass(Uf,[{key:"init",value:function init(){this.editor.commands.add("imageTextAlternative",new Hf(this.editor));}}],[{key:"pluginName",get:function get(){return"ImageTextAlternativeEditing";}}]);return Uf;}(pd);i(55);var Wf=/*#__PURE__*/function(_El18){_inherits(Wf,_El18);var _super124=_createSuper(Wf);function Wf(t,e){var _this193;_classCallCheck(this,Wf);_this193=_super124.call(this,t);var i="ck-labeled-field-view-"+li(),n="ck-labeled-field-view-status-"+li();_this193.fieldView=e(_assertThisInitialized(_this193),i,n),_this193.set("label"),_this193.set("isEnabled",!0),_this193.set("isEmpty",!0),_this193.set("isFocused",!1),_this193.set("errorText",null),_this193.set("infoText",null),_this193.set("class"),_this193.set("placeholder"),_this193.labelView=_this193._createLabelView(i),_this193.statusView=_this193._createStatusView(n),_this193.bind("_statusText").to(_assertThisInitialized(_this193),"errorText",_assertThisInitialized(_this193),"infoText",function(t,e){return t||e;});var o=_this193.bindTemplate;_this193.setTemplate({tag:"div",attributes:{"class":["ck","ck-labeled-field-view",o.to("class"),o["if"]("isEnabled","ck-disabled",function(t){return!t;}),o["if"]("isEmpty","ck-labeled-field-view_empty"),o["if"]("isFocused","ck-labeled-field-view_focused"),o["if"]("placeholder","ck-labeled-field-view_placeholder"),o["if"]("errorText","ck-error")]},children:[{tag:"div",attributes:{"class":["ck","ck-labeled-field-view__input-wrapper"]},children:[_this193.fieldView,_this193.labelView]},_this193.statusView]});return _this193;}_createClass(Wf,[{key:"_createLabelView",value:function _createLabelView(t){var e=new Nl(this.locale);return e["for"]=t,e.bind("text").to(this,"label"),e;}},{key:"_createStatusView",value:function _createStatusView(t){var e=new El(this.locale),i=this.bindTemplate;return e.setTemplate({tag:"div",attributes:{"class":["ck","ck-labeled-field-view__status",i["if"]("errorText","ck-labeled-field-view__status_error"),i["if"]("_statusText","ck-hidden",function(t){return!t;})],id:t,role:i["if"]("errorText","alert")},children:[{text:i.to("_statusText")}]}),e;}},{key:"focus",value:function focus(){this.fieldView.focus();}}]);return Wf;}(El);i(57);var qf=/*#__PURE__*/function(_El19){_inherits(qf,_El19);var _super125=_createSuper(qf);function qf(t){var _this194;_classCallCheck(this,qf);_this194=_super125.call(this,t),_this194.set("value"),_this194.set("id"),_this194.set("placeholder"),_this194.set("isReadOnly",!1),_this194.set("hasError",!1),_this194.set("ariaDescribedById"),_this194.focusTracker=new Jc(),_this194.bind("isFocused").to(_this194.focusTracker),_this194.set("isEmpty",!0);var e=_this194.bindTemplate;_this194.setTemplate({tag:"input",attributes:{type:"text","class":["ck","ck-input","ck-input-text",e["if"]("isFocused","ck-input_focused"),e["if"]("isEmpty","ck-input-text_empty"),e["if"]("hasError","ck-error")],id:e.to("id"),placeholder:e.to("placeholder"),readonly:e.to("isReadOnly"),"aria-invalid":e["if"]("hasError",!0),"aria-describedby":e.to("ariaDescribedById")},on:{input:e.to("input"),change:e.to(_this194._updateIsEmpty.bind(_assertThisInitialized(_this194)))}});return _this194;}_createClass(qf,[{key:"render",value:function render(){var _this195=this;_get(_getPrototypeOf(qf.prototype),"render",this).call(this),this.focusTracker.add(this.element),this._setDomElementValue(this.value),this._updateIsEmpty(),this.on("change:value",function(t,e,i){_this195._setDomElementValue(i),_this195._updateIsEmpty();});}},{key:"select",value:function select(){this.element.select();}},{key:"focus",value:function focus(){this.element.focus();}},{key:"_updateIsEmpty",value:function _updateIsEmpty(){this.isEmpty=!this.element.value;}},{key:"_setDomElementValue",value:function _setDomElementValue(t){this.element.value=t||0===t?t:"";}}]);return qf;}(El);function $f(t,e,i){var n=new qf(t.locale);return n.set({id:e,ariaDescribedById:i}),n.bind("isReadOnly").to(t,"isEnabled",function(t){return!t;}),n.bind("hasError").to(t,"errorText",function(t){return!!t;}),n.on("input",function(){t.errorText=null;}),t.bind("isEmpty","isFocused","placeholder").to(n),n;}function Yf(t){t.set("_isCssTransitionsDisabled",!1),t.disableCssTransitions=function(){t._isCssTransitionsDisabled=!0;},t.enableCssTransitions=function(){t._isCssTransitionsDisabled=!1;},t.extendTemplate({attributes:{"class":[t.bindTemplate["if"]("_isCssTransitionsDisabled","ck-transitions-disabled")]}});}function Gf(_ref50){var t=_ref50.view;t.listenTo(t.element,"submit",function(e,i){i.preventDefault(),t.fire("submit");},{useCapture:!0});}var Kf='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z"/></svg>',Qf='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.591 10.177l4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z"/></svg>';i(59),i(7);var Jf=/*#__PURE__*/function(_El20){_inherits(Jf,_El20);var _super126=_createSuper(Jf);function Jf(t){var _this196;_classCallCheck(this,Jf);_this196=_super126.call(this,t);var e=_this196.locale.t;_this196.focusTracker=new Jc(),_this196.keystrokes=new Wc(),_this196.labeledInput=_this196._createLabeledInputView(),_this196.saveButtonView=_this196._createButton(e("Save"),Kf,"ck-button-save"),_this196.saveButtonView.type="submit",_this196.cancelButtonView=_this196._createButton(e("Cancel"),Qf,"ck-button-cancel","cancel"),_this196._focusables=new cl(),_this196._focusCycler=new jl({focusables:_this196._focusables,focusTracker:_this196.focusTracker,keystrokeHandler:_this196.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),_this196.setTemplate({tag:"form",attributes:{"class":["ck","ck-text-alternative-form","ck-responsive-form"],tabindex:"-1"},children:[_this196.labeledInput,_this196.saveButtonView,_this196.cancelButtonView]}),Yf(_assertThisInitialized(_this196));return _this196;}_createClass(Jf,[{key:"render",value:function render(){var _this197=this;_get(_getPrototypeOf(Jf.prototype),"render",this).call(this),this.keystrokes.listenTo(this.element),Gf({view:this}),[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach(function(t){_this197._focusables.add(t),_this197.focusTracker.add(t.element);});}},{key:"_createButton",value:function _createButton(t,e,i,n){var o=new Xl(this.locale);return o.set({label:t,icon:e,tooltip:!0}),o.extendTemplate({attributes:{"class":i}}),n&&o.delegate("execute").to(this,n),o;}},{key:"_createLabeledInputView",value:function _createLabeledInputView(){var t=this.locale.t,e=new Wf(this.locale,$f);return e.label=t("Text alternative"),e;}}]);return Jf;}(El);i(62),i(64);var Zf=Ll("px");var Xf=/*#__PURE__*/function(_pd35){_inherits(Xf,_pd35);var _super127=_createSuper(Xf);function Xf(t){var _this198;_classCallCheck(this,Xf);_this198=_super127.call(this,t),_this198.positionLimiter=function(){var t=_this198.editor.editing.view,e=t.document.selection.editableElement;return e?t.domConverter.mapViewToDom(e.root):null;},_this198.set("visibleView",null),_this198.view=new dh(t.locale),t.ui.view.body.add(_this198.view),t.ui.focusTracker.add(_this198.view.element),_this198._viewToStack=new Map(),_this198._idToStack=new Map(),_this198.set("_numberOfStacks",0),_this198.set("_singleViewMode",!1),_this198._rotatorView=_this198._createRotatorView(),_this198._fakePanelsView=_this198._createFakePanelsView();return _this198;}_createClass(Xf,[{key:"hasView",value:function hasView(t){return Array.from(this._viewToStack.keys()).includes(t);}},{key:"add",value:function add(t){if(this.hasView(t.view))throw new ui.a("contextualballoon-add-view-exist",[this,t]);var e=t.stackId||"main";if(!this._idToStack.has(e))return this._idToStack.set(e,new Map([[t.view,t]])),this._viewToStack.set(t.view,this._idToStack.get(e)),this._numberOfStacks=this._idToStack.size,void(this._visibleStack&&!t.singleViewMode||this.showStack(e));var i=this._idToStack.get(e);t.singleViewMode&&this.showStack(e),i.set(t.view,t),this._viewToStack.set(t.view,i),i===this._visibleStack&&this._showView(t);}},{key:"remove",value:function remove(t){if(!this.hasView(t))throw new ui.a("contextualballoon-remove-view-not-exist",[this,t]);var e=this._viewToStack.get(t);this._singleViewMode&&this.visibleView===t&&(this._singleViewMode=!1),this.visibleView===t&&(1===e.size?this._idToStack.size>1?this._showNextStack():(this.view.hide(),this.visibleView=null,this._rotatorView.hideView()):this._showView(Array.from(e.values())[e.size-2])),1===e.size?(this._idToStack["delete"](this._getStackId(e)),this._numberOfStacks=this._idToStack.size):e["delete"](t),this._viewToStack["delete"](t);}},{key:"updatePosition",value:function updatePosition(t){t&&(this._visibleStack.get(this.visibleView).position=t),this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition();}},{key:"showStack",value:function showStack(t){this.visibleStack=t;var e=this._idToStack.get(t);if(!e)throw new ui.a("contextualballoon-showstack-stack-not-exist",this);this._visibleStack!==e&&this._showView(Array.from(e.values()).pop());}},{key:"_visibleStack",get:function get(){return this._viewToStack.get(this.visibleView);}},{key:"_getStackId",value:function _getStackId(t){return Array.from(this._idToStack.entries()).find(function(e){return e[1]===t;})[0];}},{key:"_showNextStack",value:function _showNextStack(){var t=Array.from(this._idToStack.values());var e=t.indexOf(this._visibleStack)+1;t[e]||(e=0),this.showStack(this._getStackId(t[e]));}},{key:"_showPrevStack",value:function _showPrevStack(){var t=Array.from(this._idToStack.values());var e=t.indexOf(this._visibleStack)-1;t[e]||(e=t.length-1),this.showStack(this._getStackId(t[e]));}},{key:"_createRotatorView",value:function _createRotatorView(){var _this199=this;var t=new tm(this.editor.locale),e=this.editor.locale.t;return this.view.content.add(t),t.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",function(t,e){return!e&&t>1;}),t.on("change:isNavigationVisible",function(){return _this199.updatePosition();},{priority:"low"}),t.bind("counter").to(this,"visibleView",this,"_numberOfStacks",function(t,i){if(i<2)return"";var n=Array.from(_this199._idToStack.values()).indexOf(_this199._visibleStack)+1;return e("%0 of %1",[n,i]);}),t.buttonNextView.on("execute",function(){t.focusTracker.isFocused&&_this199.editor.editing.view.focus(),_this199._showNextStack();}),t.buttonPrevView.on("execute",function(){t.focusTracker.isFocused&&_this199.editor.editing.view.focus(),_this199._showPrevStack();}),t;}},{key:"_createFakePanelsView",value:function _createFakePanelsView(){var t=new em(this.editor.locale,this.view);return t.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",function(t,e){return!e&&t>=2?Math.min(t-1,2):0;}),t.listenTo(this.view,"change:top",function(){return t.updatePosition();}),t.listenTo(this.view,"change:left",function(){return t.updatePosition();}),this.editor.ui.view.body.add(t),t;}},{key:"_showView",value:function _showView(_ref51){var t=_ref51.view,_ref51$balloonClassNa=_ref51.balloonClassName,e=_ref51$balloonClassNa===void 0?"":_ref51$balloonClassNa,_ref51$withArrow=_ref51.withArrow,i=_ref51$withArrow===void 0?!0:_ref51$withArrow,_ref51$singleViewMode=_ref51.singleViewMode,n=_ref51$singleViewMode===void 0?!1:_ref51$singleViewMode;this.view["class"]=e,this.view.withArrow=i,this._rotatorView.showView(t),this.visibleView=t,this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition(),n&&(this._singleViewMode=!0);}},{key:"_getBalloonPosition",value:function _getBalloonPosition(){var t=Array.from(this._visibleStack.values()).pop().position;return t&&!t.limiter&&(t=Object.assign({},t,{limiter:this.positionLimiter})),t;}}],[{key:"pluginName",get:function get(){return"ContextualBalloon";}}]);return Xf;}(pd);var tm=/*#__PURE__*/function(_El21){_inherits(tm,_El21);var _super128=_createSuper(tm);function tm(t){var _this200;_classCallCheck(this,tm);_this200=_super128.call(this,t);var e=t.t,i=_this200.bindTemplate;_this200.set("isNavigationVisible",!0),_this200.focusTracker=new Jc(),_this200.buttonPrevView=_this200._createButtonView(e("Previous"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>'),_this200.buttonNextView=_this200._createButtonView(e("Next"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382l-4.043 4.042z"/></svg>'),_this200.content=_this200.createCollection(),_this200.setTemplate({tag:"div",attributes:{"class":["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{"class":["ck-balloon-rotator__navigation",i.to("isNavigationVisible",function(t){return t?"":"ck-hidden";})]},children:[_this200.buttonPrevView,{tag:"span",attributes:{"class":["ck-balloon-rotator__counter"]},children:[{text:i.to("counter")}]},_this200.buttonNextView]},{tag:"div",attributes:{"class":"ck-balloon-rotator__content"},children:_this200.content}]});return _this200;}_createClass(tm,[{key:"render",value:function render(){_get(_getPrototypeOf(tm.prototype),"render",this).call(this),this.focusTracker.add(this.element);}},{key:"showView",value:function showView(t){this.hideView(),this.content.add(t);}},{key:"hideView",value:function hideView(){this.content.clear();}},{key:"_createButtonView",value:function _createButtonView(t,e){var i=new Xl(this.locale);return i.set({label:t,icon:e,tooltip:!0}),i;}}]);return tm;}(El);var em=/*#__PURE__*/function(_El22){_inherits(em,_El22);var _super129=_createSuper(em);function em(t,e){var _this201;_classCallCheck(this,em);_this201=_super129.call(this,t);var i=_this201.bindTemplate;_this201.set("top",0),_this201.set("left",0),_this201.set("height",0),_this201.set("width",0),_this201.set("numberOfPanels",0),_this201.content=_this201.createCollection(),_this201._balloonPanelView=e,_this201.setTemplate({tag:"div",attributes:{"class":["ck-fake-panel",i.to("numberOfPanels",function(t){return t?"":"ck-hidden";})],style:{top:i.to("top",Zf),left:i.to("left",Zf),width:i.to("width",Zf),height:i.to("height",Zf)}},children:_this201.content}),_this201.on("change:numberOfPanels",function(t,e,i,n){i>n?_this201._addPanels(i-n):_this201._removePanels(n-i),_this201.updatePosition();});return _this201;}_createClass(em,[{key:"_addPanels",value:function _addPanels(t){for(;t--;){var _t271=new El();_t271.setTemplate({tag:"div"}),this.content.add(_t271),this.registerChild(_t271);}}},{key:"_removePanels",value:function _removePanels(t){for(;t--;){var _t272=this.content.last;this.content.remove(_t272),this.deregisterChild(_t272),_t272.destroy();}}},{key:"updatePosition",value:function updatePosition(){if(this.numberOfPanels){var _this$_balloonPanelVi=this._balloonPanelView,_t273=_this$_balloonPanelVi.top,_e245=_this$_balloonPanelVi.left,_as=new as(this._balloonPanelView.element),_i260=_as.width,_n153=_as.height;Object.assign(this,{top:_t273,left:_e245,width:_i260,height:_n153});}}}]);return em;}(El);function im(t){var e=t.editing.view,i=dh.defaultPositions;return{target:e.domConverter.viewToDom(e.document.selection.getSelectedElement()),positions:[i.northArrowSouth,i.northArrowSouthWest,i.northArrowSouthEast,i.southArrowNorth,i.southArrowNorthWest,i.southArrowNorthEast]};}var nm=/*#__PURE__*/function(_pd36){_inherits(nm,_pd36);var _super130=_createSuper(nm);function nm(){_classCallCheck(this,nm);return _super130.apply(this,arguments);}_createClass(nm,[{key:"init",value:function init(){this._createButton(),this._createForm();}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(nm.prototype),"destroy",this).call(this),this._form.destroy();}},{key:"_createButton",value:function _createButton(){var _this202=this;var t=this.editor,e=t.t;t.ui.componentFactory.add("imageTextAlternative",function(i){var n=t.commands.get("imageTextAlternative"),o=new Xl(i);return o.set({label:e("Change image text alternative"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.085 6.22L2.943 4.078a.75.75 0 1 1 1.06-1.06l2.592 2.59A11.094 11.094 0 0 1 10 5.068c4.738 0 8.578 3.101 8.578 5.083 0 1.197-1.401 2.803-3.555 3.887l1.714 1.713a.75.75 0 0 1-.09 1.138.488.488 0 0 1-.15.084.75.75 0 0 1-.821-.16L6.17 7.304c-.258.11-.51.233-.757.365l6.239 6.24-.006.005.78.78c-.388.094-.78.166-1.174.215l-1.11-1.11h.011L4.55 8.197a7.2 7.2 0 0 0-.665.514l-.112.098 4.897 4.897-.005.006 1.276 1.276a10.164 10.164 0 0 1-1.477-.117l-.479-.479-.009.009-4.863-4.863-.022.031a2.563 2.563 0 0 0-.124.2c-.043.077-.08.158-.108.241a.534.534 0 0 0-.028.133.29.29 0 0 0 .008.072.927.927 0 0 0 .082.226c.067.133.145.26.234.379l3.242 3.365.025.01.59.623c-3.265-.918-5.59-3.155-5.59-4.668 0-1.194 1.448-2.838 3.663-3.93zm7.07.531a4.632 4.632 0 0 1 1.108 5.992l.345.344.046-.018a9.313 9.313 0 0 0 2-1.112c.256-.187.5-.392.727-.613.137-.134.27-.277.392-.431.072-.091.141-.185.203-.286.057-.093.107-.19.148-.292a.72.72 0 0 0 .036-.12.29.29 0 0 0 .008-.072.492.492 0 0 0-.028-.133.999.999 0 0 0-.036-.096 2.165 2.165 0 0 0-.071-.145 2.917 2.917 0 0 0-.125-.2 3.592 3.592 0 0 0-.263-.335 5.444 5.444 0 0 0-.53-.523 7.955 7.955 0 0 0-1.054-.768 9.766 9.766 0 0 0-1.879-.891c-.337-.118-.68-.219-1.027-.301zm-2.85.21l-.069.002a.508.508 0 0 0-.254.097.496.496 0 0 0-.104.679.498.498 0 0 0 .326.199l.045.005c.091.003.181.003.272.012a2.45 2.45 0 0 1 2.017 1.513c.024.061.043.125.069.185a.494.494 0 0 0 .45.287h.008a.496.496 0 0 0 .35-.158.482.482 0 0 0 .13-.335.638.638 0 0 0-.048-.219 3.379 3.379 0 0 0-.36-.723 3.438 3.438 0 0 0-2.791-1.543l-.028-.001h-.013z"/></svg>',tooltip:!0}),o.bind("isEnabled").to(n,"isEnabled"),_this202.listenTo(o,"execute",function(){_this202._showForm();}),o;});}},{key:"_createForm",value:function _createForm(){var _this203=this;var t=this.editor,e=t.editing.view.document;this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new Jf(t.locale),this._form.render(),this.listenTo(this._form,"submit",function(){t.execute("imageTextAlternative",{newValue:_this203._form.labeledInput.fieldView.element.value}),_this203._hideForm(!0);}),this.listenTo(this._form,"cancel",function(){_this203._hideForm(!0);}),this._form.keystrokes.set("Esc",function(t,e){_this203._hideForm(!0),e();}),this.listenTo(t.ui,"update",function(){Ah(e.selection)?_this203._isVisible&&function(t){var e=t.plugins.get("ContextualBalloon");if(Ah(t.editing.view.document.selection)){var _i261=im(t);e.updatePosition(_i261);}}(t):_this203._hideForm(!0);}),sd({emitter:this._form,activator:function activator(){return _this203._isVisible;},contextElements:[this._balloon.view.element],callback:function callback(){return _this203._hideForm();}});}},{key:"_showForm",value:function _showForm(){if(this._isVisible)return;var t=this.editor,e=t.commands.get("imageTextAlternative"),i=this._form.labeledInput;this._form.disableCssTransitions(),this._isInBalloon||this._balloon.add({view:this._form,position:im(t)}),i.fieldView.value=i.fieldView.element.value=e.value||"",this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions();}},{key:"_hideForm",value:function _hideForm(t){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),t&&this.editor.editing.view.focus());}},{key:"_isVisible",get:function get(){return this._balloon.visibleView===this._form;}},{key:"_isInBalloon",get:function get(){return this._balloon.hasView(this._form);}}],[{key:"requires",get:function get(){return[Xf];}},{key:"pluginName",get:function get(){return"ImageTextAlternativeUI";}}]);return nm;}(pd);var om=/*#__PURE__*/function(_pd37){_inherits(om,_pd37);var _super131=_createSuper(om);function om(){_classCallCheck(this,om);return _super131.apply(this,arguments);}_createClass(om,null,[{key:"requires",get:function get(){return[Uf,nm];}},{key:"pluginName",get:function get(){return"ImageTextAlternative";}}]);return om;}(pd);i(66);var rm=/*#__PURE__*/function(_pd38){_inherits(rm,_pd38);var _super132=_createSuper(rm);function rm(){_classCallCheck(this,rm);return _super132.apply(this,arguments);}_createClass(rm,null,[{key:"requires",get:function get(){return[Ih,Bf,om];}},{key:"pluginName",get:function get(){return"Image";}}]);return rm;}(pd);var sm=/*#__PURE__*/function(_El23){_inherits(sm,_El23);var _super133=_createSuper(sm);function sm(t){var _this204;_classCallCheck(this,sm);_this204=_super133.call(this,t),_this204.buttonView=new Xl(t),_this204._fileInputView=new am(t),_this204._fileInputView.bind("acceptedType").to(_assertThisInitialized(_this204)),_this204._fileInputView.bind("allowMultipleFiles").to(_assertThisInitialized(_this204)),_this204._fileInputView.delegate("done").to(_assertThisInitialized(_this204)),_this204.setTemplate({tag:"span",attributes:{"class":"ck-file-dialog-button"},children:[_this204.buttonView,_this204._fileInputView]}),_this204.buttonView.on("execute",function(){_this204._fileInputView.open();});return _this204;}_createClass(sm,[{key:"focus",value:function focus(){this.buttonView.focus();}}]);return sm;}(El);var am=/*#__PURE__*/function(_El24){_inherits(am,_El24);var _super134=_createSuper(am);function am(t){var _this205;_classCallCheck(this,am);_this205=_super134.call(this,t),_this205.set("acceptedType"),_this205.set("allowMultipleFiles",!1);var e=_this205.bindTemplate;_this205.setTemplate({tag:"input",attributes:{"class":["ck-hidden"],type:"file",tabindex:"-1",accept:e.to("acceptedType"),multiple:e.to("allowMultipleFiles")},on:{change:e.to(function(){_this205.element&&_this205.element.files&&_this205.element.files.length&&_this205.fire("done",_this205.element.files),_this205.element.value="";})}});return _this205;}_createClass(am,[{key:"open",value:function open(){this.element.click();}}]);return am;}(El);function cm(t){var e=t.map(function(t){return t.replace("+","\\+");});return new RegExp("^image\\/(".concat(e.join("|"),")$"));}function lm(t){return new Promise(function(e,i){var n=t.getAttribute("src");fetch(n).then(function(t){return t.blob();}).then(function(t){var i=dm(t,n),o=i.replace("image/",""),r=new File([t],"image."+o,{type:i});e(r);})["catch"](function(t){return t&&"TypeError"===t.name?function(t){return function(t){return new Promise(function(e,i){var n=rr.document.createElement("img");n.addEventListener("load",function(){var t=rr.document.createElement("canvas");t.width=n.width,t.height=n.height;t.getContext("2d").drawImage(n,0,0),t.toBlob(function(t){return t?e(t):i();});}),n.addEventListener("error",function(){return i();}),n.src=t;});}(t).then(function(e){var i=dm(e,t),n=i.replace("image/","");return new File([e],"image."+n,{type:i});});}(n).then(e)["catch"](i):i(t);});});}function dm(t,e){return t.type?t.type:e.match(/data:(image\/\w+);base64/)?e.match(/data:(image\/\w+);base64/)[1].toLowerCase():"image/jpeg";}var um=/*#__PURE__*/function(_pd39){_inherits(um,_pd39);var _super135=_createSuper(um);function um(){_classCallCheck(this,um);return _super135.apply(this,arguments);}_createClass(um,[{key:"init",value:function init(){var t=this.editor,e=t.t;t.ui.componentFactory.add("imageUpload",function(i){var n=new sm(i),o=t.commands.get("imageUpload"),r=t.config.get("image.upload.types"),s=cm(r);return n.set({acceptedType:r.map(function(t){return"image/"+t;}).join(","),allowMultipleFiles:!0}),n.buttonView.set({label:e("Insert image"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.91 10.54c.26-.23.64-.21.88.03l3.36 3.14 2.23-2.06a.64.64 0 0 1 .87 0l2.52 2.97V4.5H3.2v10.12l3.71-4.08zm10.27-7.51c.6 0 1.09.47 1.09 1.05v11.84c0 .59-.49 1.06-1.09 1.06H2.79c-.6 0-1.09-.47-1.09-1.06V4.08c0-.58.49-1.05 1.1-1.05h14.38zm-5.22 5.56a1.96 1.96 0 1 1 3.4-1.96 1.96 1.96 0 0 1-3.4 1.96z"/></svg>',tooltip:!0}),n.buttonView.bind("isEnabled").to(o),n.on("done",function(e,i){var n=Array.from(i).filter(function(t){return s.test(t.type);});n.length&&t.execute("imageUpload",{file:n});}),n;});}}],[{key:"pluginName",get:function get(){return"ImageUploadUI";}}]);return um;}(pd);i(68),i(70),i(72);var hm=/*#__PURE__*/function(_pd40){_inherits(hm,_pd40);var _super136=_createSuper(hm);function hm(t){var _this206;_classCallCheck(this,hm);_this206=_super136.call(this,t),_this206.placeholder="data:image/svg+xml;utf8,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 250"><rect rx="4"/></svg>');return _this206;}_createClass(hm,[{key:"init",value:function init(){var _this207=this;this.editor.editing.downcastDispatcher.on("attribute:uploadStatus:image",function(){return _this207.uploadStatusChange.apply(_this207,arguments);});}},{key:"uploadStatusChange",value:function uploadStatusChange(t,e,i){var n=this.editor,o=e.item,r=o.getAttribute("uploadId");if(!i.consumable.consume(e.item,t.name))return;var s=n.plugins.get(Ru),a=r?e.attributeNewValue:null,c=this.placeholder,l=n.editing.mapper.toViewElement(o),d=i.writer;if("reading"==a)return fm(l,d),void mm(c,l,d);if("uploading"==a){var _t274=s.loaders.get(r);return fm(l,d),void(_t274?(gm(l,d),function(t,e,i,n){var o=function(t){var e=t.createUIElement("div",{"class":"ck-progress-bar"});return t.setCustomProperty("progressBar",!0,e),e;}(e);e.insert(e.createPositionAt(t,"end"),o),i.on("change:uploadedPercent",function(t,e,i){n.change(function(t){t.setStyle("width",i+"%",o);});});}(l,d,_t274,n.editing.view),function(t,e,i){if(i.data){var _n154=Eh(t);e.setAttribute("src",i.data,_n154);}}(l,d,_t274)):mm(c,l,d));}"complete"==a&&s.loaders.get(r)&&function(t,e,i){var n=e.createUIElement("div",{"class":"ck-image-upload-complete-icon"});e.insert(e.createPositionAt(t,"end"),n),setTimeout(function(){i.change(function(t){return t.remove(t.createRangeOn(n));});},3e3);}(l,d,n.editing.view),function(t,e){bm(t,e,"progressBar");}(l,d),gm(l,d),function(t,e){e.removeClass("ck-appear",t);}(l,d);}}]);return hm;}(pd);function fm(t,e){t.hasClass("ck-appear")||e.addClass("ck-appear",t);}function mm(t,e,i){e.hasClass("ck-image-upload-placeholder")||i.addClass("ck-image-upload-placeholder",e);var n=Eh(e);n.getAttribute("src")!==t&&i.setAttribute("src",t,n),pm(e,"placeholder")||i.insert(i.createPositionAfter(n),function(t){var e=t.createUIElement("div",{"class":"ck-upload-placeholder-loader"});return t.setCustomProperty("placeholder",!0,e),e;}(i));}function gm(t,e){t.hasClass("ck-image-upload-placeholder")&&e.removeClass("ck-image-upload-placeholder",t),bm(t,e,"placeholder");}function pm(t,e){var _iterator355=_createForOfIteratorHelper(t.getChildren()),_step355;try{for(_iterator355.s();!(_step355=_iterator355.n()).done;){var _i262=_step355.value;if(_i262.getCustomProperty(e))return _i262;}}catch(err){_iterator355.e(err);}finally{_iterator355.f();}}function bm(t,e,i){var n=pm(t,i);n&&e.remove(e.createRangeOn(n));}var wm=/*#__PURE__*/function(){function wm(t){_classCallCheck(this,wm);this.document=t;}_createClass(wm,[{key:"createDocumentFragment",value:function createDocumentFragment(t){return new Po(this.document,t);}},{key:"createElement",value:function createElement(t,e,i){return new Rn(this.document,t,e,i);}},{key:"createText",value:function createText(t){return new Ri(this.document,t);}},{key:"clone",value:function clone(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;return t._clone(e);}},{key:"appendChild",value:function appendChild(t,e){return e._appendChild(t);}},{key:"insertChild",value:function insertChild(t,e,i){return i._insertChild(t,e);}},{key:"removeChildren",value:function removeChildren(t,e,i){return i._removeChildren(t,e);}},{key:"remove",value:function remove(t){var e=t.parent;return e?this.removeChildren(e.getChildIndex(t),1,e):[];}},{key:"replace",value:function replace(t,e){var i=t.parent;if(i){var _n155=i.getChildIndex(t);return this.removeChildren(_n155,1,i),this.insertChild(_n155,e,i),!0;}return!1;}},{key:"unwrapElement",value:function unwrapElement(t){var e=t.parent;if(e){var _i263=e.getChildIndex(t);this.remove(t),this.insertChild(_i263,t.getChildren(),e);}}},{key:"rename",value:function rename(t,e){var i=new Rn(this.document,t,e.getAttributes(),e.getChildren());return this.replace(e,i)?i:null;}},{key:"setAttribute",value:function setAttribute(t,e,i){i._setAttribute(t,e);}},{key:"removeAttribute",value:function removeAttribute(t,e){e._removeAttribute(t);}},{key:"addClass",value:function addClass(t,e){e._addClass(t);}},{key:"removeClass",value:function removeClass(t,e){e._removeClass(t);}},{key:"setStyle",value:function setStyle(t,e,i){y(t)&&void 0===i&&(i=e),i._setStyle(t,e);}},{key:"removeStyle",value:function removeStyle(t,e){e._removeStyle(t);}},{key:"setCustomProperty",value:function setCustomProperty(t,e,i){i._setCustomProperty(t,e);}},{key:"removeCustomProperty",value:function removeCustomProperty(t,e){return e._removeCustomProperty(t);}},{key:"createPositionAt",value:function createPositionAt(t,e){return Xn._createAt(t,e);}},{key:"createPositionAfter",value:function createPositionAfter(t){return Xn._createAfter(t);}},{key:"createPositionBefore",value:function createPositionBefore(t){return Xn._createBefore(t);}},{key:"createRange",value:function createRange(t,e){return new to(t,e);}},{key:"createRangeOn",value:function createRangeOn(t){return to._createOn(t);}},{key:"createRangeIn",value:function createRangeIn(t){return to._createIn(t);}},{key:"createSelection",value:function createSelection(t,e,i){return new no(t,e,i);}}]);return wm;}();var km=/*#__PURE__*/function(_wd15){_inherits(km,_wd15);var _super137=_createSuper(km);function km(){_classCallCheck(this,km);return _super137.apply(this,arguments);}_createClass(km,[{key:"refresh",value:function refresh(){var t=this.editor.model.document.selection.getSelectedElement(),e=t&&"image"===t.name||!1;this.isEnabled=Sh(this.editor.model)||e;}},{key:"execute",value:function execute(t){var e=this.editor,i=e.model,n=e.plugins.get(Ru);var _iterator356=_createForOfIteratorHelper(Ti(t.file)),_step356;try{for(_iterator356.s();!(_step356=_iterator356.n()).done;){var _e246=_step356.value;_m(i,n,_e246);}}catch(err){_iterator356.e(err);}finally{_iterator356.f();}}}]);return km;}(wd);function _m(t,e,i){var n=e.createLoader(i);n&&Ch(t,{uploadId:n.id});}var vm=/*#__PURE__*/function(_pd41){_inherits(vm,_pd41);var _super138=_createSuper(vm);function vm(t){var _this208;_classCallCheck(this,vm);_this208=_super138.call(this,t),t.config.define("image",{upload:{types:["jpeg","png","gif","bmp","webp","tiff"]}});return _this208;}_createClass(vm,[{key:"init",value:function init(){var _this209=this;var t=this.editor,e=t.model.document,i=t.model.schema,n=t.conversion,o=t.plugins.get(Ru),r=cm(t.config.get("image.upload.types"));i.extend("image",{allowAttributes:["uploadId","uploadStatus"]}),t.commands.add("imageUpload",new km(t)),n["for"]("upcast").attributeToAttribute({view:{name:"img",key:"uploadId"},model:"uploadId"}),this.listenTo(t.editing.view.document,"clipboardInput",function(e,i){if(n=i.dataTransfer,Array.from(n.types).includes("text/html")&&""!==n.getData("text/html"))return;var n;var o=Array.from(i.dataTransfer.files).filter(function(t){return!!t&&r.test(t.type);}),s=i.targetRanges.map(function(e){return t.editing.mapper.toModelRange(e);});t.model.change(function(i){i.setSelection(s),o.length&&(e.stop(),t.model.enqueueChange("default",function(){t.execute("imageUpload",{file:o});}));});}),this.listenTo(t.plugins.get(Rd),"inputTransformation",function(e,i){var n=Array.from(t.editing.view.createRangeIn(i.content)).filter(function(t){return!(!(e=t.item).is("element","img")||!e.getAttribute("src"))&&(e.getAttribute("src").match(/^data:image\/\w+;base64,/g)||e.getAttribute("src").match(/^blob:/g))&&!t.item.getAttribute("uploadProcessed");var e;}).map(function(t){return{promise:lm(t.item),imageElement:t.item};});if(!n.length)return;var r=new wm(t.editing.view.document);var _iterator357=_createForOfIteratorHelper(n),_step357;try{for(_iterator357.s();!(_step357=_iterator357.n()).done;){var _t275=_step357.value;r.setAttribute("uploadProcessed",!0,_t275.imageElement);var _e247=o.createLoader(_t275.promise);_e247&&(r.setAttribute("src","",_t275.imageElement),r.setAttribute("uploadId",_e247.id,_t275.imageElement));}}catch(err){_iterator357.e(err);}finally{_iterator357.f();}}),t.editing.view.document.on("dragover",function(t,e){e.preventDefault();}),e.on("change",function(){var i=e.differ.getChanges({includeChangesInGraveyard:!0});var _iterator358=_createForOfIteratorHelper(i),_step358;try{for(_iterator358.s();!(_step358=_iterator358.n()).done;){var _e248=_step358.value;if("insert"==_e248.type&&"$text"!=_e248.name){var _i264=_e248.position.nodeAfter,_n156="$graveyard"==_e248.position.root.rootName;var _iterator359=_createForOfIteratorHelper(ym(t,_i264)),_step359;try{for(_iterator359.s();!(_step359=_iterator359.n()).done;){var _e249=_step359.value;var _t276=_e249.getAttribute("uploadId");if(!_t276)continue;var _i265=o.loaders.get(_t276);_i265&&(_n156?_i265.abort():"idle"==_i265.status&&_this209._readAndUpload(_i265,_e249));}}catch(err){_iterator359.e(err);}finally{_iterator359.f();}}}}catch(err){_iterator358.e(err);}finally{_iterator358.f();}});}},{key:"_readAndUpload",value:function _readAndUpload(t,e){var _this210=this;var i=this.editor,n=i.model,o=i.locale.t,r=i.plugins.get(Ru),s=i.plugins.get(yf);return n.enqueueChange("transparent",function(t){t.setAttribute("uploadStatus","reading",e);}),t.read().then(function(){var o=t.upload();if(fo.isSafari){var _t277=Eh(i.editing.mapper.toViewElement(e));i.editing.view.once("render",function(){if(!_t277.parent)return;var e=i.editing.view.domConverter.mapViewToDom(_t277.parent);if(!e)return;var n=e.style.display;e.style.display="none",e._ckHack=e.offsetHeight,e.style.display=n;});}return n.enqueueChange("transparent",function(t){t.setAttribute("uploadStatus","uploading",e);}),o;}).then(function(t){n.enqueueChange("transparent",function(i){i.setAttributes({uploadStatus:"complete",src:t["default"]},e),_this210._parseAndSetSrcsetAttributeOnImage(t,e,i);}),a();})["catch"](function(i){if("error"!==t.status&&"aborted"!==t.status)throw i;"error"==t.status&&i&&s.showWarning(i,{title:o("Upload failed"),namespace:"upload"}),a(),n.enqueueChange("transparent",function(t){t.remove(e);});});function a(){n.enqueueChange("transparent",function(t){t.removeAttribute("uploadId",e),t.removeAttribute("uploadStatus",e);}),r.destroyLoader(t);}}},{key:"_parseAndSetSrcsetAttributeOnImage",value:function _parseAndSetSrcsetAttributeOnImage(t,e,i){var n=0;var o=Object.keys(t).filter(function(t){var e=parseInt(t,10);if(!isNaN(e))return n=Math.max(n,e),!0;}).map(function(e){return"".concat(t[e]," ").concat(e,"w");}).join(", ");""!=o&&i.setAttribute("srcset",{data:o,width:n},e);}}],[{key:"requires",get:function get(){return[Ru,yf,Rd];}},{key:"pluginName",get:function get(){return"ImageUploadEditing";}}]);return vm;}(pd);function ym(t,e){return Array.from(t.model.createRangeOn(e)).filter(function(t){return t.item.is("element","image");}).map(function(t){return t.item;});}var xm=/*#__PURE__*/function(_pd42){_inherits(xm,_pd42);var _super139=_createSuper(xm);function xm(){_classCallCheck(this,xm);return _super139.apply(this,arguments);}_createClass(xm,null,[{key:"pluginName",get:function get(){return"ImageUpload";}},{key:"requires",get:function get(){return[vm,um,hm];}}]);return xm;}(pd);var Am=/*#__PURE__*/function(_wd16){_inherits(Am,_wd16);var _super140=_createSuper(Am);function Am(){_classCallCheck(this,Am);return _super140.apply(this,arguments);}_createClass(Am,[{key:"refresh",value:function refresh(){var t=this.editor.model,e=_d(t.document.selection.getSelectedBlocks());this.value=!!e&&e.is("element","paragraph"),this.isEnabled=!!e&&Tm(e,t.schema);}},{key:"execute",value:function execute(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=this.editor.model,i=e.document;e.change(function(n){var o=(t.selection||i.selection).getSelectedBlocks();var _iterator360=_createForOfIteratorHelper(o),_step360;try{for(_iterator360.s();!(_step360=_iterator360.n()).done;){var _t278=_step360.value;!_t278.is("element","paragraph")&&Tm(_t278,e.schema)&&n.rename(_t278,"paragraph");}}catch(err){_iterator360.e(err);}finally{_iterator360.f();}});}}]);return Am;}(wd);function Tm(t,e){return e.checkChild(t.parent,"paragraph")&&!e.isObject(t);}var Cm=/*#__PURE__*/function(_wd17){_inherits(Cm,_wd17);var _super141=_createSuper(Cm);function Cm(){_classCallCheck(this,Cm);return _super141.apply(this,arguments);}_createClass(Cm,[{key:"execute",value:function execute(t){var e=this.editor.model;var i=t.position;e.change(function(t){var n=t.createElement("paragraph");if(!e.schema.checkChild(i.parent,n)){var _o98=e.schema.findAllowedParent(i,n);if(!_o98)return;i=t.split(i,_o98).position;}e.insertContent(n,i),t.setSelection(n,"in");});}}]);return Cm;}(wd);var Sm=/*#__PURE__*/function(_pd43){_inherits(Sm,_pd43);var _super142=_createSuper(Sm);function Sm(){_classCallCheck(this,Sm);return _super142.apply(this,arguments);}_createClass(Sm,[{key:"init",value:function init(){var t=this.editor,e=t.model;t.commands.add("paragraph",new Am(t)),t.commands.add("insertParagraph",new Cm(t)),e.schema.register("paragraph",{inheritAllFrom:"$block"}),t.conversion.elementToElement({model:"paragraph",view:"p"}),t.conversion["for"]("upcast").elementToElement({model:function model(t,_ref52){var e=_ref52.writer;return Sm.paragraphLikeElements.has(t.name)?t.isEmpty?null:e.createElement("paragraph"):null;},view:/.+/,converterPriority:"low"});}}],[{key:"pluginName",get:function get(){return"Paragraph";}}]);return Sm;}(pd);Sm.paragraphLikeElements=new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td","th"]);var Em=/*#__PURE__*/function(_wd18){_inherits(Em,_wd18);var _super143=_createSuper(Em);function Em(t,e){var _this211;_classCallCheck(this,Em);_this211=_super143.call(this,t),_this211.modelElements=e;return _this211;}_createClass(Em,[{key:"refresh",value:function refresh(){var _this212=this;var t=_d(this.editor.model.document.selection.getSelectedBlocks());this.value=!!t&&this.modelElements.includes(t.name)&&t.name,this.isEnabled=!!t&&this.modelElements.some(function(e){return Pm(t,e,_this212.editor.model.schema);});}},{key:"execute",value:function execute(t){var e=this.editor.model,i=e.document,n=t.value;e.change(function(t){var o=Array.from(i.selection.getSelectedBlocks()).filter(function(t){return Pm(t,n,e.schema);});var _iterator361=_createForOfIteratorHelper(o),_step361;try{for(_iterator361.s();!(_step361=_iterator361.n()).done;){var _e250=_step361.value;_e250.is("element",n)||t.rename(_e250,n);}}catch(err){_iterator361.e(err);}finally{_iterator361.f();}});}}]);return Em;}(wd);function Pm(t,e,i){return i.checkChild(t.parent,e)&&!i.isObject(t);}var Mm=/*#__PURE__*/function(_pd44){_inherits(Mm,_pd44);var _super144=_createSuper(Mm);function Mm(t){var _this213;_classCallCheck(this,Mm);_this213=_super144.call(this,t),t.config.define("heading",{options:[{model:"paragraph",title:"Paragraph","class":"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1","class":"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2","class":"ck-heading_heading2"},{model:"heading3",view:"h4",title:"Heading 3","class":"ck-heading_heading3"}]});return _this213;}_createClass(Mm,[{key:"init",value:function init(){var t=this.editor,e=t.config.get("heading.options"),i=[];var _iterator362=_createForOfIteratorHelper(e),_step362;try{for(_iterator362.s();!(_step362=_iterator362.n()).done;){var _n157=_step362.value;"paragraph"!==_n157.model&&(t.model.schema.register(_n157.model,{inheritAllFrom:"$block"}),t.conversion.elementToElement(_n157),i.push(_n157.model));}}catch(err){_iterator362.e(err);}finally{_iterator362.f();}this._addDefaultH1Conversion(t),t.commands.add("heading",new Em(t,i));}},{key:"afterInit",value:function afterInit(){var t=this.editor,e=t.commands.get("enter"),i=t.config.get("heading.options");e&&this.listenTo(e,"afterExecute",function(e,n){var o=t.model.document.selection.getFirstPosition().parent;i.some(function(t){return o.is("element",t.model);})&&!o.is("element","paragraph")&&0===o.childCount&&n.writer.rename(o,"paragraph");});}},{key:"_addDefaultH1Conversion",value:function _addDefaultH1Conversion(t){t.conversion["for"]("upcast").elementToElement({model:"heading1",view:"h1",converterPriority:di.get("low")+1});}}],[{key:"pluginName",get:function get(){return"HeadingEditing";}},{key:"requires",get:function get(){return[Sm];}}]);return Mm;}(pd);var Im=function Im(t,e){_classCallCheck(this,Im);e&&Vn(this,e),t&&this.set(t);};yi(Im,Un);i(12);var Nm=/*#__PURE__*/function(_pd45){_inherits(Nm,_pd45);var _super145=_createSuper(Nm);function Nm(){_classCallCheck(this,Nm);return _super145.apply(this,arguments);}_createClass(Nm,[{key:"init",value:function init(){var _this214=this;var t=this.editor,e=t.t,i=function(t){var e=t.t,i={Paragraph:e("Paragraph"),"Heading 1":e("Heading 1"),"Heading 2":e("Heading 2"),"Heading 3":e("Heading 3"),"Heading 4":e("Heading 4"),"Heading 5":e("Heading 5"),"Heading 6":e("Heading 6")};return t.config.get("heading.options").map(function(t){var e=i[t.title];return e&&e!=t.title&&(t.title=e),t;});}(t),n=e("Choose heading"),o=e("Heading");t.ui.componentFactory.add("heading",function(e){var r={},s=new xi(),a=t.commands.get("heading"),c=t.commands.get("paragraph"),l=[a];var _iterator363=_createForOfIteratorHelper(i),_step363;try{var _loop7=function _loop7(){var t=_step363.value;var e={type:"button",model:new Im({label:t.title,"class":t["class"],withText:!0})};"paragraph"===t.model?(e.model.bind("isOn").to(c,"value"),e.model.set("commandName","paragraph"),l.push(c)):(e.model.bind("isOn").to(a,"value",function(e){return e===t.model;}),e.model.set({commandName:"heading",commandValue:t.model})),s.add(e),r[t.model]=t.title;};for(_iterator363.s();!(_step363=_iterator363.n()).done;){_loop7();}}catch(err){_iterator363.e(err);}finally{_iterator363.f();}var d=ad(e);return ld(d,s),d.buttonView.set({isOn:!1,withText:!0,tooltip:o}),d.extendTemplate({attributes:{"class":["ck-heading-dropdown"]}}),d.bind("isEnabled").toMany(l,"isEnabled",function(){for(var _len20=arguments.length,t=new Array(_len20),_key20=0;_key20<_len20;_key20++){t[_key20]=arguments[_key20];}return t.some(function(t){return t;});}),d.buttonView.bind("label").to(a,"value",c,"value",function(t,e){var i=t||e&&"paragraph";return r[i]?r[i]:n;}),_this214.listenTo(d,"execute",function(e){t.execute(e.source.commandName,e.source.commandValue?{value:e.source.commandValue}:void 0),t.editing.view.focus();}),d;});}}]);return Nm;}(pd);function Om(t){var _iterator364=_createForOfIteratorHelper(t.getChildren()),_step364;try{for(_iterator364.s();!(_step364=_iterator364.n()).done;){var _e251=_step364.value;if(_e251&&_e251.is("element","caption"))return _e251;}}catch(err){_iterator364.e(err);}finally{_iterator364.f();}return null;}function Rm(t){var e=t.parent;return"figcaption"==t.name&&e&&"figure"==e.name&&e.hasClass("image")?{name:!0}:null;}var Dm=/*#__PURE__*/function(_pd46){_inherits(Dm,_pd46);var _super146=_createSuper(Dm);function Dm(){_classCallCheck(this,Dm);return _super146.apply(this,arguments);}_createClass(Dm,[{key:"init",value:function init(){var _this215=this;var t=this.editor,e=t.editing.view,i=t.model.schema,n=t.data,o=t.editing,r=t.t;i.register("caption",{allowIn:"image",allowContentOf:"$block",isLimit:!0}),t.model.document.registerPostFixer(function(t){return _this215._insertMissingModelCaptionElement(t);}),t.conversion["for"]("upcast").elementToElement({view:Rm,model:"caption"});n.downcastDispatcher.on("insert:caption",Lm(function(t){return t.createContainerElement("figcaption");},!1));var s=function(t,e){return function(i){var n=i.createEditableElement("figcaption");return i.setCustomProperty("imageCaption",!0,n),el({view:t,element:n,text:e}),_h(n,i);};}(e,r("Enter image caption"));o.downcastDispatcher.on("insert:caption",Lm(s)),o.downcastDispatcher.on("insert",this._fixCaptionVisibility(function(t){return t.item;}),{priority:"high"}),o.downcastDispatcher.on("remove",this._fixCaptionVisibility(function(t){return t.position.parent;}),{priority:"high"}),e.document.registerPostFixer(function(t){return _this215._updateCaptionVisibility(t);});}},{key:"_updateCaptionVisibility",value:function _updateCaptionVisibility(t){var e=this.editor.editing.mapper,i=this._lastSelectedCaption;var n;var o=this.editor.model.document.selection,r=o.getSelectedElement();if(r&&r.is("element","image")){var _t279=Om(r);n=e.toViewElement(_t279);}var s=zm(o.getFirstPosition().parent);if(s&&(n=e.toViewElement(s)),n&&!this.editor.isReadOnly)return i?(i===n||(Vm(i,t),this._lastSelectedCaption=n),jm(n,t)):(this._lastSelectedCaption=n,jm(n,t));if(i){var _e252=Vm(i,t);return this._lastSelectedCaption=null,_e252;}return!1;}},{key:"_fixCaptionVisibility",value:function _fixCaptionVisibility(t){var _this216=this;return function(e,i,n){var o=zm(t(i)),r=_this216.editor.editing.mapper,s=n.writer;if(o){var _t280=r.toViewElement(o);_t280&&(o.childCount?s.removeClass("ck-hidden",_t280):s.addClass("ck-hidden",_t280));}};}},{key:"_insertMissingModelCaptionElement",value:function _insertMissingModelCaptionElement(t){var e=this.editor.model,i=e.document.differ.getChanges(),n=[];var _iterator365=_createForOfIteratorHelper(i),_step365;try{for(_iterator365.s();!(_step365=_iterator365.n()).done;){var _t281=_step365.value;if("insert"==_t281.type&&"$text"!=_t281.name){var _i267=_t281.position.nodeAfter;if(_i267.is("element","image")&&!Om(_i267)&&n.push(_i267),!_i267.is("element","image")&&_i267.childCount){var _iterator366=_createForOfIteratorHelper(e.createRangeIn(_i267).getItems()),_step366;try{for(_iterator366.s();!(_step366=_iterator366.n()).done;){var _t282=_step366.value;_t282.is("element","image")&&!Om(_t282)&&n.push(_t282);}}catch(err){_iterator366.e(err);}finally{_iterator366.f();}}}}}catch(err){_iterator365.e(err);}finally{_iterator365.f();}for(var _i266=0,_n158=n;_i266<_n158.length;_i266++){var _e253=_n158[_i266];t.appendElement("caption",_e253);}return!!n.length;}}],[{key:"pluginName",get:function get(){return"ImageCaptionEditing";}}]);return Dm;}(pd);function Lm(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!0;return function(i,n,o){var r=n.item;if((r.childCount||e)&&Th(r.parent)){if(!o.consumable.consume(n.item,"insert"))return;var _e254=o.mapper.toViewElement(n.range.start.parent),_i268=t(o.writer),_s33=o.writer;r.childCount||_s33.addClass("ck-hidden",_i268),function(t,e,i,n){var o=n.writer.createPositionAt(i,"end");n.writer.insert(o,t),n.mapper.bindElements(e,t);}(_i268,n.item,_e254,o);}};}function zm(t){var e=t.getAncestors({includeSelf:!0}).find(function(t){return"caption"==t.name;});return e&&e.parent&&"image"==e.parent.name?e:null;}function Vm(t,e){return!t.childCount&&!t.hasClass("ck-hidden")&&(e.addClass("ck-hidden",t),!0);}function jm(t,e){return!!t.hasClass("ck-hidden")&&(e.removeClass("ck-hidden",t),!0);}i(75);var Bm=/*#__PURE__*/function(_wd19){_inherits(Bm,_wd19);var _super147=_createSuper(Bm);function Bm(t,e){var _this217;_classCallCheck(this,Bm);_this217=_super147.call(this,t),_this217.defaultStyle=!1,_this217.styles=e.reduce(function(t,e){return t[e.name]=e,e.isDefault&&(_this217.defaultStyle=e.name),t;},{});return _this217;}_createClass(Bm,[{key:"refresh",value:function refresh(){var t=this.editor.model.document.selection.getSelectedElement();if(this.isEnabled=Th(t),t){if(t.hasAttribute("imageStyle")){var _e255=t.getAttribute("imageStyle");this.value=!!this.styles[_e255]&&_e255;}else this.value=this.defaultStyle;}else this.value=!1;}},{key:"execute",value:function execute(t){var _this218=this;var e=t.value,i=this.editor.model,n=i.document.selection.getSelectedElement();i.change(function(t){_this218.styles[e].isDefault?t.removeAttribute("imageStyle",n):t.setAttribute("imageStyle",e,n);});}}]);return Bm;}(wd);function Fm(t,e){var _iterator367=_createForOfIteratorHelper(e),_step367;try{for(_iterator367.s();!(_step367=_iterator367.n()).done;){var _i269=_step367.value;if(_i269.name===t)return _i269;}}catch(err){_iterator367.e(err);}finally{_iterator367.f();}}var Hm='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 4.5V3h16v1.5zm2.5 3V12h11V7.5h-11zM4.061 6H15.94c.586 0 1.061.407 1.061.91v5.68c0 .503-.475.91-1.061.91H4.06c-.585 0-1.06-.407-1.06-.91V6.91C3 6.406 3.475 6 4.061 6zM2 16.5V15h16v1.5z"/></svg>',Um='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path d="M18 4.5V3H2v1.5h16zm0 3V6h-5.674v1.5H18zm0 3V9h-5.674v1.5H18zm0 3V12h-5.674v1.5H18zm-8.5-6V12h-6V7.5h6zm.818-1.5H2.682C2.305 6 2 6.407 2 6.91v5.68c0 .503.305.91.682.91h7.636c.377 0 .682-.407.682-.91V6.91c0-.503-.305-.91-.682-.91zM18 16.5V15H2v1.5h16z"/></svg>',Wm='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 4.5V3h16v1.5zm4.5 3V12h7V7.5h-7zM5.758 6h8.484c.419 0 .758.407.758.91v5.681c0 .502-.34.909-.758.909H5.758c-.419 0-.758-.407-.758-.91V6.91c0-.503.34-.91.758-.91zM2 16.5V15h16v1.5z"/></svg>',qm='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 4.5V3h16v1.5zm0 3V6h5.674v1.5zm0 3V9h5.674v1.5zm0 3V12h5.674v1.5zm8.5-6V12h6V7.5h-6zM9.682 6h7.636c.377 0 .682.407.682.91v5.68c0 .503-.305.91-.682.91H9.682c-.377 0-.682-.407-.682-.91V6.91c0-.503.305-.91.682-.91zM2 16.5V15h16v1.5z"/></svg>';var $m={full:{name:"full",title:"Full size image",icon:Hm,isDefault:!0},side:{name:"side",title:"Side image",icon:qm,className:"image-style-side"},alignLeft:{name:"alignLeft",title:"Left aligned image",icon:Um,className:"image-style-align-left"},alignCenter:{name:"alignCenter",title:"Centered image",icon:Wm,className:"image-style-align-center"},alignRight:{name:"alignRight",title:"Right aligned image",icon:qm,className:"image-style-align-right"}},Ym={full:Hm,left:Um,right:qm,center:Wm};function Gm(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];return t.map(Km);}function Km(t){if("string"==typeof t){var _e256=t;$m[_e256]?t=Object.assign({},$m[_e256]):(Object(ui.c)("image-style-not-found",{name:_e256}),t={name:_e256});}else if($m[t.name]){var _e257=$m[t.name],_i270=Object.assign({},t);for(var _n159 in _e257){Object.prototype.hasOwnProperty.call(t,_n159)||(_i270[_n159]=_e257[_n159]);}t=_i270;}return"string"==typeof t.icon&&Ym[t.icon]&&(t.icon=Ym[t.icon]),t;}var Qm=/*#__PURE__*/function(_pd47){_inherits(Qm,_pd47);var _super148=_createSuper(Qm);function Qm(){_classCallCheck(this,Qm);return _super148.apply(this,arguments);}_createClass(Qm,[{key:"init",value:function init(){var t=this.editor,e=t.model.schema,i=t.data,n=t.editing;t.config.define("image.styles",["full","side"]);var o=Gm(t.config.get("image.styles"));e.extend("image",{allowAttributes:"imageStyle"});var r=function(t){return function(e,i,n){if(!n.consumable.consume(i.item,e.name))return;var o=Fm(i.attributeNewValue,t),r=Fm(i.attributeOldValue,t),s=n.mapper.toViewElement(i.item),a=n.writer;r&&a.removeClass(r.className,s),o&&a.addClass(o.className,s);};}(o);n.downcastDispatcher.on("attribute:imageStyle:image",r),i.downcastDispatcher.on("attribute:imageStyle:image",r),i.upcastDispatcher.on("element:figure",function(t){var e=t.filter(function(t){return!t.isDefault;});return function(t,i,n){if(!i.modelRange)return;var o=i.viewItem,r=_d(i.modelRange.getItems());if(!r||n.schema.checkAttribute(r,"imageStyle")){var _iterator368=_createForOfIteratorHelper(e),_step368;try{for(_iterator368.s();!(_step368=_iterator368.n()).done;){var _t283=_step368.value;n.consumable.consume(o,{classes:_t283.className})&&n.writer.setAttribute("imageStyle",_t283.name,r);}}catch(err){_iterator368.e(err);}finally{_iterator368.f();}}};}(o),{priority:"low"}),t.commands.add("imageStyle",new Bm(t,o));}}],[{key:"pluginName",get:function get(){return"ImageStyleEditing";}}]);return Qm;}(pd);i(77);var Jm=/*#__PURE__*/function(_pd48){_inherits(Jm,_pd48);var _super149=_createSuper(Jm);function Jm(){_classCallCheck(this,Jm);return _super149.apply(this,arguments);}_createClass(Jm,[{key:"localizedDefaultStylesTitles",get:function get(){var t=this.editor.t;return{"Full size image":t("Full size image"),"Side image":t("Side image"),"Left aligned image":t("Left aligned image"),"Centered image":t("Centered image"),"Right aligned image":t("Right aligned image")};}},{key:"init",value:function init(){var t=function(t,e){var _iterator369=_createForOfIteratorHelper(t),_step369;try{for(_iterator369.s();!(_step369=_iterator369.n()).done;){var _i271=_step369.value;e[_i271.title]&&(_i271.title=e[_i271.title]);}}catch(err){_iterator369.e(err);}finally{_iterator369.f();}return t;}(Gm(this.editor.config.get("image.styles")),this.localizedDefaultStylesTitles);var _iterator370=_createForOfIteratorHelper(t),_step370;try{for(_iterator370.s();!(_step370=_iterator370.n()).done;){var _e258=_step370.value;this._createButton(_e258);}}catch(err){_iterator370.e(err);}finally{_iterator370.f();}}},{key:"_createButton",value:function _createButton(t){var _this219=this;var e=this.editor,i="imageStyle:"+t.name;e.ui.componentFactory.add(i,function(i){var n=e.commands.get("imageStyle"),o=new Xl(i);return o.set({label:t.title,icon:t.icon,tooltip:!0,isToggleable:!0}),o.bind("isEnabled").to(n,"isEnabled"),o.bind("isOn").to(n,"value",function(e){return e===t.name;}),_this219.listenTo(o,"execute",function(){e.execute("imageStyle",{value:t.name}),e.editing.view.focus();}),o;});}}],[{key:"pluginName",get:function get(){return"ImageStyleUI";}}]);return Jm;}(pd);var Zm=/*#__PURE__*/function(_pd49){_inherits(Zm,_pd49);var _super150=_createSuper(Zm);function Zm(){_classCallCheck(this,Zm);return _super150.apply(this,arguments);}_createClass(Zm,[{key:"init",value:function init(){var _this220=this;var t=this.editor;if(t.plugins.has("BalloonToolbar")){var _e259=t.plugins.get("BalloonToolbar");this.listenTo(_e259,"show",function(e){(function(t){var e=t.getSelectedElement();return!(!e||!ph(e));})(t.editing.view.document.selection)&&e.stop();},{priority:"high"});}this._toolbarDefinitions=new Map(),this._balloon=this.editor.plugins.get("ContextualBalloon"),this.on("change:isEnabled",function(){_this220._updateToolbarsVisibility();}),this.listenTo(t.ui,"update",function(){_this220._updateToolbarsVisibility();}),this.listenTo(t.ui.focusTracker,"change:isFocused",function(){_this220._updateToolbarsVisibility();},{priority:"low"});}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(Zm.prototype),"destroy",this).call(this);var _iterator371=_createForOfIteratorHelper(this._toolbarDefinitions.values()),_step371;try{for(_iterator371.s();!(_step371=_iterator371.n()).done;){var _t284=_step371.value;_t284.view.destroy();}}catch(err){_iterator371.e(err);}finally{_iterator371.f();}}},{key:"register",value:function register(t,_ref53){var e=_ref53.ariaLabel,i=_ref53.items,n=_ref53.getRelatedElement,_ref53$balloonClassNa=_ref53.balloonClassName,o=_ref53$balloonClassNa===void 0?"ck-toolbar-container":_ref53$balloonClassNa;if(!i.length)return void Object(ui.c)("widget-toolbar-no-items",{toolbarId:t});var r=this.editor,s=r.t,a=new dd(r.locale);if(a.ariaLabel=e||s("Widget toolbar"),this._toolbarDefinitions.has(t))throw new ui.a("widget-toolbar-duplicated",this,{toolbarId:t});a.fillFromConfig(i,r.ui.componentFactory),this._toolbarDefinitions.set(t,{view:a,getRelatedElement:n,balloonClassName:o});}},{key:"_updateToolbarsVisibility",value:function _updateToolbarsVisibility(){var t=0,e=null,i=null;var _iterator372=_createForOfIteratorHelper(this._toolbarDefinitions.values()),_step372;try{for(_iterator372.s();!(_step372=_iterator372.n()).done;){var _n160=_step372.value;var _o99=_n160.getRelatedElement(this.editor.editing.view.document.selection);if(this.isEnabled&&_o99){if(this.editor.ui.focusTracker.isFocused){var _r49=_o99.getAncestors().length;_r49>t&&(t=_r49,e=_o99,i=_n160);}else this._isToolbarVisible(_n160)&&this._hideToolbar(_n160);}else this._isToolbarInBalloon(_n160)&&this._hideToolbar(_n160);}}catch(err){_iterator372.e(err);}finally{_iterator372.f();}i&&this._showToolbar(i,e);}},{key:"_hideToolbar",value:function _hideToolbar(t){this._balloon.remove(t.view),this.stopListening(this._balloon,"change:visibleView");}},{key:"_showToolbar",value:function _showToolbar(t,e){var _this221=this;this._isToolbarVisible(t)?Xm(this.editor,e):this._isToolbarInBalloon(t)||(this._balloon.add({view:t.view,position:tg(this.editor,e),balloonClassName:t.balloonClassName}),this.listenTo(this._balloon,"change:visibleView",function(){var _iterator373=_createForOfIteratorHelper(_this221._toolbarDefinitions.values()),_step373;try{for(_iterator373.s();!(_step373=_iterator373.n()).done;){var _t285=_step373.value;if(_this221._isToolbarVisible(_t285)){var _e260=_t285.getRelatedElement(_this221.editor.editing.view.document.selection);Xm(_this221.editor,_e260);}}}catch(err){_iterator373.e(err);}finally{_iterator373.f();}}));}},{key:"_isToolbarVisible",value:function _isToolbarVisible(t){return this._balloon.visibleView===t.view;}},{key:"_isToolbarInBalloon",value:function _isToolbarInBalloon(t){return this._balloon.hasView(t.view);}}],[{key:"requires",get:function get(){return[Xf];}},{key:"pluginName",get:function get(){return"WidgetToolbarRepository";}}]);return Zm;}(pd);function Xm(t,e){var i=t.plugins.get("ContextualBalloon"),n=tg(t,e);i.updatePosition(n);}function tg(t,e){var i=t.editing.view,n=dh.defaultPositions;return{target:i.domConverter.mapViewToDom(e),positions:[n.northArrowSouth,n.northArrowSouthWest,n.northArrowSouthEast,n.southArrowNorth,n.southArrowNorthWest,n.southArrowNorthEast,yh]};}var eg=/*#__PURE__*/function(_wd20){_inherits(eg,_wd20);var _super151=_createSuper(eg);function eg(t){var _this222;_classCallCheck(this,eg);_this222=_super151.call(this,t),_this222._childCommands=[];return _this222;}_createClass(eg,[{key:"refresh",value:function refresh(){}},{key:"execute",value:function execute(){for(var _len21=arguments.length,t=new Array(_len21),_key21=0;_key21<_len21;_key21++){t[_key21]=arguments[_key21];}return this._getFirstEnabledCommand().execute(t);}},{key:"registerChildCommand",value:function registerChildCommand(t){var _this223=this;this._childCommands.push(t),t.on("change:isEnabled",function(){return _this223._checkEnabled();}),this._checkEnabled();}},{key:"_checkEnabled",value:function _checkEnabled(){this.isEnabled=!!this._getFirstEnabledCommand();}},{key:"_getFirstEnabledCommand",value:function _getFirstEnabledCommand(){return this._childCommands.find(function(t){return t.isEnabled;});}}]);return eg;}(wd);var ig=/*#__PURE__*/function(_pd50){_inherits(ig,_pd50);var _super152=_createSuper(ig);function ig(){_classCallCheck(this,ig);return _super152.apply(this,arguments);}_createClass(ig,[{key:"init",value:function init(){var t=this.editor;t.commands.add("indent",new eg(t)),t.commands.add("outdent",new eg(t));}}],[{key:"pluginName",get:function get(){return"IndentEditing";}}]);return ig;}(pd);var ng='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zM1.632 6.95L5.02 9.358a.4.4 0 0 1-.013.661l-3.39 2.207A.4.4 0 0 1 1 11.892V7.275a.4.4 0 0 1 .632-.326z"/></svg>',og='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zm1.618-9.55L.98 9.358a.4.4 0 0 0 .013.661l3.39 2.207A.4.4 0 0 0 5 11.892V7.275a.4.4 0 0 0-.632-.326z"/></svg>';var rg=/*#__PURE__*/function(_pd51){_inherits(rg,_pd51);var _super153=_createSuper(rg);function rg(){_classCallCheck(this,rg);return _super153.apply(this,arguments);}_createClass(rg,[{key:"init",value:function init(){var t=this.editor,e=t.locale,i=t.t,n="ltr"==e.uiLanguageDirection?ng:og,o="ltr"==e.uiLanguageDirection?og:ng;this._defineButton("indent",i("Increase indent"),n),this._defineButton("outdent",i("Decrease indent"),o);}},{key:"_defineButton",value:function _defineButton(t,e,i){var _this224=this;var n=this.editor;n.ui.componentFactory.add(t,function(o){var r=n.commands.get(t),s=new Xl(o);return s.set({label:e,icon:i,tooltip:!0}),s.bind("isOn","isEnabled").to(r,"value","isEnabled"),_this224.listenTo(s,"execute",function(){n.execute(t),n.editing.view.focus();}),s;});}}],[{key:"pluginName",get:function get(){return"IndentUI";}}]);return rg;}(pd);var sg=/*#__PURE__*/function(_Vr7){_inherits(sg,_Vr7);var _super154=_createSuper(sg);function sg(t){var _this225;_classCallCheck(this,sg);_this225=_super154.call(this,t),_this225.domEventType="click";return _this225;}_createClass(sg,[{key:"onDomEvent",value:function onDomEvent(t){this.fire(t.type,t);}}]);return sg;}(Vr);i(79);var ag=/*#__PURE__*/function(_El25){_inherits(ag,_El25);var _super155=_createSuper(ag);function ag(t,e){var _this226;_classCallCheck(this,ag);_this226=_super155.call(this,t);var i=t.t;_this226.focusTracker=new Jc(),_this226.keystrokes=new Wc(),_this226.urlInputView=_this226._createUrlInput(),_this226.saveButtonView=_this226._createButton(i("Save"),Kf,"ck-button-save"),_this226.saveButtonView.type="submit",_this226.cancelButtonView=_this226._createButton(i("Cancel"),Qf,"ck-button-cancel","cancel"),_this226._manualDecoratorSwitches=_this226._createManualDecoratorSwitches(e),_this226.children=_this226._createFormChildren(e.manualDecorators),_this226._focusables=new cl(),_this226._focusCycler=new jl({focusables:_this226._focusables,focusTracker:_this226.focusTracker,keystrokeHandler:_this226.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});var n=["ck","ck-link-form","ck-responsive-form"];e.manualDecorators.length&&n.push("ck-link-form_layout-vertical","ck-vertical-form"),_this226.setTemplate({tag:"form",attributes:{"class":n,tabindex:"-1"},children:_this226.children}),Yf(_assertThisInitialized(_this226));return _this226;}_createClass(ag,[{key:"getDecoratorSwitchesState",value:function getDecoratorSwitchesState(){return Array.from(this._manualDecoratorSwitches).reduce(function(t,e){return t[e.name]=e.isOn,t;},{});}},{key:"render",value:function render(){var _this227=this;_get(_getPrototypeOf(ag.prototype),"render",this).call(this),Gf({view:this});[this.urlInputView].concat(_toConsumableArray(this._manualDecoratorSwitches),[this.saveButtonView,this.cancelButtonView]).forEach(function(t){_this227._focusables.add(t),_this227.focusTracker.add(t.element);}),this.keystrokes.listenTo(this.element);}},{key:"focus",value:function focus(){this._focusCycler.focusFirst();}},{key:"_createUrlInput",value:function _createUrlInput(){var t=this.locale.t,e=new Wf(this.locale,$f);return e.label=t("Link URL"),e;}},{key:"_createButton",value:function _createButton(t,e,i,n){var o=new Xl(this.locale);return o.set({label:t,icon:e,tooltip:!0}),o.extendTemplate({attributes:{"class":i}}),n&&o.delegate("execute").to(this,n),o;}},{key:"_createManualDecoratorSwitches",value:function _createManualDecoratorSwitches(t){var _this228=this;var e=this.createCollection();var _iterator374=_createForOfIteratorHelper(t.manualDecorators),_step374;try{var _loop8=function _loop8(){var i=_step374.value;var n=new rd(_this228.locale);n.set({name:i.id,label:i.label,withText:!0}),n.bind("isOn").toMany([i,t],"value",function(t,e){return void 0===e&&void 0===t?i.defaultValue:t;}),n.on("execute",function(){i.set("value",!n.isOn);}),e.add(n);};for(_iterator374.s();!(_step374=_iterator374.n()).done;){_loop8();}}catch(err){_iterator374.e(err);}finally{_iterator374.f();}return e;}},{key:"_createFormChildren",value:function _createFormChildren(t){var e=this.createCollection();if(e.add(this.urlInputView),t.length){var _t286=new El();_t286.setTemplate({tag:"ul",children:this._manualDecoratorSwitches.map(function(t){return{tag:"li",children:[t],attributes:{"class":["ck","ck-list__item"]}};}),attributes:{"class":["ck","ck-reset","ck-list"]}}),e.add(_t286);}return e.add(this.saveButtonView),e.add(this.cancelButtonView),e;}}]);return ag;}(El);i(81);var cg=/*#__PURE__*/function(_El26){_inherits(cg,_El26);var _super156=_createSuper(cg);function cg(t){var _this229;_classCallCheck(this,cg);_this229=_super156.call(this,t);var e=t.t;_this229.focusTracker=new Jc(),_this229.keystrokes=new Wc(),_this229.previewButtonView=_this229._createPreviewButton(),_this229.unlinkButtonView=_this229._createButton(e("Unlink"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.077 15l.991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zm4.919 10.562l-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z"/></svg>',"unlink"),_this229.editButtonView=_this229._createButton(e("Edit link"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7.3 17.37l-.061.088a1.518 1.518 0 0 1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73 2.746-.435zM9.994 3.506L13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8 18.5L9.375 17H19v1.5H8z"/></svg>',"edit"),_this229.set("href"),_this229._focusables=new cl(),_this229._focusCycler=new jl({focusables:_this229._focusables,focusTracker:_this229.focusTracker,keystrokeHandler:_this229.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),_this229.setTemplate({tag:"div",attributes:{"class":["ck","ck-link-actions","ck-responsive-form"],tabindex:"-1"},children:[_this229.previewButtonView,_this229.editButtonView,_this229.unlinkButtonView]});return _this229;}_createClass(cg,[{key:"render",value:function render(){var _this230=this;_get(_getPrototypeOf(cg.prototype),"render",this).call(this);[this.previewButtonView,this.editButtonView,this.unlinkButtonView].forEach(function(t){_this230._focusables.add(t),_this230.focusTracker.add(t.element);}),this.keystrokes.listenTo(this.element);}},{key:"focus",value:function focus(){this._focusCycler.focusFirst();}},{key:"_createButton",value:function _createButton(t,e,i){var n=new Xl(this.locale);return n.set({label:t,icon:e,tooltip:!0}),n.delegate("execute").to(this,i),n;}},{key:"_createPreviewButton",value:function _createPreviewButton(){var t=new Xl(this.locale),e=this.bindTemplate,i=this.t;return t.set({withText:!0,tooltip:i("Open link in new tab")}),t.extendTemplate({attributes:{"class":["ck","ck-link-actions__preview"],href:e.to("href",function(t){return t&&hf(t);}),target:"_blank",rel:"noopener noreferrer"}}),t.bind("label").to(this,"href",function(t){return t||i("This link has no URL");}),t.bind("isEnabled").to(this,"href",function(t){return!!t;}),t.template.tag="a",t.template.eventListeners={},t;}}]);return cg;}(El);var lg=/*#__PURE__*/function(_pd52){_inherits(lg,_pd52);var _super157=_createSuper(lg);function lg(){_classCallCheck(this,lg);return _super157.apply(this,arguments);}_createClass(lg,[{key:"init",value:function init(){var t=this.editor;t.editing.view.addObserver(sg),this.actionsView=this._createActionsView(),this.formView=this._createFormView(),this._balloon=t.plugins.get(Xf),this._createToolbarLinkButton(),this._enableUserBalloonInteractions(),t.conversion["for"]("editingDowncast").markerToHighlight({model:"link-ui",view:{classes:["ck-fake-link-selection"]}}),t.conversion["for"]("editingDowncast").markerToElement({model:"link-ui",view:{name:"span",classes:["ck-fake-link-selection","ck-fake-link-selection_collapsed"]}});}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(lg.prototype),"destroy",this).call(this),this.formView.destroy();}},{key:"_createActionsView",value:function _createActionsView(){var _this231=this;var t=this.editor,e=new cg(t.locale),i=t.commands.get("link"),n=t.commands.get("unlink");return e.bind("href").to(i,"value"),e.editButtonView.bind("isEnabled").to(i),e.unlinkButtonView.bind("isEnabled").to(n),this.listenTo(e,"edit",function(){_this231._addFormView();}),this.listenTo(e,"unlink",function(){t.execute("unlink"),_this231._hideUI();}),e.keystrokes.set("Esc",function(t,e){_this231._hideUI(),e();}),e.keystrokes.set("Ctrl+K",function(t,e){_this231._addFormView(),e();}),e;}},{key:"_createFormView",value:function _createFormView(){var _this232=this;var t=this.editor,e=t.commands.get("link"),i=t.config.get("link.defaultProtocol"),n=new ag(t.locale,e);return n.urlInputView.fieldView.bind("value").to(e,"value"),n.urlInputView.bind("isReadOnly").to(e,"isEnabled",function(t){return!t;}),n.saveButtonView.bind("isEnabled").to(e),this.listenTo(n,"submit",function(){var e=n.urlInputView.fieldView.element.value,o=mf(e,i);t.execute("link",o,n.getDecoratorSwitchesState()),_this232._closeFormView();}),this.listenTo(n,"cancel",function(){_this232._closeFormView();}),n.keystrokes.set("Esc",function(t,e){_this232._closeFormView(),e();}),n;}},{key:"_createToolbarLinkButton",value:function _createToolbarLinkButton(){var _this233=this;var t=this.editor,e=t.commands.get("link"),i=t.t;t.keystrokes.set("Ctrl+K",function(t,i){i(),e.isEnabled&&_this233._showUI(!0);}),t.ui.componentFactory.add("link",function(t){var n=new Xl(t);return n.isEnabled=!0,n.label=i("Link"),n.icon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.077 15l.991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z"/></svg>',n.keystroke="Ctrl+K",n.tooltip=!0,n.isToggleable=!0,n.bind("isEnabled").to(e,"isEnabled"),n.bind("isOn").to(e,"value",function(t){return!!t;}),_this233.listenTo(n,"execute",function(){return _this233._showUI(!0);}),n;});}},{key:"_enableUserBalloonInteractions",value:function _enableUserBalloonInteractions(){var _this234=this;var t=this.editor.editing.view.document;this.listenTo(t,"click",function(){_this234._getSelectedLinkElement()&&_this234._showUI();}),this.editor.keystrokes.set("Tab",function(t,e){_this234._areActionsVisible&&!_this234.actionsView.focusTracker.isFocused&&(_this234.actionsView.focus(),e());},{priority:"high"}),this.editor.keystrokes.set("Esc",function(t,e){_this234._isUIVisible&&(_this234._hideUI(),e());}),sd({emitter:this.formView,activator:function activator(){return _this234._isUIInPanel;},contextElements:[this._balloon.view.element],callback:function callback(){return _this234._hideUI();}});}},{key:"_addActionsView",value:function _addActionsView(){this._areActionsInPanel||this._balloon.add({view:this.actionsView,position:this._getBalloonPositionData()});}},{key:"_addFormView",value:function _addFormView(){if(this._isFormInPanel)return;var t=this.editor.commands.get("link");this.formView.disableCssTransitions(),this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this._balloon.visibleView===this.formView&&this.formView.urlInputView.fieldView.select(),this.formView.enableCssTransitions(),this.formView.urlInputView.fieldView.element.value=t.value||"";}},{key:"_closeFormView",value:function _closeFormView(){var t=this.editor.commands.get("link");t.restoreManualDecoratorStates(),void 0!==t.value?this._removeFormView():this._hideUI();}},{key:"_removeFormView",value:function _removeFormView(){this._isFormInPanel&&(this.formView.saveButtonView.focus(),this._balloon.remove(this.formView),this.editor.editing.view.focus(),this._hideFakeVisualSelection());}},{key:"_showUI",value:function _showUI(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:!1;this._getSelectedLinkElement()?(this._areActionsVisible?this._addFormView():this._addActionsView(),t&&this._balloon.showStack("main")):(this._showFakeVisualSelection(),this._addActionsView(),t&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI();}},{key:"_hideUI",value:function _hideUI(){if(!this._isUIInPanel)return;var t=this.editor;this.stopListening(t.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),t.editing.view.focus(),this._removeFormView(),this._balloon.remove(this.actionsView),this._hideFakeVisualSelection();}},{key:"_startUpdatingUI",value:function _startUpdatingUI(){var _this235=this;var t=this.editor,e=t.editing.view.document;var i=this._getSelectedLinkElement(),n=r();var o=function o(){var t=_this235._getSelectedLinkElement(),e=r();i&&!t||!i&&e!==n?_this235._hideUI():_this235._isUIVisible&&_this235._balloon.updatePosition(_this235._getBalloonPositionData()),i=t,n=e;};function r(){return e.selection.focus.getAncestors().reverse().find(function(t){return t.is("element");});}this.listenTo(t.ui,"update",o),this.listenTo(this._balloon,"change:visibleView",o);}},{key:"_isFormInPanel",get:function get(){return this._balloon.hasView(this.formView);}},{key:"_areActionsInPanel",get:function get(){return this._balloon.hasView(this.actionsView);}},{key:"_areActionsVisible",get:function get(){return this._balloon.visibleView===this.actionsView;}},{key:"_isUIInPanel",get:function get(){return this._isFormInPanel||this._areActionsInPanel;}},{key:"_isUIVisible",get:function get(){return this._balloon.visibleView==this.formView||this._areActionsVisible;}},{key:"_getBalloonPositionData",value:function _getBalloonPositionData(){var t=this.editor.editing.view,e=this.editor.model,i=t.document;var n=null;if(e.markers.has("link-ui")){var _e261=Array.from(this.editor.editing.mapper.markerNameToElements("link-ui")),_i272=t.createRange(t.createPositionBefore(_e261[0]),t.createPositionAfter(_e261[_e261.length-1]));n=t.domConverter.viewRangeToDom(_i272);}else{var _e262=this._getSelectedLinkElement(),_o100=i.selection.getFirstRange();n=_e262?t.domConverter.mapViewToDom(_e262):t.domConverter.viewRangeToDom(_o100);}return{target:n};}},{key:"_getSelectedLinkElement",value:function _getSelectedLinkElement(){var t=this.editor.editing.view,e=t.document.selection;if(e.isCollapsed)return dg(e.getFirstPosition());{var _i273=e.getFirstRange().getTrimmed(),_n161=dg(_i273.start),_o101=dg(_i273.end);return _n161&&_n161==_o101&&t.createRangeIn(_n161).getTrimmed().isEqual(_i273)?_n161:null;}}},{key:"_showFakeVisualSelection",value:function _showFakeVisualSelection(){var t=this.editor.model;t.change(function(e){var i=t.document.selection.getFirstRange();if(t.markers.has("link-ui"))e.updateMarker("link-ui",{range:i});else if(i.start.isAtEnd){var _n162=i.start.getLastMatchingPosition(function(_ref54){var e=_ref54.item;return!t.schema.isContent(e);},{boundaries:i});e.addMarker("link-ui",{usingOperation:!1,affectsData:!1,range:e.createRange(_n162,i.end)});}else e.addMarker("link-ui",{usingOperation:!1,affectsData:!1,range:i});});}},{key:"_hideFakeVisualSelection",value:function _hideFakeVisualSelection(){var t=this.editor.model;t.markers.has("link-ui")&&t.change(function(t){t.removeMarker("link-ui");});}}],[{key:"requires",get:function get(){return[Xf];}},{key:"pluginName",get:function get(){return"LinkUI";}}]);return lg;}(pd);function dg(t){return t.getAncestors().find(function(t){return(e=t).is("attributeElement")&&!!e.getCustomProperty("link");var e;});}function ug(t,e){var i=t.start;return{text:Array.from(t.getItems()).reduce(function(t,n){return n.is("$text")||n.is("$textProxy")?t+n.data:(i=e.createPositionAfter(n),"");},""),range:e.createRange(i,t.end)};}var hg=/*#__PURE__*/function(){function hg(t,e){var _this236=this;_classCallCheck(this,hg);this.model=t,this.testCallback=e,this.hasMatch=!1,this.set("isEnabled",!0),this.on("change:isEnabled",function(){_this236.isEnabled?_this236._startListening():(_this236.stopListening(t.document.selection),_this236.stopListening(t.document));}),this._startListening();}_createClass(hg,[{key:"_startListening",value:function _startListening(){var _this237=this;var t=this.model.document;this.listenTo(t.selection,"change:range",function(e,_ref55){var i=_ref55.directChange;i&&(t.selection.isCollapsed?_this237._evaluateTextBeforeSelection("selection"):_this237.hasMatch&&(_this237.fire("unmatched"),_this237.hasMatch=!1));}),this.listenTo(t,"change:data",function(t,e){"transparent"!=e.type&&_this237._evaluateTextBeforeSelection("data",{batch:e});});}},{key:"_evaluateTextBeforeSelection",value:function _evaluateTextBeforeSelection(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=this.model,n=i.document.selection,o=i.createRange(i.createPositionAt(n.focus.parent,0),n.focus),_ug=ug(o,i),r=_ug.text,s=_ug.range,a=this.testCallback(r);if(!a&&this.hasMatch&&this.fire("unmatched"),this.hasMatch=!!a,a){var _i274=Object.assign(e,{text:r,range:s});"object"==_typeof(a)&&Object.assign(_i274,a),this.fire("matched:"+t,_i274);}}}]);return hg;}();yi(hg,Un);var fg=new RegExp("(^|\\s)(((?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?![-_])(?:[-\\w\\u00a1-\\uffff]{0,63}[^-_]\\.)+(?:[a-z\\u00a1-\\uffff]{2,}))(?::\\d{2,5})?(?:[/?#]\\S*)?)|((www.|(\\S+@))((?![-_])(?:[-\\w\\u00a1-\\uffff]{0,63}[^-_]\\.))+(?:[a-z\\u00a1-\\uffff]{2,})))$","i");var mg=/*#__PURE__*/function(_pd53){_inherits(mg,_pd53);var _super158=_createSuper(mg);function mg(){_classCallCheck(this,mg);return _super158.apply(this,arguments);}_createClass(mg,[{key:"init",value:function init(){var _this238=this;var t=this.editor.model.document.selection;t.on("change:range",function(){_this238.isEnabled=!t.anchor.parent.is("element","codeBlock");}),this._enableTypingHandling();}},{key:"afterInit",value:function afterInit(){this._enableEnterHandling(),this._enableShiftEnterHandling();}},{key:"_enableTypingHandling",value:function _enableTypingHandling(){var _this239=this;var t=this.editor,e=new hg(t.model,function(t){if(!function(t){return t.length>4&&" "===t[t.length-1]&&" "!==t[t.length-2];}(t))return;var e=gg(t.substr(0,t.length-1));return e?{url:e}:void 0;}),i=t.plugins.get("Input");e.on("matched:data",function(e,n){var o=n.batch,r=n.range,s=n.url;if(!i.isInput(o))return;var a=r.end.getShiftedBy(-1),c=a.getShiftedBy(-s.length),l=t.model.createRange(c,a);_this239._applyAutoLink(s,l);}),e.bind("isEnabled").to(this);}},{key:"_enableEnterHandling",value:function _enableEnterHandling(){var _this240=this;var t=this.editor,e=t.model,i=t.commands.get("enter");i&&i.on("execute",function(){var t=e.document.selection.getFirstPosition();if(!t.parent.previousSibling)return;var i=e.createRangeIn(t.parent.previousSibling);_this240._checkAndApplyAutoLinkOnRange(i);});}},{key:"_enableShiftEnterHandling",value:function _enableShiftEnterHandling(){var _this241=this;var t=this.editor,e=t.model,i=t.commands.get("shiftEnter");i&&i.on("execute",function(){var t=e.document.selection.getFirstPosition(),i=e.createRange(e.createPositionAt(t.parent,0),t.getShiftedBy(-1));_this241._checkAndApplyAutoLinkOnRange(i);});}},{key:"_checkAndApplyAutoLinkOnRange",value:function _checkAndApplyAutoLinkOnRange(t){var e=this.editor.model,_ug2=ug(t,e),i=_ug2.text,n=_ug2.range,o=gg(i);if(o){var _t287=e.createRange(n.end.getShiftedBy(-o.length),n.end);this._applyAutoLink(o,_t287);}}},{key:"_applyAutoLink",value:function _applyAutoLink(t,e){var _this242=this;var i=this.editor.model;this.isEnabled&&function(t,e){return e.schema.checkAttributeInSelection(e.createSelection(t),"linkHref");}(e,i)&&i.enqueueChange(function(i){var n=_this242.editor.config.get("link.defaultProtocol"),o=mf(t,n);i.setAttribute("linkHref",o,e);});}}],[{key:"pluginName",get:function get(){return"AutoLink";}}]);return mg;}(pd);function gg(t){var e=fg.exec(t);return e?e[2]:null;}function pg(t,e){return function(t){t.on("attribute:url:media",i);};function i(i,n,o){if(!o.consumable.consume(n.item,i.name))return;var r=n.attributeNewValue,s=o.writer,a=o.mapper.toViewElement(n.item),c=_toConsumableArray(a.getChildren()).find(function(t){return t.getCustomProperty("media-content");});s.remove(c);var l=t.getMediaViewElement(s,r,e);s.insert(s.createPositionAt(a,0),l);}}function bg(t,e,i,n){var o=t.createContainerElement("figure",{"class":"media"});return t.insert(t.createPositionAt(o,0),e.getMediaViewElement(t,i,n)),o;}function wg(t){var e=t.getSelectedElement();return e&&e.is("element","media")?e:null;}function kg(t,e,i){t.change(function(n){var o=n.createElement("media",{url:e});t.insertContent(o,i),n.setSelection(o,"on");});}var _g=/*#__PURE__*/function(_wd21){_inherits(_g,_wd21);var _super159=_createSuper(_g);function _g(){_classCallCheck(this,_g);return _super159.apply(this,arguments);}_createClass(_g,[{key:"refresh",value:function refresh(){var t=this.editor.model,e=t.document.selection,i=t.schema,n=vh(e,t),o=wg(e);var r=n.parent;r.isEmpty&&!t.schema.isLimit(r)&&(r=r.parent),this.value=o?o.getAttribute("url"):null,this.isEnabled=i.checkChild(r,"media");}},{key:"execute",value:function execute(t){var e=this.editor.model,i=e.document.selection,n=wg(i);if(n)e.change(function(e){e.setAttribute("url",t,n);});else{var _n163=vh(i,e);kg(e,t,_n163);}}}]);return _g;}(wd);var vg=/*#__PURE__*/function(){function vg(t,e){_classCallCheck(this,vg);var i=e.providers,n=e.extraProviders||[],o=new Set(e.removeProviders),r=i.concat(n).filter(function(t){var e=t.name;return e?!o.has(e):(Object(ui.c)("media-embed-no-provider-name",{provider:t}),!1);});this.locale=t,this.providerDefinitions=r;}_createClass(vg,[{key:"hasMedia",value:function hasMedia(t){return!!this._getMedia(t);}},{key:"getMediaViewElement",value:function getMediaViewElement(t,e,i){return this._getMedia(e).getViewElement(t,i);}},{key:"_getMedia",value:function _getMedia(t){if(!t)return new yg(this.locale);t=t.trim();var _iterator375=_createForOfIteratorHelper(this.providerDefinitions),_step375;try{for(_iterator375.s();!(_step375=_iterator375.n()).done;){var _e263=_step375.value;var _i275=_e263.html,_n164=Ti(_e263.url);var _iterator376=_createForOfIteratorHelper(_n164),_step376;try{for(_iterator376.s();!(_step376=_iterator376.n()).done;){var _e264=_step376.value;var _n165=this._getUrlMatches(t,_e264);if(_n165)return new yg(this.locale,t,_n165,_i275);}}catch(err){_iterator376.e(err);}finally{_iterator376.f();}}}catch(err){_iterator375.e(err);}finally{_iterator375.f();}return null;}},{key:"_getUrlMatches",value:function _getUrlMatches(t,e){var i=t.match(e);if(i)return i;var n=t.replace(/^https?:\/\//,"");return i=n.match(e),i||(n=n.replace(/^www\./,""),i=n.match(e),i||null);}}]);return vg;}();var yg=/*#__PURE__*/function(){function yg(t,e,i,n){_classCallCheck(this,yg);this.url=this._getValidUrl(e),this._t=t.t,this._match=i,this._previewRenderer=n;}_createClass(yg,[{key:"getViewElement",value:function getViewElement(t,e){var i={};var n;if(e.renderForEditingView||e.renderMediaPreview&&this.url&&this._previewRenderer){this.url&&(i["data-oembed-url"]=this.url),e.renderForEditingView&&(i["class"]="ck-media__wrapper");var _o102=this._getPreviewHtml(e);n=t.createRawElement("div",i,function(t){t.innerHTML=_o102;});}else this.url&&(i.url=this.url),n=t.createEmptyElement("oembed",i);return t.setCustomProperty("media-content",!0,n),n;}},{key:"_getPreviewHtml",value:function _getPreviewHtml(t){return this._previewRenderer?this._previewRenderer(this._match):this.url&&t.renderForEditingView?this._getPlaceholderHtml():"";}},{key:"_getPlaceholderHtml",value:function _getPlaceholderHtml(){var t=new Zl(),e=new Jl();t.text=this._t("Open media in new tab"),e.content='<svg viewBox="0 0 64 42" xmlns="http://www.w3.org/2000/svg"><path d="M47.426 17V3.713L63.102 0v19.389h-.001l.001.272c0 1.595-2.032 3.43-4.538 4.098-2.506.668-4.538-.083-4.538-1.678 0-1.594 2.032-3.43 4.538-4.098.914-.244 2.032-.565 2.888-.603V4.516L49.076 7.447v9.556A1.014 1.014 0 0 0 49 17h-1.574zM29.5 17h-8.343a7.073 7.073 0 1 0-4.657 4.06v3.781H3.3a2.803 2.803 0 0 1-2.8-2.804V8.63a2.803 2.803 0 0 1 2.8-2.805h4.082L8.58 2.768A1.994 1.994 0 0 1 10.435 1.5h8.985c.773 0 1.477.448 1.805 1.149l1.488 3.177H26.7c1.546 0 2.8 1.256 2.8 2.805V17zm-11.637 0H17.5a1 1 0 0 0-1 1v.05A4.244 4.244 0 1 1 17.863 17zm29.684 2c.97 0 .953-.048.953.889v20.743c0 .953.016.905-.953.905H19.453c-.97 0-.953.048-.953-.905V19.89c0-.937-.016-.889.97-.889h28.077zm-4.701 19.338V22.183H24.154v16.155h18.692zM20.6 21.375v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616V37.53H20.6zm24.233-16.155v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615V37.53h-1.615zM29.485 25.283a.4.4 0 0 1 .593-.35l9.05 4.977a.4.4 0 0 1 0 .701l-9.05 4.978a.4.4 0 0 1-.593-.35v-9.956z"/></svg>',e.viewBox="0 0 64 42";return new ll({tag:"div",attributes:{"class":"ck ck-reset_all ck-media__placeholder"},children:[{tag:"div",attributes:{"class":"ck-media__placeholder__icon"},children:[e]},{tag:"a",attributes:{"class":"ck-media__placeholder__url",target:"_blank",rel:"noopener noreferrer",href:this.url},children:[{tag:"span",attributes:{"class":"ck-media__placeholder__url__text"},children:[this.url]},t]}]}).render().outerHTML;}},{key:"_getValidUrl",value:function _getValidUrl(t){return t?t.match(/^https?/)?t:"https://"+t:null;}}]);return yg;}();i(83);var xg=/*#__PURE__*/function(_pd54){_inherits(xg,_pd54);var _super160=_createSuper(xg);function xg(t){var _this243;_classCallCheck(this,xg);_this243=_super160.call(this,t),t.config.define("mediaEmbed",{providers:[{name:"dailymotion",url:/^dailymotion\.com\/video\/(\w+)/,html:function html(t){return"<div style=\"position: relative; padding-bottom: 100%; height: 0; \"><iframe src=\"https://www.dailymotion.com/embed/video/".concat(t[1],"\" style=\"position: absolute; width: 100%; height: 100%; top: 0; left: 0;\" frameborder=\"0\" width=\"480\" height=\"270\" allowfullscreen allow=\"autoplay\"></iframe></div>");}},{name:"spotify",url:[/^open\.spotify\.com\/(artist\/\w+)/,/^open\.spotify\.com\/(album\/\w+)/,/^open\.spotify\.com\/(track\/\w+)/],html:function html(t){return"<div style=\"position: relative; padding-bottom: 100%; height: 0; padding-bottom: 126%;\"><iframe src=\"https://open.spotify.com/embed/".concat(t[1],"\" style=\"position: absolute; width: 100%; height: 100%; top: 0; left: 0;\" frameborder=\"0\" allowtransparency=\"true\" allow=\"encrypted-media\"></iframe></div>");}},{name:"youtube",url:[/^(?:m\.)?youtube\.com\/watch\?v=([\w-]+)/,/^(?:m\.)?youtube\.com\/v\/([\w-]+)/,/^youtube\.com\/embed\/([\w-]+)/,/^youtu\.be\/([\w-]+)/],html:function html(t){return"<div style=\"position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;\"><iframe src=\"https://www.youtube.com/embed/".concat(t[1],"\" style=\"position: absolute; width: 100%; height: 100%; top: 0; left: 0;\" frameborder=\"0\" allow=\"autoplay; encrypted-media\" allowfullscreen></iframe></div>");}},{name:"vimeo",url:[/^vimeo\.com\/(\d+)/,/^vimeo\.com\/[^/]+\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/album\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/channels\/[^/]+\/(\d+)/,/^vimeo\.com\/groups\/[^/]+\/videos\/(\d+)/,/^vimeo\.com\/ondemand\/[^/]+\/(\d+)/,/^player\.vimeo\.com\/video\/(\d+)/],html:function html(t){return"<div style=\"position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;\"><iframe src=\"https://player.vimeo.com/video/".concat(t[1],"\" style=\"position: absolute; width: 100%; height: 100%; top: 0; left: 0;\" frameborder=\"0\" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>");}},{name:"instagram",url:/^instagram\.com\/p\/(\w+)/},{name:"twitter",url:/^twitter\.com/},{name:"googleMaps",url:/^google\.com\/maps/},{name:"flickr",url:/^flickr\.com/},{name:"facebook",url:/^facebook\.com/}]}),_this243.registry=new vg(t.locale,t.config.get("mediaEmbed"));return _this243;}_createClass(xg,[{key:"init",value:function init(){var t=this.editor,e=t.model.schema,i=t.t,n=t.conversion,o=t.config.get("mediaEmbed.previewsInData"),r=this.registry;t.commands.add("mediaEmbed",new _g(t)),e.register("media",{isObject:!0,isBlock:!0,allowWhere:"$block",allowAttributes:["url"]}),n["for"]("dataDowncast").elementToElement({model:"media",view:function view(t,_ref56){var e=_ref56.writer;var i=t.getAttribute("url");return bg(e,r,i,{renderMediaPreview:i&&o});}}),n["for"]("dataDowncast").add(pg(r,{renderMediaPreview:o})),n["for"]("editingDowncast").elementToElement({model:"media",view:function view(t,_ref57){var e=_ref57.writer;var n=t.getAttribute("url");return function(t,e,i){return e.setCustomProperty("media",!0,t),bh(t,e,{label:i});}(bg(e,r,n,{renderForEditingView:!0}),e,i("media widget"));}}),n["for"]("editingDowncast").add(pg(r,{renderForEditingView:!0})),n["for"]("upcast").elementToElement({view:{name:"oembed",attributes:{url:!0}},model:function model(t,_ref58){var e=_ref58.writer;var i=t.getAttribute("url");if(r.hasMedia(i))return e.createElement("media",{url:i});}}).elementToElement({view:{name:"div",attributes:{"data-oembed-url":!0}},model:function model(t,_ref59){var e=_ref59.writer;var i=t.getAttribute("data-oembed-url");if(r.hasMedia(i))return e.createElement("media",{url:i});}});}}],[{key:"pluginName",get:function get(){return"MediaEmbedEditing";}}]);return xg;}(pd);var Ag=/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w.-]+)+[\w\-._~:/?#[\]@!$&'()*+,;=%]+$/;var Tg=/*#__PURE__*/function(_pd55){_inherits(Tg,_pd55);var _super161=_createSuper(Tg);function Tg(t){var _this244;_classCallCheck(this,Tg);_this244=_super161.call(this,t),_this244._timeoutId=null,_this244._positionToInsert=null;return _this244;}_createClass(Tg,[{key:"init",value:function init(){var _this245=this;var t=this.editor,e=t.model.document;this.listenTo(t.plugins.get(Rd),"inputTransformation",function(){var t=e.selection.getFirstRange(),i=Cc.fromPosition(t.start);i.stickiness="toPrevious";var n=Cc.fromPosition(t.end);n.stickiness="toNext",e.once("change:data",function(){_this245._embedMediaBetweenPositions(i,n),i.detach(),n.detach();},{priority:"high"});}),t.commands.get("undo").on("execute",function(){_this245._timeoutId&&(rr.window.clearTimeout(_this245._timeoutId),_this245._positionToInsert.detach(),_this245._timeoutId=null,_this245._positionToInsert=null);},{priority:"high"});}},{key:"_embedMediaBetweenPositions",value:function _embedMediaBetweenPositions(t,e){var _this246=this;var i=this.editor,n=i.plugins.get(xg).registry,o=new qs(t,e),r=o.getWalker({ignoreElementEnd:!0});var s="";var _iterator377=_createForOfIteratorHelper(r),_step377;try{for(_iterator377.s();!(_step377=_iterator377.n()).done;){var _t288=_step377.value;_t288.item.is("$textProxy")&&(s+=_t288.item.data);}}catch(err){_iterator377.e(err);}finally{_iterator377.f();}if(s=s.trim(),!s.match(Ag))return void o.detach();if(!n.hasMedia(s))return void o.detach();i.commands.get("mediaEmbed").isEnabled?(this._positionToInsert=Cc.fromPosition(t),this._timeoutId=rr.window.setTimeout(function(){i.model.change(function(t){var e;_this246._timeoutId=null,t.remove(o),o.detach(),"$graveyard"!==_this246._positionToInsert.root.rootName&&(e=_this246._positionToInsert),kg(i.model,s,e),_this246._positionToInsert.detach(),_this246._positionToInsert=null;});},100)):o.detach();}}],[{key:"requires",get:function get(){return[Rd,Mu];}},{key:"pluginName",get:function get(){return"AutoMediaEmbed";}}]);return Tg;}(pd);i(85);var Cg=/*#__PURE__*/function(_El27){_inherits(Cg,_El27);var _super162=_createSuper(Cg);function Cg(t,e){var _this247;_classCallCheck(this,Cg);_this247=_super162.call(this,e);var i=e.t;_this247.focusTracker=new Jc(),_this247.keystrokes=new Wc(),_this247.set("mediaURLInputValue",""),_this247.urlInputView=_this247._createUrlInput(),_this247.saveButtonView=_this247._createButton(i("Save"),Kf,"ck-button-save"),_this247.saveButtonView.type="submit",_this247.saveButtonView.bind("isEnabled").to(_assertThisInitialized(_this247),"mediaURLInputValue",function(t){return!!t;}),_this247.cancelButtonView=_this247._createButton(i("Cancel"),Qf,"ck-button-cancel","cancel"),_this247._focusables=new cl(),_this247._focusCycler=new jl({focusables:_this247._focusables,focusTracker:_this247.focusTracker,keystrokeHandler:_this247.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),_this247._validators=t,_this247.setTemplate({tag:"form",attributes:{"class":["ck","ck-media-form","ck-responsive-form"],tabindex:"-1"},children:[_this247.urlInputView,_this247.saveButtonView,_this247.cancelButtonView]}),Yf(_assertThisInitialized(_this247));return _this247;}_createClass(Cg,[{key:"render",value:function render(){var _this248=this;_get(_getPrototypeOf(Cg.prototype),"render",this).call(this),Gf({view:this});[this.urlInputView,this.saveButtonView,this.cancelButtonView].forEach(function(t){_this248._focusables.add(t),_this248.focusTracker.add(t.element);}),this.keystrokes.listenTo(this.element);var t=function t(_t289){return _t289.stopPropagation();};this.keystrokes.set("arrowright",t),this.keystrokes.set("arrowleft",t),this.keystrokes.set("arrowup",t),this.keystrokes.set("arrowdown",t),this.listenTo(this.urlInputView.element,"selectstart",function(t,e){e.stopPropagation();},{priority:"high"});}},{key:"focus",value:function focus(){this._focusCycler.focusFirst();}},{key:"url",get:function get(){return this.urlInputView.fieldView.element.value.trim();},set:function set(t){this.urlInputView.fieldView.element.value=t.trim();}},{key:"isValid",value:function isValid(){this.resetFormStatus();var _iterator378=_createForOfIteratorHelper(this._validators),_step378;try{for(_iterator378.s();!(_step378=_iterator378.n()).done;){var _t290=_step378.value;var _e265=_t290(this);if(_e265)return this.urlInputView.errorText=_e265,!1;}}catch(err){_iterator378.e(err);}finally{_iterator378.f();}return!0;}},{key:"resetFormStatus",value:function resetFormStatus(){this.urlInputView.errorText=null,this.urlInputView.infoText=this._urlInputViewInfoDefault;}},{key:"_createUrlInput",value:function _createUrlInput(){var _this249=this;var t=this.locale.t,e=new Wf(this.locale,$f),i=e.fieldView;return this._urlInputViewInfoDefault=t("Paste the media URL in the input."),this._urlInputViewInfoTip=t("Tip: Paste the URL into the content to embed faster."),e.label=t("Media URL"),e.infoText=this._urlInputViewInfoDefault,i.on("input",function(){e.infoText=i.element.value?_this249._urlInputViewInfoTip:_this249._urlInputViewInfoDefault,_this249.mediaURLInputValue=i.element.value.trim();}),e;}},{key:"_createButton",value:function _createButton(t,e,i,n){var o=new Xl(this.locale);return o.set({label:t,icon:e,tooltip:!0}),o.extendTemplate({attributes:{"class":i}}),n&&o.delegate("execute").to(this,n),o;}}]);return Cg;}(El);var Sg=/*#__PURE__*/function(_pd56){_inherits(Sg,_pd56);var _super163=_createSuper(Sg);function Sg(){_classCallCheck(this,Sg);return _super163.apply(this,arguments);}_createClass(Sg,[{key:"init",value:function init(){var _this250=this;var t=this.editor,e=t.commands.get("mediaEmbed"),i=t.plugins.get(xg).registry;t.ui.componentFactory.add("mediaEmbed",function(n){var o=ad(n),r=new Cg(function(t,e){return[function(e){if(!e.url.length)return t("The URL must not be empty.");},function(i){if(!e.hasMedia(i.url))return t("This media URL is not supported.");}];}(t.t,i),t.locale);return _this250._setUpDropdown(o,r,e,t),_this250._setUpForm(o,r,e),o;});}},{key:"_setUpDropdown",value:function _setUpDropdown(t,e,i){var n=this.editor,o=n.t,r=t.buttonView;function s(){n.editing.view.focus(),t.isOpen=!1;}t.bind("isEnabled").to(i),t.panelView.children.add(e),r.set({label:o("Insert media"),icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M18.68 3.03c.6 0 .59-.03.59.55v12.84c0 .59.01.56-.59.56H1.29c-.6 0-.59.03-.59-.56V3.58c0-.58-.01-.55.6-.55h17.38zM15.77 15V5H4.2v10h11.57zM2 4v1h1V4H2zm0 2v1h1V6H2zm0 2v1h1V8H2zm0 2v1h1v-1H2zm0 2v1h1v-1H2zm0 2v1h1v-1H2zM17 4v1h1V4h-1zm0 2v1h1V6h-1zm0 2v1h1V8h-1zm0 2v1h1v-1h-1zm0 2v1h1v-1h-1zm0 2v1h1v-1h-1zM7.5 7.177a.4.4 0 0 1 .593-.351l5.133 2.824a.4.4 0 0 1 0 .7l-5.133 2.824a.4.4 0 0 1-.593-.35V7.176v.001z"/></svg>',tooltip:!0}),r.on("open",function(){e.disableCssTransitions(),e.url=i.value||"",e.urlInputView.fieldView.select(),e.focus(),e.enableCssTransitions();},{priority:"low"}),t.on("submit",function(){e.isValid()&&(n.execute("mediaEmbed",e.url),s());}),t.on("change:isOpen",function(){return e.resetFormStatus();}),t.on("cancel",function(){return s();});}},{key:"_setUpForm",value:function _setUpForm(t,e,i){e.delegate("submit","cancel").to(t),e.urlInputView.bind("value").to(i,"value"),e.urlInputView.bind("isReadOnly").to(i,"isEnabled",function(t){return!t;});}}],[{key:"requires",get:function get(){return[xg];}},{key:"pluginName",get:function get(){return"MediaEmbedUI";}}]);return Sg;}(pd);i(87);function Eg(t,e){if(!t.childCount)return;var i=new wm(t.document),n=function(t,e){var i=e.createRangeIn(t),n=new zi({name:/^p|h\d+$/,styles:{"mso-list":/.*/}}),o=[];var _iterator379=_createForOfIteratorHelper(i),_step379;try{for(_iterator379.s();!(_step379=_iterator379.n()).done;){var _t291=_step379.value;if("elementStart"===_t291.type&&n.match(_t291.item)){var _e266=Ig(_t291.item);o.push({element:_t291.item,id:_e266.id,order:_e266.order,indent:_e266.indent});}}}catch(err){_iterator379.e(err);}finally{_iterator379.f();}return o;}(t,i);if(!n.length)return;var o=null,r=1;n.forEach(function(t,s){var a=function(t,e){if(!t)return!0;if(t.id!==e.id)return e.indent-t.indent!=1;var i=e.element.previousSibling;if(!i)return!0;return n=i,!(n.is("element","ol")||n.is("element","ul"));var n;}(n[s-1],t),c=a?null:n[s-1],l=(u=t,(d=c)?u.indent-d.indent:u.indent-1);var d,u;if(a&&(o=null,r=1),!o||0!==l){var _n166=function(t,e){var i=new RegExp("@list l".concat(t.id,":level").concat(t.indent,"\\s*({[^}]*)"),"gi"),n=/mso-level-number-format:([^;]*);/gi,o=i.exec(e);var r="decimal",s="ol";if(o&&o[1]){var _e267=n.exec(o[1]);if(_e267&&_e267[1]&&(r=_e267[1].trim(),s="bullet"!==r&&"image"!==r?"ol":"ul"),"bullet"===r){var _e268=function(t){var e=function(t){if(t.getChild(0).is("$text"))return null;var e=t.getChild(0).getChild(0);if(e.is("$text"))return e;return e.getChild(0);}(t);if(!e)return null;var i=e._data;if("o"===i)return"circle";if("·"===i)return"disc";if("§"===i)return"square";return null;}(t.element);_e268&&(r=_e268);}}return{type:s,style:Pg(r)};}(t,e);if(o){if(t.indent>r){var _t292=o.getChild(o.childCount-1),_e269=_t292.getChild(_t292.childCount-1);o=Mg(_n166,_e269,i),r+=1;}else if(t.indent<r){var _e270=r-t.indent;o=function(t,e){var i=t.getAncestors({parentFirst:!0});var n=null,o=0;var _iterator380=_createForOfIteratorHelper(i),_step380;try{for(_iterator380.s();!(_step380=_iterator380.n()).done;){var _t293=_step380.value;if("ul"!==_t293.name&&"ol"!==_t293.name||o++,o===e){n=_t293;break;}}}catch(err){_iterator380.e(err);}finally{_iterator380.f();}return n;}(o,_e270),r=parseInt(t.indent);}}else o=Mg(_n166,t.element,i);t.indent<=r&&(o.is("element",_n166.type)||(o=i.rename(_n166.type,o)));}var h=function(t,e){return function(t,e){var i=new zi({name:"span",styles:{"mso-list":"Ignore"}}),n=e.createRangeIn(t);var _iterator381=_createForOfIteratorHelper(n),_step381;try{for(_iterator381.s();!(_step381=_iterator381.n()).done;){var _t294=_step381.value;"elementStart"===_t294.type&&i.match(_t294.item)&&e.remove(_t294.item);}}catch(err){_iterator381.e(err);}finally{_iterator381.f();}}(t,e),e.rename("li",t);}(t.element,i);i.appendChild(h,o);});}function Pg(t){switch(t){case"arabic-leading-zero":return"decimal-leading-zero";case"alpha-upper":return"upper-alpha";case"alpha-lower":return"lower-alpha";case"roman-upper":return"upper-roman";case"roman-lower":return"lower-roman";case"circle":case"disc":case"square":return t;default:return null;}}function Mg(t,e,i){var n=e.parent,o=i.createElement(t.type),r=n.getChildIndex(e)+1;return i.insertChild(r,o,n),t.style&&i.setStyle("list-style-type",t.style,o),o;}function Ig(t){var e={},i=t.getStyle("mso-list");if(i){var _t295=i.match(/(^|\s+)l(\d+)/i),_n167=i.match(/\s*lfo(\d+)/i),_o103=i.match(/\s*level(\d+)/i);_t295&&_n167&&_o103&&(e.id=_t295[2],e.order=_n167[1],e.indent=_o103[1]);}return e;}var Ng=/id=("|')docs-internal-guid-[-0-9a-f]+("|')/i;var Og=/*#__PURE__*/function(){function Og(t){_classCallCheck(this,Og);this.document=t;}_createClass(Og,[{key:"isActive",value:function isActive(t){return Ng.test(t);}},{key:"execute",value:function execute(t){var e=new wm(this.document);!function(t,e){var _iterator382=_createForOfIteratorHelper(t.getChildren()),_step382;try{for(_iterator382.s();!(_step382=_iterator382.n()).done;){var _i276=_step382.value;if(_i276.is("element","b")&&"normal"===_i276.getStyle("font-weight")){var _n168=t.getChildIndex(_i276);e.remove(_i276),e.insertChild(_n168,_i276.getChildren(),t);}}}catch(err){_iterator382.e(err);}finally{_iterator382.f();}}(t.content,e),function(t,e){var _iterator383=_createForOfIteratorHelper(e.createRangeIn(t)),_step383;try{for(_iterator383.s();!(_step383=_iterator383.n()).done;){var _i277=_step383.value;var _t296=_i277.item;if(_t296.is("element","li")){var _i278=_t296.getChild(0);_i278&&_i278.is("element","p")&&e.unwrapElement(_i278);}}}catch(err){_iterator383.e(err);}finally{_iterator383.f();}}(t.content,e);}}]);return Og;}();function Rg(t){return t.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,function(t,e){return 1===e.length?" ":Array(e.length+1).join("  ").substr(0,e.length);});}function Dg(t,e){var i=new DOMParser(),n=function(t){return Rg(Rg(t)).replace(/(<span\s+style=['"]mso-spacerun:yes['"]>[\s]*?)[\r\n]+(\s*<\/span>)/g,"$1$2").replace(/<span\s+style=['"]mso-spacerun:yes['"]><\/span>/g,"").replace(/ <\//g," </").replace(/ <o:p><\/o:p>/g," <o:p></o:p>").replace(/<o:p>(&nbsp;|\u00A0)<\/o:p>/g,"").replace(/>(\s*[\r\n]\s*)</g,"><");}(function(t){var e=t.match(/<\/body>(.*?)(<\/html>|$)/);e&&e[1]&&(t=t.slice(0,e.index)+t.slice(e.index).replace(e[1],""));return t;}(t=t.replace(/<!--\[if gte vml 1]>/g,""))),o=i.parseFromString(n,"text/html");!function(t){t.querySelectorAll("span[style*=spacerun]").forEach(function(t){var e=t.innerText.length||0;t.innerHTML=Array(e+1).join("  ").substr(0,e);});}(o);var r=o.body.innerHTML,s=function(t,e){var i=new ro(e),n=new lr(i,{blockFillerMode:"nbsp"}),o=t.createDocumentFragment(),r=t.body.childNodes;for(;r.length>0;){o.appendChild(r[0]);}return n.domToView(o);}(o,e),a=function(t){var e=[],i=[],n=Array.from(t.getElementsByTagName("style"));for(var _i279=0,_n169=n;_i279<_n169.length;_i279++){var _t297=_n169[_i279];_t297.sheet&&_t297.sheet.cssRules&&_t297.sheet.cssRules.length&&(e.push(_t297.sheet),i.push(_t297.innerHTML));}return{styles:e,stylesString:i.join(" ")};}(o);return{body:s,bodyString:r,styles:a.styles,stylesString:a.stylesString};}function Lg(t,e){if(!t.childCount)return;var i=new wm();!function(t,e,i){var n=i.createRangeIn(e),o=new zi({name:"img"}),r=[];var _iterator384=_createForOfIteratorHelper(n),_step384;try{for(_iterator384.s();!(_step384=_iterator384.n()).done;){var _e271=_step384.value;if(o.match(_e271.item)){var _i281=_e271.item,_n170=_i281.getAttribute("v:shapes")?_i281.getAttribute("v:shapes").split(" "):[];_n170.length&&_n170.every(function(e){return t.indexOf(e)>-1;})?r.push(_i281):_i281.getAttribute("src")||r.push(_i281);}}}catch(err){_iterator384.e(err);}finally{_iterator384.f();}for(var _i280=0,_r50=r;_i280<_r50.length;_i280++){var _t298=_r50[_i280];i.remove(_t298);}}(function(t,e){var i=e.createRangeIn(t),n=new zi({name:/v:(.+)/}),o=[];var _iterator385=_createForOfIteratorHelper(i),_step385;try{for(_iterator385.s();!(_step385=_iterator385.n()).done;){var _t299=_step385.value;var _e272=_t299.item,_i282=_e272.previousSibling&&_e272.previousSibling.name||null;n.match(_e272)&&_e272.getAttribute("o:gfxdata")&&"v:shapetype"!==_i282&&o.push(_t299.item.getAttribute("id"));}}catch(err){_iterator385.e(err);}finally{_iterator385.f();}return o;}(t,i),t,i),function(t,e){var i=e.createRangeIn(t),n=new zi({name:/v:(.+)/}),o=[];var _iterator386=_createForOfIteratorHelper(i),_step386;try{for(_iterator386.s();!(_step386=_iterator386.n()).done;){var _t301=_step386.value;n.match(_t301.item)&&o.push(_t301.item);}}catch(err){_iterator386.e(err);}finally{_iterator386.f();}for(var _i283=0,_o104=o;_i283<_o104.length;_i283++){var _t300=_o104[_i283];e.remove(_t300);}}(t,i);var n=function(t,e){var i=e.createRangeIn(t),n=new zi({name:"img"}),o=[];var _iterator387=_createForOfIteratorHelper(i),_step387;try{for(_iterator387.s();!(_step387=_iterator387.n()).done;){var _t302=_step387.value;n.match(_t302.item)&&_t302.item.getAttribute("src").startsWith("file://")&&o.push(_t302.item);}}catch(err){_iterator387.e(err);}finally{_iterator387.f();}return o;}(t,i);n.length&&function(t,e,i){if(t.length===e.length)for(var _o105=0;_o105<t.length;_o105++){var _r51="data:".concat(e[_o105].type,";base64,").concat((n=e[_o105].hex,btoa(n.match(/\w{2}/g).map(function(t){return String.fromCharCode(parseInt(t,16));}).join(""))));i.setAttribute("src",_r51,t[_o105]);}var n;}(n,function(t){if(!t)return[];var e=/{\\pict[\s\S]+?\\bliptag-?\d+(\\blipupi-?\d+)?({\\\*\\blipuid\s?[\da-fA-F]+)?[\s}]*?/,i=new RegExp("(?:("+e.source+"))([\\da-fA-F\\s]+)\\}","g"),n=t.match(i),o=[];if(n){var _iterator388=_createForOfIteratorHelper(n),_step388;try{for(_iterator388.s();!(_step388=_iterator388.n()).done;){var _t303=_step388.value;var _i284=!1;_t303.includes("\\pngblip")?_i284="image/png":_t303.includes("\\jpegblip")&&(_i284="image/jpeg"),_i284&&o.push({hex:_t303.replace(e,"").replace(/[^\da-fA-F]/g,""),type:_i284});}}catch(err){_iterator388.e(err);}finally{_iterator388.f();}}return o;}(e),i);}var zg=/<meta\s*name="?generator"?\s*content="?microsoft\s*word\s*\d+"?\/?>/i,Vg=/xmlns:o="urn:schemas-microsoft-com/i;var jg=/*#__PURE__*/function(){function jg(t){_classCallCheck(this,jg);this.document=t;}_createClass(jg,[{key:"isActive",value:function isActive(t){return zg.test(t)||Vg.test(t);}},{key:"execute",value:function execute(t){var _Dg=Dg(t.dataTransfer.getData("text/html"),this.document.stylesProcessor),e=_Dg.body,i=_Dg.stylesString;Eg(e,i),Lg(e,t.dataTransfer.getData("text/rtf")),t.content=e;}}]);return jg;}();function Bg(t,e,i,n){var o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:1;e>o?n.setAttribute(t,e,i):n.removeAttribute(t,i);}function Fg(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var n=t.createElement("tableCell",i);return t.insertElement("paragraph",n),t.insert(n,e),n;}function Hg(t,e){var i=e.parent.parent,n=parseInt(i.getAttribute("headingColumns")||0),_t$getCellLocation=t.getCellLocation(e),o=_t$getCellLocation.column;return!!n&&o<n;}function Ug(){return function(t){t.on("element:table",function(t,e,i){var n=e.viewItem;if(!i.consumable.test(n,{name:!0}))return;var _ref60=function(t){var e={headingRows:0,headingColumns:0},i=[],n=[];var o;for(var _i285=0,_Array$from7=Array.from(t.getChildren());_i285<_Array$from7.length;_i285++){var _r52=_Array$from7[_i285];if("tbody"===_r52.name||"thead"===_r52.name||"tfoot"===_r52.name){"thead"!==_r52.name||o||(o=_r52);var _t304=Array.from(_r52.getChildren()).filter(function(t){return t.is("element","tr");});var _iterator389=_createForOfIteratorHelper(_t304),_step389;try{for(_iterator389.s();!(_step389=_iterator389.n()).done;){var _r53=_step389.value;if("thead"===_r53.parent.name&&_r53.parent===o)e.headingRows++,i.push(_r53);else{n.push(_r53);var _t305=Wg(_r53);_t305>e.headingColumns&&(e.headingColumns=_t305);}}}catch(err){_iterator389.e(err);}finally{_iterator389.f();}}}return e.rows=[].concat(i,n),e;}(n),o=_ref60.rows,r=_ref60.headingRows,s=_ref60.headingColumns,a={};s&&(a.headingColumns=s),r&&(a.headingRows=r);var c=i.writer.createElement("table",a);if(i.safeInsert(c,e.modelCursor)){if(i.consumable.consume(n,{name:!0}),o.forEach(function(t){return i.convertItem(t,i.writer.createPositionAt(c,"end"));}),c.isEmpty){var _t306=i.writer.createElement("tableRow");i.writer.insert(_t306,i.writer.createPositionAt(c,"end")),Fg(i.writer,i.writer.createPositionAt(_t306,"end"));}i.updateConversionResult(c,e);}});};}function Wg(t){var e=0,i=0;var n=Array.from(t.getChildren()).filter(function(t){return"th"===t.name||"td"===t.name;});for(;i<n.length&&"th"===n[i].name;){var _t307=n[i];e+=parseInt(_t307.getAttribute("colspan")||1),i++;}return e;}var qg=/*#__PURE__*/function(){function qg(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,qg);this._table=t,this._startRow=void 0!==e.row?e.row:e.startRow||0,this._endRow=void 0!==e.row?e.row:e.endRow,this._startColumn=void 0!==e.column?e.column:e.startColumn||0,this._endColumn=void 0!==e.column?e.column:e.endColumn,this._includeAllSlots=!!e.includeAllSlots,this._skipRows=new Set(),this._row=0,this._column=0,this._cellIndex=0,this._spannedCells=new Map(),this._nextCellAtColumn=-1;}_createClass(qg,[{key:Symbol.iterator,value:function value(){return this;}},{key:"next",value:function next(){var t=this._table.getChild(this._row);if(!t||this._isOverEndRow())return{done:!0};if(this._isOverEndColumn())return this._advanceToNextRow();var e=null;var i=this._getSpanned();if(i)this._includeAllSlots&&!this._shouldSkipSlot()&&(e=this._formatOutValue(i.cell,i.row,i.column));else{var _i286=t.getChild(this._cellIndex);if(!_i286)return this._advanceToNextRow();var _n171=parseInt(_i286.getAttribute("colspan")||1),_o106=parseInt(_i286.getAttribute("rowspan")||1);(_n171>1||_o106>1)&&this._recordSpans(_i286,_o106,_n171),this._shouldSkipSlot()||(e=this._formatOutValue(_i286)),this._nextCellAtColumn=this._column+_n171;}return this._column++,this._column==this._nextCellAtColumn&&this._cellIndex++,e||this.next();}},{key:"skipRow",value:function skipRow(t){this._skipRows.add(t);}},{key:"_advanceToNextRow",value:function _advanceToNextRow(){return this._row++,this._column=0,this._cellIndex=0,this._nextCellAtColumn=-1,this.next();}},{key:"_isOverEndRow",value:function _isOverEndRow(){return void 0!==this._endRow&&this._row>this._endRow;}},{key:"_isOverEndColumn",value:function _isOverEndColumn(){return void 0!==this._endColumn&&this._column>this._endColumn;}},{key:"_formatOutValue",value:function _formatOutValue(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this._row;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this._column;return{done:!1,value:new $g(this,t,e,i)};}},{key:"_shouldSkipSlot",value:function _shouldSkipSlot(){var t=this._skipRows.has(this._row),e=this._row<this._startRow,i=this._column<this._startColumn,n=void 0!==this._endColumn&&this._column>this._endColumn;return t||e||i||n;}},{key:"_getSpanned",value:function _getSpanned(){var t=this._spannedCells.get(this._row);return t&&t.get(this._column)||null;}},{key:"_recordSpans",value:function _recordSpans(t,e,i){var n={cell:t,row:this._row,column:this._column};for(var _t308=this._row;_t308<this._row+e;_t308++){for(var _e273=this._column;_e273<this._column+i;_e273++){_t308==this._row&&_e273==this._column||this._markSpannedCell(_t308,_e273,n);}}}},{key:"_markSpannedCell",value:function _markSpannedCell(t,e,i){this._spannedCells.has(t)||this._spannedCells.set(t,new Map());this._spannedCells.get(t).set(e,i);}}]);return qg;}();var $g=/*#__PURE__*/function(){function $g(t,e,i,n){_classCallCheck(this,$g);this.cell=e,this.row=t._row,this.column=t._column,this.cellAnchorRow=i,this.cellAnchorColumn=n,this._cellIndex=t._cellIndex,this._table=t._table;}_createClass($g,[{key:"isAnchor",get:function get(){return this.row===this.cellAnchorRow&&this.column===this.cellAnchorColumn;}},{key:"cellWidth",get:function get(){return parseInt(this.cell.getAttribute("colspan")||1);}},{key:"cellHeight",get:function get(){return parseInt(this.cell.getAttribute("rowspan")||1);}},{key:"getPositionBefore",value:function getPositionBefore(){return this._table.root.document.model.createPositionAt(this._table.getChild(this.row),this._cellIndex);}}]);return $g;}();function Yg(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return function(e){return e.on("insert:table",function(e,i,n){var o=i.item;if(!n.consumable.consume(o,"insert"))return;n.consumable.consume(o,"attribute:headingRows:table"),n.consumable.consume(o,"attribute:headingColumns:table");var r=t&&t.asWidget,s=n.writer.createContainerElement("figure",{"class":"table"}),a=n.writer.createContainerElement("table");var c;var l,d;n.writer.insert(n.writer.createPositionAt(s,0),a),r&&(l=s,(d=n.writer).setCustomProperty("table",!0,l),c=bh(l,d,{hasSelectionHandle:!0}));var u=new qg(o),h={headingRows:o.getAttribute("headingRows")||0,headingColumns:o.getAttribute("headingColumns")||0},f=new Map();var _iterator390=_createForOfIteratorHelper(u),_step390;try{for(_iterator390.s();!(_step390=_iterator390.n()).done;){var _e274=_step390.value;var _i287=_e274.row,_r54=_e274.cell,_s34=o.getChild(_i287),_c11=f.get(_i287)||Zg(a,_s34,_i287,h,n);f.set(_i287,_c11),n.consumable.consume(_r54,"insert");Jg(_e274,h,n.writer.createPositionAt(_c11,"end"),n,t);}}catch(err){_iterator390.e(err);}finally{_iterator390.f();}var _iterator391=_createForOfIteratorHelper(o.getChildren()),_step391;try{for(_iterator391.s();!(_step391=_iterator391.n()).done;){var _t309=_step391.value;var _e275=_t309.index;f.has(_e275)||f.set(_e275,Zg(a,_t309,_e275,h,n));}}catch(err){_iterator391.e(err);}finally{_iterator391.f();}var m=n.mapper.toViewPosition(i.range.start);n.mapper.bindElements(o,r?c:s),n.writer.insert(m,r?c:s);});};}function Gg(t,e){var i=e.writer;if(t.parent.is("element","tableCell"))return Kg(t)?i.createContainerElement("span",{style:"display:inline-block"}):i.createContainerElement("p");}function Kg(t){return 1===t.parent.childCount&&!ip(t);}function Qg(t,e,i){var n=t.cell,o=Xg(t,e),r=i.mapper.toViewElement(n);r&&r.name!==o&&function(t,e,i){var n=i.writer,o=i.mapper.toViewElement(t),r=_h(n.createEditableElement(e,o.getAttributes()),n);wh(r,n,function(t,e,i){return i.addClass(Ti(e.classes),t);},function(t,e,i){return i.removeClass(Ti(e.classes),t);}),n.insert(n.createPositionAfter(o),r),n.move(n.createRangeIn(o),n.createPositionAt(r,0)),n.remove(n.createRangeOn(o)),i.mapper.unbindViewElement(o),i.mapper.bindElements(t,r);}(n,o,i);}function Jg(t,e,i,n,o){var r=o&&o.asWidget,s=Xg(t,e),a=r?_h(n.writer.createEditableElement(s),n.writer):n.writer.createContainerElement(s);r&&wh(a,n.writer,function(t,e,i){return i.addClass(Ti(e.classes),t);},function(t,e,i){return i.removeClass(Ti(e.classes),t);});var c=t.cell,l=c.getChild(0),d=1===c.childCount&&"paragraph"===l.name;if(n.writer.insert(i,a),n.mapper.bindElements(c,a),!r&&!ip(l)&&d){var _t310=c.getChild(0);n.consumable.consume(_t310,"insert"),n.mapper.bindElements(_t310,a);}}function Zg(t,e,i,n,o){o.consumable.consume(e,"insert");var r=e.isEmpty?o.writer.createEmptyElement("tr"):o.writer.createContainerElement("tr");o.mapper.bindElements(e,r);var s=n.headingRows,a=function(t,e,i){var n=tp(t,e);return n||function(t,e,i){var n=i.writer.createContainerElement(t),o=i.writer.createPositionAt(e,"tbody"==t?"end":0);return i.writer.insert(o,n),n;}(t,e,i);}(function(t,e){return t<e.headingRows?"thead":"tbody";}(i,n),t,o),c=s>0&&i>=s?i-s:i,l=o.writer.createPositionAt(a,c);return o.writer.insert(l,r),r;}function Xg(t,e){var i=t.row,n=t.column,o=e.headingColumns,r=e.headingRows;if(r&&r>i)return"th";return o&&o>n?"th":"td";}function tp(t,e){var _iterator392=_createForOfIteratorHelper(e.getChildren()),_step392;try{for(_iterator392.s();!(_step392=_iterator392.n()).done;){var _i288=_step392.value;if(_i288.name==t)return _i288;}}catch(err){_iterator392.e(err);}finally{_iterator392.f();}}function ep(t,e,i){var n=tp(t,e);n&&0===n.childCount&&i.writer.remove(i.writer.createRangeOn(n));}function ip(t){return!!_toConsumableArray(t.getAttributeKeys()).length;}var np=/*#__PURE__*/function(_wd22){_inherits(np,_wd22);var _super164=_createSuper(np);function np(){_classCallCheck(this,np);return _super164.apply(this,arguments);}_createClass(np,[{key:"refresh",value:function refresh(){var t=this.editor.model,e=t.document.selection,i=t.schema,n=function(t){var e=t.parent;return e===e.root?e:e.parent;}(e.getFirstPosition());this.isEnabled=i.checkChild(n,"table");}},{key:"execute",value:function execute(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=this.editor.model,i=e.document.selection,n=this.editor.plugins.get("TableUtils"),o=vh(i,e);e.change(function(i){var r=n.createTable(i,t);e.insertContent(r,o),i.setSelection(i.createPositionAt(r.getNodeByPath([0,0,0]),0));});}}]);return np;}(wd);function op(t){var e=[];var _iterator393=_createForOfIteratorHelper(dp(t.getRanges())),_step393;try{for(_iterator393.s();!(_step393=_iterator393.n()).done;){var _i289=_step393.value;var _t311=_i289.getContainedElement();_t311&&_t311.is("element","tableCell")&&e.push(_t311);}}catch(err){_iterator393.e(err);}finally{_iterator393.f();}return e;}function rp(t){var e=[];var _iterator394=_createForOfIteratorHelper(t.getRanges()),_step394;try{for(_iterator394.s();!(_step394=_iterator394.n()).done;){var _i290=_step394.value;var _t312=_i290.start.findAncestor("tableCell");_t312&&e.push(_t312);}}catch(err){_iterator394.e(err);}finally{_iterator394.f();}return e;}function sp(t){var e=op(t);return e.length?e:rp(t);}function ap(t){return up(t.map(function(t){return t.parent.index;}));}function cp(t){var e=t[0].findAncestor("table");return up(_toConsumableArray(new qg(e)).filter(function(e){return t.includes(e.cell);}).map(function(t){return t.column;}));}function lp(t,e){if(t.length<2||!function(t){var e=t[0].findAncestor("table"),i=ap(t),n=parseInt(e.getAttribute("headingRows")||0);if(!fp(i,n))return!1;var o=parseInt(e.getAttribute("headingColumns")||0);return fp(cp(t),o);}(t))return!1;var i=new Set(),n=new Set();var o=0;var _iterator395=_createForOfIteratorHelper(t),_step395;try{for(_iterator395.s();!(_step395=_iterator395.n()).done;){var _r55=_step395.value;var _e$getCellLocation=e.getCellLocation(_r55),_t313=_e$getCellLocation.row,_s35=_e$getCellLocation.column,_a21=parseInt(_r55.getAttribute("rowspan")||1),_c12=parseInt(_r55.getAttribute("colspan")||1);i.add(_t313),n.add(_s35),_a21>1&&i.add(_t313+_a21-1),_c12>1&&n.add(_s35+_c12-1),o+=_a21*_c12;}}catch(err){_iterator395.e(err);}finally{_iterator395.f();}return function(t,e){var i=Array.from(t.values()),n=Array.from(e.values()),o=Math.max.apply(Math,_toConsumableArray(i)),r=Math.min.apply(Math,_toConsumableArray(i)),s=Math.max.apply(Math,_toConsumableArray(n)),a=Math.min.apply(Math,_toConsumableArray(n));return(o-r+1)*(s-a+1);}(i,n)==o;}function dp(t){return Array.from(t).sort(hp);}function up(t){var e=t.sort(function(t,e){return t-e;});return{first:e[0],last:e[e.length-1]};}function hp(t,e){var i=t.start,n=e.start;return i.isBefore(n)?-1:1;}function fp(_ref61,i){var t=_ref61.first,e=_ref61.last;return t<i===e<i;}var mp=/*#__PURE__*/function(_wd23){_inherits(mp,_wd23);var _super165=_createSuper(mp);function mp(t){var _this251;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,mp);_this251=_super165.call(this,t),_this251.order=e.order||"below";return _this251;}_createClass(mp,[{key:"refresh",value:function refresh(){var t=this.editor.model.document.selection.getFirstPosition().findAncestor("table");this.isEnabled=!!t;}},{key:"execute",value:function execute(){var t=this.editor,e=t.model.document.selection,i=t.plugins.get("TableUtils"),n="above"===this.order,o=sp(e),r=ap(o),s=n?r.first:r.last,a=o[0].findAncestor("table");i.insertRows(a,{at:n?s:s+1,copyStructureFromAbove:!n});}}]);return mp;}(wd);var gp=/*#__PURE__*/function(_wd24){_inherits(gp,_wd24);var _super166=_createSuper(gp);function gp(t){var _this252;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,gp);_this252=_super166.call(this,t),_this252.order=e.order||"right";return _this252;}_createClass(gp,[{key:"refresh",value:function refresh(){var t=this.editor.model.document.selection.getFirstPosition().findAncestor("table");this.isEnabled=!!t;}},{key:"execute",value:function execute(){var t=this.editor,e=t.model.document.selection,i=t.plugins.get("TableUtils"),n="left"===this.order,o=sp(e),r=cp(o),s=n?r.first:r.last,a=o[0].findAncestor("table");i.insertColumns(a,{columns:1,at:n?s:s+1});}}]);return gp;}(wd);var pp=/*#__PURE__*/function(_wd25){_inherits(pp,_wd25);var _super167=_createSuper(pp);function pp(t){var _this253;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,pp);_this253=_super167.call(this,t),_this253.direction=e.direction||"horizontally";return _this253;}_createClass(pp,[{key:"refresh",value:function refresh(){var t=sp(this.editor.model.document.selection);this.isEnabled=1===t.length;}},{key:"execute",value:function execute(){var t=sp(this.editor.model.document.selection)[0],e="horizontally"===this.direction,i=this.editor.plugins.get("TableUtils");e?i.splitCellHorizontally(t,2):i.splitCellVertically(t,2);}}]);return pp;}(wd);function bp(t,e,i){var n=e.startRow,o=e.startColumn,r=e.endRow,s=e.endColumn,a=i.createElement("table"),c=r-n+1;for(var _t314=0;_t314<c;_t314++){i.insertElement("tableRow",a,"end");}var l=_toConsumableArray(new qg(t,{startRow:n,endRow:r,startColumn:o,endColumn:s,includeAllSlots:!0}));var _iterator396=_createForOfIteratorHelper(l),_step396;try{for(_iterator396.s();!(_step396=_iterator396.n()).done;){var _step396$value=_step396.value,_t315=_step396$value.row,_e276=_step396$value.column,_c13=_step396$value.cell,_d4=_step396$value.isAnchor,_u4=_step396$value.cellAnchorRow,_h3=_step396$value.cellAnchorColumn;var _l7=_t315-n,_f2=a.getChild(_l7);if(_d4){var _n172=i.cloneElement(_c13);i.append(_n172,_f2),yp(_n172,_t315,_e276,r,s,i);}else(_u4<n||_h3<o)&&Fg(i,i.createPositionAt(_f2,"end"));}}catch(err){_iterator396.e(err);}finally{_iterator396.f();}return function(t,e,i,n,o){var r=parseInt(e.getAttribute("headingRows")||0);if(r>0){Bg("headingRows",r-i,t,o,0);}var s=parseInt(e.getAttribute("headingColumns")||0);if(s>0){Bg("headingColumns",s-n,t,o,0);}}(a,t,n,o,i),a;}function wp(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var n=[],o=new qg(t,{startRow:i,endRow:e-1});var _iterator397=_createForOfIteratorHelper(o),_step397;try{for(_iterator397.s();!(_step397=_iterator397.n()).done;){var _t316=_step397.value;var _i291=_t316.row,_o107=_t316.cellHeight,_r56=_i291+_o107-1;_i291<e&&e<=_r56&&n.push(_t316);}}catch(err){_iterator397.e(err);}finally{_iterator397.f();}return n;}function kp(t,e,i){var n=t.parent,o=n.parent,r=n.index,s=e-r,a={},c=parseInt(t.getAttribute("rowspan"))-s;c>1&&(a.rowspan=c);var l=parseInt(t.getAttribute("colspan")||1);l>1&&(a.colspan=l);var d=r+s,u=_toConsumableArray(new qg(o,{startRow:r,endRow:d,includeAllSlots:!0}));var h,f=null;var _iterator398=_createForOfIteratorHelper(u),_step398;try{for(_iterator398.s();!(_step398=_iterator398.n()).done;){var _e277=_step398.value;var _n173=_e277.row,_o108=_e277.column,_r57=_e277.cell;_r57===t&&void 0===h&&(h=_o108),void 0!==h&&h===_o108&&_n173===d&&(f=Fg(i,_e277.getPositionBefore(),a));}}catch(err){_iterator398.e(err);}finally{_iterator398.f();}return Bg("rowspan",s,t,i),f;}function _p(t,e){var i=[],n=new qg(t);var _iterator399=_createForOfIteratorHelper(n),_step399;try{for(_iterator399.s();!(_step399=_iterator399.n()).done;){var _t317=_step399.value;var _n174=_t317.column,_o109=_t317.cellWidth,_r58=_n174+_o109-1;_n174<e&&e<=_r58&&i.push(_t317);}}catch(err){_iterator399.e(err);}finally{_iterator399.f();}return i;}function vp(t,e,i,n){var o=i-e,r={},s=parseInt(t.getAttribute("colspan"))-o;s>1&&(r.colspan=s);var a=parseInt(t.getAttribute("rowspan")||1);a>1&&(r.rowspan=a);var c=Fg(n,n.createPositionAfter(t),r);return Bg("colspan",o,t,n),c;}function yp(t,e,i,n,o,r){var s=parseInt(t.getAttribute("colspan")||1),a=parseInt(t.getAttribute("rowspan")||1);if(i+s-1>o){Bg("colspan",o-i+1,t,r,1);}if(e+a-1>n){Bg("rowspan",n-e+1,t,r,1);}}function xp(t,e){var i=e.getColumns(t),n=new Array(i).fill(0);var _iterator400=_createForOfIteratorHelper(new qg(t)),_step400;try{for(_iterator400.s();!(_step400=_iterator400.n()).done;){var _e278=_step400.value.column;n[_e278]++;}}catch(err){_iterator400.e(err);}finally{_iterator400.f();}var o=n.reduce(function(t,e,i){return e?t:[].concat(_toConsumableArray(t),[i]);},[]);if(o.length>0){var _i292=o[o.length-1];return e.removeColumns(t,{at:_i292}),!0;}return!1;}function Ap(t,e){var i=[];for(var _e279=0;_e279<t.childCount;_e279++){t.getChild(_e279).isEmpty&&i.push(_e279);}if(i.length>0){var _n175=i[i.length-1];return e.removeRows(t,{at:_n175}),!0;}return!1;}function Tp(t,e){xp(t,e)||Ap(t,e);}function Cp(t,e){var i=Array.from(new qg(t,{startColumn:e.firstColumn,endColumn:e.lastColumn,row:e.lastRow}));if(i.every(function(_ref62){var t=_ref62.cellHeight;return 1===t;}))return e.lastRow;var n=i[0].cellHeight-1;return e.lastRow+n;}function Sp(t,e){var i=Array.from(new qg(t,{startRow:e.firstRow,endRow:e.lastRow,column:e.lastColumn}));if(i.every(function(_ref63){var t=_ref63.cellWidth;return 1===t;}))return e.lastColumn;var n=i[0].cellWidth-1;return e.lastColumn+n;}var Ep=/*#__PURE__*/function(_wd26){_inherits(Ep,_wd26);var _super168=_createSuper(Ep);function Ep(t,e){var _this254;_classCallCheck(this,Ep);_this254=_super168.call(this,t),_this254.direction=e.direction,_this254.isHorizontal="right"==_this254.direction||"left"==_this254.direction;return _this254;}_createClass(Ep,[{key:"refresh",value:function refresh(){var t=this._getMergeableCell();this.value=t,this.isEnabled=!!t;}},{key:"execute",value:function execute(){var _this255=this;var t=this.editor.model,e=rp(t.document.selection)[0],i=this.value,n=this.direction;t.change(function(t){var o="right"==n||"down"==n,r=o?e:i,s=o?i:e,a=s.parent;!function(t,e,i){Pp(t)||(Pp(e)&&i.remove(i.createRangeIn(e)),i.move(i.createRangeIn(t),i.createPositionAt(e,"end")));i.remove(t);}(s,r,t);var c=_this255.isHorizontal?"colspan":"rowspan",l=parseInt(e.getAttribute(c)||1),d=parseInt(i.getAttribute(c)||1);t.setAttribute(c,l+d,r),t.setSelection(t.createRangeIn(r));var u=_this255.editor.plugins.get("TableUtils");Tp(a.findAncestor("table"),u);});}},{key:"_getMergeableCell",value:function _getMergeableCell(){var t=rp(this.editor.model.document.selection)[0];if(!t)return;var e=this.editor.plugins.get("TableUtils"),i=this.isHorizontal?function(t,e,i){var n=t.parent.parent,o="right"==e?t.nextSibling:t.previousSibling,r=(n.getAttribute("headingColumns")||0)>0;if(!o)return;var s="right"==e?t:o,a="right"==e?o:t,_i$getCellLocation=i.getCellLocation(s),c=_i$getCellLocation.column,_i$getCellLocation2=i.getCellLocation(a),l=_i$getCellLocation2.column,d=parseInt(s.getAttribute("colspan")||1),u=Hg(i,s),h=Hg(i,a);if(r&&u!=h)return;return c+d===l?o:void 0;}(t,this.direction,e):function(t,e){var i=t.parent,n=i.parent,o=n.getChildIndex(i);if("down"==e&&o===n.childCount-1||"up"==e&&0===o)return;var r=parseInt(t.getAttribute("rowspan")||1),s=n.getAttribute("headingRows")||0,a="down"==e&&o+r===s,c="up"==e&&o===s;if(s&&(a||c))return;var l=parseInt(t.getAttribute("rowspan")||1),d="down"==e?o+l:o,u=_toConsumableArray(new qg(n,{endRow:d})),h=u.find(function(e){return e.cell===t;}).column,f=u.find(function(_ref64){var t=_ref64.row,i=_ref64.cellHeight,n=_ref64.column;return n===h&&("down"==e?t===d:d===t+i);});return f&&f.cell;}(t,this.direction);if(!i)return;var n=this.isHorizontal?"rowspan":"colspan",o=parseInt(t.getAttribute(n)||1);return parseInt(i.getAttribute(n)||1)===o?i:void 0;}}]);return Ep;}(wd);function Pp(t){return 1==t.childCount&&t.getChild(0).is("element","paragraph")&&t.getChild(0).isEmpty;}var Mp=/*#__PURE__*/function(_wd27){_inherits(Mp,_wd27);var _super169=_createSuper(Mp);function Mp(){_classCallCheck(this,Mp);return _super169.apply(this,arguments);}_createClass(Mp,[{key:"refresh",value:function refresh(){var t=sp(this.editor.model.document.selection),e=t[0];if(e){var _i293=e.findAncestor("table"),_n176=this.editor.plugins.get("TableUtils").getRows(_i293)-1,_o110=ap(t),_r59=0===_o110.first&&_o110.last===_n176;this.isEnabled=!_r59;}else this.isEnabled=!1;}},{key:"execute",value:function execute(){var _this256=this;var t=this.editor.model,e=sp(t.document.selection),i=ap(e),n=e[0],o=n.findAncestor("table"),r=this.editor.plugins.get("TableUtils").getCellLocation(n).column;t.change(function(t){var e=i.last-i.first+1;_this256.editor.plugins.get("TableUtils").removeRows(o,{at:i.first,rows:e});var n=function(t,e,i){var n=t.getChild(e)||t.getChild(t.childCount-1);var o=n.getChild(0),r=0;var _iterator401=_createForOfIteratorHelper(n.getChildren()),_step401;try{for(_iterator401.s();!(_step401=_iterator401.n()).done;){var _t318=_step401.value;if(r>i)return o;o=_t318,r+=parseInt(_t318.getAttribute("colspan")||1);}}catch(err){_iterator401.e(err);}finally{_iterator401.f();}return o;}(o,i.first,r);t.setSelection(t.createPositionAt(n,0));});}}]);return Mp;}(wd);var Ip=/*#__PURE__*/function(_wd28){_inherits(Ip,_wd28);var _super170=_createSuper(Ip);function Ip(){_classCallCheck(this,Ip);return _super170.apply(this,arguments);}_createClass(Ip,[{key:"refresh",value:function refresh(){var t=sp(this.editor.model.document.selection),e=t[0];if(e){var _i294=e.findAncestor("table"),_n177=this.editor.plugins.get("TableUtils").getColumns(_i294),_cp=cp(t),_o111=_cp.first,_r60=_cp.last;this.isEnabled=_r60-_o111<_n177-1;}else this.isEnabled=!1;}},{key:"execute",value:function execute(){var _this257=this;var _ref65=function(t){var e=sp(t),i=e[0],n=e.pop(),o=[i,n];return i.isBefore(n)?o:o.reverse();}(this.editor.model.document.selection),_ref66=_slicedToArray(_ref65,2),t=_ref66[0],e=_ref66[1],i=t.parent.parent,n=_toConsumableArray(new qg(i)),o={first:n.find(function(e){return e.cell===t;}).column,last:n.find(function(t){return t.cell===e;}).column},r=function(t,e,i,n){return parseInt(i.getAttribute("colspan")||1)>1?i:e.previousSibling||i.nextSibling?i.nextSibling||e.previousSibling:n.first?t.reverse().find(function(_ref67){var t=_ref67.column;return t<n.first;}).cell:t.reverse().find(function(_ref68){var t=_ref68.column;return t>n.last;}).cell;}(n,t,e,o);this.editor.model.change(function(t){var e=o.last-o.first+1;_this257.editor.plugins.get("TableUtils").removeColumns(i,{at:o.first,columns:e}),t.setSelection(t.createPositionAt(r,0));});}}]);return Ip;}(wd);var Np=/*#__PURE__*/function(_wd29){_inherits(Np,_wd29);var _super171=_createSuper(Np);function Np(){_classCallCheck(this,Np);return _super171.apply(this,arguments);}_createClass(Np,[{key:"refresh",value:function refresh(){var _this258=this;var t=sp(this.editor.model.document.selection),e=t.length>0;this.isEnabled=e,this.value=e&&t.every(function(t){return _this258._isInHeading(t,t.parent.parent);});}},{key:"execute",value:function execute(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(t.forceValue===this.value)return;var e=this.editor.model,i=sp(e.document.selection),n=i[0].findAncestor("table"),_ap=ap(i),o=_ap.first,r=_ap.last,s=this.value?o:r+1,a=n.getAttribute("headingRows")||0;e.change(function(t){if(s){var _e280=wp(n,s,s>a?a:0);var _iterator402=_createForOfIteratorHelper(_e280),_step402;try{for(_iterator402.s();!(_step402=_iterator402.n()).done;){var _i295=_step402.value.cell;kp(_i295,s,t);}}catch(err){_iterator402.e(err);}finally{_iterator402.f();}}Bg("headingRows",s,n,t,0);});}},{key:"_isInHeading",value:function _isInHeading(t,e){var i=parseInt(e.getAttribute("headingRows")||0);return!!i&&t.parent.index<i;}}]);return Np;}(wd);var Op=/*#__PURE__*/function(_wd30){_inherits(Op,_wd30);var _super172=_createSuper(Op);function Op(){_classCallCheck(this,Op);return _super172.apply(this,arguments);}_createClass(Op,[{key:"refresh",value:function refresh(){var t=sp(this.editor.model.document.selection),e=this.editor.plugins.get("TableUtils"),i=t.length>0;this.isEnabled=i,this.value=i&&t.every(function(t){return Hg(e,t);});}},{key:"execute",value:function execute(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(t.forceValue===this.value)return;var e=this.editor.model,i=sp(e.document.selection),n=i[0].findAncestor("table"),_cp2=cp(i),o=_cp2.first,r=_cp2.last,s=this.value?o:r+1;e.change(function(t){if(s){var _e281=_p(n,s);var _iterator403=_createForOfIteratorHelper(_e281),_step403;try{for(_iterator403.s();!(_step403=_iterator403.n()).done;){var _step403$value=_step403.value,_i296=_step403$value.cell,_n178=_step403$value.column;vp(_i296,_n178,s,t);}}catch(err){_iterator403.e(err);}finally{_iterator403.f();}}Bg("headingColumns",s,n,t,0);});}}]);return Op;}(wd);var Rp=/*#__PURE__*/function(_pd57){_inherits(Rp,_pd57);var _super173=_createSuper(Rp);function Rp(){_classCallCheck(this,Rp);return _super173.apply(this,arguments);}_createClass(Rp,[{key:"init",value:function init(){this.decorate("insertColumns"),this.decorate("insertRows");}},{key:"getCellLocation",value:function getCellLocation(t){var e=t.parent,i=e.parent,n=i.getChildIndex(e),o=new qg(i,{row:n});var _iterator404=_createForOfIteratorHelper(o),_step404;try{for(_iterator404.s();!(_step404=_iterator404.n()).done;){var _step404$value=_step404.value,_e282=_step404$value.cell,_i297=_step404$value.row,_n179=_step404$value.column;if(_e282===t)return{row:_i297,column:_n179};}}catch(err){_iterator404.e(err);}finally{_iterator404.f();}}},{key:"createTable",value:function createTable(t,e){var i=t.createElement("table");return Dp(t,i,0,parseInt(e.rows)||2,parseInt(e.columns)||2),e.headingRows&&Bg("headingRows",e.headingRows,i,t,0),e.headingColumns&&Bg("headingColumns",e.headingColumns,i,t,0),i;}},{key:"insertRows",value:function insertRows(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=this.editor.model,n=e.at||0,o=e.rows||1,r=void 0!==e.copyStructureFromAbove,s=e.copyStructureFromAbove?n-1:n,a=this.getRows(t),c=this.getColumns(t);i.change(function(e){var i=t.getAttribute("headingRows")||0;if(i>n&&Bg("headingRows",i+o,t,e,0),!r&&(0===n||n===a))return void Dp(e,t,n,o,c);var l=r?Math.max(n,s):n,d=new qg(t,{endRow:l}),u=new Array(c).fill(1);var _iterator405=_createForOfIteratorHelper(d),_step405;try{for(_iterator405.s();!(_step405=_iterator405.n()).done;){var _step405$value=_step405.value,_t320=_step405$value.row,_i300=_step405$value.column,_a22=_step405$value.cellHeight,_c14=_step405$value.cellWidth,_l8=_step405$value.cell;var _d5=_t320+_a22-1,_h4=_t320<=s&&s<=_d5;_t320<n&&n<=_d5?(e.setAttribute("rowspan",_a22+o,_l8),u[_i300]=-_c14):r&&_h4&&(u[_i300]=_c14);}}catch(err){_iterator405.e(err);}finally{_iterator405.f();}for(var _i298=0;_i298<o;_i298++){var _i299=e.createElement("tableRow");e.insert(_i299,t,n);for(var _t319=0;_t319<u.length;_t319++){var _n180=u[_t319],_o112=e.createPositionAt(_i299,"end");_n180>0&&Fg(e,_o112,_n180>1?{colspan:_n180}:null),_t319+=Math.abs(_n180)-1;}}});}},{key:"insertColumns",value:function insertColumns(t){var _this259=this;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=this.editor.model,n=e.at||0,o=e.columns||1;i.change(function(e){var i=t.getAttribute("headingColumns");n<i&&e.setAttribute("headingColumns",i+o,t);var r=_this259.getColumns(t);if(0===n||r===n){var _iterator406=_createForOfIteratorHelper(t.getChildren()),_step406;try{for(_iterator406.s();!(_step406=_iterator406.n()).done;){var _i301=_step406.value;Lp(o,e,e.createPositionAt(_i301,n?"end":0));}}catch(err){_iterator406.e(err);}finally{_iterator406.f();}return;}var s=new qg(t,{column:n,includeAllSlots:!0});var _iterator407=_createForOfIteratorHelper(s),_step407;try{for(_iterator407.s();!(_step407=_iterator407.n()).done;){var _t321=_step407.value;var _i302=_t321.row,_r61=_t321.cell,_a23=_t321.cellAnchorColumn,_c15=_t321.cellAnchorRow,_l9=_t321.cellWidth,_d6=_t321.cellHeight;if(_a23<n){e.setAttribute("colspan",_l9+o,_r61);var _t322=_c15+_d6-1;for(var _e283=_i302;_e283<=_t322;_e283++){s.skipRow(_e283);}}else Lp(o,e,_t321.getPositionBefore());}}catch(err){_iterator407.e(err);}finally{_iterator407.f();}});}},{key:"removeRows",value:function removeRows(t,e){var _this260=this;var i=this.editor.model,n=e.rows||1,o=e.at,r=o+n-1;i.change(function(e){var _ref69=function(t,e,i){var n=new Map(),o=[];var _iterator408=_createForOfIteratorHelper(new qg(t,{endRow:i})),_step408;try{for(_iterator408.s();!(_step408=_iterator408.n()).done;){var _step408$value=_step408.value,_r62=_step408$value.row,_s36=_step408$value.column,_a24=_step408$value.cellHeight,_c16=_step408$value.cell;var _t323=_r62+_a24-1;if(_r62>=e&&_r62<=i&&_t323>i){var _t324=_a24-(i-_r62+1);n.set(_s36,{cell:_c16,rowspan:_t324});}if(_r62<e&&_t323>=e){var _n181=void 0;_n181=_t323>=i?i-e+1:_t323-e+1,o.push({cell:_c16,rowspan:_a24-_n181});}}}catch(err){_iterator408.e(err);}finally{_iterator408.f();}return{cellsToMove:n,cellsToTrim:o};}(t,o,r),i=_ref69.cellsToMove,n=_ref69.cellsToTrim;if(i.size){!function(t,e,i,n){var o=_toConsumableArray(new qg(t,{includeAllSlots:!0,row:e})),r=t.getChild(e);var s;var _iterator409=_createForOfIteratorHelper(o),_step409;try{for(_iterator409.s();!(_step409=_iterator409.n()).done;){var _step409$value=_step409.value,_t325=_step409$value.column,_e284=_step409$value.cell,_a25=_step409$value.isAnchor;if(i.has(_t325)){var _i$get=i.get(_t325),_e285=_i$get.cell,_o113=_i$get.rowspan,_a26=s?n.createPositionAfter(s):n.createPositionAt(r,0);n.move(n.createRangeOn(_e285),_a26),Bg("rowspan",_o113,_e285,n),s=_e285;}else _a25&&(s=_e284);}}catch(err){_iterator409.e(err);}finally{_iterator409.f();}}(t,r+1,i,e);}for(var _i303=r;_i303>=o;_i303--){e.remove(t.getChild(_i303));}var _iterator410=_createForOfIteratorHelper(n),_step410;try{for(_iterator410.s();!(_step410=_iterator410.n()).done;){var _step410$value=_step410.value,_t326=_step410$value.rowspan,_i304=_step410$value.cell;Bg("rowspan",_t326,_i304,e);}}catch(err){_iterator410.e(err);}finally{_iterator410.f();}!function(t,e,i,n){var o=t.getAttribute("headingRows")||0;if(e<o){Bg("headingRows",i<o?o-(i-e+1):e,t,n,0);}}(t,o,r,e),xp(t,_this260)||Ap(t,_this260);});}},{key:"removeColumns",value:function removeColumns(t,e){var _this261=this;var i=this.editor.model,n=e.at,o=e.columns||1,r=e.at+o-1;i.change(function(e){!function(t,e,i){var n=t.getAttribute("headingColumns")||0;if(n&&e.first<n){var _o114=Math.min(n-1,e.last)-e.first+1;i.setAttribute("headingColumns",n-_o114,t);}}(t,{first:n,last:r},e);for(var _i305=r;_i305>=n;_i305--){for(var _i306=0,_arr2=_toConsumableArray(new qg(t));_i306<_arr2.length;_i306++){var _arr2$_i=_arr2[_i306],_n182=_arr2$_i.cell,_o115=_arr2$_i.column,_r63=_arr2$_i.cellWidth;_o115<=_i305&&_r63>1&&_o115+_r63>_i305?Bg("colspan",_r63-1,_n182,e):_o115===_i305&&e.remove(_n182);}}Ap(t,_this261)||xp(t,_this261);});}},{key:"splitCellVertically",value:function splitCellVertically(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:2;var i=this.editor.model,n=t.parent.parent,o=parseInt(t.getAttribute("rowspan")||1),r=parseInt(t.getAttribute("colspan")||1);i.change(function(i){if(r>1){var _zp=zp(r,e),_n183=_zp.newCellsSpan,_s37=_zp.updatedSpan;Bg("colspan",_s37,t,i);var _a27={};_n183>1&&(_a27.colspan=_n183),o>1&&(_a27.rowspan=o);Lp(r>e?e-1:r-1,i,i.createPositionAfter(t),_a27);}if(r<e){var _s38=e-r,_a28=_toConsumableArray(new qg(n)),_a28$find=_a28.find(function(_ref70){var e=_ref70.cell;return e===t;}),_c17=_a28$find.column,_l10=_a28.filter(function(_ref71){var e=_ref71.cell,i=_ref71.cellWidth,n=_ref71.column;return e!==t&&n===_c17||n<_c17&&n+i>_c17;});var _iterator411=_createForOfIteratorHelper(_l10),_step411;try{for(_iterator411.s();!(_step411=_iterator411.n()).done;){var _step411$value=_step411.value,_t327=_step411$value.cell,_e286=_step411$value.cellWidth;i.setAttribute("colspan",_e286+_s38,_t327);}}catch(err){_iterator411.e(err);}finally{_iterator411.f();}var _d7={};o>1&&(_d7.rowspan=o),Lp(_s38,i,i.createPositionAfter(t),_d7);var _u5=n.getAttribute("headingColumns")||0;_u5>_c17&&Bg("headingColumns",_u5+_s38,n,i);}});}},{key:"splitCellHorizontally",value:function splitCellHorizontally(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:2;var i=this.editor.model,n=t.parent,o=n.parent,r=o.getChildIndex(n),s=parseInt(t.getAttribute("rowspan")||1),a=parseInt(t.getAttribute("colspan")||1);i.change(function(i){if(s>1){var _n184=_toConsumableArray(new qg(o,{startRow:r,endRow:r+s-1,includeAllSlots:!0})),_zp2=zp(s,e),_c18=_zp2.newCellsSpan,_l11=_zp2.updatedSpan;Bg("rowspan",_l11,t,i);var _n184$find=_n184.find(function(_ref72){var e=_ref72.cell;return e===t;}),_d8=_n184$find.column,_u6={};_c18>1&&(_u6.rowspan=_c18),a>1&&(_u6.colspan=a);for(var _i307=0,_n185=_n184;_i307<_n185.length;_i307++){var _t328=_n185[_i307];var _e287=_t328.column,_n186=_t328.row,_o116=_e287===_d8,_s39=(_n186+r+_l11)%_c18==0;_n186>=r+_l11&&_o116&&_s39&&Lp(1,i,_t328.getPositionBefore(),_u6);}}if(s<e){var _n187=e-s,_c19=_toConsumableArray(new qg(o,{startRow:0,endRow:r}));var _iterator412=_createForOfIteratorHelper(_c19),_step412;try{for(_iterator412.s();!(_step412=_iterator412.n()).done;){var _step412$value=_step412.value,_e288=_step412$value.cell,_o117=_step412$value.cellHeight,_s40=_step412$value.row;if(_e288!==t&&_s40+_o117>r){var _t329=_o117+_n187;i.setAttribute("rowspan",_t329,_e288);}}}catch(err){_iterator412.e(err);}finally{_iterator412.f();}var _l12={};a>1&&(_l12.colspan=a),Dp(i,o,r+1,_n187,1,_l12);var _d9=o.getAttribute("headingRows")||0;_d9>r&&Bg("headingRows",_d9+_n187,o,i);}});}},{key:"getColumns",value:function getColumns(t){return _toConsumableArray(t.getChild(0).getChildren()).reduce(function(t,e){return t+parseInt(e.getAttribute("colspan")||1);},0);}},{key:"getRows",value:function getRows(t){return t.childCount;}}],[{key:"pluginName",get:function get(){return"TableUtils";}}]);return Rp;}(pd);function Dp(t,e,i,n,o){var r=arguments.length>5&&arguments[5]!==undefined?arguments[5]:{};for(var _s41=0;_s41<n;_s41++){var _n188=t.createElement("tableRow");t.insert(_n188,e,i),Lp(o,t,t.createPositionAt(_n188,"end"),r);}}function Lp(t,e,i){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};for(var _o118=0;_o118<t;_o118++){Fg(e,i,n);}}function zp(t,e){if(t<e)return{newCellsSpan:1,updatedSpan:1};var i=Math.floor(t/e);return{newCellsSpan:i,updatedSpan:t-i*e+i};}var Vp=/*#__PURE__*/function(_wd31){_inherits(Vp,_wd31);var _super174=_createSuper(Vp);function Vp(){_classCallCheck(this,Vp);return _super174.apply(this,arguments);}_createClass(Vp,[{key:"refresh",value:function refresh(){var t=op(this.editor.model.document.selection);this.isEnabled=lp(t,this.editor.plugins.get(Rp));}},{key:"execute",value:function execute(){var t=this.editor.model,e=this.editor.plugins.get(Rp);t.change(function(i){var n=op(t.document.selection),o=n.shift(),_ref73=function(t,e,i){var n=0,o=0;var _iterator413=_createForOfIteratorHelper(e),_step413;try{for(_iterator413.s();!(_step413=_iterator413.n()).done;){var _t330=_step413.value;var _i$getCellLocation4=i.getCellLocation(_t330),_e289=_i$getCellLocation4.row,_r64=_i$getCellLocation4.column;n=Fp(_t330,_r64,n,"colspan"),o=Fp(_t330,_e289,o,"rowspan");}}catch(err){_iterator413.e(err);}finally{_iterator413.f();}var _i$getCellLocation3=i.getCellLocation(t),r=_i$getCellLocation3.row,s=_i$getCellLocation3.column;return{mergeWidth:n-s,mergeHeight:o-r};}(o,n,e),r=_ref73.mergeWidth,s=_ref73.mergeHeight;Bg("colspan",r,o,i),Bg("rowspan",s,o,i);var _iterator414=_createForOfIteratorHelper(n),_step414;try{for(_iterator414.s();!(_step414=_iterator414.n()).done;){var _t331=_step414.value;jp(_t331,o,i);}}catch(err){_iterator414.e(err);}finally{_iterator414.f();}Tp(o.findAncestor("table"),e),i.setSelection(o,"in");});}}]);return Vp;}(wd);function jp(t,e,i){Bp(t)||(Bp(e)&&i.remove(i.createRangeIn(e)),i.move(i.createRangeIn(t),i.createPositionAt(e,"end"))),i.remove(t);}function Bp(t){return 1==t.childCount&&t.getChild(0).is("element","paragraph")&&t.getChild(0).isEmpty;}function Fp(t,e,i,n){var o=parseInt(t.getAttribute(n)||1);return Math.max(i,e+o);}var Hp=/*#__PURE__*/function(_wd32){_inherits(Hp,_wd32);var _super175=_createSuper(Hp);function Hp(){_classCallCheck(this,Hp);return _super175.apply(this,arguments);}_createClass(Hp,[{key:"refresh",value:function refresh(){var t=sp(this.editor.model.document.selection);this.isEnabled=t.length>0;}},{key:"execute",value:function execute(){var t=this.editor.model,e=sp(t.document.selection),i=ap(e),n=e[0].findAncestor("table"),o=[];for(var _e290=i.first;_e290<=i.last;_e290++){var _iterator415=_createForOfIteratorHelper(n.getChild(_e290).getChildren()),_step415;try{for(_iterator415.s();!(_step415=_iterator415.n()).done;){var _i308=_step415.value;o.push(t.createRangeOn(_i308));}}catch(err){_iterator415.e(err);}finally{_iterator415.f();}}t.change(function(t){t.setSelection(o);});}}]);return Hp;}(wd);var Up=/*#__PURE__*/function(_wd33){_inherits(Up,_wd33);var _super176=_createSuper(Up);function Up(){_classCallCheck(this,Up);return _super176.apply(this,arguments);}_createClass(Up,[{key:"refresh",value:function refresh(){var t=sp(this.editor.model.document.selection);this.isEnabled=t.length>0;}},{key:"execute",value:function execute(){var t=this.editor.model,e=sp(t.document.selection),i=e[0],n=e.pop(),o=i.findAncestor("table"),r=this.editor.plugins.get("TableUtils"),s=r.getCellLocation(i),a=r.getCellLocation(n),c=Math.min(s.column,a.column),l=Math.max(s.column,a.column),d=[];var _iterator416=_createForOfIteratorHelper(new qg(o,{startColumn:c,endColumn:l})),_step416;try{for(_iterator416.s();!(_step416=_iterator416.n()).done;){var _e291=_step416.value;d.push(t.createRangeOn(_e291.cell));}}catch(err){_iterator416.e(err);}finally{_iterator416.f();}t.change(function(t){t.setSelection(d);});}}]);return Up;}(wd);function Wp(t){t.document.registerPostFixer(function(e){return function(t,e){var i=e.document.differ.getChanges();var n=!1;var o=new Set();var _iterator417=_createForOfIteratorHelper(i),_step417;try{for(_iterator417.s();!(_step417=_iterator417.n()).done;){var _e292=_step417.value;var _i309=void 0;"table"==_e292.name&&"insert"==_e292.type&&(_i309=_e292.position.nodeAfter),"tableRow"!=_e292.name&&"tableCell"!=_e292.name||(_i309=_e292.position.findAncestor("table")),Yp(_e292)&&(_i309=_e292.range.start.findAncestor("table")),_i309&&!o.has(_i309)&&(n=qp(_i309,t)||n,n=$p(_i309,t)||n,o.add(_i309));}}catch(err){_iterator417.e(err);}finally{_iterator417.f();}return n;}(e,t);});}function qp(t,e){var i=!1;var n=function(t){var e=parseInt(t.getAttribute("headingRows")||0),i=t.childCount,n=[];var _iterator418=_createForOfIteratorHelper(new qg(t)),_step418;try{for(_iterator418.s();!(_step418=_iterator418.n()).done;){var _step418$value=_step418.value,_o119=_step418$value.row,_r65=_step418$value.cell,_s42=_step418$value.cellHeight;if(_s42<2)continue;var _t332=_o119<e?e:i;if(_o119+_s42>_t332){var _e293=_t332-_o119;n.push({cell:_r65,rowspan:_e293});}}}catch(err){_iterator418.e(err);}finally{_iterator418.f();}return n;}(t);if(n.length){i=!0;var _iterator419=_createForOfIteratorHelper(n),_step419;try{for(_iterator419.s();!(_step419=_iterator419.n()).done;){var _t333=_step419.value;Bg("rowspan",_t333.rowspan,_t333.cell,e,1);}}catch(err){_iterator419.e(err);}finally{_iterator419.f();}}return i;}function $p(t,e){var i=!1;var n=function(t){var e=new Array(t.childCount).fill(0);var _iterator420=_createForOfIteratorHelper(new qg(t,{includeAllSlots:!0})),_step420;try{for(_iterator420.s();!(_step420=_iterator420.n()).done;){var _i310=_step420.value.row;e[_i310]++;}}catch(err){_iterator420.e(err);}finally{_iterator420.f();}return e;}(t),o=[];var _iterator421=_createForOfIteratorHelper(n.entries()),_step421;try{for(_iterator421.s();!(_step421=_iterator421.n()).done;){var _step421$value=_slicedToArray(_step421.value,2),_t334=_step421$value[0],_e294=_step421$value[1];_e294||o.push(_t334);}}catch(err){_iterator421.e(err);}finally{_iterator421.f();}if(o.length){i=!0;var _iterator422=_createForOfIteratorHelper(o.reverse()),_step422;try{for(_iterator422.s();!(_step422=_iterator422.n()).done;){var _i311=_step422.value;e.remove(t.getChild(_i311)),n.splice(_i311,1);}}catch(err){_iterator422.e(err);}finally{_iterator422.f();}}var r=n[0];if(!n.every(function(t){return t===r;})){var _o120=n.reduce(function(t,e){return e>t?e:t;},0);var _iterator423=_createForOfIteratorHelper(n.entries()),_step423;try{for(_iterator423.s();!(_step423=_iterator423.n()).done;){var _step423$value=_slicedToArray(_step423.value,2),_r66=_step423$value[0],_s43=_step423$value[1];var _n189=_o120-_s43;if(_n189){for(var _i312=0;_i312<_n189;_i312++){Fg(e,e.createPositionAt(t.getChild(_r66),"end"));}i=!0;}}}catch(err){_iterator423.e(err);}finally{_iterator423.f();}}return i;}function Yp(t){var e="attribute"===t.type,i=t.attributeKey;return e&&("headingRows"===i||"colspan"===i||"rowspan"===i);}function Gp(t){t.document.registerPostFixer(function(e){return function(t,e){var i=e.document.differ.getChanges();var n=!1;var _iterator424=_createForOfIteratorHelper(i),_step424;try{for(_iterator424.s();!(_step424=_iterator424.n()).done;){var _e295=_step424.value;"insert"==_e295.type&&"table"==_e295.name&&(n=Kp(_e295.position.nodeAfter,t)||n),"insert"==_e295.type&&"tableRow"==_e295.name&&(n=Qp(_e295.position.nodeAfter,t)||n),"insert"==_e295.type&&"tableCell"==_e295.name&&(n=Jp(_e295.position.nodeAfter,t)||n),Zp(_e295)&&(n=Jp(_e295.position.parent,t)||n);}}catch(err){_iterator424.e(err);}finally{_iterator424.f();}return n;}(e,t);});}function Kp(t,e){var i=!1;var _iterator425=_createForOfIteratorHelper(t.getChildren()),_step425;try{for(_iterator425.s();!(_step425=_iterator425.n()).done;){var _n190=_step425.value;i=Qp(_n190,e)||i;}}catch(err){_iterator425.e(err);}finally{_iterator425.f();}return i;}function Qp(t,e){var i=!1;var _iterator426=_createForOfIteratorHelper(t.getChildren()),_step426;try{for(_iterator426.s();!(_step426=_iterator426.n()).done;){var _n191=_step426.value;i=Jp(_n191,e)||i;}}catch(err){_iterator426.e(err);}finally{_iterator426.f();}return i;}function Jp(t,e){if(0==t.childCount)return e.insertElement("paragraph",t),!0;var i=Array.from(t.getChildren()).filter(function(t){return t.is("$text");});var _iterator427=_createForOfIteratorHelper(i),_step427;try{for(_iterator427.s();!(_step427=_iterator427.n()).done;){var _t335=_step427.value;e.wrap(e.createRangeOn(_t335),"paragraph");}}catch(err){_iterator427.e(err);}finally{_iterator427.f();}return!!i.length;}function Zp(t){return!(!t.position||!t.position.parent.is("element","tableCell"))&&("insert"==t.type&&"$text"==t.name||"remove"==t.type);}function Xp(t,e){t.document.registerPostFixer(function(){return function(t,e){var i=new Set();var _iterator428=_createForOfIteratorHelper(t.getChanges()),_step428;try{for(_iterator428.s();!(_step428=_iterator428.n()).done;){var _e296=_step428.value;var _t336="attribute"==_e296.type?_e296.range.start.parent:_e296.position.parent;_t336.is("element","tableCell")&&i.add(_t336);}}catch(err){_iterator428.e(err);}finally{_iterator428.f();}var _iterator429=_createForOfIteratorHelper(i.values()),_step429;try{for(_iterator429.s();!(_step429=_iterator429.n()).done;){var _n192=_step429.value;var _iterator430=_createForOfIteratorHelper(_toConsumableArray(_n192.getChildren()).filter(function(t){return tb(t,e);})),_step430;try{for(_iterator430.s();!(_step430=_iterator430.n()).done;){var _i313=_step430.value;t.refreshItem(_i313);}}catch(err){_iterator430.e(err);}finally{_iterator430.f();}}}catch(err){_iterator429.e(err);}finally{_iterator429.f();}return!1;}(t.document.differ,e);});}function tb(t,e){if(!t.is("element","paragraph"))return!1;var i=e.toViewElement(t);return!!i&&Kg(t)!==i.is("element","span");}function eb(t){t.document.registerPostFixer(function(){return function(t){var e=t.document.differ,i=new Set();var _iterator431=_createForOfIteratorHelper(e.getChanges()),_step431;try{for(_iterator431.s();!(_step431=_iterator431.n()).done;){var _t338=_step431.value;if("attribute"!=_t338.type)continue;var _e297=_t338.range.start.nodeAfter;_e297&&_e297.is("element","table")&&"headingRows"==_t338.attributeKey&&i.add(_e297);}}catch(err){_iterator431.e(err);}finally{_iterator431.f();}if(i.size){var _iterator432=_createForOfIteratorHelper(i.values()),_step432;try{for(_iterator432.s();!(_step432=_iterator432.n()).done;){var _t337=_step432.value;e.refreshItem(_t337);}}catch(err){_iterator432.e(err);}finally{_iterator432.f();}return!0;}return!1;}(t);});}i(89);var ib=/*#__PURE__*/function(_pd58){_inherits(ib,_pd58);var _super177=_createSuper(ib);function ib(){_classCallCheck(this,ib);return _super177.apply(this,arguments);}_createClass(ib,[{key:"init",value:function init(){var t=this.editor,e=t.model,i=e.schema,n=t.conversion;i.register("table",{allowWhere:"$block",allowAttributes:["headingRows","headingColumns"],isObject:!0,isBlock:!0}),i.register("tableRow",{allowIn:"table",isLimit:!0}),i.register("tableCell",{allowIn:"tableRow",allowAttributes:["colspan","rowspan"],isLimit:!0,isSelectable:!0}),i.extend("$block",{allowIn:"tableCell"}),i.addChildCheck(function(t,e){if("table"==e.name&&Array.from(t.getNames()).includes("table"))return!1;}),n["for"]("upcast").add(Ug()),n["for"]("editingDowncast").add(Yg({asWidget:!0})),n["for"]("dataDowncast").add(Yg()),n["for"]("upcast").elementToElement({model:"tableRow",view:"tr"}),n["for"]("upcast").add(function(t){t.on("element:tr",function(t,e){e.viewItem.isEmpty&&0==e.modelCursor.index&&t.stop();},{priority:"high"});}),n["for"]("editingDowncast").add(function(t){return t.on("insert:tableRow",function(t,e,i){var n=e.item;if(!i.consumable.consume(n,"insert"))return;var o=n.parent,r=function(t){var _iterator433=_createForOfIteratorHelper(t.getChildren()),_step433;try{for(_iterator433.s();!(_step433=_iterator433.n()).done;){var _e298=_step433.value;if("table"===_e298.name)return _e298;}}catch(err){_iterator433.e(err);}finally{_iterator433.f();}}(i.mapper.toViewElement(o)),s=o.getChildIndex(n),a=new qg(o,{row:s}),c={headingRows:o.getAttribute("headingRows")||0,headingColumns:o.getAttribute("headingColumns")||0},l=new Map();var _iterator434=_createForOfIteratorHelper(a),_step434;try{for(_iterator434.s();!(_step434=_iterator434.n()).done;){var _t339=_step434.value;var _e299=l.get(s)||Zg(r,n,s,c,i);l.set(s,_e299),i.consumable.consume(_t339.cell,"insert"),Jg(_t339,c,i.writer.createPositionAt(_e299,"end"),i,{asWidget:!0});}}catch(err){_iterator434.e(err);}finally{_iterator434.f();}});}),n["for"]("editingDowncast").add(function(t){return t.on("remove:tableRow",function(t,e,i){t.stop();var n=i.writer,o=i.mapper,r=o.toViewPosition(e.position).getLastMatchingPosition(function(t){return!t.item.is("element","tr");}).nodeAfter,s=r.parent.parent,a=n.createRangeOn(r),c=n.remove(a);var _iterator435=_createForOfIteratorHelper(n.createRangeIn(c).getItems()),_step435;try{for(_iterator435.s();!(_step435=_iterator435.n()).done;){var _t340=_step435.value;o.unbindViewElement(_t340);}}catch(err){_iterator435.e(err);}finally{_iterator435.f();}ep("thead",s,i),ep("tbody",s,i);},{priority:"higher"});}),n["for"]("upcast").elementToElement({model:"tableCell",view:"td"}),n["for"]("upcast").elementToElement({model:"tableCell",view:"th"}),n["for"]("editingDowncast").add(function(t){return t.on("insert:tableCell",function(t,e,i){var n=e.item;if(!i.consumable.consume(n,"insert"))return;var o=n.parent,r=o.parent,s=r.getChildIndex(o),a=new qg(r,{row:s}),c={headingRows:r.getAttribute("headingRows")||0,headingColumns:r.getAttribute("headingColumns")||0};var _iterator436=_createForOfIteratorHelper(a),_step436;try{for(_iterator436.s();!(_step436=_iterator436.n()).done;){var _t341=_step436.value;if(_t341.cell===n){var _e300=i.mapper.toViewElement(o);return void Jg(_t341,c,i.writer.createPositionAt(_e300,o.getChildIndex(n)),i,{asWidget:!0});}}}catch(err){_iterator436.e(err);}finally{_iterator436.f();}});}),t.conversion["for"]("editingDowncast").elementToElement({model:"paragraph",view:Gg,converterPriority:"high"}),n.attributeToAttribute({model:"colspan",view:"colspan"}),n.attributeToAttribute({model:"rowspan",view:"rowspan"}),n["for"]("editingDowncast").add(function(t){return t.on("attribute:headingColumns:table",function(t,e,i){var n=e.item;if(!i.consumable.consume(e.item,t.name))return;var o={headingRows:n.getAttribute("headingRows")||0,headingColumns:n.getAttribute("headingColumns")||0},r=e.attributeOldValue,s=e.attributeNewValue,a=(r>s?r:s)-1;var _iterator437=_createForOfIteratorHelper(new qg(n,{endColumn:a})),_step437;try{for(_iterator437.s();!(_step437=_iterator437.n()).done;){var _t342=_step437.value;Qg(_t342,o,i);}}catch(err){_iterator437.e(err);}finally{_iterator437.f();}});}),t.commands.add("insertTable",new np(t)),t.commands.add("insertTableRowAbove",new mp(t,{order:"above"})),t.commands.add("insertTableRowBelow",new mp(t,{order:"below"})),t.commands.add("insertTableColumnLeft",new gp(t,{order:"left"})),t.commands.add("insertTableColumnRight",new gp(t,{order:"right"})),t.commands.add("removeTableRow",new Mp(t)),t.commands.add("removeTableColumn",new Ip(t)),t.commands.add("splitTableCellVertically",new pp(t,{direction:"vertically"})),t.commands.add("splitTableCellHorizontally",new pp(t,{direction:"horizontally"})),t.commands.add("mergeTableCells",new Vp(t)),t.commands.add("mergeTableCellRight",new Ep(t,{direction:"right"})),t.commands.add("mergeTableCellLeft",new Ep(t,{direction:"left"})),t.commands.add("mergeTableCellDown",new Ep(t,{direction:"down"})),t.commands.add("mergeTableCellUp",new Ep(t,{direction:"up"})),t.commands.add("setTableColumnHeader",new Op(t)),t.commands.add("setTableRowHeader",new Np(t)),t.commands.add("selectTableRow",new Hp(t)),t.commands.add("selectTableColumn",new Up(t)),eb(e),Wp(e),Xp(e,t.editing.mapper),Gp(e);}}],[{key:"pluginName",get:function get(){return"TableEditing";}},{key:"requires",get:function get(){return[Rp];}}]);return ib;}(pd);i(91);var nb=/*#__PURE__*/function(_El28){_inherits(nb,_El28);var _super178=_createSuper(nb);function nb(t){var _this262;_classCallCheck(this,nb);_this262=_super178.call(this,t);var e=_this262.bindTemplate;_this262.set("icon"),_this262.set("isEnabled",!0),_this262.set("isOn",!1),_this262.set("isToggleable",!1),_this262.set("isVisible",!0),_this262.set("keystroke"),_this262.set("label"),_this262.set("tabindex",-1),_this262.set("tooltip"),_this262.set("tooltipPosition","s"),_this262.set("type","button"),_this262.set("withText",!1),_this262.children=_this262.createCollection(),_this262.actionView=_this262._createActionView(),_this262.arrowView=_this262._createArrowView(),_this262.keystrokes=new Wc(),_this262.focusTracker=new Jc(),_this262.setTemplate({tag:"div",attributes:{"class":["ck","ck-splitbutton",e["if"]("isVisible","ck-hidden",function(t){return!t;}),_this262.arrowView.bindTemplate["if"]("isOn","ck-splitbutton_open")]},children:_this262.children});return _this262;}_createClass(nb,[{key:"render",value:function render(){var _this263=this;_get(_getPrototypeOf(nb.prototype),"render",this).call(this),this.children.add(this.actionView),this.children.add(this.arrowView),this.focusTracker.add(this.actionView.element),this.focusTracker.add(this.arrowView.element),this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",function(t,e){_this263.focusTracker.focusedElement===_this263.actionView.element&&(_this263.arrowView.focus(),e());}),this.keystrokes.set("arrowleft",function(t,e){_this263.focusTracker.focusedElement===_this263.arrowView.element&&(_this263.actionView.focus(),e());});}},{key:"focus",value:function focus(){this.actionView.focus();}},{key:"_createActionView",value:function _createActionView(){var t=new Xl();return t.bind("icon","isEnabled","isOn","isToggleable","keystroke","label","tabindex","tooltip","tooltipPosition","type","withText").to(this),t.extendTemplate({attributes:{"class":"ck-splitbutton__action"}}),t.delegate("execute").to(this),t;}},{key:"_createArrowView",value:function _createArrowView(){var t=new Xl(),e=t.bindTemplate;return t.icon=td,t.extendTemplate({attributes:{"class":"ck-splitbutton__arrow","aria-haspopup":!0,"aria-expanded":e.to("isOn",function(t){return String(t);})}}),t.bind("isEnabled").to(this),t.delegate("execute").to(this,"open"),t;}}]);return nb;}(El);i(93);var ob=/*#__PURE__*/function(_El29){_inherits(ob,_El29);var _super179=_createSuper(ob);function ob(t){var _this264;_classCallCheck(this,ob);_this264=_super179.call(this,t);var e=_this264.bindTemplate;_this264.items=_this264._createGridCollection(),_this264.set("rows",0),_this264.set("columns",0),_this264.bind("label").to(_assertThisInitialized(_this264),"columns",_assertThisInitialized(_this264),"rows",function(t,e){return"".concat(e," \xD7 ").concat(t);}),_this264.setTemplate({tag:"div",attributes:{"class":["ck"]},children:[{tag:"div",attributes:{"class":["ck-insert-table-dropdown__grid"]},on:{"mouseover@.ck-insert-table-dropdown-grid-box":e.to("boxover")},children:_this264.items},{tag:"div",attributes:{"class":["ck-insert-table-dropdown__label"]},children:[{text:e.to("label")}]}],on:{mousedown:e.to(function(t){t.preventDefault();}),click:e.to(function(){_this264.fire("execute");})}}),_this264.on("boxover",function(t,e){var _e$target$dataset=e.target.dataset,i=_e$target$dataset.row,n=_e$target$dataset.column;_this264.set({rows:parseInt(i),columns:parseInt(n)});}),_this264.on("change:columns",function(){_this264._highlightGridBoxes();}),_this264.on("change:rows",function(){_this264._highlightGridBoxes();});return _this264;}_createClass(ob,[{key:"focus",value:function focus(){}},{key:"focusLast",value:function focusLast(){}},{key:"_highlightGridBoxes",value:function _highlightGridBoxes(){var t=this.rows,e=this.columns;this.items.map(function(i,n){var o=Math.floor(n/10)<t&&n%10<e;i.set("isOn",o);});}},{key:"_createGridCollection",value:function _createGridCollection(){var t=[];for(var _e301=0;_e301<100;_e301++){var _i314=Math.floor(_e301/10),_n193=_e301%10;t.push(new rb(this.locale,_i314+1,_n193+1));}return this.createCollection(t);}}]);return ob;}(El);var rb=/*#__PURE__*/function(_El30){_inherits(rb,_El30);var _super180=_createSuper(rb);function rb(t,e,i){var _this265;_classCallCheck(this,rb);_this265=_super180.call(this,t);var n=_this265.bindTemplate;_this265.set("isOn",!1),_this265.setTemplate({tag:"div",attributes:{"class":["ck-insert-table-dropdown-grid-box",n["if"]("isOn","ck-on")],"data-row":e,"data-column":i}});return _this265;}return rb;}(El);var sb=/*#__PURE__*/function(_pd59){_inherits(sb,_pd59);var _super181=_createSuper(sb);function sb(){_classCallCheck(this,sb);return _super181.apply(this,arguments);}_createClass(sb,[{key:"init",value:function init(){var _this266=this;var t=this.editor,e=this.editor.t,i="ltr"===t.locale.contentLanguageDirection;t.ui.componentFactory.add("insertTable",function(i){var n=t.commands.get("insertTable"),o=ad(i);var r;return o.bind("isEnabled").to(n),o.buttonView.set({icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 6v3h4V6H3zm0 4v3h4v-3H3zm0 4v3h4v-3H3zm5 3h4v-3H8v3zm5 0h4v-3h-4v3zm4-4v-3h-4v3h4zm0-4V6h-4v3h4zm1.5 8a1.5 1.5 0 0 1-1.5 1.5H3A1.5 1.5 0 0 1 1.5 17V4c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5v13zM12 13v-3H8v3h4zm0-4V6H8v3h4z"/></svg>',label:e("Insert table"),tooltip:!0}),o.on("change:isOpen",function(){r||(r=new ob(i),o.panelView.children.add(r),r.delegate("execute").to(o),o.buttonView.on("open",function(){r.rows=0,r.columns=0;}),o.on("execute",function(){t.execute("insertTable",{rows:r.rows,columns:r.columns}),t.editing.view.focus();}));}),o;}),t.ui.componentFactory.add("tableColumn",function(t){var n=[{type:"switchbutton",model:{commandName:"setTableColumnHeader",label:e("Header column"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:i?"insertTableColumnLeft":"insertTableColumnRight",label:e("Insert column left")}},{type:"button",model:{commandName:i?"insertTableColumnRight":"insertTableColumnLeft",label:e("Insert column right")}},{type:"button",model:{commandName:"removeTableColumn",label:e("Delete column")}},{type:"button",model:{commandName:"selectTableColumn",label:e("Select column")}}];return _this266._prepareDropdown(e("Column"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M18 7v1H2V7h16zm0 5v1H2v-1h16z" opacity=".6"/><path d="M14 1v18a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1zm-2 1H8v4h4V2zm0 6H8v4h4V8zm0 6H8v4h4v-4z"/></svg>',n,t);}),t.ui.componentFactory.add("tableRow",function(t){var i=[{type:"switchbutton",model:{commandName:"setTableRowHeader",label:e("Header row"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:"insertTableRowAbove",label:e("Insert row above")}},{type:"button",model:{commandName:"insertTableRowBelow",label:e("Insert row below")}},{type:"button",model:{commandName:"removeTableRow",label:e("Delete row")}},{type:"button",model:{commandName:"selectTableRow",label:e("Select row")}}];return _this266._prepareDropdown(e("Row"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v16h-1V2z" opacity=".6"/><path d="M1 6h18a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm1 2v4h4V8H2zm6 0v4h4V8H8zm6 0v4h4V8h-4z"/></svg>',i,t);}),t.ui.componentFactory.add("mergeTableCells",function(t){var n=[{type:"button",model:{commandName:"mergeTableCellUp",label:e("Merge cell up")}},{type:"button",model:{commandName:i?"mergeTableCellRight":"mergeTableCellLeft",label:e("Merge cell right")}},{type:"button",model:{commandName:"mergeTableCellDown",label:e("Merge cell down")}},{type:"button",model:{commandName:i?"mergeTableCellLeft":"mergeTableCellRight",label:e("Merge cell left")}},{type:"separator"},{type:"button",model:{commandName:"splitTableCellVertically",label:e("Split cell vertically")}},{type:"button",model:{commandName:"splitTableCellHorizontally",label:e("Split cell horizontally")}}];return _this266._prepareMergeSplitButtonDropdown(e("Merge cells"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v7h-1V2zm6 5v1H2V7h16zM8 12v1H2v-1h6z" opacity=".6"/><path d="M7 7h12a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1zm1 2v9h10V9H8z"/></svg>',n,t);});}},{key:"_prepareDropdown",value:function _prepareDropdown(t,e,i,n){var o=this.editor,r=ad(n),s=this._fillDropdownWithListOptions(r,i);return r.buttonView.set({label:t,icon:e,tooltip:!0}),r.bind("isEnabled").toMany(s,"isEnabled",function(){for(var _len22=arguments.length,t=new Array(_len22),_key22=0;_key22<_len22;_key22++){t[_key22]=arguments[_key22];}return t.some(function(t){return t;});}),this.listenTo(r,"execute",function(t){o.execute(t.source.commandName),o.editing.view.focus();}),r;}},{key:"_prepareMergeSplitButtonDropdown",value:function _prepareMergeSplitButtonDropdown(t,e,i,n){var o=this.editor,r=ad(n,nb);return this._fillDropdownWithListOptions(r,i),r.buttonView.set({label:t,icon:e,tooltip:!0,isEnabled:!0}),this.listenTo(r.buttonView,"execute",function(){o.execute("mergeTableCells"),o.editing.view.focus();}),this.listenTo(r,"execute",function(t){o.execute(t.source.commandName),o.editing.view.focus();}),r;}},{key:"_fillDropdownWithListOptions",value:function _fillDropdownWithListOptions(t,e){var i=this.editor,n=[],o=new xi();var _iterator438=_createForOfIteratorHelper(e),_step438;try{for(_iterator438.s();!(_step438=_iterator438.n()).done;){var _t343=_step438.value;ab(_t343,i,n,o);}}catch(err){_iterator438.e(err);}finally{_iterator438.f();}return ld(t,o,i.ui.componentFactory),n;}}]);return sb;}(pd);function ab(t,e,i,n){var o=t.model=new Im(t.model),_t$model2=t.model,r=_t$model2.commandName,s=_t$model2.bindIsOn;if("button"===t.type||"switchbutton"===t.type){var _t344=e.commands.get(r);i.push(_t344),o.set({commandName:r}),o.bind("isEnabled").to(_t344),s&&o.bind("isOn").to(_t344,"value");}o.set({withText:!0}),n.add(t);}i(95);var cb=/*#__PURE__*/function(_pd60){_inherits(cb,_pd60);var _super182=_createSuper(cb);function cb(){_classCallCheck(this,cb);return _super182.apply(this,arguments);}_createClass(cb,[{key:"init",value:function init(){var _this267=this;var t=this.editor.model;this.listenTo(t,"deleteContent",function(t,e){return _this267._handleDeleteContent(t,e);},{priority:"high"}),this._defineSelectionConverter(),this._enablePluginDisabling();}},{key:"getSelectedTableCells",value:function getSelectedTableCells(){var t=op(this.editor.model.document.selection);return 0==t.length?null:t;}},{key:"getSelectionAsFragment",value:function getSelectionAsFragment(){var _this268=this;var t=this.getSelectedTableCells();return t?this.editor.model.change(function(e){var i=e.createDocumentFragment(),n=_this268.editor.plugins.get("TableUtils"),_cp3=cp(t),o=_cp3.first,r=_cp3.last,_ap2=ap(t),s=_ap2.first,a=_ap2.last,c=t[0].findAncestor("table");var l=a,d=r;if(lp(t,n)){var _t345={firstColumn:o,lastColumn:r,firstRow:s,lastRow:a};l=Cp(c,_t345),d=Sp(c,_t345);}var u=bp(c,{startRow:s,startColumn:o,endRow:l,endColumn:d},e);return e.insert(u,i,0),i;}):null;}},{key:"setCellSelection",value:function setCellSelection(t,e){var i=this._getCellsToSelect(t,e);this.editor.model.change(function(t){t.setSelection(i.cells.map(function(e){return t.createRangeOn(e);}),{backward:i.backward});});}},{key:"getFocusCell",value:function getFocusCell(){var t=_toConsumableArray(this.editor.model.document.selection.getRanges()).pop().getContainedElement();return t&&t.is("element","tableCell")?t:null;}},{key:"getAnchorCell",value:function getAnchorCell(){var t=_d(this.editor.model.document.selection.getRanges()).getContainedElement();return t&&t.is("element","tableCell")?t:null;}},{key:"_defineSelectionConverter",value:function _defineSelectionConverter(){var _this269=this;var t=this.editor,e=new Set();t.conversion["for"]("editingDowncast").add(function(t){return t.on("selection",function(t,i,n){var o=n.writer;!function(t){var _iterator439=_createForOfIteratorHelper(e),_step439;try{for(_iterator439.s();!(_step439=_iterator439.n()).done;){var _i315=_step439.value;t.removeClass("ck-editor__editable_selected",_i315);}}catch(err){_iterator439.e(err);}finally{_iterator439.f();}e.clear();}(o);var r=_this269.getSelectedTableCells();if(!r)return;var _iterator440=_createForOfIteratorHelper(r),_step440;try{for(_iterator440.s();!(_step440=_iterator440.n()).done;){var _t346=_step440.value;var _i316=n.mapper.toViewElement(_t346);o.addClass("ck-editor__editable_selected",_i316),e.add(_i316);}}catch(err){_iterator440.e(err);}finally{_iterator440.f();}var s=n.mapper.toViewElement(r[r.length-1]);o.setSelection(s,0);},{priority:"lowest"});});}},{key:"_enablePluginDisabling",value:function _enablePluginDisabling(){var _this270=this;var t=this.editor;this.on("change:isEnabled",function(){if(!_this270.isEnabled){var _e302=_this270.getSelectedTableCells();if(!_e302)return;t.model.change(function(i){var n=i.createPositionAt(_e302[0],0),o=t.model.schema.getNearestSelectionRange(n);i.setSelection(o);});}});}},{key:"_handleDeleteContent",value:function _handleDeleteContent(t,e){var _e303=_slicedToArray(e,2),i=_e303[0],n=_e303[1],o=this.editor.model,r=!n||"backward"==n.direction,s=op(i);s.length&&(t.stop(),o.change(function(t){var e=s[r?s.length-1:0];o.change(function(t){var _iterator441=_createForOfIteratorHelper(s),_step441;try{for(_iterator441.s();!(_step441=_iterator441.n()).done;){var _e304=_step441.value;o.deleteContent(t.createSelection(_e304,"in"));}}catch(err){_iterator441.e(err);}finally{_iterator441.f();}});var n=o.schema.getNearestSelectionRange(t.createPositionAt(e,0));i.is("documentSelection")?t.setSelection(n):i.setTo(n);}));}},{key:"_getCellsToSelect",value:function _getCellsToSelect(t,e){var i=this.editor.plugins.get("TableUtils"),n=i.getCellLocation(t),o=i.getCellLocation(e),r=Math.min(n.row,o.row),s=Math.max(n.row,o.row),a=Math.min(n.column,o.column),c=Math.max(n.column,o.column),l=new Array(s-r+1).fill(null).map(function(){return[];}),d={startRow:r,endRow:s,startColumn:a,endColumn:c};var _iterator442=_createForOfIteratorHelper(new qg(t.findAncestor("table"),d)),_step442;try{for(_iterator442.s();!(_step442=_iterator442.n()).done;){var _step442$value=_step442.value,_e305=_step442$value.row,_i317=_step442$value.cell;l[_e305-r].push(_i317);}}catch(err){_iterator442.e(err);}finally{_iterator442.f();}var u=o.row<n.row,h=o.column<n.column;return u&&l.reverse(),h&&l.forEach(function(t){return t.reverse();}),{cells:l.flat(),backward:u||h};}}],[{key:"pluginName",get:function get(){return"TableSelection";}},{key:"requires",get:function get(){return[Rp];}}]);return cb;}(pd);var lb=/*#__PURE__*/function(_pd61){_inherits(lb,_pd61);var _super183=_createSuper(lb);function lb(){_classCallCheck(this,lb);return _super183.apply(this,arguments);}_createClass(lb,[{key:"init",value:function init(){var _this271=this;var t=this.editor,e=t.editing.view.document;this.listenTo(e,"copy",function(t,e){return _this271._onCopyCut(t,e);}),this.listenTo(e,"cut",function(t,e){return _this271._onCopyCut(t,e);}),this.listenTo(t.model,"insertContent",function(t,e){return _this271._onInsertContent.apply(_this271,[t].concat(_toConsumableArray(e)));},{priority:"high"}),this.decorate("_replaceTableSlotCell");}},{key:"_onCopyCut",value:function _onCopyCut(t,e){var i=this.editor.plugins.get(cb);if(!i.getSelectedTableCells())return;if("cut"==t.name&&this.editor.isReadOnly)return;e.preventDefault(),t.stop();var n=this.editor.data,o=this.editor.editing.view.document,r=n.toView(i.getSelectionAsFragment());o.fire("clipboardOutput",{dataTransfer:e.dataTransfer,content:r,method:t.name});}},{key:"_onInsertContent",value:function _onInsertContent(t,e,i){var _this272=this;if(i&&!i.is("documentSelection"))return;var n=this.editor.model,o=this.editor.plugins.get(Rp);var r=function(t,e){if(!t.is("documentFragment")&&!t.is("element"))return null;if(t.is("element","table"))return t;if(1==t.childCount&&t.getChild(0).is("element","table"))return t.getChild(0);var i=e.createRangeIn(t);var _iterator443=_createForOfIteratorHelper(i.getItems()),_step443;try{for(_iterator443.s();!(_step443=_iterator443.n()).done;){var _t347=_step443.value;if(_t347.is("element","table")){var _n194=e.createRange(i.start,e.createPositionBefore(_t347));if(e.hasContent(_n194,{ignoreWhitespaces:!0}))return null;var _o121=e.createRange(e.createPositionAfter(_t347),i.end);return e.hasContent(_o121,{ignoreWhitespaces:!0})?null:_t347;}}}catch(err){_iterator443.e(err);}finally{_iterator443.f();}return null;}(e,n);if(!r)return;var s=sp(n.document.selection);s.length?(t.stop(),n.change(function(t){var e={width:o.getColumns(r),height:o.getRows(r)},i=function(t,e,i,n){var o=t[0].findAncestor("table"),r=cp(t),s=ap(t),a={firstColumn:r.first,lastColumn:r.last,firstRow:s.first,lastRow:s.last},c=1===t.length;c&&(a.lastRow+=e.height-1,a.lastColumn+=e.width-1,function(t,e,i,n){var o=n.getColumns(t),r=n.getRows(t);i>o&&n.insertColumns(t,{at:o,columns:i-o});e>r&&n.insertRows(t,{at:r,rows:e-r});}(o,a.lastRow+1,a.lastColumn+1,n));c||!lp(t,n)?function(t,e,i){var n=e.firstRow,o=e.lastRow,r=e.firstColumn,s=e.lastColumn,a={first:n,last:o},c={first:r,last:s};ub(t,r,a,i),ub(t,s+1,a,i),db(t,n,c,i),db(t,o+1,c,i,n);}(o,a,i):(a.lastRow=Cp(o,a),a.lastColumn=Sp(o,a));return a;}(s,e,t,o),n=i.lastRow-i.firstRow+1,a=i.lastColumn-i.firstColumn+1,c={startRow:0,startColumn:0,endRow:Math.min(n,e.height)-1,endColumn:Math.min(a,e.width)-1};r=bp(r,c,t);var l=s[0].findAncestor("table"),d=_this272._replaceSelectedCellsWithPasted(r,e,l,i,t);if(_this272.editor.plugins.get("TableSelection").isEnabled){var _e306=dp(d.map(function(e){return t.createRangeOn(e);}));t.setSelection(_e306);}else t.setSelection(d[0],0);})):Tp(r,o);}},{key:"_replaceSelectedCellsWithPasted",value:function _replaceSelectedCellsWithPasted(t,e,i,n,o){var r=e.width,s=e.height,a=function(t,e,i){var n=new Array(i).fill(null).map(function(){return new Array(e).fill(null);});var _iterator444=_createForOfIteratorHelper(new qg(t)),_step444;try{for(_iterator444.s();!(_step444=_iterator444.n()).done;){var _step444$value=_step444.value,_e307=_step444$value.column,_i318=_step444$value.row,_o122=_step444$value.cell;n[_i318][_e307]=_o122;}}catch(err){_iterator444.e(err);}finally{_iterator444.f();}return n;}(t,r,s),c=_toConsumableArray(new qg(i,{startRow:n.firstRow,endRow:n.lastRow,startColumn:n.firstColumn,endColumn:n.lastColumn,includeAllSlots:!0})),l=[];var d;for(var _i319=0,_c20=c;_i319<_c20.length;_i319++){var _t348=_c20[_i319];var _e308=_t348.row,_i320=_t348.column;_i320===n.firstColumn&&(d=_t348.getPositionBefore());var _c21=_e308-n.firstRow,_u7=_i320-n.firstColumn,_h5=a[_c21%s][_u7%r],_f3=_h5?o.cloneElement(_h5):null,_m2=this._replaceTableSlotCell(_t348,_f3,d,o);_m2&&(yp(_m2,_e308,_i320,n.lastRow,n.lastColumn,o),l.push(_m2),d=o.createPositionAfter(_m2));}var u=parseInt(i.getAttribute("headingRows")||0),h=parseInt(i.getAttribute("headingColumns")||0),f=n.firstRow<u&&u<=n.lastRow,m=n.firstColumn<h&&h<=n.lastColumn;if(f){var _t349=db(i,u,{first:n.firstColumn,last:n.lastColumn},o,n.firstRow);l.push.apply(l,_toConsumableArray(_t349));}if(m){var _t350=ub(i,h,{first:n.firstRow,last:n.lastRow},o);l.push.apply(l,_toConsumableArray(_t350));}return l;}},{key:"_replaceTableSlotCell",value:function _replaceTableSlotCell(t,e,i,n){var o=t.cell,r=t.isAnchor;return r&&n.remove(o),e?(n.insert(e,i),e):null;}}],[{key:"pluginName",get:function get(){return"TableClipboard";}},{key:"requires",get:function get(){return[cb,Rp];}}]);return lb;}(pd);function db(t,e,i,n){var o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;if(e<1)return;return wp(t,e,o).filter(function(_ref74){var t=_ref74.column,e=_ref74.cellWidth;return hb(t,e,i);}).map(function(_ref75){var t=_ref75.cell;return kp(t,e,n);});}function ub(t,e,i,n){if(e<1)return;return _p(t,e).filter(function(_ref76){var t=_ref76.row,e=_ref76.cellHeight;return hb(t,e,i);}).map(function(_ref77){var t=_ref77.cell,i=_ref77.column;return vp(t,i,e,n);});}function hb(t,e,i){var n=t+e-1,o=i.first,r=i.last;return t>=o&&t<=r||t<o&&n>=o;}var fb=/*#__PURE__*/function(_pd62){_inherits(fb,_pd62);var _super184=_createSuper(fb);function fb(){_classCallCheck(this,fb);return _super184.apply(this,arguments);}_createClass(fb,[{key:"init",value:function init(){var _this273=this;var t=this.editor.editing.view.document;this.editor.keystrokes.set("Tab",function(){return _this273._handleTabOnSelectedTable.apply(_this273,arguments);},{priority:"low"}),this.editor.keystrokes.set("Tab",this._getTabHandler(!0),{priority:"low"}),this.editor.keystrokes.set("Shift+Tab",this._getTabHandler(!1),{priority:"low"}),this.listenTo(t,"keydown",function(){return _this273._onKeydown.apply(_this273,arguments);},{priority:di.get("high")-10});}},{key:"_handleTabOnSelectedTable",value:function _handleTabOnSelectedTable(t,e){var i=this.editor,n=i.model.document.selection.getSelectedElement();n&&n.is("element","table")&&(e(),i.model.change(function(t){t.setSelection(t.createRangeIn(n.getChild(0).getChild(0)));}));}},{key:"_getTabHandler",value:function _getTabHandler(t){var _this274=this;var e=this.editor;return function(i,n){var o=rp(e.model.document.selection)[0];if(o||(o=_this274.editor.plugins.get("TableSelection").getFocusCell()),!o)return;n();var r=o.parent,s=r.parent,a=s.getChildIndex(r),c=r.getChildIndex(o),l=0===c;if(!t&&l&&0===a)return void e.model.change(function(t){t.setSelection(t.createRangeOn(s));});var d=c===r.childCount-1,u=a===s.childCount-1;if(t&&u&&d&&(e.execute("insertTableRowBelow"),a===s.childCount-1))return void e.model.change(function(t){t.setSelection(t.createRangeOn(s));});var h;if(t&&d){var _t351=s.getChild(a+1);h=_t351.getChild(0);}else if(!t&&l){var _t352=s.getChild(a-1);h=_t352.getChild(_t352.childCount-1);}else h=r.getChild(c+(t?1:-1));e.model.change(function(t){t.setSelection(t.createRangeIn(h));});};}},{key:"_onKeydown",value:function _onKeydown(t,e){var i=this.editor,n=e.keyCode;if(!vo(n))return;var o=yo(n,i.locale.contentLanguageDirection);this._handleArrowKeys(o,e.shiftKey)&&(e.preventDefault(),e.stopPropagation(),t.stop());}},{key:"_handleArrowKeys",value:function _handleArrowKeys(t,e){var i=this.editor.model.document.selection,n=["right","down"].includes(t),o=op(i);if(o.length){var _i321;return _i321=e?this.editor.plugins.get("TableSelection").getFocusCell():n?o[o.length-1]:o[0],this._navigateFromCellInDirection(_i321,t,e),!0;}var r=i.focus.findAncestor("tableCell");return!!r&&!(e&&!i.isCollapsed&&i.isBackward==n)&&!!this._isSelectionAtCellEdge(i,r,n)&&(this._navigateFromCellInDirection(r,t,e),!0);}},{key:"_isSelectionAtCellEdge",value:function _isSelectionAtCellEdge(t,e,i){var n=this.editor.model,o=this.editor.model.schema,r=i?t.getLastPosition():t.getFirstPosition();if(!o.getLimitElement(r).is("element","tableCell")){return n.createPositionAt(e,i?"end":0).isTouching(r);}var s=n.createSelection(r);return n.modifySelection(s,{direction:i?"forward":"backward"}),r.isEqual(s.focus);}},{key:"_navigateFromCellInDirection",value:function _navigateFromCellInDirection(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:!1;var n=this.editor.model,o=t.findAncestor("table"),r=_toConsumableArray(new qg(o,{includeAllSlots:!0})),_r67=r[r.length-1],s=_r67.row,a=_r67.column,c=r.find(function(_ref78){var e=_ref78.cell;return e==t;});var l=c.row,d=c.column;switch(e){case"left":d--;break;case"up":l--;break;case"right":d+=c.cellWidth;break;case"down":l+=c.cellHeight;}if(l<0||l>s||d<0&&l<=0||d>a&&l>=s)return void n.change(function(t){t.setSelection(t.createRangeOn(o));});d<0?(d=i?0:a,l--):d>a&&(d=i?a:0,l++);var u=r.find(function(t){return t.row==l&&t.column==d;}).cell,h=["right","down"].includes(e),f=this.editor.plugins.get("TableSelection");if(i&&f.isEnabled){var _e309=f.getAnchorCell()||t;f.setCellSelection(_e309,u);}else{var _t353=n.createPositionAt(u,h?0:"end");n.change(function(e){e.setSelection(_t353);});}}}],[{key:"pluginName",get:function get(){return"TableKeyboard";}},{key:"requires",get:function get(){return[cb];}}]);return fb;}(pd);var mb=/*#__PURE__*/function(_Vr8){_inherits(mb,_Vr8);var _super185=_createSuper(mb);function mb(t){var _this275;_classCallCheck(this,mb);_this275=_super185.call(this,t),_this275.domEventType=["mousemove","mouseup","mouseleave"];return _this275;}_createClass(mb,[{key:"onDomEvent",value:function onDomEvent(t){this.fire(t.type,t);}}]);return mb;}(Vr);var gb=/*#__PURE__*/function(_pd63){_inherits(gb,_pd63);var _super186=_createSuper(gb);function gb(){_classCallCheck(this,gb);return _super186.apply(this,arguments);}_createClass(gb,[{key:"init",value:function init(){this.editor.editing.view.addObserver(mb),this._enableShiftClickSelection(),this._enableMouseDragSelection();}},{key:"_enableShiftClickSelection",value:function _enableShiftClickSelection(){var _this276=this;var t=this.editor;var e=!1;var i=t.plugins.get(cb);this.listenTo(t.editing.view.document,"mousedown",function(n,o){if(!_this276.isEnabled||!i.isEnabled)return;if(!o.domEvent.shiftKey)return;var r=i.getAnchorCell()||rp(t.model.document.selection)[0];if(!r)return;var s=_this276._getModelTableCellFromDomEvent(o);s&&pb(r,s)&&(e=!0,i.setCellSelection(r,s),o.preventDefault());}),this.listenTo(t.editing.view.document,"mouseup",function(){e=!1;}),this.listenTo(t.editing.view.document,"selectionChange",function(t){e&&t.stop();},{priority:"highest"});}},{key:"_enableMouseDragSelection",value:function _enableMouseDragSelection(){var _this277=this;var t=this.editor;var e,i,n=!1,o=!1;var r=t.plugins.get(cb);this.listenTo(t.editing.view.document,"mousedown",function(t,i){_this277.isEnabled&&r.isEnabled&&(i.domEvent.shiftKey||i.domEvent.ctrlKey||i.domEvent.altKey||(e=_this277._getModelTableCellFromDomEvent(i)));}),this.listenTo(t.editing.view.document,"mousemove",function(t,s){if(!s.domEvent.buttons)return;if(!e)return;var a=_this277._getModelTableCellFromDomEvent(s);a&&pb(e,a)&&(i=a,n||i==e||(n=!0)),n&&(o=!0,r.setCellSelection(e,i),s.preventDefault());}),this.listenTo(t.editing.view.document,"mouseup",function(){n=!1,o=!1,e=null,i=null;}),this.listenTo(t.editing.view.document,"selectionChange",function(t){o&&t.stop();},{priority:"highest"});}},{key:"_getModelTableCellFromDomEvent",value:function _getModelTableCellFromDomEvent(t){var e=t.target,i=this.editor.editing.view.createPositionAt(e,0);return this.editor.editing.mapper.toModelPosition(i).parent.findAncestor("tableCell",{includeSelf:!0});}}],[{key:"pluginName",get:function get(){return"TableMouse";}},{key:"requires",get:function get(){return[cb];}}]);return gb;}(pd);function pb(t,e){return t.parent.parent==e.parent.parent;}i(97);function bb(t){var e=t.getSelectedElement();return e&&kb(e)?e:null;}function wb(t){var e=function(t,e){var i=e.parent;for(;i;){if(i.name===t)return i;i=i.parent;}}("table",t.getFirstPosition());return e&&kb(e.parent)?e.parent:null;}function kb(t){return!!t.getCustomProperty("table")&&ph(t);}var _b=/[\\^$.*+?()[\]{}|]/g,vb=RegExp(_b.source);var yb=function yb(t){return(t=Zi(t))&&vb.test(t)?t.replace(_b,"\\$&"):t;};var xb={copyright:{from:"(c)",to:"©"},registeredTrademark:{from:"(r)",to:"®"},trademark:{from:"(tm)",to:"™"},oneHalf:{from:"1/2",to:"½"},oneThird:{from:"1/3",to:"⅓"},twoThirds:{from:"2/3",to:"⅔"},oneForth:{from:"1/4",to:"¼"},threeQuarters:{from:"3/4",to:"¾"},lessThanOrEqual:{from:"<=",to:"≤"},greaterThanOrEqual:{from:">=",to:"≥"},notEqual:{from:"!=",to:"≠"},arrowLeft:{from:"<-",to:"←"},arrowRight:{from:"->",to:"→"},horizontalEllipsis:{from:"...",to:"…"},enDash:{from:/(^| )(--)( )$/,to:[null,"–",null]},emDash:{from:/(^| )(---)( )$/,to:[null,"—",null]},quotesPrimary:{from:Pb('"'),to:[null,"'",null,"'"]},quotesSecondary:{from:Pb("'"),to:[null,"‘",null,"’"]},quotesPrimaryEnGb:{from:Pb("'"),to:[null,"‘",null,"’"]},quotesSecondaryEnGb:{from:Pb('"'),to:[null,"“",null,"'"]},quotesPrimaryPl:{from:Pb('"'),to:[null,"„",null,"'"]},quotesSecondaryPl:{from:Pb("'"),to:[null,"‚",null,"’"]}},Ab={symbols:["copyright","registeredTrademark","trademark"],mathematical:["oneHalf","oneThird","twoThirds","oneForth","threeQuarters","lessThanOrEqual","greaterThanOrEqual","notEqual","arrowLeft","arrowRight"],typography:["horizontalEllipsis","enDash","emDash"],quotes:["quotesPrimary","quotesSecondary"]},Tb=["symbols","mathematical","typography","quotes"];function Cb(t){return"string"==typeof t?new RegExp("(".concat(yb(t),")$")):t;}function Sb(t){return"string"==typeof t?function(){return[t];}:t instanceof Array?function(){return t;}:t;}function Eb(t){return(t.textNode?t.textNode:t.nodeAfter).getAttributes();}function Pb(t){return new RegExp("(^|\\s)(".concat(t,")([^").concat(t,"]*)(").concat(t,")$"));}var Mb=/*#__PURE__*/function(_wd34){_inherits(Mb,_wd34);var _super187=_createSuper(Mb);function Mb(t,e){var _this278;_classCallCheck(this,Mb);_this278=_super187.call(this,t),_this278.attributeKey=e;return _this278;}_createClass(Mb,[{key:"refresh",value:function refresh(){var t=this.editor.model,e=t.document;this.value=e.selection.getAttribute(this.attributeKey),this.isEnabled=t.schema.checkAttributeInSelection(e.selection,this.attributeKey);}},{key:"execute",value:function execute(){var _this279=this;var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=this.editor.model,i=e.document.selection,n=t.value;e.change(function(t){if(i.isCollapsed)n?t.setSelectionAttribute(_this279.attributeKey,n):t.removeSelectionAttribute(_this279.attributeKey);else{var _o123=e.schema.getValidRanges(i.getRanges(),_this279.attributeKey);var _iterator445=_createForOfIteratorHelper(_o123),_step445;try{for(_iterator445.s();!(_step445=_iterator445.n()).done;){var _e310=_step445.value;n?t.setAttribute(_this279.attributeKey,n,_e310):t.removeAttribute(_this279.attributeKey,_e310);}}catch(err){_iterator445.e(err);}finally{_iterator445.f();}}});}}]);return Mb;}(wd);i(99);var Ib=/*#__PURE__*/function(_xi2){_inherits(Ib,_xi2);var _super188=_createSuper(Ib);function Ib(t){var _this280;_classCallCheck(this,Ib);_this280=_super188.call(this,t),_this280.set("isEmpty",!0),_this280.on("change",function(){_this280.set("isEmpty",0===_this280.length);});return _this280;}_createClass(Ib,[{key:"add",value:function add(t,e){this.find(function(e){return e.color===t.color;})||_get(_getPrototypeOf(Ib.prototype),"add",this).call(this,t,e);}},{key:"hasColor",value:function hasColor(t){return!!this.find(function(e){return e.color===t;});}}]);return Ib;}(xi);yi(Ib,Un);i(101);function Nb(t,e){var i={model:{key:t,values:[]},view:{},upcastAlso:{}};var _iterator446=_createForOfIteratorHelper(e),_step446;try{for(_iterator446.s();!(_step446=_iterator446.n()).done;){var _t354=_step446.value;i.model.values.push(_t354.model),i.view[_t354.model]=_t354.view,_t354.upcastAlso&&(i.upcastAlso[_t354.model]=_t354.upcastAlso);}}catch(err){_iterator446.e(err);}finally{_iterator446.f();}return i;}var Ob=/*#__PURE__*/function(_Mb){_inherits(Ob,_Mb);var _super189=_createSuper(Ob);function Ob(t){_classCallCheck(this,Ob);return _super189.call(this,t,"fontFamily");}return Ob;}(Mb);function Rb(t){return t.map(Db).filter(function(t){return!!t;});}function Db(t){return"object"==_typeof(t)?t:"default"===t?{title:"Default",model:void 0}:"string"==typeof t?function(t){var e=t.replace(/"|'/g,"").split(","),i=e[0],n=e.map(Lb).join(", ");return{title:i,model:n,view:{name:"span",styles:{"font-family":n},priority:7}};}(t):void 0;}function Lb(t){return(t=t.trim()).indexOf(" ")>0&&(t="'".concat(t,"'")),t;}var zb=/*#__PURE__*/function(_pd64){_inherits(zb,_pd64);var _super190=_createSuper(zb);function zb(t){var _this281;_classCallCheck(this,zb);_this281=_super190.call(this,t),t.config.define("fontFamily",{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!1});return _this281;}_createClass(zb,[{key:"init",value:function init(){var t=this.editor;t.model.schema.extend("$text",{allowAttributes:"fontFamily"}),t.model.schema.setAttributeProperties("fontFamily",{isFormatting:!0,copyOnEnter:!0});var e=Nb("fontFamily",Rb(t.config.get("fontFamily.options")).filter(function(t){return t.model;}));t.config.get("fontFamily.supportAllValues")?this._prepareAnyValueConverters():t.conversion.attributeToElement(e),t.commands.add("fontFamily",new Ob(t));}},{key:"_prepareAnyValueConverters",value:function _prepareAnyValueConverters(){var t=this.editor;t.conversion["for"]("downcast").attributeToElement({model:"fontFamily",view:function view(t,_ref79){var e=_ref79.writer;return e.createAttributeElement("span",{style:"font-family:"+t},{priority:7});}}),t.conversion["for"]("upcast").attributeToAttribute({model:{key:"fontFamily",value:function value(t){return t.getStyle("font-family");}},view:{name:"span",styles:{"font-family":/.*/}}});}}],[{key:"pluginName",get:function get(){return"FontFamilyEditing";}}]);return zb;}(pd);var Vb=/*#__PURE__*/function(_pd65){_inherits(Vb,_pd65);var _super191=_createSuper(Vb);function Vb(){_classCallCheck(this,Vb);return _super191.apply(this,arguments);}_createClass(Vb,[{key:"init",value:function init(){var _this282=this;var t=this.editor,e=t.t,i=this._getLocalizedOptions(),n=t.commands.get("fontFamily");t.ui.componentFactory.add("fontFamily",function(o){var r=ad(o);return ld(r,function(t,e){var i=new xi();var _iterator447=_createForOfIteratorHelper(t),_step447;try{var _loop9=function _loop9(){var n=_step447.value;var t={type:"button",model:new Im({commandName:"fontFamily",commandParam:n.model,label:n.title,withText:!0})};t.model.bind("isOn").to(e,"value",function(t){return t===n.model||!(!t||!n.model)&&t.split(",")[0].replace(/'/g,"").toLowerCase()===n.model.toLowerCase();}),n.view&&n.view.styles&&t.model.set("labelStyle","font-family: "+n.view.styles["font-family"]),i.add(t);};for(_iterator447.s();!(_step447=_iterator447.n()).done;){_loop9();}}catch(err){_iterator447.e(err);}finally{_iterator447.f();}return i;}(i,n)),r.buttonView.set({label:e("Font Family"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.03 3h6.149a.75.75 0 1 1 0 1.5h-5.514L11.03 3zm1.27 3h4.879a.75.75 0 1 1 0 1.5h-4.244L12.3 6zm1.27 3h3.609a.75.75 0 1 1 0 1.5h-2.973L13.57 9zm-2.754 2.5L8.038 4.785 5.261 11.5h5.555zm.62 1.5H4.641l-1.666 4.028H1.312l5.789-14h1.875l5.789 14h-1.663L11.436 13z"/></svg>',tooltip:!0}),r.extendTemplate({attributes:{"class":"ck-font-family-dropdown"}}),r.bind("isEnabled").to(n),_this282.listenTo(r,"execute",function(e){t.execute(e.source.commandName,{value:e.source.commandParam}),t.editing.view.focus();}),r;});}},{key:"_getLocalizedOptions",value:function _getLocalizedOptions(){var t=this.editor,e=t.t;return Rb(t.config.get("fontFamily").options).map(function(t){return"Default"===t.title&&(t.title=e("Default")),t;});}}]);return Vb;}(pd);var jb=/*#__PURE__*/function(_wd35){_inherits(jb,_wd35);var _super192=_createSuper(jb);function jb(t,e){var _this283;_classCallCheck(this,jb);_this283=_super192.call(this,t),_this283.type=e;return _this283;}_createClass(jb,[{key:"refresh",value:function refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled();}},{key:"execute",value:function execute(){var _this284=this;var t=this.editor.model,e=t.document,i=Array.from(e.selection.getSelectedBlocks()).filter(function(e){return Fb(e,t.schema);}),n=!0===this.value;t.change(function(t){if(n){var _e311=i[i.length-1].nextSibling,_n195=Number.POSITIVE_INFINITY,_o124=[];for(;_e311&&"listItem"==_e311.name&&0!==_e311.getAttribute("listIndent");){var _t355=_e311.getAttribute("listIndent");_t355<_n195&&(_n195=_t355);var _i322=_t355-_n195;_o124.push({element:_e311,listIndent:_i322}),_e311=_e311.nextSibling;}_o124=_o124.reverse();var _iterator448=_createForOfIteratorHelper(_o124),_step448;try{for(_iterator448.s();!(_step448=_iterator448.n()).done;){var _e312=_step448.value;t.setAttribute("listIndent",_e312.listIndent,_e312.element);}}catch(err){_iterator448.e(err);}finally{_iterator448.f();}}if(!n){var _t356=Number.POSITIVE_INFINITY;var _iterator449=_createForOfIteratorHelper(i),_step449;try{for(_iterator449.s();!(_step449=_iterator449.n()).done;){var _e313=_step449.value;_e313.is("element","listItem")&&_e313.getAttribute("listIndent")<_t356&&(_t356=_e313.getAttribute("listIndent"));}}catch(err){_iterator449.e(err);}finally{_iterator449.f();}_t356=0===_t356?1:_t356,Bb(i,!0,_t356),Bb(i,!1,_t356);}var _iterator450=_createForOfIteratorHelper(i.reverse()),_step450;try{for(_iterator450.s();!(_step450=_iterator450.n()).done;){var _e314=_step450.value;n&&"listItem"==_e314.name?t.rename(_e314,"paragraph"):n||"listItem"==_e314.name?n||"listItem"!=_e314.name||_e314.getAttribute("listType")==_this284.type||t.setAttribute("listType",_this284.type,_e314):(t.setAttributes({listType:_this284.type,listIndent:0},_e314),t.rename(_e314,"listItem"));}}catch(err){_iterator450.e(err);}finally{_iterator450.f();}_this284.fire("_executeCleanup",i);});}},{key:"_getValue",value:function _getValue(){var t=_d(this.editor.model.document.selection.getSelectedBlocks());return!!t&&t.is("element","listItem")&&t.getAttribute("listType")==this.type;}},{key:"_checkEnabled",value:function _checkEnabled(){if(this.value)return!0;var t=this.editor.model.document.selection,e=this.editor.model.schema,i=_d(t.getSelectedBlocks());return!!i&&Fb(i,e);}}]);return jb;}(wd);function Bb(t,e,i){var n=e?t[0]:t[t.length-1];if(n.is("element","listItem")){var _o125=n[e?"previousSibling":"nextSibling"],_r68=n.getAttribute("listIndent");for(;_o125&&_o125.is("element","listItem")&&_o125.getAttribute("listIndent")>=i;){_r68>_o125.getAttribute("listIndent")&&(_r68=_o125.getAttribute("listIndent")),_o125.getAttribute("listIndent")==_r68&&t[e?"unshift":"push"](_o125),_o125=_o125[e?"previousSibling":"nextSibling"];}}}function Fb(t,e){return e.checkChild(t.parent,"listItem")&&!e.isObject(t);}var Hb=/*#__PURE__*/function(_wd36){_inherits(Hb,_wd36);var _super193=_createSuper(Hb);function Hb(t,e){var _this285;_classCallCheck(this,Hb);_this285=_super193.call(this,t),_this285._indentBy="forward"==e?1:-1;return _this285;}_createClass(Hb,[{key:"refresh",value:function refresh(){this.isEnabled=this._checkEnabled();}},{key:"execute",value:function execute(){var _this286=this;var t=this.editor.model,e=t.document;var i=Array.from(e.selection.getSelectedBlocks());t.change(function(t){var e=i[i.length-1];var n=e.nextSibling;for(;n&&"listItem"==n.name&&n.getAttribute("listIndent")>e.getAttribute("listIndent");){i.push(n),n=n.nextSibling;}_this286._indentBy<0&&(i=i.reverse());var _iterator451=_createForOfIteratorHelper(i),_step451;try{for(_iterator451.s();!(_step451=_iterator451.n()).done;){var _e315=_step451.value;var _i323=_e315.getAttribute("listIndent")+_this286._indentBy;_i323<0?t.rename(_e315,"paragraph"):t.setAttribute("listIndent",_i323,_e315);}}catch(err){_iterator451.e(err);}finally{_iterator451.f();}_this286.fire("_executeCleanup",i);});}},{key:"_checkEnabled",value:function _checkEnabled(){var t=_d(this.editor.model.document.selection.getSelectedBlocks());if(!t||!t.is("element","listItem"))return!1;if(this._indentBy>0){var _e316=t.getAttribute("listIndent"),_i324=t.getAttribute("listType");var _n196=t.previousSibling;for(;_n196&&_n196.is("element","listItem")&&_n196.getAttribute("listIndent")>=_e316;){if(_n196.getAttribute("listIndent")==_e316)return _n196.getAttribute("listType")==_i324;_n196=_n196.previousSibling;}return!1;}return!0;}}]);return Hb;}(wd);function Ub(t,e){var i=e.mapper,n=e.writer,o="numbered"==t.getAttribute("listType")?"ol":"ul",r=function(t){var e=t.createContainerElement("li");return e.getFillerOffset=Kb,e;}(n),s=n.createContainerElement(o,null);return n.insert(n.createPositionAt(s,0),r),i.bindElements(t,r),r;}function Wb(t,e,i,n){var o=e.parent,r=i.mapper,s=i.writer;var a=r.toViewPosition(n.createPositionBefore(t));var c=Yb(t.previousSibling,{sameIndent:!0,smallerIndent:!0,listIndent:t.getAttribute("listIndent")}),l=t.previousSibling;if(c&&c.getAttribute("listIndent")==t.getAttribute("listIndent")){var _t357=r.toViewElement(c);a=s.breakContainer(s.createPositionAfter(_t357));}else if(l&&"listItem"==l.name){a=r.toViewPosition(n.createPositionAt(l,"end"));var _t358=r.findMappedViewAncestor(a),_e317=function(t){var _iterator452=_createForOfIteratorHelper(t.getChildren()),_step452;try{for(_iterator452.s();!(_step452=_iterator452.n()).done;){var _e318=_step452.value;if("ul"==_e318.name||"ol"==_e318.name)return _e318;}}catch(err){_iterator452.e(err);}finally{_iterator452.f();}return null;}(_t358);a=_e317?s.createPositionBefore(_e317):s.createPositionAt(_t358,"end");}else a=r.toViewPosition(n.createPositionBefore(t));if(a=$b(a),s.insert(a,o),l&&"listItem"==l.name){var _t359=r.toViewElement(l),_i325=s.createRange(s.createPositionAt(_t359,0),a).getWalker({ignoreElementEnd:!0});var _iterator453=_createForOfIteratorHelper(_i325),_step453;try{for(_iterator453.s();!(_step453=_iterator453.n()).done;){var _t360=_step453.value;if(_t360.item.is("element","li")){var _n197=s.breakContainer(s.createPositionBefore(_t360.item)),_o126=_t360.item.parent,_r69=s.createPositionAt(e,"end");qb(s,_r69.nodeBefore,_r69.nodeAfter),s.move(s.createRangeOn(_o126),_r69),_i325.position=_n197;}}}catch(err){_iterator453.e(err);}finally{_iterator453.f();}}else{var _i326=o.nextSibling;if(_i326&&(_i326.is("element","ul")||_i326.is("element","ol"))){var _n198=null;var _iterator454=_createForOfIteratorHelper(_i326.getChildren()),_step454;try{for(_iterator454.s();!(_step454=_iterator454.n()).done;){var _e319=_step454.value;var _i327=r.toModelElement(_e319);if(!(_i327&&_i327.getAttribute("listIndent")>t.getAttribute("listIndent")))break;_n198=_e319;}}catch(err){_iterator454.e(err);}finally{_iterator454.f();}_n198&&(s.breakContainer(s.createPositionAfter(_n198)),s.move(s.createRangeOn(_n198.parent),s.createPositionAt(e,"end")));}}qb(s,o,o.nextSibling),qb(s,o.previousSibling,o);}function qb(t,e,i){return!e||!i||"ul"!=e.name&&"ol"!=e.name||e.name!=i.name||e.getAttribute("class")!==i.getAttribute("class")?null:t.mergeContainers(t.createPositionAfter(e));}function $b(t){return t.getLastMatchingPosition(function(t){return t.item.is("uiElement");});}function Yb(t,e){var i=!!e.sameIndent,n=!!e.smallerIndent,o=e.listIndent;var r=t;for(;r&&"listItem"==r.name;){var _t361=r.getAttribute("listIndent");if(i&&o==_t361||n&&o>_t361)return r;r="forward"===e.direction?r.nextSibling:r.previousSibling;}return null;}function Gb(t,e){var i=[],n=t.parent,o={ignoreElementEnd:!0,startPosition:t,shallow:!0,direction:e},r=n.getAttribute("listIndent"),s=_toConsumableArray(new Cs(o)).filter(function(t){return t.item.is("element");}).map(function(t){return t.item;});var _iterator455=_createForOfIteratorHelper(s),_step455;try{for(_iterator455.s();!(_step455=_iterator455.n()).done;){var _t362=_step455.value;if(!_t362.is("element","listItem"))break;if(_t362.getAttribute("listIndent")<r)break;if(!(_t362.getAttribute("listIndent")>r)){if(_t362.getAttribute("listType")!==n.getAttribute("listType"))break;if(_t362.getAttribute("listStyle")!==n.getAttribute("listStyle"))break;"backward"===e?i.unshift(_t362):i.push(_t362);}}}catch(err){_iterator455.e(err);}finally{_iterator455.f();}return i;}function Kb(){var t=!this.isEmpty&&("ul"==this.getChild(0).name||"ol"==this.getChild(0).name);return this.isEmpty||t?0:zn.call(this);}function Qb(t){return function(e,i,n){var o=n.consumable;if(!o.test(i.item,"insert")||!o.test(i.item,"attribute:listType")||!o.test(i.item,"attribute:listIndent"))return;o.consume(i.item,"insert"),o.consume(i.item,"attribute:listType"),o.consume(i.item,"attribute:listIndent");var r=i.item;Wb(r,Ub(r,n),n,t);};}function Jb(t,e,i){if(!i.consumable.consume(e.item,"attribute:listType"))return;var n=i.mapper.toViewElement(e.item),o=i.writer;o.breakContainer(o.createPositionBefore(n)),o.breakContainer(o.createPositionAfter(n));var r=n.parent,s="numbered"==e.attributeNewValue?"ol":"ul";o.rename(s,r);}function Zb(t,e,i){var n=i.mapper.toViewElement(e.item).parent,o=i.writer;qb(o,n,n.nextSibling),qb(o,n.previousSibling,n);var _iterator456=_createForOfIteratorHelper(e.item.getChildren()),_step456;try{for(_iterator456.s();!(_step456=_iterator456.n()).done;){var _t363=_step456.value;i.consumable.consume(_t363,"insert");}}catch(err){_iterator456.e(err);}finally{_iterator456.f();}}function Xb(t,e,i){if("listItem"!=e.item.name){var _t364=i.mapper.toViewPosition(e.range.start);var _n199=i.writer,_o127=[];for(;("ul"==_t364.parent.name||"ol"==_t364.parent.name)&&(_t364=_n199.breakContainer(_t364),"li"==_t364.parent.name);){var _e320=_t364,_i328=_n199.createPositionAt(_t364.parent,"end");if(!_e320.isEqual(_i328)){var _t365=_n199.remove(_n199.createRange(_e320,_i328));_o127.push(_t365);}_t364=_n199.createPositionAfter(_t364.parent);}if(_o127.length>0){for(var _e321=0;_e321<_o127.length;_e321++){var _i329=_t364.nodeBefore;if(_t364=_n199.insert(_t364,_o127[_e321]).end,_e321>0){var _e322=qb(_n199,_i329,_i329.nextSibling);_e322&&_e322.parent==_i329&&_t364.offset--;}}qb(_n199,_t364.nodeBefore,_t364.nodeAfter);}}}function tw(t,e,i){var n=i.mapper.toViewPosition(e.position),o=n.nodeBefore,r=n.nodeAfter;qb(i.writer,o,r);}function ew(t,e,i){if(i.consumable.consume(e.viewItem,{name:!0})){var _t366=i.writer,_n200=_t366.createElement("listItem"),_o128=function(t){var e=0,i=t.parent;for(;i;){if(i.is("element","li"))e++;else{var _t367=i.previousSibling;_t367&&_t367.is("element","li")&&e++;}i=i.parent;}return e;}(e.viewItem);_t366.setAttribute("listIndent",_o128,_n200);var _r70=e.viewItem.parent&&"ol"==e.viewItem.parent.name?"numbered":"bulleted";if(_t366.setAttribute("listType",_r70,_n200),!i.safeInsert(_n200,e.modelCursor))return;var _s44=function(t,e,i){var n=i.writer,o=i.schema;var r=n.createPositionAfter(t);var _iterator457=_createForOfIteratorHelper(e),_step457;try{for(_iterator457.s();!(_step457=_iterator457.n()).done;){var _s45=_step457.value;if("ul"==_s45.name||"ol"==_s45.name)r=i.convertItem(_s45,r).modelCursor;else{var _e323=i.convertItem(_s45,n.createPositionAt(t,"end")),_a29=_e323.modelRange.start.nodeAfter;_a29&&_a29.is("element")&&!o.checkChild(t,_a29.name)&&(t=_e323.modelCursor.parent.is("element","listItem")?_e323.modelCursor.parent:sw(_e323.modelCursor),r=n.createPositionAfter(t));}}}catch(err){_iterator457.e(err);}finally{_iterator457.f();}return r;}(_n200,e.viewItem.getChildren(),i);e.modelRange=_t366.createRange(e.modelCursor,_s44),i.updateConversionResult(_n200,e);}}function iw(t,e,i){if(i.consumable.test(e.viewItem,{name:!0})){var _t368=Array.from(e.viewItem.getChildren());for(var _i330=0,_t369=_t368;_i330<_t369.length;_i330++){var _e324=_t369[_i330];!(_e324.is("element","li")||cw(_e324))&&_e324._remove();}}}function nw(t,e,i){if(i.consumable.test(e.viewItem,{name:!0})){if(0===e.viewItem.childCount)return;var _t370=_toConsumableArray(e.viewItem.getChildren());var _i331=!1,_n201=!0;var _iterator458=_createForOfIteratorHelper(_t370),_step458;try{for(_iterator458.s();!(_step458=_iterator458.n()).done;){var _e325=_step458.value;_i331&&!cw(_e325)&&_e325._remove(),_e325.is("$text")?(_n201&&(_e325._data=_e325.data.replace(/^\s+/,"")),_e325.nextSibling&&!cw(_e325.nextSibling)||(_e325._data=_e325.data.replace(/\s+$/,""))):cw(_e325)&&(_i331=!0),_n201=!1;}}catch(err){_iterator458.e(err);}finally{_iterator458.f();}}}function ow(t){return function(e,i){if(i.isPhantom)return;var n=i.modelPosition.nodeBefore;if(n&&n.is("element","listItem")){var _e326=i.mapper.toViewElement(n),_o129=_e326.getAncestors().find(cw),_r71=t.createPositionAt(_e326,0).getWalker();var _iterator459=_createForOfIteratorHelper(_r71),_step459;try{for(_iterator459.s();!(_step459=_iterator459.n()).done;){var _t371=_step459.value;if("elementStart"==_t371.type&&_t371.item.is("element","li")){i.viewPosition=_t371.previousPosition;break;}if("elementEnd"==_t371.type&&_t371.item==_o129){i.viewPosition=_t371.nextPosition;break;}}}catch(err){_iterator459.e(err);}finally{_iterator459.f();}}};}function rw(t,_ref80){var _ref81=_slicedToArray(_ref80,2),e=_ref81[0],i=_ref81[1];var n,o=e.is("documentFragment")?e.getChild(0):e;if(n=i?this.createSelection(i):this.document.selection,o&&o.is("element","listItem")){var _t372=n.getFirstPosition();var _e327=null;if(_t372.parent.is("element","listItem")?_e327=_t372.parent:_t372.nodeBefore&&_t372.nodeBefore.is("element","listItem")&&(_e327=_t372.nodeBefore),_e327){var _t373=_e327.getAttribute("listIndent");if(_t373>0)for(;o&&o.is("element","listItem");){o._setAttribute("listIndent",o.getAttribute("listIndent")+_t373),o=o.nextSibling;}}}}function sw(t){var e=new Cs({startPosition:t});var i;do{i=e.next();}while(!i.value.item.is("element","listItem"));return i.value.item;}function aw(t,e,i,n,o,r){var s=Yb(e.nodeBefore,{sameIndent:!0,smallerIndent:!0,listIndent:t,foo:"b"}),a=o.mapper,c=o.writer,l=s?s.getAttribute("listIndent"):null;var d;if(s){if(l==t){var _t374=a.toViewElement(s).parent;d=c.createPositionAfter(_t374);}else{var _t375=r.createPositionAt(s,"end");d=a.toViewPosition(_t375);}}else d=i;d=$b(d);for(var _i332=0,_arr3=_toConsumableArray(n.getChildren());_i332<_arr3.length;_i332++){var _t376=_arr3[_i332];cw(_t376)&&(d=c.move(c.createRangeOn(_t376),d).end,qb(c,_t376,_t376.nextSibling),qb(c,_t376.previousSibling,_t376));}}function cw(t){return t.is("element","ol")||t.is("element","ul");}var lw=/*#__PURE__*/function(_pd66){_inherits(lw,_pd66);var _super194=_createSuper(lw);function lw(){_classCallCheck(this,lw);return _super194.apply(this,arguments);}_createClass(lw,[{key:"init",value:function init(){var _this287=this;var t=this.editor;t.model.schema.register("listItem",{inheritAllFrom:"$block",allowAttributes:["listType","listIndent"]});var e=t.data,i=t.editing;var n;t.model.document.registerPostFixer(function(e){return function(t,e){var i=t.document.differ.getChanges(),n=new Map();var o=!1;var _iterator460=_createForOfIteratorHelper(i),_step460;try{for(_iterator460.s();!(_step460=_iterator460.n()).done;){var _n203=_step460.value;if("insert"==_n203.type&&"listItem"==_n203.name)r(_n203.position);else if("insert"==_n203.type&&"listItem"!=_n203.name){if("$text"!=_n203.name){var _i333=_n203.position.nodeAfter;_i333.hasAttribute("listIndent")&&(e.removeAttribute("listIndent",_i333),o=!0),_i333.hasAttribute("listType")&&(e.removeAttribute("listType",_i333),o=!0),_i333.hasAttribute("listStyle")&&(e.removeAttribute("listStyle",_i333),o=!0);var _iterator462=_createForOfIteratorHelper(Array.from(t.createRangeIn(_i333)).filter(function(t){return t.item.is("element","listItem");})),_step462;try{for(_iterator462.s();!(_step462=_iterator462.n()).done;){var _e330=_step462.value;r(_e330.previousPosition);}}catch(err){_iterator462.e(err);}finally{_iterator462.f();}}r(_n203.position.getShiftedBy(_n203.length));}else"remove"==_n203.type&&"listItem"==_n203.name?r(_n203.position):("attribute"==_n203.type&&"listIndent"==_n203.attributeKey||"attribute"==_n203.type&&"listType"==_n203.attributeKey)&&r(_n203.range.start);}}catch(err){_iterator460.e(err);}finally{_iterator460.f();}var _iterator461=_createForOfIteratorHelper(n.values()),_step461;try{for(_iterator461.s();!(_step461=_iterator461.n()).done;){var _t378=_step461.value;s(_t378),a(_t378);}}catch(err){_iterator461.e(err);}finally{_iterator461.f();}return o;function r(t){var e=t.nodeBefore;if(e&&e.is("element","listItem")){var _t377=e;if(n.has(_t377))return;for(var _e328=_t377.previousSibling;_e328&&_e328.is("element","listItem");_e328=_t377.previousSibling){if(_t377=_e328,n.has(_t377))return;}n.set(e,_t377);}else{var _e329=t.nodeAfter;_e329&&_e329.is("element","listItem")&&n.set(_e329,_e329);}}function s(t){var i=0,n=null;for(;t&&t.is("element","listItem");){var _r72=t.getAttribute("listIndent");if(_r72>i){var _s46=void 0;null===n?(n=_r72-i,_s46=i):(n>_r72&&(n=_r72),_s46=_r72-n),e.setAttribute("listIndent",_s46,t),o=!0;}else n=null,i=t.getAttribute("listIndent")+1;t=t.nextSibling;}}function a(t){var i=[],n=null;for(;t&&t.is("element","listItem");){var _r73=t.getAttribute("listIndent");if(n&&n.getAttribute("listIndent")>_r73&&(i=i.slice(0,_r73+1)),0!=_r73)if(i[_r73]){var _n202=i[_r73];t.getAttribute("listType")!=_n202&&(e.setAttribute("listType",_n202,t),o=!0);}else i[_r73]=t.getAttribute("listType");n=t,t=t.nextSibling;}}}(t.model,e);}),i.mapper.registerViewToModelLength("li",dw),e.mapper.registerViewToModelLength("li",dw),i.mapper.on("modelToViewPosition",ow(i.view)),i.mapper.on("viewToModelPosition",(n=t.model,function(t,e){var i=e.viewPosition,o=i.parent,r=e.mapper;if("ul"==o.name||"ol"==o.name){if(i.isAtEnd){var _t379=r.toModelElement(i.nodeBefore),_o130=r.getModelLength(i.nodeBefore);e.modelPosition=n.createPositionBefore(_t379).getShiftedBy(_o130);}else{var _t380=r.toModelElement(i.nodeAfter);e.modelPosition=n.createPositionBefore(_t380);}t.stop();}else if("li"==o.name&&i.nodeBefore&&("ul"==i.nodeBefore.name||"ol"==i.nodeBefore.name)){var _s47=r.toModelElement(o);var _a30=1,_c22=i.nodeBefore;for(;_c22&&cw(_c22);){_a30+=r.getModelLength(_c22),_c22=_c22.previousSibling;}e.modelPosition=n.createPositionBefore(_s47).getShiftedBy(_a30),t.stop();}})),e.mapper.on("modelToViewPosition",ow(i.view)),t.conversion["for"]("editingDowncast").add(function(e){e.on("insert",Xb,{priority:"high"}),e.on("insert:listItem",Qb(t.model)),e.on("attribute:listType:listItem",Jb,{priority:"high"}),e.on("attribute:listType:listItem",Zb,{priority:"low"}),e.on("attribute:listIndent:listItem",function(t){return function(e,i,n){if(!n.consumable.consume(i.item,"attribute:listIndent"))return;var o=n.mapper.toViewElement(i.item),r=n.writer;r.breakContainer(r.createPositionBefore(o)),r.breakContainer(r.createPositionAfter(o));var s=o.parent,a=s.previousSibling,c=r.createRangeOn(s);r.remove(c),a&&a.nextSibling&&qb(r,a,a.nextSibling),aw(i.attributeOldValue+1,i.range.start,c.start,o,n,t),Wb(i.item,o,n,t);var _iterator463=_createForOfIteratorHelper(i.item.getChildren()),_step463;try{for(_iterator463.s();!(_step463=_iterator463.n()).done;){var _t381=_step463.value;n.consumable.consume(_t381,"insert");}}catch(err){_iterator463.e(err);}finally{_iterator463.f();}};}(t.model)),e.on("remove:listItem",function(t){return function(e,i,n){var o=n.mapper.toViewPosition(i.position).getLastMatchingPosition(function(t){return!t.item.is("element","li");}).nodeAfter,r=n.writer;r.breakContainer(r.createPositionBefore(o)),r.breakContainer(r.createPositionAfter(o));var s=o.parent,a=s.previousSibling,c=r.createRangeOn(s),l=r.remove(c);a&&a.nextSibling&&qb(r,a,a.nextSibling);aw(n.mapper.toModelElement(o).getAttribute("listIndent")+1,i.position,c.start,o,n,t);var _iterator464=_createForOfIteratorHelper(r.createRangeIn(l).getItems()),_step464;try{for(_iterator464.s();!(_step464=_iterator464.n()).done;){var _t382=_step464.value;n.mapper.unbindViewElement(_t382);}}catch(err){_iterator464.e(err);}finally{_iterator464.f();}e.stop();};}(t.model)),e.on("remove",tw,{priority:"low"});}),t.conversion["for"]("dataDowncast").add(function(e){e.on("insert",Xb,{priority:"high"}),e.on("insert:listItem",Qb(t.model));}),t.conversion["for"]("upcast").add(function(t){t.on("element:ul",iw,{priority:"high"}),t.on("element:ol",iw,{priority:"high"}),t.on("element:li",nw,{priority:"high"}),t.on("element:li",ew);}),t.model.on("insertContent",rw,{priority:"high"}),t.commands.add("numberedList",new jb(t,"numbered")),t.commands.add("bulletedList",new jb(t,"bulleted")),t.commands.add("indentList",new Hb(t,"forward")),t.commands.add("outdentList",new Hb(t,"backward"));var o=i.view.document;this.listenTo(o,"enter",function(t,e){var i=_this287.editor.model.document,n=i.selection.getLastPosition().parent;i.selection.isCollapsed&&"listItem"==n.name&&n.isEmpty&&(_this287.editor.execute("outdentList"),e.preventDefault(),t.stop());}),this.listenTo(o,"delete",function(t,e){if("backward"!==e.direction)return;var i=_this287.editor.model.document.selection;if(!i.isCollapsed)return;var n=i.getFirstPosition();if(!n.isAtStart)return;var o=n.parent;if("listItem"!==o.name)return;o.previousSibling&&"listItem"===o.previousSibling.name||(_this287.editor.execute("outdentList"),e.preventDefault(),t.stop());},{priority:di.high+10});var r=function r(t){return function(e,i){_this287.editor.commands.get(t).isEnabled&&(_this287.editor.execute(t),i());};};t.keystrokes.set("Tab",r("indentList")),t.keystrokes.set("Shift+Tab",r("outdentList"));}},{key:"afterInit",value:function afterInit(){var t=this.editor.commands,e=t.get("indent"),i=t.get("outdent");e&&e.registerChildCommand(t.get("indentList")),i&&i.registerChildCommand(t.get("outdentList"));}}],[{key:"pluginName",get:function get(){return"ListEditing";}},{key:"requires",get:function get(){return[Sm];}}]);return lw;}(pd);function dw(t){var e=1;var _iterator465=_createForOfIteratorHelper(t.getChildren()),_step465;try{for(_iterator465.s();!(_step465=_iterator465.n()).done;){var _i334=_step465.value;if("ul"==_i334.name||"ol"==_i334.name){var _iterator466=_createForOfIteratorHelper(_i334.getChildren()),_step466;try{for(_iterator466.s();!(_step466=_iterator466.n()).done;){var _t383=_step466.value;e+=dw(_t383);}}catch(err){_iterator466.e(err);}finally{_iterator466.f();}}}}catch(err){_iterator465.e(err);}finally{_iterator465.f();}return e;}var uw=/*#__PURE__*/function(_wd37){_inherits(uw,_wd37);var _super195=_createSuper(uw);function uw(t,e){var _this288;_classCallCheck(this,uw);_this288=_super195.call(this,t),_this288._defaultType=e;return _this288;}_createClass(uw,[{key:"refresh",value:function refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled();}},{key:"execute",value:function execute(){var _this289=this;var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=this.editor.model;var i=_toConsumableArray(e.document.selection.getSelectedBlocks()).filter(function(t){return t.is("element","listItem");}).map(function(t){var i=e.change(function(e){return e.createPositionAt(t,0);});return[].concat(_toConsumableArray(Gb(i,"backward")),_toConsumableArray(Gb(i,"forward")));}).flat();i=_toConsumableArray(new Set(i)),i.length&&e.change(function(e){var _iterator467=_createForOfIteratorHelper(i),_step467;try{for(_iterator467.s();!(_step467=_iterator467.n()).done;){var _n204=_step467.value;e.setAttribute("listStyle",t.type||_this289._defaultType,_n204);}}catch(err){_iterator467.e(err);}finally{_iterator467.f();}});}},{key:"_getValue",value:function _getValue(){var t=this.editor.model.document.selection.getFirstPosition().parent;return t&&t.is("element","listItem")?t.getAttribute("listStyle"):null;}},{key:"_checkEnabled",value:function _checkEnabled(){var t=this.editor,e=t.commands.get("numberedList"),i=t.commands.get("bulletedList");return e.isEnabled||i.isEnabled;}}]);return uw;}(wd);var hw=/*#__PURE__*/function(_pd67){_inherits(hw,_pd67);var _super196=_createSuper(hw);function hw(){_classCallCheck(this,hw);return _super196.apply(this,arguments);}_createClass(hw,[{key:"init",value:function init(){var t=this.editor,e=t.model;e.schema.extend("listItem",{allowAttributes:["listStyle"]}),t.commands.add("listStyle",new uw(t,"default")),this.listenTo(t.commands.get("indentList"),"_executeCleanup",function(t){return function(e,i){var n;var o=i[0],r=o.getAttribute("listIndent"),s=i.filter(function(t){return t.getAttribute("listIndent")===r;});if(o.previousSibling.getAttribute("listIndent")+1===r)n="default";else{var _t384=Yb(o.previousSibling,{sameIndent:!0,direction:"backward",listIndent:r});n=_t384.getAttribute("listStyle");}t.model.change(function(t){var _iterator468=_createForOfIteratorHelper(s),_step468;try{for(_iterator468.s();!(_step468=_iterator468.n()).done;){var _e331=_step468.value;t.setAttribute("listStyle",n,_e331);}}catch(err){_iterator468.e(err);}finally{_iterator468.f();}});};}(t)),this.listenTo(t.commands.get("outdentList"),"_executeCleanup",function(t){return function(e,i){if(!(i=i.reverse().filter(function(t){return t.is("element","listItem");})).length)return;var n=i[0].getAttribute("listIndent"),o=i[0].getAttribute("listType");var r=i[0].previousSibling;if(r.is("element","listItem"))for(;r.getAttribute("listIndent")!==n;){r=r.previousSibling;}else r=null;r||(r=i[i.length-1].nextSibling),r&&r.is("element","listItem")&&r.getAttribute("listType")===o&&t.model.change(function(t){var e=i.filter(function(t){return t.getAttribute("listIndent")===n;});var _iterator469=_createForOfIteratorHelper(e),_step469;try{for(_iterator469.s();!(_step469=_iterator469.n()).done;){var _i335=_step469.value;t.setAttribute("listStyle",r.getAttribute("listStyle"),_i335);}}catch(err){_iterator469.e(err);}finally{_iterator469.f();}});};}(t)),this.listenTo(t.commands.get("bulletedList"),"_executeCleanup",gw(t)),this.listenTo(t.commands.get("numberedList"),"_executeCleanup",gw(t)),e.document.registerPostFixer(function(t){return function(e){var i=!1;var n=pw(t.model.document.differ.getChanges()).filter(function(t){return"todo"!==t.getAttribute("listType");});if(!n.length)return i;var o=n[n.length-1].nextSibling;if((!o||!o.is("element","listItem"))&&(o=n[n.length-1].previousSibling,o)){var _t385=n[0].getAttribute("listIndent");for(;o.is("element","listItem")&&o.getAttribute("listIndent")!==_t385&&(o=o.previousSibling,o);){;}}var _iterator470=_createForOfIteratorHelper(n),_step470;try{for(_iterator470.s();!(_step470=_iterator470.n()).done;){var _t386=_step470.value;if(_t386.hasAttribute("listStyle")){var _n205=_t386.previousSibling;mw(_n205,_t386)&&(e.setAttribute("listStyle",_n205.getAttribute("listStyle"),_t386),i=!0);}else fw(o,_t386)?e.setAttribute("listStyle",o.getAttribute("listStyle"),_t386):e.setAttribute("listStyle","default",_t386),i=!0;}}catch(err){_iterator470.e(err);}finally{_iterator470.f();}return i;};}(t)),t.conversion["for"]("upcast").add(function(t){t.on("element:li",function(t,e,i){var n=e.viewItem.parent.getStyle("list-style-type")||"default",o=e.modelRange.start.nodeAfter||e.modelRange.end.nodeBefore;i.writer.setAttribute("listStyle",n,o);},{priority:"low"});}),t.conversion["for"]("downcast").add(function(t){t.on("attribute:listStyle:listItem",function(t,e,i){var n=i.writer,o=e.item,r=Yb(o.previousSibling,{sameIndent:!0,listIndent:o.getAttribute("listIndent"),direction:"backward"}),s=i.mapper.toViewElement(o);var a,c,l,d,u;a=o,(c=r)&&a.getAttribute("listType")===c.getAttribute("listType")&&a.getAttribute("listIndent")===c.getAttribute("listIndent")&&a.getAttribute("listStyle")===c.getAttribute("listStyle")||n.breakContainer(n.createPositionBefore(s)),l=n,d=e.attributeNewValue,u=s.parent,d&&"default"!==d?l.setStyle("list-style-type",d,u):l.removeStyle("list-style-type",u);},{priority:"low"});}),this._mergeListStyleAttributeWhileMergingLists();}},{key:"afterInit",value:function afterInit(){var t=this.editor;t.commands.get("todoList")&&t.model.document.registerPostFixer(function(t){return function(e){var i=pw(t.model.document.differ.getChanges()).filter(function(t){return"todo"===t.getAttribute("listType")&&t.hasAttribute("listStyle");});if(!i.length)return!1;var _iterator471=_createForOfIteratorHelper(i),_step471;try{for(_iterator471.s();!(_step471=_iterator471.n()).done;){var _t387=_step471.value;e.removeAttribute("listStyle",_t387);}}catch(err){_iterator471.e(err);}finally{_iterator471.f();}return!0;};}(t));}},{key:"_mergeListStyleAttributeWhileMergingLists",value:function _mergeListStyleAttributeWhileMergingLists(){var t=this.editor.model;var e;this.listenTo(t,"deleteContent",function(t,_ref82){var _ref83=_slicedToArray(_ref82,1),i=_ref83[0];var n=i.getFirstPosition(),o=i.getLastPosition();if(n.parent===o.parent)return;if(!n.parent.is("element","listItem"))return;var r=o.parent.nextSibling;if(!r||!r.is("element","listItem"))return;var s=Yb(n.parent,{sameIndent:!0,listIndent:r.getAttribute("listIndent")});s&&s.getAttribute("listType")===r.getAttribute("listType")&&(e=s);},{priority:"high"}),this.listenTo(t,"deleteContent",function(){e&&(t.change(function(t){var i=Yb(e.nextSibling,{sameIndent:!0,listIndent:e.getAttribute("listIndent"),direction:"forward"}),n=[i].concat(_toConsumableArray(Gb(t.createPositionAt(i,0),"forward")));var _iterator472=_createForOfIteratorHelper(n),_step472;try{for(_iterator472.s();!(_step472=_iterator472.n()).done;){var _i336=_step472.value;t.setAttribute("listStyle",e.getAttribute("listStyle"),_i336);}}catch(err){_iterator472.e(err);}finally{_iterator472.f();}}),e=null);},{priority:"low"});}}],[{key:"requires",get:function get(){return[lw];}},{key:"pluginName",get:function get(){return"ListStyleEditing";}}]);return hw;}(pd);function fw(t,e){if(!t)return!1;var i=t.getAttribute("listStyle");return!!i&&"default"!==i&&t.getAttribute("listType")===e.getAttribute("listType");}function mw(t,e){if(!t||!t.is("element","listItem"))return!1;if(e.getAttribute("listType")!==t.getAttribute("listType"))return!1;var i=t.getAttribute("listIndent");if(i<1||i!==e.getAttribute("listIndent"))return!1;var n=t.getAttribute("listStyle");return!(!n||n===e.getAttribute("listStyle"));}function gw(t){return function(e,i){i=i.filter(function(t){return t.is("element","listItem");}),t.model.change(function(t){var _iterator473=_createForOfIteratorHelper(i),_step473;try{for(_iterator473.s();!(_step473=_iterator473.n()).done;){var _e332=_step473.value;t.removeAttribute("listStyle",_e332);}}catch(err){_iterator473.e(err);}finally{_iterator473.f();}});};}function pw(t){var e=[];var _iterator474=_createForOfIteratorHelper(t),_step474;try{for(_iterator474.s();!(_step474=_iterator474.n()).done;){var _i337=_step474.value;var _t388=bw(_i337);_t388&&_t388.is("element","listItem")&&e.push(_t388);}}catch(err){_iterator474.e(err);}finally{_iterator474.f();}return e;}function bw(t){return"attribute"===t.type?t.range.start.nodeAfter:"insert"===t.type?t.position.nodeAfter:null;}i(103);var ww=/*#__PURE__*/function(_pd68){_inherits(ww,_pd68);var _super197=_createSuper(ww);function ww(){_classCallCheck(this,ww);return _super197.apply(this,arguments);}_createClass(ww,[{key:"init",value:function init(){var t=this.editor,e=t.locale.t;t.ui.componentFactory.add("bulletedList",kw({editor:t,parentCommandName:"bulletedList",buttonLabel:e("Bulleted List"),buttonIcon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75z"/></svg>',toolbarAriaLabel:e("Bulleted list styles toolbar"),styleDefinitions:[{label:e("Toggle the disc list style"),tooltip:e("Disc"),type:"disc",icon:'<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6z"/></svg>'},{label:e("Toggle the circle list style"),tooltip:e("Circle"),type:"circle",icon:'<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"/></svg>'},{label:e("Toggle the square list style"),tooltip:e("Square"),type:"square",icon:'<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M14 27v6H8v-6h6zm0-9v6H8v-6h6zm0-9v6H8V9h6z"/></svg>'}]})),t.ui.componentFactory.add("numberedList",kw({editor:t,parentCommandName:"numberedList",buttonLabel:e("Numbered List"),buttonIcon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244 1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>',toolbarAriaLabel:e("Numbered list styles toolbar"),styleDefinitions:[{label:e("Toggle the decimal list style"),tooltip:e("Decimal"),type:"decimal",icon:'<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M10.29 15V8.531H9.286c-.14.393-.4.736-.778 1.03-.378.295-.728.495-1.05.6v1.121a4.257 4.257 0 0 0 1.595-.936V15h1.235zm3.343 0v-1.235h-1.235V15h1.235zM11.3 24v-1.147H8.848c.064-.111.148-.226.252-.343.104-.117.351-.354.74-.712.39-.357.66-.631.81-.821.225-.288.39-.562.494-.824.104-.263.156-.539.156-.829 0-.51-.182-.936-.545-1.279-.363-.342-.863-.514-1.499-.514-.58 0-1.063.148-1.45.444-.387.296-.617.784-.69 1.463l1.23.124c.024-.36.112-.619.264-.774.153-.155.358-.233.616-.233.26 0 .465.074.613.222.148.148.222.36.222.635 0 .25-.085.501-.255.756-.126.185-.468.536-1.024 1.055-.692.641-1.155 1.156-1.389 1.544-.234.389-.375.8-.422 1.233H11.3zm2.333 0v-1.235h-1.235V24h1.235zM9.204 34.11c.615 0 1.129-.2 1.542-.598.413-.398.62-.88.62-1.446 0-.39-.11-.722-.332-.997a1.5 1.5 0 0 0-.886-.532c.619-.337.928-.788.928-1.353 0-.399-.151-.756-.453-1.073-.366-.386-.852-.58-1.459-.58a2.25 2.25 0 0 0-.96.2 1.617 1.617 0 0 0-.668.55c-.16.232-.28.544-.358.933l1.138.194c.032-.282.123-.495.272-.642.15-.146.33-.22.54-.22.215 0 .386.065.515.194s.193.302.193.518c0 .255-.087.46-.263.613-.176.154-.43.227-.765.218l-.136 1.006c.22-.061.409-.092.567-.092.24 0 .444.09.61.272.168.182.251.428.251.739 0 .328-.087.589-.261.782a.833.833 0 0 1-.644.29.841.841 0 0 1-.607-.242c-.167-.16-.27-.394-.307-.698l-1.196.145c.062.542.285.98.668 1.316.384.335.868.503 1.45.503zm4.43-.11v-1.235h-1.236V34h1.235z"/></svg>'},{label:e("Toggle the decimal with leading zero list style"),tooltip:e("Decimal with leading zero"),type:"decimal-leading-zero",icon:'<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M5.714 15.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm6.078.914V8.531H10.79c-.14.393-.4.736-.778 1.03-.378.295-.728.495-1.05.6v1.121a4.257 4.257 0 0 0 1.595-.936V15h1.235zm3.344 0v-1.235h-1.235V15h1.235zm-9.422 9.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm7.088.914v-1.147H10.35c.065-.111.149-.226.253-.343.104-.117.35-.354.74-.712.39-.357.66-.631.81-.821.225-.288.39-.562.493-.824.104-.263.156-.539.156-.829 0-.51-.181-.936-.544-1.279-.364-.342-.863-.514-1.499-.514-.58 0-1.063.148-1.45.444-.387.296-.617.784-.69 1.463l1.23.124c.024-.36.112-.619.264-.774.152-.155.357-.233.615-.233.261 0 .465.074.613.222.148.148.222.36.222.635 0 .25-.085.501-.255.756-.126.185-.467.536-1.024 1.055-.691.641-1.154 1.156-1.388 1.544-.235.389-.375.8-.422 1.233h4.328zm2.334 0v-1.235h-1.235V24h1.235zM5.714 34.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm4.992 1.024c.616 0 1.13-.2 1.543-.598.413-.398.62-.88.62-1.446 0-.39-.111-.722-.332-.997a1.5 1.5 0 0 0-.886-.532c.618-.337.927-.788.927-1.353 0-.399-.15-.756-.452-1.073-.366-.386-.853-.58-1.46-.58a2.25 2.25 0 0 0-.96.2 1.617 1.617 0 0 0-.667.55c-.16.232-.28.544-.359.933l1.139.194c.032-.282.123-.495.272-.642.15-.146.33-.22.54-.22.214 0 .386.065.515.194s.193.302.193.518c0 .255-.088.46-.264.613-.175.154-.43.227-.764.218l-.136 1.006c.22-.061.408-.092.566-.092.24 0 .444.09.611.272.167.182.25.428.25.739 0 .328-.086.589-.26.782a.833.833 0 0 1-.644.29.841.841 0 0 1-.607-.242c-.167-.16-.27-.394-.308-.698l-1.195.145c.062.542.284.98.668 1.316.384.335.867.503 1.45.503zm4.43-.11v-1.235h-1.235V34h1.235z"/></svg>'},{label:e("Toggle the lower–roman list style"),tooltip:e("Lower–roman"),type:"lower-roman",icon:'<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11.88 8.7V7.558h-1.234V8.7h1.234zm0 5.3V9.333h-1.234V14h1.234zm2.5 0v-1.235h-1.234V14h1.235zm-4.75 4.7v-1.142H8.395V18.7H9.63zm0 5.3v-4.667H8.395V24H9.63zm2.5-5.3v-1.142h-1.234V18.7h1.235zm0 5.3v-4.667h-1.234V24h1.235zm2.501 0v-1.235h-1.235V24h1.235zM7.38 28.7v-1.142H6.145V28.7H7.38zm0 5.3v-4.667H6.145V34H7.38zm2.5-5.3v-1.142H8.646V28.7H9.88zm0 5.3v-4.667H8.646V34H9.88zm2.5-5.3v-1.142h-1.234V28.7h1.235zm0 5.3v-4.667h-1.234V34h1.235zm2.501 0v-1.235h-1.235V34h1.235z"/></svg>'},{label:e("Toggle the upper–roman list style"),tooltip:e("Upper-roman"),type:"upper-roman",icon:'<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11.916 15V8.558h-1.301V15h1.3zm2.465 0v-1.235h-1.235V15h1.235zM9.665 25v-6.442h-1.3V25h1.3zm2.5 0v-6.442h-1.3V25h1.3zm2.466 0v-1.235h-1.235V25h1.235zm-7.216 9v-6.442h-1.3V34h1.3zm2.5 0v-6.442h-1.3V34h1.3zm2.501 0v-6.442h-1.3V34h1.3zm2.465 0v-1.235h-1.235V34h1.235z"/></svg>'},{label:e("Toggle the lower–latin list style"),tooltip:e("Lower-latin"),type:"lower-latin",icon:'<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M9.62 14.105c.272 0 .528-.05.768-.153s.466-.257.677-.462c.009.024.023.072.044.145.047.161.086.283.119.365h1.221a2.649 2.649 0 0 1-.222-.626c-.04-.195-.059-.498-.059-.908l.013-1.441c0-.536-.055-.905-.165-1.105-.11-.201-.3-.367-.569-.497-.27-.13-.68-.195-1.23-.195-.607 0-1.064.108-1.371.325-.308.217-.525.55-.65 1.002l1.12.202c.076-.217.176-.369.299-.455.123-.086.294-.13.514-.13.325 0 .546.05.663.152.118.101.176.27.176.508v.123c-.222.093-.622.194-1.2.303-.427.082-.755.178-.982.288-.227.11-.403.268-.53.474a1.327 1.327 0 0 0-.188.706c0 .398.138.728.415.988.277.261.656.391 1.136.391zm.368-.87a.675.675 0 0 1-.492-.189.606.606 0 0 1-.193-.448c0-.176.08-.32.241-.435.106-.07.33-.142.673-.215a7.19 7.19 0 0 0 .751-.19v.247c0 .296-.016.496-.048.602a.773.773 0 0 1-.295.409 1.07 1.07 0 0 1-.637.22zm4.645.765v-1.235h-1.235V14h1.235zM10.2 25.105c.542 0 1.003-.215 1.382-.646.38-.43.57-1.044.57-1.84 0-.771-.187-1.362-.559-1.774a1.82 1.82 0 0 0-1.41-.617c-.522 0-.973.216-1.354.65v-2.32H7.594V25h1.147v-.686a1.9 1.9 0 0 0 .67.592c.26.133.523.2.79.2zm-.299-.975c-.354 0-.638-.164-.852-.492-.153-.232-.229-.59-.229-1.073 0-.468.098-.818.295-1.048a.93.93 0 0 1 .738-.345c.302 0 .55.118.743.354.193.236.29.62.29 1.154 0 .5-.096.868-.288 1.1-.192.233-.424.35-.697.35zm4.478.87v-1.235h-1.234V25h1.234zm-4.017 9.105c.6 0 1.08-.142 1.437-.426.357-.284.599-.704.725-1.261l-1.213-.207c-.061.326-.167.555-.316.688a.832.832 0 0 1-.576.2.916.916 0 0 1-.75-.343c-.185-.228-.278-.62-.278-1.173 0-.498.091-.853.274-1.066.183-.212.429-.318.736-.318.232 0 .42.061.565.184.145.123.238.306.28.55l1.216-.22c-.146-.501-.387-.874-.722-1.119-.336-.244-.788-.366-1.356-.366-.695 0-1.245.214-1.653.643-.407.43-.61 1.03-.61 1.8 0 .762.202 1.358.608 1.788.406.431.95.646 1.633.646zM14.633 34v-1.235h-1.235V34h1.235z"/></svg>'},{label:e("Toggle the upper–latin list style"),tooltip:e("Upper-latin"),type:"upper-latin",icon:'<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M7.88 15l.532-1.463h2.575L11.549 15h1.415l-2.58-6.442H9.01L6.5 15h1.38zm2.69-2.549H8.811l.87-2.39.887 2.39zM14.88 15v-1.235h-1.234V15h1.234zM9.352 25c.83-.006 1.352-.02 1.569-.044.346-.038.636-.14.872-.305.236-.166.422-.387.558-.664.137-.277.205-.562.205-.855 0-.372-.106-.695-.317-.97-.21-.276-.512-.471-.905-.585a1.51 1.51 0 0 0 .661-.567 1.5 1.5 0 0 0 .244-.83c0-.28-.066-.53-.197-.754a1.654 1.654 0 0 0-.495-.539 1.676 1.676 0 0 0-.672-.266c-.25-.042-.63-.063-1.14-.063H7.158V25h2.193zm.142-3.88H8.46v-1.49h.747c.612 0 .983.007 1.112.022.217.026.38.102.49.226.11.125.165.287.165.486a.68.68 0 0 1-.192.503.86.86 0 0 1-.525.23 11.47 11.47 0 0 1-.944.023h.18zm.17 2.795H8.46v-1.723h1.05c.592 0 .977.03 1.154.092.177.062.313.16.406.295a.84.84 0 0 1 .14.492c0 .228-.06.41-.181.547a.806.806 0 0 1-.473.257c-.126.026-.423.04-.892.04zM14.88 25v-1.235h-1.234V25h1.234zm-5.018 9.11c.691 0 1.262-.17 1.711-.512.45-.341.772-.864.965-1.567l-1.261-.4c-.109.472-.287.818-.536 1.037-.25.22-.547.33-.892.33-.47 0-.85-.173-1.143-.519-.293-.345-.44-.925-.44-1.74 0-.767.15-1.322.447-1.665.297-.343.684-.514 1.162-.514.346 0 .64.096.881.29.242.193.4.457.477.79l1.288-.307c-.147-.516-.367-.911-.66-1.187-.492-.465-1.132-.698-1.92-.698-.902 0-1.63.296-2.184.89-.554.593-.83 1.426-.83 2.498 0 1.014.275 1.813.825 2.397.551.585 1.254.877 2.11.877zM14.88 34v-1.235h-1.234V34h1.234z"/></svg>'}]}));}}],[{key:"pluginName",get:function get(){return"ListStyleUI";}}]);return ww;}(pd);function kw(_ref84){var t=_ref84.editor,e=_ref84.parentCommandName,i=_ref84.buttonLabel,n=_ref84.buttonIcon,o=_ref84.toolbarAriaLabel,r=_ref84.styleDefinitions;var s=t.commands.get(e),a=t.commands.get("listStyle");return function(c){var l=ad(c,nb),d=l.buttonView,u=function(_ref85){var t=_ref85.editor,e=_ref85.listStyleCommand,i=_ref85.parentCommandName;var n=t.locale,o=t.commands.get(i);return function(_ref86){var r=_ref86.label,s=_ref86.type,a=_ref86.icon,c=_ref86.tooltip;var l=new Xl(n);return l.set({label:r,icon:a,tooltip:c}),e.on("change:value",function(){l.isOn=e.value===s;}),l.on("execute",function(){o.value?e.value!==s?t.execute("listStyle",{type:s}):t.execute("listStyle",{type:e._defaultType}):t.model.change(function(){t.execute(i),t.execute("listStyle",{type:s});}),t.editing.view.focus();}),l;};}({editor:t,parentCommandName:e,listStyleCommand:a});return cd(l,r.map(u)),l.bind("isEnabled").to(s),l.toolbarView.ariaLabel=o,l["class"]="ck-list-styles-dropdown",d.on("execute",function(){t.execute(e),t.editing.view.focus();}),d.set({label:i,icon:n,tooltip:!0,isToggleable:!0}),d.bind("isOn").to(s,"value",function(t){return!!t;}),l;};}var _w=/*#__PURE__*/function(_Mb2){_inherits(_w,_Mb2);var _super198=_createSuper(_w);function _w(t){_classCallCheck(this,_w);return _super198.call(this,t,"fontSize");}return _w;}(Mb);function vw(t){return t.map(function(t){return function(t){if(e=t,"object"==_typeof(e)&&e.title&&e.model&&e.view)return xw(t);var e;var i=function(t){return yw[t]||yw[t.model];}(t);if(i)return xw(i);if("default"===t)return{model:void 0,title:"Default"};if(function(t){var e;if("object"==_typeof(t)){if(!t.model)throw new ui.a("font-size-invalid-definition",null,t);e=parseFloat(t.model);}else e=parseFloat(t);return isNaN(e);}(t))return;return function(t){"number"!=typeof t&&"string"!=typeof t||(t={title:String(t),model:parseFloat(t)+"px"});return t.view={name:"span",styles:{"font-size":t.model}},xw(t);}(t);}(t);}).filter(function(t){return!!t;});}var yw={get tiny(){return{title:"Tiny",model:"tiny",view:{name:"span",classes:"text-tiny",priority:7}};},get small(){return{title:"Small",model:"small",view:{name:"span",classes:"text-small",priority:7}};},get big(){return{title:"Big",model:"big",view:{name:"span",classes:"text-big",priority:7}};},get huge(){return{title:"Huge",model:"huge",view:{name:"span",classes:"text-huge",priority:7}};}};function xw(t){return t.view.priority||(t.view.priority=7),t;}var Aw=/*#__PURE__*/function(_pd69){_inherits(Aw,_pd69);var _super199=_createSuper(Aw);function Aw(t){var _this290;_classCallCheck(this,Aw);_this290=_super199.call(this,t),t.config.define("fontSize",{options:["tiny","small","default","big","huge"],supportAllValues:!1});return _this290;}_createClass(Aw,[{key:"init",value:function init(){var t=this.editor;t.model.schema.extend("$text",{allowAttributes:"fontSize"}),t.model.schema.setAttributeProperties("fontSize",{isFormatting:!0,copyOnEnter:!0});var e=t.config.get("fontSize.supportAllValues"),i=Nb("fontSize",vw(this.editor.config.get("fontSize.options")).filter(function(t){return t.model;}));e?this._prepareAnyValueConverters(i):t.conversion.attributeToElement(i),t.commands.add("fontSize",new _w(t));}},{key:"_prepareAnyValueConverters",value:function _prepareAnyValueConverters(t){var e=this.editor,i=t.model.values.filter(function(t){return!String(t).match(/[\d.]+[\w%]+/);});if(i.length)throw new ui.a("font-size-invalid-use-of-named-presets",null,{presets:i});e.conversion["for"]("downcast").attributeToElement({model:"fontSize",view:function view(t,_ref87){var e=_ref87.writer;if(t)return e.createAttributeElement("span",{style:"font-size:"+t},{priority:7});}}),e.conversion["for"]("upcast").attributeToAttribute({model:{key:"fontSize",value:function value(t){return t.getStyle("font-size");}},view:{name:"span",styles:{"font-size":/.*/}}});}}],[{key:"pluginName",get:function get(){return"FontSizeEditing";}}]);return Aw;}(pd);i(105);var Tw=/*#__PURE__*/function(_pd70){_inherits(Tw,_pd70);var _super200=_createSuper(Tw);function Tw(){_classCallCheck(this,Tw);return _super200.apply(this,arguments);}_createClass(Tw,[{key:"init",value:function init(){var _this291=this;var t=this.editor,e=t.t,i=this._getLocalizedOptions(),n=t.commands.get("fontSize");t.ui.componentFactory.add("fontSize",function(o){var r=ad(o);return ld(r,function(t,e){var i=new xi();var _iterator475=_createForOfIteratorHelper(t),_step475;try{var _loop10=function _loop10(){var n=_step475.value;var t={type:"button",model:new Im({commandName:"fontSize",commandParam:n.model,label:n.title,"class":"ck-fontsize-option",withText:!0})};n.view&&n.view.styles&&t.model.set("labelStyle","font-size:"+n.view.styles["font-size"]),n.view&&n.view.classes&&t.model.set("class","".concat(t.model["class"]," ").concat(n.view.classes)),t.model.bind("isOn").to(e,"value",function(t){return t===n.model;}),i.add(t);};for(_iterator475.s();!(_step475=_iterator475.n()).done;){_loop10();}}catch(err){_iterator475.e(err);}finally{_iterator475.f();}return i;}(i,n)),r.buttonView.set({label:e("Font Size"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5L7.038 4.785 4.261 11.5h5.555zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13zm7.55 2.279l.779-.779.707.707-2.265 2.265-2.193-2.265.707-.707.765.765V4.825c0-.042 0-.083.002-.123l-.77.77-.707-.707L17.207 2.5l2.265 2.265-.707.707-.782-.782c.002.043.003.089.003.135v10.454z"/></svg>',tooltip:!0}),r.extendTemplate({attributes:{"class":["ck-font-size-dropdown"]}}),r.bind("isEnabled").to(n),_this291.listenTo(r,"execute",function(e){t.execute(e.source.commandName,{value:e.source.commandParam}),t.editing.view.focus();}),r;});}},{key:"_getLocalizedOptions",value:function _getLocalizedOptions(){var t=this.editor,e=t.t,i={Default:e("Default"),Tiny:e("Tiny"),Small:e("Small"),Big:e("Big"),Huge:e("Huge")};return vw(t.config.get("fontSize").options).map(function(t){var e=i[t.title];return e&&e!=t.title&&(t=Object.assign({},t,{title:e})),t;});}}]);return Tw;}(pd);var Cw="code";var Sw=/*#__PURE__*/function(_pd71){_inherits(Sw,_pd71);var _super201=_createSuper(Sw);function Sw(){_classCallCheck(this,Sw);return _super201.apply(this,arguments);}_createClass(Sw,[{key:"init",value:function init(){var t=this.editor;t.model.schema.extend("$text",{allowAttributes:Cw}),t.model.schema.setAttributeProperties(Cw,{isFormatting:!0,copyOnEnter:!1}),t.conversion.attributeToElement({model:Cw,view:"code",upcastAlso:{styles:{"word-wrap":"break-word"}}}),t.commands.add(Cw,new Uu(t,Cw)),t.plugins.get(Rh).registerAttribute(Cw),Fh(t,Cw,"code","ck-code_selected");}}],[{key:"pluginName",get:function get(){return"CodeEditing";}},{key:"requires",get:function get(){return[Rh];}}]);return Sw;}(pd);i(13);var Ew=/*#__PURE__*/function(_pd72){_inherits(Ew,_pd72);var _super202=_createSuper(Ew);function Ew(){_classCallCheck(this,Ew);return _super202.apply(this,arguments);}_createClass(Ew,[{key:"init",value:function init(){var _this292=this;var t=this.editor,e=t.t;t.ui.componentFactory.add("code",function(i){var n=t.commands.get("code"),o=new Xl(i);return o.set({label:e("Code"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.5 5.7l5.2 3.9v1.3l-5.6 4c-.1.2-.3.2-.5.2-.3-.1-.6-.7-.6-1l.3-.4 4.7-3.5L11.5 7l-.2-.2c-.1-.3-.1-.6 0-.8.2-.2.5-.4.8-.4a.8.8 0 0 1 .4.1zm-5.2 0L2 9.6v1.3l5.6 4c.1.2.3.2.5.2.3-.1.7-.7.6-1 0-.1 0-.3-.2-.4l-5-3.5L8.2 7l.2-.2c.1-.3.1-.6 0-.8-.2-.2-.5-.4-.8-.4a.8.8 0 0 0-.3.1z"/></svg>',tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(n,"value","isEnabled"),_this292.listenTo(o,"execute",function(){t.execute("code"),t.editing.view.focus();}),o;});}}]);return Ew;}(pd);var Pw=/*#__PURE__*/function(_pd73){_inherits(Pw,_pd73);var _super203=_createSuper(Pw);function Pw(t){var _this293;_classCallCheck(this,Pw);_this293=_super203.call(this,t);var e=t.config.get("autosave")||{},i=e.waitingTime||1e3;_this293.set("state","synchronized"),_this293._debouncedSave=Zr(_this293._save.bind(_assertThisInitialized(_this293)),i),_this293._lastDocumentVersion=t.model.document.version,_this293._domEmitter=Object.create(mr),_this293._config=e;return _this293;}_createClass(Pw,[{key:"init",value:function init(){var _this294=this;var t=this.editor,e=t.model.document,i=t.t;this._pendingActions=t.plugins.get(Nu),this.listenTo(e,"change:data",function(){_this294._saveCallbacks.length&&("synchronized"==_this294.state?(_this294._action=_this294._pendingActions.add(i("Saving changes")),_this294.state="waiting",_this294._debouncedSave()):"waiting"==_this294.state&&_this294._debouncedSave());}),this.listenTo(t,"destroy",function(){return _this294._flush();},{priority:"highest"}),this._domEmitter.listenTo(window,"beforeunload",function(t,e){_this294._pendingActions.hasAny&&(e.returnValue=_this294._pendingActions.first.message);});}},{key:"destroy",value:function destroy(){this._domEmitter.stopListening(),_get(_getPrototypeOf(Pw.prototype),"destroy",this).call(this);}},{key:"_flush",value:function _flush(){this._debouncedSave.flush();}},{key:"_save",value:function _save(){var _this295=this;var t=this.editor.model.document.version;t<this._lastDocumentVersion||"initializing"===this.editor.state?this._debouncedSave.cancel():(this._lastDocumentVersion=t,this.state="saving",Promise.resolve().then(function(){return Promise.all(_this295._saveCallbacks.map(function(t){return t(_this295.editor);}));})["catch"](function(t){throw _this295.state="error",_this295.state="saving",_this295._debouncedSave(),t;}).then(function(){_this295.editor.model.document.version>_this295._lastDocumentVersion?(_this295.state="waiting",_this295._debouncedSave()):(_this295.state="synchronized",_this295._pendingActions.remove(_this295._action),_this295._action=null);}));}},{key:"_saveCallbacks",get:function get(){var t=[];return this.adapter&&this.adapter.save&&t.push(this.adapter.save),this._config.save&&t.push(this._config.save),t;}}],[{key:"pluginName",get:function get(){return"Autosave";}},{key:"requires",get:function get(){return[Nu];}}]);return Pw;}(pd);yi(Pw,Un);var Mw=/*#__PURE__*/function(_gd){_inherits(Mw,_gd);var _super204=_createSuper(Mw);function Mw(){_classCallCheck(this,Mw);return _super204.apply(this,arguments);}return Mw;}(gd);Mw.builtinPlugins=[Pw,/*#__PURE__*/function(_pd74){_inherits(_class3,_pd74);var _super205=_createSuper(_class3);function _class3(){_classCallCheck(this,_class3);return _super205.apply(this,arguments);}_createClass(_class3,null,[{key:"requires",get:function get(){return[Sw,Ew];}},{key:"pluginName",get:function get(){return"Code";}}]);return _class3;}(pd),/*#__PURE__*/function(_pd75){_inherits(_class4,_pd75);var _super206=_createSuper(_class4);function _class4(){_classCallCheck(this,_class4);return _super206.apply(this,arguments);}_createClass(_class4,null,[{key:"requires",get:function get(){return[hw,ww];}},{key:"pluginName",get:function get(){return"ListStyle";}}]);return _class4;}(pd),/*#__PURE__*/function(_pd76){_inherits(_class5,_pd76);var _super207=_createSuper(_class5);function _class5(){_classCallCheck(this,_class5);return _super207.apply(this,arguments);}_createClass(_class5,null,[{key:"requires",get:function get(){return[Td,Pd];}},{key:"pluginName",get:function get(){return"Alignment";}}]);return _class5;}(pd),/*#__PURE__*/function(_pd77){_inherits(_class6,_pd77);var _super208=_createSuper(_class6);function _class6(){_classCallCheck(this,_class6);return _super208.apply(this,arguments);}_createClass(_class6,null,[{key:"requires",get:function get(){return[Rd,jd,Kd,Ud,lu,Mu];}},{key:"pluginName",get:function get(){return"Essentials";}}]);return _class6;}(pd),zu,/*#__PURE__*/function(_pd78){_inherits(_class7,_pd78);var _super209=_createSuper(_class7);function _class7(){_classCallCheck(this,_class7);return _super209.apply(this,arguments);}_createClass(_class7,[{key:"afterInit",value:function afterInit(){this._addListAutoformats(),this._addBasicStylesAutoformats(),this._addHeadingAutoformats(),this._addBlockQuoteAutoformats(),this._addCodeBlockAutoformats(),this._addHorizontalLineAutoformats();}},{key:"_addListAutoformats",value:function _addListAutoformats(){var t=this.editor.commands;t.get("bulletedList")&&ju(this.editor,this,/^[*-]\s$/,"bulletedList"),t.get("numberedList")&&ju(this.editor,this,/^1[.|)]\s$/,"numberedList"),t.get("todoList")&&ju(this.editor,this,/^\[\s?\]\s$/,"todoList");}},{key:"_addBasicStylesAutoformats",value:function _addBasicStylesAutoformats(){var t=this.editor.commands;if(t.get("bold")){var _t389=Hu(this.editor,"bold");Bu(this.editor,this,/(?:^|\s)(\*\*)([^*]+)(\*\*)$/g,_t389),Bu(this.editor,this,/(?:^|\s)(__)([^_]+)(__)$/g,_t389);}if(t.get("italic")){var _t390=Hu(this.editor,"italic");Bu(this.editor,this,/(?:^|\s)(\*)([^*_]+)(\*)$/g,_t390),Bu(this.editor,this,/(?:^|\s)(_)([^_]+)(_)$/g,_t390);}if(t.get("code")){var _t391=Hu(this.editor,"code");Bu(this.editor,this,/(`)([^`]+)(`)$/g,_t391);}if(t.get("strikethrough")){var _t392=Hu(this.editor,"strikethrough");Bu(this.editor,this,/(~~)([^~]+)(~~)$/g,_t392);}}},{key:"_addHeadingAutoformats",value:function _addHeadingAutoformats(){var _this296=this;var t=this.editor.commands.get("heading");t&&t.modelElements.filter(function(t){return t.match(/^heading[1-6]$/);}).forEach(function(e){var i=e[7],n=new RegExp("^(#{".concat(i,"})\\s$"));ju(_this296.editor,_this296,n,function(){if(!t.isEnabled||t.value===e)return!1;_this296.editor.execute("heading",{value:e});});});}},{key:"_addBlockQuoteAutoformats",value:function _addBlockQuoteAutoformats(){this.editor.commands.get("blockQuote")&&ju(this.editor,this,/^>\s$/,"blockQuote");}},{key:"_addCodeBlockAutoformats",value:function _addCodeBlockAutoformats(){this.editor.commands.get("codeBlock")&&ju(this.editor,this,/^```$/,"codeBlock");}},{key:"_addHorizontalLineAutoformats",value:function _addHorizontalLineAutoformats(){this.editor.commands.get("horizontalLine")&&ju(this.editor,this,/^---$/,"horizontalLine");}}],[{key:"pluginName",get:function get(){return"Autoformat";}}]);return _class7;}(pd),/*#__PURE__*/function(_pd79){_inherits(_class8,_pd79);var _super210=_createSuper(_class8);function _class8(){_classCallCheck(this,_class8);return _super210.apply(this,arguments);}_createClass(_class8,null,[{key:"requires",get:function get(){return[Wu,qu];}},{key:"pluginName",get:function get(){return"Bold";}}]);return _class8;}(pd),/*#__PURE__*/function(_pd80){_inherits(_class9,_pd80);var _super211=_createSuper(_class9);function _class9(){_classCallCheck(this,_class9);return _super211.apply(this,arguments);}_createClass(_class9,null,[{key:"requires",get:function get(){return[$u,Yu];}},{key:"pluginName",get:function get(){return"Italic";}}]);return _class9;}(pd),/*#__PURE__*/function(_pd81){_inherits(_class10,_pd81);var _super212=_createSuper(_class10);function _class10(){_classCallCheck(this,_class10);return _super212.apply(this,arguments);}_createClass(_class10,null,[{key:"requires",get:function get(){return[Gu,Ku];}},{key:"pluginName",get:function get(){return"Underline";}}]);return _class10;}(pd),/*#__PURE__*/function(_pd82){_inherits(_class11,_pd82);var _super213=_createSuper(_class11);function _class11(){_classCallCheck(this,_class11);return _super213.apply(this,arguments);}_createClass(_class11,null,[{key:"requires",get:function get(){return[th,eh];}},{key:"pluginName",get:function get(){return"BlockQuote";}}]);return _class11;}(pd),/*#__PURE__*/function(_pd83){_inherits(_class12,_pd83);var _super214=_createSuper(_class12);function _class12(){_classCallCheck(this,_class12);return _super214.apply(this,arguments);}_createClass(_class12,null,[{key:"pluginName",get:function get(){return"CKFinder";}},{key:"requires",get:function get(){return[Tf,ih,zu];}}]);return _class12;}(pd),/*#__PURE__*/function(_pd84){_inherits(_class13,_pd84);var _super215=_createSuper(_class13);function _class13(){_classCallCheck(this,_class13);return _super215.apply(this,arguments);}_createClass(_class13,null,[{key:"requires",get:function get(){return[Nf,rm,xm];}},{key:"pluginName",get:function get(){return"EasyImage";}}]);return _class13;}(pd),/*#__PURE__*/function(_pd85){_inherits(_class14,_pd85);var _super216=_createSuper(_class14);function _class14(){_classCallCheck(this,_class14);return _super216.apply(this,arguments);}_createClass(_class14,null,[{key:"requires",get:function get(){return[Mm,Nm];}},{key:"pluginName",get:function get(){return"Heading";}}]);return _class14;}(pd),rm,/*#__PURE__*/function(_pd86){_inherits(_class15,_pd86);var _super217=_createSuper(_class15);function _class15(){_classCallCheck(this,_class15);return _super217.apply(this,arguments);}_createClass(_class15,null,[{key:"requires",get:function get(){return[Dm];}},{key:"pluginName",get:function get(){return"ImageCaption";}}]);return _class15;}(pd),/*#__PURE__*/function(_pd87){_inherits(_class16,_pd87);var _super218=_createSuper(_class16);function _class16(){_classCallCheck(this,_class16);return _super218.apply(this,arguments);}_createClass(_class16,null,[{key:"requires",get:function get(){return[Qm,Jm];}},{key:"pluginName",get:function get(){return"ImageStyle";}}]);return _class16;}(pd),/*#__PURE__*/function(_pd88){_inherits(_class17,_pd88);var _super219=_createSuper(_class17);function _class17(){_classCallCheck(this,_class17);return _super219.apply(this,arguments);}_createClass(_class17,[{key:"afterInit",value:function afterInit(){var t=this.editor,e=t.t;t.plugins.get(Zm).register("image",{ariaLabel:e("Image toolbar"),items:t.config.get("image.toolbar")||[],getRelatedElement:Ah});}}],[{key:"requires",get:function get(){return[Zm];}},{key:"pluginName",get:function get(){return"ImageToolbar";}}]);return _class17;}(pd),xm,/*#__PURE__*/function(_pd89){_inherits(_class18,_pd89);var _super220=_createSuper(_class18);function _class18(){_classCallCheck(this,_class18);return _super220.apply(this,arguments);}_createClass(_class18,null,[{key:"requires",get:function get(){return[zb,Vb];}},{key:"pluginName",get:function get(){return"FontFamily";}}]);return _class18;}(pd),/*#__PURE__*/function(_pd90){_inherits(_class19,_pd90);var _super221=_createSuper(_class19);function _class19(){_classCallCheck(this,_class19);return _super221.apply(this,arguments);}_createClass(_class19,null,[{key:"pluginName",get:function get(){return"Indent";}},{key:"requires",get:function get(){return[ig,rg];}}]);return _class19;}(pd),/*#__PURE__*/function(_pd91){_inherits(_class20,_pd91);var _super222=_createSuper(_class20);function _class20(){_classCallCheck(this,_class20);return _super222.apply(this,arguments);}_createClass(_class20,null,[{key:"requires",get:function get(){return[kf,lg,mg];}},{key:"pluginName",get:function get(){return"Link";}}]);return _class20;}(pd),/*#__PURE__*/function(_pd92){_inherits(_class21,_pd92);var _super223=_createSuper(_class21);function _class21(){_classCallCheck(this,_class21);return _super223.apply(this,arguments);}_createClass(_class21,null,[{key:"requires",get:function get(){return[xg,Sg,Tg,Bf];}},{key:"pluginName",get:function get(){return"MediaEmbed";}}]);return _class21;}(pd),Sm,/*#__PURE__*/function(_pd93){_inherits(_class22,_pd93);var _super224=_createSuper(_class22);function _class22(){_classCallCheck(this,_class22);return _super224.apply(this,arguments);}_createClass(_class22,[{key:"init",value:function init(){var t=this.editor,e=t.editing.view.document,i=[];i.push(new jg(e)),i.push(new Og(e)),t.plugins.get("Clipboard").on("inputTransformation",function(t,e){if(e.isTransformedWithPasteFromOffice)return;var n=e.dataTransfer.getData("text/html"),o=i.find(function(t){return t.isActive(n);});o&&(o.execute(e),e.isTransformedWithPasteFromOffice=!0);},{priority:"high"});}}],[{key:"pluginName",get:function get(){return"PasteFromOffice";}},{key:"requires",get:function get(){return[Rd];}}]);return _class22;}(pd),/*#__PURE__*/function(_pd94){_inherits(_class23,_pd94);var _super225=_createSuper(_class23);function _class23(){_classCallCheck(this,_class23);return _super225.apply(this,arguments);}_createClass(_class23,null,[{key:"requires",get:function get(){return[ib,sb,cb,gb,fb,lb,Bf];}},{key:"pluginName",get:function get(){return"Table";}}]);return _class23;}(pd),/*#__PURE__*/function(_pd95){_inherits(_class24,_pd95);var _super226=_createSuper(_class24);function _class24(){_classCallCheck(this,_class24);return _super226.apply(this,arguments);}_createClass(_class24,[{key:"afterInit",value:function afterInit(){var t=this.editor,e=t.t,i=t.plugins.get(Zm),n=t.config.get("table.contentToolbar"),o=t.config.get("table.tableToolbar");n&&i.register("tableContent",{ariaLabel:e("Table toolbar"),items:n,getRelatedElement:wb}),o&&i.register("table",{ariaLabel:e("Table toolbar"),items:o,getRelatedElement:bb});}}],[{key:"requires",get:function get(){return[Zm];}},{key:"pluginName",get:function get(){return"TableToolbar";}}]);return _class24;}(pd),/*#__PURE__*/function(_pd96){_inherits(_class25,_pd96);var _super227=_createSuper(_class25);function _class25(t){var _this297;_classCallCheck(this,_class25);_this297=_super227.call(this,t),t.config.define("typing",{transformations:{include:Tb}});return _this297;}_createClass(_class25,[{key:"init",value:function init(){var _this298=this;var t=this.editor.model.document.selection;t.on("change:range",function(){_this298.isEnabled=!t.anchor.parent.is("element","codeBlock");}),this._enableTransformationWatchers();}},{key:"_enableTransformationWatchers",value:function _enableTransformationWatchers(){var t=this.editor,e=t.model,i=t.plugins.get("Input"),n=function(t){var e=t.extra||[],i=t.remove||[],n=function n(t){return!i.includes(t);};return function(t){var e=new Set();var _iterator476=_createForOfIteratorHelper(t),_step476;try{for(_iterator476.s();!(_step476=_iterator476.n()).done;){var _i338=_step476.value;if(Ab[_i338]){var _iterator477=_createForOfIteratorHelper(Ab[_i338]),_step477;try{for(_iterator477.s();!(_step477=_iterator477.n()).done;){var _t393=_step477.value;e.add(_t393);}}catch(err){_iterator477.e(err);}finally{_iterator477.f();}}else e.add(_i338);}}catch(err){_iterator476.e(err);}finally{_iterator476.f();}return Array.from(e);}(t.include.concat(e).filter(n)).filter(n).map(function(t){return xb[t]||t;}).map(function(t){return{from:Cb(t.from),to:Sb(t.to)};});}(t.config.get("typing.transformations")),o=new hg(t.model,function(t){var _iterator478=_createForOfIteratorHelper(n),_step478;try{for(_iterator478.s();!(_step478=_iterator478.n()).done;){var _e333=_step478.value;if(_e333.from.test(t))return{normalizedTransformation:_e333};}}catch(err){_iterator478.e(err);}finally{_iterator478.f();}});o.on("matched:data",function(t,n){if(!i.isInput(n.batch))return;var _n$normalizedTransfor=n.normalizedTransformation,o=_n$normalizedTransfor.from,r=_n$normalizedTransfor.to,s=o.exec(n.text),a=r(s.slice(1)),c=n.range;var l=s.index;e.enqueueChange(function(t){for(var _i339=1;_i339<s.length;_i339++){var _n206=s[_i339],_o131=a[_i339-1];if(null==_o131){l+=_n206.length;continue;}var _r74=c.start.getShiftedBy(l),_d10=e.createRange(_r74,_r74.getShiftedBy(_n206.length)),_u8=Eb(_r74);e.insertContent(t.createText(_o131,_u8),_d10),l+=_o131.length;}});}),o.bind("isEnabled").to(this);}}],[{key:"pluginName",get:function get(){return"TextTransformation";}}]);return _class25;}(pd),/*#__PURE__*/function(_pd97){_inherits(_class26,_pd97);var _super228=_createSuper(_class26);function _class26(){_classCallCheck(this,_class26);return _super228.apply(this,arguments);}_createClass(_class26,null,[{key:"requires",get:function get(){return[Aw,Tw];}},{key:"pluginName",get:function get(){return"FontSize";}}]);return _class26;}(pd)],Mw.defaultConfig={toolbar:{items:["bold","italic","underline","undo","redo","|","link","|","indent","outdent","|","imageUpload","blockQuote","insertTable","mediaEmbed","bulletedList","numberedList"]},image:{toolbar:["imageStyle:full","imageStyle:side","|","imageTextAlternative"]},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells"]},language:"en"};}])["default"];});