"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.DATA_UTILS = void 0;

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

var DATA_UTILS = {
  getDropdownFieldsItems: function getDropdownFieldsItems(_ref) {
    var tableFields = _ref.tableFields,
        index = _ref.index,
        blockFields = _ref.blockFields,
        allowFileds = _ref.allowFileds,
        listIndex = _ref.listIndex;
    var dropdownFields = [];
    var fieldsLabelCount = {};

    var _loop = function _loop(key) {
      fieldsLabelCount[tableFields[key].label] ? fieldsLabelCount[tableFields[key].label].push(tableFields[key].name) : fieldsLabelCount[tableFields[key].label] = [tableFields[key].name];

      if (tableFields[key].operators) {
        if (blockFields && blockFields.length) {
          !blockFields.find(function (name) {
            return tableFields[key].name === name;
          }) && dropdownFields.push({
            id: tableFields[key].name,
            label: "".concat(tableFields[key].label),
            dropdown: 'field',
            index: index,
            reference: "".concat(tableFields[key].type === 'reference'),
            table: tableFields[key].reference,
            firstOperator: {
              operator: tableFields[key].operators[0].operator,
              editor: tableFields[key].operators[0].advancedEditor
            } || ''
          });
        } else if (allowFileds && allowFileds.length) {
          allowFileds.find(function (name) {
            return tableFields[key].name === name;
          }) && dropdownFields.push({
            id: tableFields[key].name,
            label: "".concat(tableFields[key].label),
            dropdown: 'field',
            index: index,
            reference: "".concat(tableFields[key].type === 'reference'),
            table: tableFields[key].reference,
            firstOperator: {
              operator: tableFields[key].operators[0].operator,
              editor: tableFields[key].operators[0].advancedEditor
            } || ''
          });
        } else {
          dropdownFields.push({
            id: tableFields[key].name,
            label: "".concat(tableFields[key].label),
            dropdown: 'field',
            index: index,
            listIndex: listIndex,
            reference: "".concat(tableFields[key].type === 'reference'),
            table: tableFields[key].reference,
            firstOperator: {
              operator: tableFields[key].operators[0].operator,
              editor: tableFields[key].operators[0].advancedEditor
            } || ''
          });
        }
      }
    };

    for (var key in tableFields) {
      _loop(key);
    }

    dropdownFields.sort(function (cur, next) {
      return cur.label.localeCompare(next.label);
    });
    dropdownFields.forEach(function (field, index) {
      if (fieldsLabelCount[field.label].length > 1) {
        dropdownFields[index].label = "".concat(field.label, " (").concat(field.id, ")");
      }
    });
    return dropdownFields;
  },
  getValueAdditionalData: function getValueAdditionalData(_ref2) {
    var tableFields = _ref2.tableFields,
        editor = _ref2.editor,
        field = _ref2.field;
    var valueAdditionalData = [];

    switch (editor) {
      case 'choice_field_names':
      case 'glide_date_equivalent':
      case 'glide_date_comparative':
        for (var key in tableFields) {
          if (tableFields[key].type === tableFields[field].type && JSON.stringify(tableFields[key]) !== JSON.stringify(tableFields[field])) {
            if (editor === 'glide_date_equivalent') {
              valueAdditionalData.push({
                id: tableFields[key].name,
                label: tableFields[key].label,
                dropdown: 'value',
                type: 'glide_date_equivalent',
                index: '1'
              });
            } else if (editor === 'glide_date_comparative') {
              valueAdditionalData.push({
                id: tableFields[key].name,
                label: tableFields[key].label,
                dropdown: 'value',
                type: 'glide_date_comparative',
                index: '3'
              });
            } else {
              valueAdditionalData.push({
                id: tableFields[key].name,
                label: tableFields[key].label,
                dropdown: 'value'
              });
            }
          }
        }

        break;

      case 'choice':
      case 'choice_multiple':
        valueAdditionalData = tableFields[field].choices ? tableFields[field].choices.map(function (choice) {
          return {
            id: choice.value,
            label: choice.label,
            dropdown: 'value'
          };
        }) : [];
        break;

      case 'choice_dynamic':
        valueAdditionalData = tableFields[field].dynamic_choices.map(function (choice) {
          return {
            id: choice.value,
            label: choice.label,
            dropdown: 'value'
          };
        });
        break;
    }

    return valueAdditionalData;
  },
  getOperators: function getOperators(_ref3) {
    var tableFields = _ref3.tableFields;
    var operators = [];

    for (var key in tableFields) {
      if (tableFields[key].operators) {
        var _operators;

        var arr = tableFields[key].operators.map(function (el) {
          return el.operator;
        });

        (_operators = operators).push.apply(_operators, _toConsumableArray(arr));
      }
    }

    operators = Array.from(new Set(operators));
    operators.sort(function (cur, next) {
      return next.length - cur.length;
    });
    return operators;
  },
  getTrendData: function getTrendData(item) {
    var trendData = [];

    switch (item) {
      case 'dayofweek':
        trendData = moment.weekdays().map(function (day) {
          return {
            id: day.toLowerCase(),
            label: day,
            dropdown: 'value',
            type: 'trend_field',
            index: '2'
          };
        });
        break;

      case 'month':
        trendData = moment.months().map(function (month) {
          return {
            id: month.toLowerCase().slice(0, 3),
            label: month,
            dropdown: 'value',
            type: 'trend_field',
            index: '2'
          };
        });
        break;

      case 'quarter':
        for (var i = 1; i < 5; i++) {
          trendData.push({
            id: "".concat(i),
            label: "Quarter".concat(i),
            dropdown: 'value',
            type: 'trend_field',
            index: '2'
          });
        }

        break;

      case 'year':
        for (var _i = moment().year() - 20; _i < moment().year() + 10; _i++) {
          trendData.push({
            id: "".concat(_i),
            label: _i,
            dropdown: 'value',
            type: 'trend_field',
            index: '2'
          });
        }

        break;

      case 'week':
        for (var _i2 = 0; _i2 < 54; _i2++) {
          trendData.push({
            id: "".concat(_i2),
            label: "Week".concat(_i2),
            dropdown: 'value',
            type: 'trend_field',
            index: '2'
          });
        }

        break;

      case 'hour':
        for (var _i3 = 0; _i3 < 24; _i3++) {
          if (_i3 === 0) {
            trendData.push({
              id: "".concat(_i3),
              label: 'Midnight hour',
              dropdown: 'value',
              type: 'trend_field',
              index: '2'
            });
          } else if (_i3 < 12) {
            trendData.push({
              id: "".concat(_i3),
              label: "".concat(_i3, " am hour"),
              dropdown: 'value',
              type: 'trend_field',
              index: '2'
            });
          } else if (_i3 === 12) {
            trendData.push({
              id: "".concat(_i3),
              label: 'Noon hour',
              dropdown: 'value',
              type: 'trend_field',
              index: '2'
            });
          } else {
            trendData.push({
              id: "".concat(_i3),
              label: "".concat(_i3 - 12, " pm hour"),
              dropdown: 'value',
              type: 'trend_field',
              index: '2'
            });
          }
        }

        break;
    }

    return trendData;
  },
  getValue: function getValue(_ref4) {
    var value = _ref4.value,
        editor = _ref4.editor;
    var resultValue;

    switch (editor) {
      case 'between_field':
        resultValue = {};
        value = value.split('@');
        value.forEach(function (val, index) {
          var sliceFrom = val.indexOf("('") + 2;
          resultValue[index] = val.slice(sliceFrom, sliceFrom + 10);
        });
        break;

      case 'relative_field':
        resultValue = {};
        value = value.split('@');
        resultValue['0'] = value[0] === 'GT' ? 'after' : 'before';
        resultValue['1'] = value[3];
        resultValue['2'] = value[1];
        resultValue['3'] = value[2];
        break;

      case 'glide_duration':
        resultValue = {};
        value = value.slice(value.indexOf("('") + 2);
        resultValue['0'] = value.slice(0, value.indexOf(' '));
        value = value.slice(resultValue['0'].length + 1, value.indexOf("')")).split(':');
        value.forEach(function (val, index) {
          resultValue[index + 1] = val;
        });
        break;

      case 'glide_date_choice':
        value = value.slice(value.indexOf("('") + 2);
        resultValue = value.slice(0, value.indexOf("'"));
        break;

      case 'trend_field':
        resultValue = {};
        resultValue['2'] = {
          label: value.slice(0, value.indexOf("@"))
        };
        value = value.slice(value.indexOf("('") + 1, value.indexOf("')") + 1).split(',');
        value = value.map(function (val) {
          return val.replace(/\'/g, '');
        });
        resultValue['0'] = value[2];
        resultValue['1'] = value[0];
        resultValue['2'].id = value[1];
        break;

      case 'glide_date_equivalent':
        resultValue = {};
        value = value.split('@');
        resultValue['0'] = value[1];
        resultValue['1'] = value[0];
        break;

      case 'glide_date_comparative':
        resultValue = {};
        value = value.split('@');
        resultValue['0'] = value[3];
        resultValue['1'] = value[1];
        resultValue['2'] = value[2];
        resultValue['3'] = value[0];
        break;

      default:
        resultValue = value;
    }

    return resultValue;
  }
};
exports.DATA_UTILS = DATA_UTILS;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9GaWx0ZXJDb25kaXRpb25CdWlsZGVyL3V0aWxzL19kYXRhVXRpbHMuanMiXSwibmFtZXMiOlsiREFUQV9VVElMUyIsImdldERyb3Bkb3duRmllbGRzSXRlbXMiLCJ0YWJsZUZpZWxkcyIsImluZGV4IiwiYmxvY2tGaWVsZHMiLCJhbGxvd0ZpbGVkcyIsImxpc3RJbmRleCIsImRyb3Bkb3duRmllbGRzIiwiZmllbGRzTGFiZWxDb3VudCIsImtleSIsImxhYmVsIiwicHVzaCIsIm5hbWUiLCJvcGVyYXRvcnMiLCJsZW5ndGgiLCJmaW5kIiwiaWQiLCJkcm9wZG93biIsInJlZmVyZW5jZSIsInR5cGUiLCJ0YWJsZSIsImZpcnN0T3BlcmF0b3IiLCJvcGVyYXRvciIsImVkaXRvciIsImFkdmFuY2VkRWRpdG9yIiwic29ydCIsImN1ciIsIm5leHQiLCJsb2NhbGVDb21wYXJlIiwiZm9yRWFjaCIsImZpZWxkIiwiZ2V0VmFsdWVBZGRpdGlvbmFsRGF0YSIsInZhbHVlQWRkaXRpb25hbERhdGEiLCJKU09OIiwic3RyaW5naWZ5IiwiY2hvaWNlcyIsIm1hcCIsImNob2ljZSIsInZhbHVlIiwiZHluYW1pY19jaG9pY2VzIiwiZ2V0T3BlcmF0b3JzIiwiYXJyIiwiZWwiLCJBcnJheSIsImZyb20iLCJTZXQiLCJnZXRUcmVuZERhdGEiLCJpdGVtIiwidHJlbmREYXRhIiwibW9tZW50Iiwid2Vla2RheXMiLCJkYXkiLCJ0b0xvd2VyQ2FzZSIsIm1vbnRocyIsIm1vbnRoIiwic2xpY2UiLCJpIiwieWVhciIsImdldFZhbHVlIiwicmVzdWx0VmFsdWUiLCJzcGxpdCIsInZhbCIsInNsaWNlRnJvbSIsImluZGV4T2YiLCJyZXBsYWNlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQU8sSUFBTUEsVUFBVSxHQUFHO0FBQ3RCQyxFQUFBQSxzQkFBc0IsRUFBRSxzQ0FBaUU7QUFBQSxRQUE5REMsV0FBOEQsUUFBOURBLFdBQThEO0FBQUEs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QUF4QjtBQUNBcUIsUUFBQUEsV0FBVyxDQUFDLEdBQUQsQ0FBWCxHQUFtQnJCLEtBQUssQ0FBQyxDQUFELENBQXhCO0FBQ0E7O0FBQ0osV0FBSyx3QkFBTDtBQUNJcUIsUUFBQUEsV0FBVyxHQUFHLEVBQWQ7QUFDQXJCLFFBQUFBLEtBQUssR0FBR0EsS0FBSyxDQUFDc0IsS0FBTixDQUFZLEdBQVosQ0FBUjtBQUNBRCxRQUFBQSxXQUFXLENBQUMsR0FBRCxDQUFYLEdBQW1CckIsS0FBSyxDQUFDLENBQUQsQ0FBeEI7QUFDQXFCLFFBQUFBLFdBQVcsQ0FBQyxHQUFELENBQVgsR0FBbUJyQixLQUFLLENBQUMsQ0FBRCxDQUF4QjtBQUNBcUIsUUFBQUEsV0FBVyxDQUFDLEdBQUQsQ0FBWCxHQUFtQnJCLEtBQUssQ0FBQyxDQUFELENBQXhCO0FBQ0FxQixRQUFBQSxXQUFXLENBQUMsR0FBRCxDQUFYLEdBQW1CckIsS0FBSyxDQUFDLENBQUQsQ0FBeEI7QUFDQTs7QUFDSjtBQUNJcUIsUUFBQUEsV0FBVyxHQUFHckIsS0FBZDtBQXREUjs7QUF5REEsV0FBT3FCLFdBQVA7QUFDSDtBQTNLcUIsQ0FBbkIiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgREFUQV9VVElMUyA9IHtcclxuICAgIGdldERyb3Bkb3duRmllbGRzSXRlbXM6ICh7IHRhYmxlRmllbGRzLCBpbmRleCwgYmxvY2tGaWVsZHMsIGFsbG93RmlsZWRzLCBsaXN0SW5kZXggfSkgPT4ge1xyXG4gICAgICAgIGxldCBkcm9wZG93bkZpZWxkcyA9IFtdO1xyXG4gICAgICAgIGxldCBmaWVsZHNMYWJlbENvdW50ID0ge307XHJcblxyXG4gICAgICAgIGZvciAobGV0IGtleSBpbiB0YWJsZUZpZWxkcykge1xyXG4gICAgICAgICAgICBmaWVsZHNMYWJlbENvdW50W3RhYmxlRmllbGRzW2tleV0ubGFiZWxdXHJcbiAgICAgICAgICAgICAgICA/IGZpZWxkc0xhYmVsQ291bnRbdGFibGVGaWVsZHNba2V5XS5sYWJlbF0ucHVzaCh0YWJsZUZpZWxkc1trZXldLm5hbWUpXHJcbiAgICAgICAgICAgICAgICA6IGZpZWxkc0xhYmVsQ291bnRbdGFibGVGaWVsZHNba2V5XS5sYWJlbF0gPSBbdGFibGVGaWVsZHNba2V5XS5uYW1lXTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0YWJsZUZpZWxkc1trZXldLm9wZXJhdG9ycykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGJsb2NrRmllbGRzICYmIGJsb2NrRmllbGRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICFibG9ja0ZpZWxkcy5maW5kKG5hbWUgPT4gdGFibGVGaWVsZHNba2V5XS5uYW1lID09PSBuYW1lKSAmJiBkcm9wZG93bkZpZWxkcy5wdXNoKHsgaWQ6IHRhYmxlRmllbGRzW2tleV0ubmFtZSwgbGFiZWw6IGAke3RhYmxlRmllbGRzW2tleV0ubGFiZWx9YCwgZHJvcGRvd246ICdmaWVsZCcsIGluZGV4LCByZWZlcmVuY2U6IGAke3RhYmxlRmllbGRzW2tleV0udHlwZSA9PT0gJ3JlZmVyZW5jZSd9YCwgdGFibGU6IHRhYmxlRmllbGRzW2tleV0ucmVmZXJlbmNlLCBmaXJzdE9wZXJhdG9yOiAge29wZXJhdG9yOiB0YWJsZUZpZWxkc1trZXldLm9wZXJhdG9yc1swXS5vcGVyYXRvciwgZWRpdG9yOiB0YWJsZUZpZWxkc1trZXldLm9wZXJhdG9yc1swXS5hZHZhbmNlZEVkaXRvcn0gfHwgJycgfSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGFsbG93RmlsZWRzICYmIGFsbG93RmlsZWRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFsbG93RmlsZWRzLmZpbmQobmFtZSA9PiB0YWJsZUZpZWxkc1trZXldLm5hbWUgPT09IG5hbWUpICYmIGRyb3Bkb3duRmllbGRzLnB1c2goeyBpZDogdGFibGVGaWVsZHNba2V5XS5uYW1lLCBsYWJlbDogYCR7dGFibGVGaWVsZHNba2V5XS5sYWJlbH1gLCBkcm9wZG93bjogJ2ZpZWxkJywgaW5kZXgsIHJlZmVyZW5jZTogYCR7dGFibGVGaWVsZHNba2V5XS50eXBlID09PSAncmVmZXJlbmNlJ31gLCB0YWJsZTogdGFibGVGaWVsZHNba2V5XS5yZWZlcmVuY2UsIGZpcnN0T3BlcmF0b3I6ICB7b3BlcmF0b3I6IHRhYmxlRmllbGRzW2tleV0ub3BlcmF0b3JzWzBdLm9wZXJhdG9yLCBlZGl0b3I6IHRhYmxlRmllbGRzW2tleV0ub3BlcmF0b3JzWzBdLmFkdmFuY2VkRWRpdG9yfSB8fCAnJyB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZHJvcGRvd25GaWVsZHMucHVzaCh7IGlkOiB0YWJsZUZpZWxkc1trZXldLm5hbWUsIGxhYmVsOiBgJHt0YWJsZUZpZWxkc1trZXldLmxhYmVsfWAsIGRyb3Bkb3duOiAnZmllbGQnLCBpbmRleCwgbGlzdEluZGV4LCByZWZlcmVuY2U6IGAke3RhYmxlRmllbGRzW2tleV0udHlwZSA9PT0gJ3JlZmVyZW5jZSd9YCwgdGFibGU6IHRhYmxlRmllbGRzW2tleV0ucmVmZXJlbmNlLCBmaXJzdE9wZXJhdG9yOiAge29wZXJhdG9yOiB0YWJsZUZpZWxkc1trZXldLm9wZXJhdG9yc1swXS5vcGVyYXRvciwgZWRpdG9yOiB0YWJsZUZpZWxkc1trZXldLm9wZXJhdG9yc1swXS5hZHZhbmNlZEVkaXRvcn0gfHwgJycgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRyb3Bkb3duRmllbGRzLnNvcnQoKGN1ciwgbmV4dCkgPT4gY3VyLmxhYmVsLmxvY2FsZUNvbXBhcmUobmV4dC5sYWJlbCkpO1xyXG5cclxuICAgICAgICBkcm9wZG93bkZpZWxkcy5mb3JFYWNoKChmaWVsZCwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkc0xhYmVsQ291bnRbZmllbGQubGFiZWxdLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duRmllbGRzW2luZGV4XS5sYWJlbCA9IGAke2ZpZWxkLmxhYmVsfSAoJHtmaWVsZC5pZH0pYDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBkcm9wZG93bkZpZWxkcztcclxuICAgIH0sXHJcbiAgICBnZXRWYWx1ZUFkZGl0aW9uYWxEYXRhOiAoeyB0YWJsZUZpZWxkcywgZWRpdG9yLCBmaWVsZCB9KSA9PiB7XHJcbiAgICAgICAgbGV0IHZhbHVlQWRkaXRpb25hbERhdGEgPSBbXTtcclxuICAgICAgICBzd2l0Y2ggKGVkaXRvcikge1xyXG4gICAgICAgICAgICBjYXNlICdjaG9pY2VfZmllbGRfbmFtZXMnOlxyXG4gICAgICAgICAgICBjYXNlICdnbGlkZV9kYXRlX2VxdWl2YWxlbnQnOlxyXG4gICAgICAgICAgICBjYXNlICdnbGlkZV9kYXRlX2NvbXBhcmF0aXZlJzpcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiB0YWJsZUZpZWxkcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0YWJsZUZpZWxkc1trZXldLnR5cGUgPT09IHRhYmxlRmllbGRzW2ZpZWxkXS50eXBlICYmIEpTT04uc3RyaW5naWZ5KHRhYmxlRmllbGRzW2tleV0pICE9PSBKU09OLnN0cmluZ2lmeSh0YWJsZUZpZWxkc1tmaWVsZF0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlZGl0b3IgPT09ICdnbGlkZV9kYXRlX2VxdWl2YWxlbnQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZUFkZGl0aW9uYWxEYXRhLnB1c2goeyBpZDogdGFibGVGaWVsZHNba2V5XS5uYW1lLCBsYWJlbDogdGFibGVGaWVsZHNba2V5XS5sYWJlbCwgZHJvcGRvd246ICd2YWx1ZScsIHR5cGU6ICdnbGlkZV9kYXRlX2VxdWl2YWxlbnQnLCBpbmRleDogJzEnIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZWRpdG9yID09PSAnZ2xpZGVfZGF0ZV9jb21wYXJhdGl2ZScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlQWRkaXRpb25hbERhdGEucHVzaCh7IGlkOiB0YWJsZUZpZWxkc1trZXldLm5hbWUsIGxhYmVsOiB0YWJsZUZpZWxkc1trZXldLmxhYmVsLCBkcm9wZG93bjogJ3ZhbHVlJywgdHlwZTogJ2dsaWRlX2RhdGVfY29tcGFyYXRpdmUnLCBpbmRleDogJzMnIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZUFkZGl0aW9uYWxEYXRhLnB1c2goeyBpZDogdGFibGVGaWVsZHNba2V5XS5uYW1lLCBsYWJlbDogdGFibGVGaWVsZHNba2V5XS5sYWJlbCwgZHJvcGRvd246ICd2YWx1ZScgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdjaG9pY2UnOlxyXG4gICAgICAgICAgICBjYXNlICdjaG9pY2VfbXVsdGlwbGUnOlxyXG4gICAgICAgICAgICAgICAgdmFsdWVBZGRpdGlvbmFsRGF0YSA9ICB0YWJsZUZpZWxkc1tmaWVsZF0uY2hvaWNlcyA/IHRhYmxlRmllbGRzW2ZpZWxkXS5jaG9pY2VzLm1hcChjaG9pY2UgPT4gKHsgaWQ6IGNob2ljZS52YWx1ZSwgbGFiZWw6IGNob2ljZS5sYWJlbCwgZHJvcGRvd246ICd2YWx1ZScgfSkpIDogW107XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnY2hvaWNlX2R5bmFtaWMnOlxyXG4gICAgICAgICAgICAgICAgdmFsdWVBZGRpdGlvbmFsRGF0YSA9IHRhYmxlRmllbGRzW2ZpZWxkXS5keW5hbWljX2Nob2ljZXMubWFwKGNob2ljZSA9PiAoeyBpZDogY2hvaWNlLnZhbHVlLCBsYWJlbDogY2hvaWNlLmxhYmVsLCBkcm9wZG93bjogJ3ZhbHVlJyB9KSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB2YWx1ZUFkZGl0aW9uYWxEYXRhO1xyXG4gICAgfSxcclxuICAgIGdldE9wZXJhdG9yczogKHt0YWJsZUZpZWxkc30pID0+IHtcclxuICAgICAgICBsZXQgb3BlcmF0b3JzID0gW107XHJcbiAgICAgICAgZm9yIChsZXQga2V5IGluIHRhYmxlRmllbGRzKSB7XHJcbiAgICAgICAgICAgIGlmICh0YWJsZUZpZWxkc1trZXldLm9wZXJhdG9ycykge1xyXG4gICAgICAgICAgICAgICAgbGV0IGFyciA9IHRhYmxlRmllbGRzW2tleV0ub3BlcmF0b3JzLm1hcChlbCA9PiBlbC5vcGVyYXRvcilcclxuICAgICAgICAgICAgICAgIG9wZXJhdG9ycy5wdXNoKC4uLmFycilcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBvcGVyYXRvcnMgPSBBcnJheS5mcm9tKG5ldyBTZXQob3BlcmF0b3JzKSk7XHJcbiAgICAgICAgb3BlcmF0b3JzLnNvcnQoKGN1ciwgbmV4dCkgPT4gbmV4dC5sZW5ndGggLSBjdXIubGVuZ3RoKTtcclxuICAgICAgICByZXR1cm4gb3BlcmF0b3JzO1xyXG4gICAgfSxcclxuICAgIGdldFRyZW5kRGF0YTogKGl0ZW0pID0+IHtcclxuICAgICAgICBsZXQgdHJlbmREYXRhID0gW107XHJcbiAgICAgICAgc3dpdGNoIChpdGVtKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ2RheW9md2Vlayc6XHJcbiAgICAgICAgICAgICAgICB0cmVuZERhdGEgPSBtb21lbnQud2Vla2RheXMoKS5tYXAoZGF5ID0+ICh7IGlkOiBkYXkudG9Mb3dlckNhc2UoKSwgbGFiZWw6IGRheSwgZHJvcGRvd246ICd2YWx1ZScsIHR5cGU6ICd0cmVuZF9maWVsZCcsIGluZGV4OiAnMicgfSkpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ21vbnRoJzpcclxuICAgICAgICAgICAgICAgIHRyZW5kRGF0YSA9IG1vbWVudC5tb250aHMoKS5tYXAobW9udGggPT4gKHsgaWQ6IG1vbnRoLnRvTG93ZXJDYXNlKCkuc2xpY2UoMCwgMyksIGxhYmVsOiBtb250aCwgZHJvcGRvd246ICd2YWx1ZScsIHR5cGU6ICd0cmVuZF9maWVsZCcsIGluZGV4OiAnMicgfSkpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3F1YXJ0ZXInOlxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCA1OyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB0cmVuZERhdGEucHVzaCh7IGlkOiBgJHtpfWAsIGxhYmVsOiBgUXVhcnRlciR7aX1gLCBkcm9wZG93bjogJ3ZhbHVlJywgdHlwZTogJ3RyZW5kX2ZpZWxkJywgaW5kZXg6ICcyJyB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3llYXInOlxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IG1vbWVudCgpLnllYXIoKSAtIDIwOyBpIDwgbW9tZW50KCkueWVhcigpICsgMTA7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyZW5kRGF0YS5wdXNoKHsgaWQ6IGAke2l9YCwgbGFiZWw6IGksIGRyb3Bkb3duOiAndmFsdWUnLCB0eXBlOiAndHJlbmRfZmllbGQnLCBpbmRleDogJzInIH0pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnd2Vlayc6XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDU0OyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB0cmVuZERhdGEucHVzaCh7IGlkOiBgJHtpfWAsIGxhYmVsOiBgV2VlayR7aX1gLCBkcm9wZG93bjogJ3ZhbHVlJywgdHlwZTogJ3RyZW5kX2ZpZWxkJywgaW5kZXg6ICcyJyB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2hvdXInOlxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAyNDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJlbmREYXRhLnB1c2goeyBpZDogYCR7aX1gLCBsYWJlbDogJ01pZG5pZ2h0IGhvdXInLCBkcm9wZG93bjogJ3ZhbHVlJywgdHlwZTogJ3RyZW5kX2ZpZWxkJywgaW5kZXg6ICcyJyB9KVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaSA8IDEyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyZW5kRGF0YS5wdXNoKHsgaWQ6IGAke2l9YCwgbGFiZWw6IGAke2l9IGFtIGhvdXJgLCBkcm9wZG93bjogJ3ZhbHVlJywgdHlwZTogJ3RyZW5kX2ZpZWxkJywgaW5kZXg6ICcyJyB9KVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaSA9PT0gMTIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJlbmREYXRhLnB1c2goeyBpZDogYCR7aX1gLCBsYWJlbDogJ05vb24gaG91cicsIGRyb3Bkb3duOiAndmFsdWUnLCB0eXBlOiAndHJlbmRfZmllbGQnLCBpbmRleDogJzInIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJlbmREYXRhLnB1c2goeyBpZDogYCR7aX1gLCBsYWJlbDogYCR7aSAtIDEyfSBwbSBob3VyYCwgZHJvcGRvd246ICd2YWx1ZScsIHR5cGU6ICd0cmVuZF9maWVsZCcsIGluZGV4OiAnMicgfSlcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRyZW5kRGF0YTtcclxuICAgIH0sXHJcbiAgICBnZXRWYWx1ZTogKHt2YWx1ZSwgZWRpdG9yfSkgPT4ge1xyXG4gICAgICAgIGxldCByZXN1bHRWYWx1ZTtcclxuICAgICAgICBzd2l0Y2ggKGVkaXRvcikge1xyXG4gICAgICAgICAgICBjYXNlICdiZXR3ZWVuX2ZpZWxkJzpcclxuICAgICAgICAgICAgICAgIHJlc3VsdFZhbHVlID0ge307XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnNwbGl0KCdAJyk7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZS5mb3JFYWNoKCh2YWwsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNsaWNlRnJvbSA9IHZhbC5pbmRleE9mKFwiKCdcIikgKyAyO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdFZhbHVlW2luZGV4XSA9IHZhbC5zbGljZShzbGljZUZyb20sIHNsaWNlRnJvbSArIDEwKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAncmVsYXRpdmVfZmllbGQnOlxyXG4gICAgICAgICAgICAgICAgcmVzdWx0VmFsdWUgPSB7fTtcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUuc3BsaXQoJ0AnKTtcclxuICAgICAgICAgICAgICAgIHJlc3VsdFZhbHVlWycwJ10gPSB2YWx1ZVswXSA9PT0gJ0dUJyA/ICdhZnRlcicgOiAnYmVmb3JlJztcclxuICAgICAgICAgICAgICAgIHJlc3VsdFZhbHVlWycxJ10gPSB2YWx1ZVszXTtcclxuICAgICAgICAgICAgICAgIHJlc3VsdFZhbHVlWycyJ10gPSB2YWx1ZVsxXTtcclxuICAgICAgICAgICAgICAgIHJlc3VsdFZhbHVlWyczJ10gPSB2YWx1ZVsyXTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdnbGlkZV9kdXJhdGlvbic6XHJcbiAgICAgICAgICAgICAgICByZXN1bHRWYWx1ZSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5zbGljZSh2YWx1ZS5pbmRleE9mKFwiKCdcIikgKyAyKTtcclxuICAgICAgICAgICAgICAgIHJlc3VsdFZhbHVlWycwJ10gPSB2YWx1ZS5zbGljZSgwLCB2YWx1ZS5pbmRleE9mKCcgJykpO1xyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5zbGljZShyZXN1bHRWYWx1ZVsnMCddLmxlbmd0aCArIDEsIHZhbHVlLmluZGV4T2YoXCInKVwiKSkuc3BsaXQoJzonKTtcclxuICAgICAgICAgICAgICAgIHZhbHVlLmZvckVhY2goKHZhbCwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHRWYWx1ZVtpbmRleCArIDFdID0gdmFsO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdnbGlkZV9kYXRlX2Nob2ljZSc6XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnNsaWNlKHZhbHVlLmluZGV4T2YoXCIoJ1wiKSArIDIpO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0VmFsdWUgPSB2YWx1ZS5zbGljZSgwLCB2YWx1ZS5pbmRleE9mKFwiJ1wiKSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAndHJlbmRfZmllbGQnOlxyXG4gICAgICAgICAgICAgICAgcmVzdWx0VmFsdWUgPSB7fTtcclxuICAgICAgICAgICAgICAgIHJlc3VsdFZhbHVlWycyJ10gPSB7IGxhYmVsOiB2YWx1ZS5zbGljZSgwLCB2YWx1ZS5pbmRleE9mKFwiQFwiKSkgfTtcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUuc2xpY2UodmFsdWUuaW5kZXhPZihcIignXCIpICsgMSwgdmFsdWUuaW5kZXhPZihcIicpXCIpICsgMSkuc3BsaXQoJywnKTtcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUubWFwKHZhbCA9PiB2YWwucmVwbGFjZSgvXFwnL2csICcnKSk7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRWYWx1ZVsnMCddID0gdmFsdWVbMl07XHJcbiAgICAgICAgICAgICAgICByZXN1bHRWYWx1ZVsnMSddID0gdmFsdWVbMF07XHJcbiAgICAgICAgICAgICAgICByZXN1bHRWYWx1ZVsnMiddLmlkID0gdmFsdWVbMV07XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnZ2xpZGVfZGF0ZV9lcXVpdmFsZW50JzpcclxuICAgICAgICAgICAgICAgIHJlc3VsdFZhbHVlID0ge307XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnNwbGl0KCdAJyk7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRWYWx1ZVsnMCddID0gdmFsdWVbMV07XHJcbiAgICAgICAgICAgICAgICByZXN1bHRWYWx1ZVsnMSddID0gdmFsdWVbMF07XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnZ2xpZGVfZGF0ZV9jb21wYXJhdGl2ZSc6XHJcbiAgICAgICAgICAgICAgICByZXN1bHRWYWx1ZSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5zcGxpdCgnQCcpO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0VmFsdWVbJzAnXSA9IHZhbHVlWzNdO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0VmFsdWVbJzEnXSA9IHZhbHVlWzFdO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0VmFsdWVbJzInXSA9IHZhbHVlWzJdO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0VmFsdWVbJzMnXSA9IHZhbHVlWzBdO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXN1bHRWYWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICByZXR1cm4gcmVzdWx0VmFsdWU7XHJcbiAgICB9LFxyXG4gICAgXHJcbn0iXX0=