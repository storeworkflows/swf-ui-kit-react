{"version":3,"sources":["../../src/Popover/utils.js"],"names":["verticalAlignment","horizontalAlignment","calculatePosition","alignType","arrayType","startPosition","result","getArrowStyles","position","contentDimensions","style","borderStyle","targetPosition","target","split","contentPosition","content","hasArrow","height","width","getStyleByPosition","targetDimensions","windowWidth","verticalAlign","horizontalAlign","targetWidth","targetHeight","top","left","x","y","contentWidth","contentHeight","transform","resultX","parseInt","replace","resultY","isXVisible","isYVisible","isVisible","console","log","getPopoverStyle","positions","arrowStyles","i","length","has","arrowStyle"],"mappings":"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","sourcesContent":["const verticalAlignment = [\"top\", \"center\", \"bottom\"];\nconst horizontalAlignment = [\"start\", \"center\", \"end\"];\n\nconst calculatePosition = (alignType, arrayType, startPosition) => {\n    let result = \"0\";\n    if(alignType === arrayType[1])\n        result = `${startPosition/2}px`;\n    else if(alignType === arrayType[2])\n        result= `${startPosition}px`;\n\n    return result;\n}\n\nconst getArrowStyles = (position, contentDimensions) => {\n    let style = {};\n    let borderStyle = `var(--popover-border-width) solid rgba(0, 0, 0, 0.3)`;\n    let targetPosition = position.target.split('-');\n    let contentPosition = position.content.split('-');\n\n    let hasArrow = true;\n    if(targetPosition[0] === \"top\" && contentPosition[0] === \"bottom\"){\n        //down\n        style['--popover-arrow-border-right'] = borderStyle;\n        style['--popover-arrow-border-bottom'] = borderStyle;\n\n        style['--popover-arrow-top'] = contentDimensions.height+\"px\";\n        style['--popover-arrow-left'] = calculatePosition(contentPosition[1], horizontalAlignment, contentDimensions.width);\n\n    } else if(targetPosition[1] === \"start\" && contentPosition[1] === \"end\"){\n        //right\n        style['--popover-arrow-border-right'] = borderStyle;\n        style['--popover-arrow-border-top'] = borderStyle;\n\n        style['--popover-arrow-top'] = calculatePosition(contentPosition[0], verticalAlignment, contentDimensions.height);\n        style['--popover-arrow-left'] = contentDimensions.width+\"px\";\n\n    } else if(targetPosition[1] === \"end\" && contentPosition[1] === \"start\"){\n        //left\n        style['--popover-arrow-border-left'] = borderStyle;\n        style['--popover-arrow-border-bottom'] = borderStyle\n\n        style['--popover-arrow-top'] = calculatePosition(contentPosition[0], verticalAlignment, contentDimensions.height);\n        style['--popover-arrow-left'] = 0;\n\n    }  else if(targetPosition[0] === \"bottom\" && contentPosition[0] === \"top\"){\n        //up\n        style['--popover-arrow-border-left'] = borderStyle;\n        style['--popover-arrow-border-top'] = borderStyle\n\n        style['--popover-arrow-top'] = 0;\n        style['--popover-arrow-left'] = calculatePosition(contentPosition[1], horizontalAlignment, contentDimensions.width);\n    } else\n        hasArrow = false;\n\n    return {hasArrow: hasArrow, style: style};\n}\n\nconst getStyleByPosition = (position, targetDimensions, contentDimensions, windowWidth) => {\n    let style = {};\n    let targetPosition = position.target;\n    let contentPosition = position.content;\n\n    if(targetPosition){\n        let verticalAlign = targetPosition.split('-')[0];\n        let horizontalAlign = targetPosition.split('-')[1];\n\n        let targetWidth = targetDimensions.width;\n        let targetHeight = targetDimensions.height;\n\n        style.top = calculatePosition(verticalAlign, verticalAlignment, targetHeight);\n        style.left = calculatePosition(horizontalAlign, horizontalAlignment, targetWidth);\n    }\n\n    let x, y;\n    if(contentPosition){\n        let verticalAlign = contentPosition.split('-')[0];\n        let horizontalAlign = contentPosition.split('-')[1];\n\n        let contentWidth = contentDimensions.width;\n        let contentHeight = contentDimensions.height;\n\n        y = calculatePosition(verticalAlign, verticalAlignment, -contentHeight);\n        x = calculatePosition(horizontalAlign, horizontalAlignment, -contentWidth);\n\n        style.transform = `translate3d(${x}, ${y}, 0)`;\n    }\n\n    let resultX = targetDimensions.x +\n        parseInt(style.left.replace(\"px\", '')) +\n        parseInt(x.replace(\"px\", ''));\n\n    let resultY = targetDimensions.y +\n        parseInt(style.top.replace(\"px\", '')) +\n        parseInt(y.replace(\"px\", ''));\n\n    let isXVisible = resultX>0 && (resultX + contentDimensions.width) < windowWidth;\n    let isYVisible = resultY>0;\n\n    let isVisible = isXVisible && isYVisible;\n\n    console.log(\"visibility\", isVisible);\n    return {style: style, isVisible: isVisible};\n}\n\n\nexport const getPopoverStyle = (positions, targetDimensions, contentDimensions, windowWidth) => {\n    let style = {};\n\n    let result;\n    let arrowStyles;\n    for(let i = 0; i<positions.length; i++){\n        result = getStyleByPosition(positions[i], targetDimensions, contentDimensions, windowWidth);\n        if(result.isVisible)\n        {\n            style = result.style;\n            arrowStyles = getArrowStyles (positions[i], contentDimensions);\n            break;\n        }else if(i === positions.length -1)\n        {\n            style = getStyleByPosition(positions[0], targetDimensions, contentDimensions, windowWidth).style;\n            arrowStyles = getArrowStyles (positions[0], contentDimensions);\n        }\n    }\n\n\n    return {style: style, hasArrow: arrowStyles.has, arrowStyle: arrowStyles.style};\n}"],"file":"utils.js"}