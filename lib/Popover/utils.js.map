{"version":3,"sources":["../../src/Popover/utils.js"],"names":["ALIGNMENT","POPOVER","ARROW_SIZE","ARROW_ALIGN","NO_ARROW_POSITIONS","ARROW_SIDES","ARROW_SPACE","verticalAlignment","TOP","CENTER","BOTTOM","horizontalAlignment","START","END","setArrowColor","align","setMargin","setArrowSize","hasArrowByPosition","position","roundBorder","isOneOfNoArrow","isCenterArrow","targetPosition","target","split","contentPosition","content","result","forEach","elTargetPosition","elContentPosition","isSameTargetParams","isSameContentParams","calculatePosition","alignType","arrayType","startPosition","addPx","Math","round","getArrowAlignment","parentSize","size","getArrowStyles","contentDimensions","style","margin","isDown","isLeft","isRight","isUp","hasArrow","sideToZero","colorSide","top","left","height","width","RIGHT","LEFT","getStyleByPosition","targetDimensions","windowParam","verticalAlign","horizontalAlign","targetWidth","targetHeight","addPxY","needMoveContent","needMoveContentY","y","x","translateX","translateY","contentWidth","contentHeight","transform","resultX","resultY","isXVisible","startX","endX","isYVisible","startY","endY","isVisible","getAllStyles","arrowStyles","popoverStyles","arrowStyle","isOuterPosition","targetVertical","targetHorizontal","contentVertical","contentHorizontal","getAllPossiblePositions","v","h","push","getAllPossibleVariants","allPositions","targetPos","contentPos","unshift","getPopoverStyle","positions","hideTail","i","length"],"mappings":"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","sourcesContent":["import {POPOVER} from \"./constants\";\r\nconst {ALIGNMENT, ARROW_SIZE, ARROW_ALIGN, NO_ARROW_POSITIONS, ARROW_SIDES, ARROW_SPACE} = POPOVER\r\n\r\nconst verticalAlignment = [ALIGNMENT.TOP, ALIGNMENT.CENTER, ALIGNMENT.BOTTOM];\r\nconst horizontalAlignment = [ALIGNMENT.START, ALIGNMENT.CENTER, ALIGNMENT.END];\r\n\r\nconst setArrowColor = (align) => {\r\n    return `--arrow-${align}-color`;\r\n}\r\nconst setMargin = (align) => {\r\n    return `margin-${align}`;\r\n}\r\nconst setArrowSize = (align) => {\r\n    return `--arrow-${align}-size`;\r\n}\r\n\r\nconst hasArrowByPosition = (position, roundBorder) =>{\r\n    return !(isOneOfNoArrow(position) || (roundBorder && !isCenterArrow(position)));\r\n}\r\n\r\nconst isOneOfNoArrow = (position) => {\r\n    let targetPosition = position.target.split('-');\r\n    let contentPosition = position.content.split('-');\r\n\r\n    let result = false;\r\n    NO_ARROW_POSITIONS.forEach( ({content, target}) => {\r\n        let elTargetPosition = target.split('-');\r\n        let elContentPosition = content.split('-');\r\n        let isSameTargetParams = targetPosition[0] === elTargetPosition[0] && targetPosition[1] === elTargetPosition[1];\r\n        let isSameContentParams = contentPosition[0] === elContentPosition[0] && contentPosition[1] === elContentPosition[1];\r\n\r\n        if(isSameTargetParams && isSameContentParams)\r\n            result = true;\r\n    })\r\n    return result;\r\n}\r\n\r\nconst isCenterArrow = (position) => {\r\n    let contentPosition = position.content.split('-');\r\n    return contentPosition[0] === ALIGNMENT.CENTER || contentPosition[1] === ALIGNMENT.CENTER;\r\n}\r\n\r\nconst calculatePosition = (alignType, arrayType, startPosition, addPx = 0) => {\r\n    let result = addPx;\r\n    if(alignType === arrayType[1])\r\n        result = Math.round(startPosition/2) + addPx;\r\n    else if(alignType === arrayType[2])\r\n        result = startPosition + addPx;\r\n\r\n    return result;\r\n}\r\n\r\n\r\nconst getArrowAlignment = (arrayType, align, parentSize, size) => {\r\n    if(align === arrayType[1])\r\n        return Math.round(parentSize/2) - size;\r\n    else if ( align === arrayType[2])\r\n        return parentSize - size*2;\r\n    else\r\n        return 0;\r\n}\r\n\r\nconst getArrowStyles = (position, contentDimensions) => {\r\n    let style = {};\r\n    let targetPosition = position.target.split('-');\r\n    let contentPosition = position.content.split('-');\r\n    let margin = `${ARROW_SIZE + ARROW_SPACE}px`\r\n\r\n    let isDown = targetPosition[0] === ALIGNMENT.TOP && contentPosition[0] === ALIGNMENT.BOTTOM;\r\n    let isLeft = targetPosition[1] === ALIGNMENT.END && contentPosition[1] === ALIGNMENT.START;\r\n    let isRight = targetPosition[1] === ALIGNMENT.START && contentPosition[1] === ALIGNMENT.END;\r\n    let isUp = targetPosition[0] === ALIGNMENT.BOTTOM && contentPosition[0] === ALIGNMENT.TOP;\r\n\r\n    let hasArrow = true;\r\n    let sideToZero = null;\r\n    let colorSide = null;\r\n    let top = 0;\r\n    let left = 0;\r\n\r\n    switch(true){\r\n        case isDown :\r\n            sideToZero = ARROW_SIDES.BOTTOM;\r\n            colorSide = ARROW_SIDES.TOP;\r\n\r\n            top = contentDimensions.height;\r\n            left = getArrowAlignment(horizontalAlignment, contentPosition[1], contentDimensions.width, ARROW_SIZE);\r\n\r\n            break;\r\n        case isRight :\r\n            sideToZero = ARROW_SIDES.RIGHT;\r\n            colorSide = ARROW_SIDES.LEFT;\r\n\r\n            top = getArrowAlignment(verticalAlignment, contentPosition[0], contentDimensions.height, ARROW_SIZE);\r\n            left = contentDimensions.width;\r\n\r\n            break;\r\n        case isLeft:\r\n            sideToZero = ARROW_SIDES.LEFT;\r\n            colorSide = ARROW_SIDES.RIGHT;\r\n\r\n            top = getArrowAlignment(verticalAlignment, contentPosition[0], contentDimensions.height, ARROW_SIZE);\r\n            left = -ARROW_SIZE;\r\n\r\n            break;\r\n        case isUp:\r\n            sideToZero = ARROW_SIDES.TOP;\r\n            colorSide = ARROW_SIDES.BOTTOM;\r\n\r\n            top = -ARROW_SIZE;\r\n            left = getArrowAlignment(horizontalAlignment, contentPosition[1], contentDimensions.width, ARROW_SIZE);\r\n\r\n            break;\r\n        default:\r\n            hasArrow = false;\r\n            break;\r\n    }\r\n\r\n    if(hasArrow){\r\n        style[ARROW_ALIGN.TOP] = `${top}px`;\r\n        style[ARROW_ALIGN.LEFT] = `${left}px`;\r\n\r\n        style[setArrowColor(colorSide)] = 'var(--popover-background)';\r\n        style[setArrowSize(sideToZero)] = 0;\r\n        style[setMargin(sideToZero)] = margin;\r\n    }\r\n    return {hasArrow: hasArrow, style: style};\r\n}\r\n\r\nconst getStyleByPosition = (position, targetDimensions, contentDimensions, windowParam, hasArrow) => {\r\n    let style = {};\r\n    let targetPosition = position.target.split('-');\r\n    let contentPosition = position.content.split('-');\r\n\r\n    let top = 0;\r\n    let left = 0;\r\n    if(targetPosition){\r\n        let verticalAlign = targetPosition[0];\r\n        let horizontalAlign = targetPosition[1];\r\n\r\n        let targetWidth = targetDimensions.width;\r\n        let targetHeight = targetDimensions.height;\r\n\r\n        let addPx = 0;\r\n        let addPxY = 0\r\n\r\n        let needMoveContent = verticalAlign === ALIGNMENT.TOP && contentPosition[0] === ALIGNMENT.BOTTOM;\r\n        let needMoveContentY = horizontalAlign === ALIGNMENT.START && contentPosition[1] === ALIGNMENT.END;\r\n\r\n        if(needMoveContent && hasArrow)\r\n            addPx = -ARROW_SIZE - ARROW_SPACE;\r\n\r\n        if(needMoveContentY && hasArrow)\r\n            addPxY = -ARROW_SIZE - ARROW_SPACE;\r\n\r\n        top = targetDimensions.y - contentDimensions.y + calculatePosition(verticalAlign, verticalAlignment, targetHeight, addPx);\r\n        left = targetDimensions.x - contentDimensions.x + calculatePosition(horizontalAlign, horizontalAlignment, targetWidth, addPxY);\r\n\r\n        style.top = `${top}px`;\r\n        style.left = `${left}px`;\r\n    }\r\n\r\n    let translateX, translateY;\r\n    if(contentPosition){\r\n        let verticalAlign = contentPosition[0];\r\n        let horizontalAlign = contentPosition[1];\r\n\r\n        let contentWidth = contentDimensions.width;\r\n        let contentHeight = contentDimensions.height;\r\n\r\n        translateY = calculatePosition(verticalAlign, verticalAlignment, -contentHeight);\r\n        translateX = calculatePosition(horizontalAlign, horizontalAlignment, -contentWidth);\r\n\r\n        style.transform = `translate3d(${translateX}px, ${translateY}px, 0)`;\r\n    }\r\n\r\n    let resultX = contentDimensions.x + left + translateX;\r\n    let resultY = contentDimensions.y + top + translateY;\r\n\r\n    let isXVisible = resultX>windowParam.startX && (resultX + contentDimensions.width) < windowParam.endX;\r\n    let isYVisible = resultY>windowParam.startY && (resultY + contentDimensions.height) < windowParam.endY;\r\n\r\n    let isVisible = isXVisible && isYVisible;\r\n\r\n    return {style: style, isVisible: isVisible};\r\n}\r\n\r\nconst getAllStyles = (position, targetDimensions, contentDimensions, windowParam, hasArrow) => {\r\n    let arrowStyles = { hasArrow: false, style:{}};\r\n    let popoverStyles = getStyleByPosition(position, targetDimensions, contentDimensions, windowParam, hasArrow);\r\n\r\n    if(hasArrow)\r\n        arrowStyles = getArrowStyles(position, contentDimensions);\r\n\r\n    return {isVisible: popoverStyles.isVisible, style: popoverStyles.style, hasArrow: arrowStyles.hasArrow, arrowStyle: arrowStyles.style};\r\n}\r\n\r\nconst isOuterPosition = (position) => {\r\n    let targetPosition = position.target.split('-');\r\n    let contentPosition = position.content.split('-');\r\n\r\n    let targetVertical = targetPosition[0];\r\n    let targetHorizontal = targetPosition[1];\r\n\r\n    let contentVertical = contentPosition[0];\r\n    let contentHorizontal = contentPosition[1];\r\n\r\n    let isDown = targetVertical === ALIGNMENT.TOP && contentVertical === ALIGNMENT.BOTTOM;\r\n    let isLeft = targetHorizontal === ALIGNMENT.END && contentHorizontal=== ALIGNMENT.START;\r\n    let isRight = targetHorizontal === ALIGNMENT.START && contentHorizontal === ALIGNMENT.END;\r\n    let isUp = targetVertical === ALIGNMENT.BOTTOM && contentVertical === ALIGNMENT.TOP;\r\n\r\n     return(isDown || isLeft || isRight || isUp)\r\n}\r\n\r\nconst getAllPossiblePositions = () => {\r\n    let result = []\r\n\r\n    verticalAlignment.forEach((v) => {\r\n        horizontalAlignment.forEach(h => {\r\n            result.push(`${v}-${h}`);\r\n        })\r\n    })\r\n\r\n    return result;\r\n}\r\n\r\n\r\nexport const getAllPossibleVariants = () => {\r\n    let result = [];\r\n\r\n    let allPositions = getAllPossiblePositions();\r\n    allPositions.forEach((targetPos) => {\r\n        allPositions.forEach(contentPos => {\r\n            let position = {target: targetPos, content: contentPos};\r\n            if(isOuterPosition(position))\r\n                result.unshift(position)\r\n            else\r\n                result.push(position)\r\n        })\r\n    })\r\n    return  result;\r\n}\r\n\r\n\r\nexport const getPopoverStyle = (positions, targetDimensions, contentDimensions, windowParam, hideTail, roundBorder) => {\r\n    let result = {};\r\n\r\n    for(let i = 0; i<positions.length; i++){\r\n        let hasArrow = !hideTail && hasArrowByPosition(positions[i], roundBorder);\r\n        result = getAllStyles(positions[i], targetDimensions, contentDimensions, windowParam, hasArrow);\r\n        if(result.isVisible)\r\n            break;\r\n        else if(i === positions.length -1)\r\n            result = getAllStyles(positions[0], targetDimensions, contentDimensions, windowParam, hasArrow);\r\n\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\n\r\n\r\n"],"file":"utils.js"}