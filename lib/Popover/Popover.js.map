{"version":3,"sources":["../../src/Popover/Popover.js"],"names":["Popover","props","targetClicked","bind","state","opened","height","width","targetRef","React","createRef","contentRef","children","content","positionTarget","target","targetContent","manageOpened","onClick","currentState","setState","undefined","value","current","targetDimensions","getBoundingClientRect","contentDimensions","positions","hideTail","roundBorder","stylesInfo","window","innerWidth","styles","style","transform","left","top","hasArrow","Object","entries","arrowStyle","key","setProperty","renderTarget","renderContent","Component","Content","Target","defaultProps","propTypes","bool","element","array","func"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport propTypes from \"prop-types\";\n\nimport styles from \"./styles.scss\";\nimport findByType, {createSubComponent} from \"../utils/findByType\";\nimport {getPopoverStyle} from \"./utils\";\n\nclass Popover extends React.Component {\n    constructor(props) {\n        super(props);\n        this.targetClicked = this.targetClicked.bind(this)\n\n        this.state = {\n            opened: false,\n            height: 0,\n            width: 0\n        }\n\n        this.targetRef = React.createRef();\n        this.contentRef = React.createRef();\n    }\n\n    renderContent() {\n        const {children} = this.props;\n        const content = findByType(children, \"Content\");\n\n        if (!content)\n            return null;\n\n        return <div className=\"popover-content\"\n                    ref={this.contentRef}>\n                {content.props.children} </div>\n    }\n\n    renderTarget() {\n        const {children, positionTarget} = this.props;\n        const target = findByType(children, \"Target\");\n\n        let targetContent = (!target) ? positionTarget : target.props.children ;\n\n        if (!targetContent)\n            return null;\n\n        return <div id =\"popover-target\"\n                    ref={this.targetRef}\n                    onClick={ this.targetClicked }>\n                {targetContent} </div>\n    }\n\n    targetClicked (){\n        const {manageOpened, onClick} = this.props;\n        let currentState = this.state.opened;\n\n        if(!manageOpened) {\n            currentState = !currentState\n            this.setState({\n                opened: currentState\n            });\n        }\n\n        if(onClick!==undefined && onClick!==null)\n            onClick({value: currentState})\n    }\n\n    componentDidMount() {\n        this.setState({\n            opened: this.props.opened\n        })\n    }\n\n    componentDidUpdate(){\n        if(this.contentRef.current)\n        {\n            let targetDimensions = this.targetRef.current.getBoundingClientRect();\n            let contentDimensions = this.contentRef.current.getBoundingClientRect();\n            const {positions, hideTail, roundBorder} = this.props;\n\n            let stylesInfo =  getPopoverStyle(positions, targetDimensions, contentDimensions, window.innerWidth, hideTail, roundBorder);\n            let styles = stylesInfo.style;\n            this.contentRef.current.style.transform = styles.transform;\n            this.contentRef.current.style.left = styles.left;\n            this.contentRef.current.style.top = styles.top;\n\n            if(!hideTail && stylesInfo.hasArrow) {\n                for (const [key, value] of Object.entries(stylesInfo.arrowStyle))\n                    this.contentRef.current.style.setProperty(key, value);\n            }\n        }\n    }\n\n\n    render() {\n        const {opened} = this.state;\n\n        return (\n            <>\n                <style type=\"text/css\">{styles}</style>\n                <div className={\"popover-element\"}>\n                    {this.renderTarget()}\n                    {opened && this.renderContent()}\n                </div>\n            </>\n        );\n    }\n};\n\nPopover.Content = createSubComponent(\"Content\");\nPopover.Target = createSubComponent(\"Target\");\n\nPopover.defaultProps = {\n    hideTail: false,\n    manageOpened: false,\n    opened: false,\n    positions: [\n        { target: 'bottom-start', content: 'top-start' },\n        { target: 'bottom-end', content: 'top-end' },\n        { target: 'top-start', content: 'bottom-start' },\n        { target: 'top-end', content: 'bottom-end' },\n        { target: 'top-end', content: 'top-start' },\n        { target: 'bottom-end', content: 'bottom-start' },\n        { target: 'top-start', content: 'top-end' },\n        { target: 'bottom-start', content: 'bottom-end' }\n    ],\n    roundBorder: true,\n}\n\nPopover.propTypes = {\n    hideTail: propTypes.bool,\n    manageOpened: propTypes.bool,\n    opened: propTypes.bool,\n    positionTarget: propTypes.element,\n    positions: propTypes.array,\n    onClick: propTypes.func,\n    roundBorder: propTypes.bool\n}\n\nexport default Popover"],"file":"Popover.js"}