{"version":3,"sources":["../../src/Popover/Popover.js"],"names":["Popover","props","targetClicked","bind","state","opened","targetRef","React","createRef","contentRef","children","content","positionTarget","target","length","current","el","onclick","classList","toggle","manageOpened","onClick","currentState","setState","undefined","value","targetDimensions","getBoundingClientRect","contentDimensions","positions","hideTail","roundBorder","stylesInfo","window","innerWidth","styles","style","transform","left","top","visibility","hasArrow","Object","entries","arrowStyle","key","setProperty","appendChild","setStylesToContent","elToRemove","querySelector","remove","renderContent","renderTarget","Component","Content","Target","defaultProps","propTypes","bool","PropTypes","oneOfType","func","shape","any","arrayOf","string"],"mappings":"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","sourcesContent":["import * as React from \"react\";\r\nimport propTypes from \"prop-types\";\r\n\r\nimport styles from \"./styles.scss\";\r\nimport findByType, {createSubComponent} from \"../utils/findByType\";\r\nimport {getAllPossibleVariants, getPopoverStyle} from \"./utils\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nclass Popover extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.targetClicked = this.targetClicked.bind(this)\r\n\r\n        this.state = {\r\n            opened: false\r\n        }\r\n\r\n        this.targetRef = React.createRef();\r\n        this.contentRef = React.createRef();\r\n    }\r\n\r\n    renderContent() {\r\n        const {children} = this.props;\r\n        const content = findByType(children, \"Content\");\r\n\r\n        if (!content)\r\n            return null;\r\n\r\n        return <div className=\"popover-content\"\r\n                    ref={this.contentRef}>\r\n                {content} </div>;\r\n\r\n    }\r\n\r\n    renderTarget() {\r\n        const {children, positionTarget} = this.props;\r\n        const target = findByType(children, \"Target\");\r\n\r\n        if(target.length < 1){\r\n\r\n            if(this.targetRef.current === null)\r\n                this.targetRef = positionTarget;\r\n\r\n            let el = this.targetRef.current;\r\n            el.onclick = this.targetClicked ;\r\n            el.classList.toggle(`popover-target`);\r\n\r\n            return null;\r\n        } else {\r\n            if (!target)\r\n                return null;\r\n\r\n            return <div className={\"popover-target\"}\r\n                        ref={this.targetRef}\r\n                        onClick={ this.targetClicked }>\r\n                             {target}\r\n                    </div>\r\n        }\r\n    }\r\n\r\n    targetClicked (){\r\n        const {manageOpened, onClick} = this.props;\r\n        let currentState = this.state.opened;\r\n        if(!manageOpened) {\r\n            this.setState({\r\n                opened: !currentState\r\n            });\r\n        }\r\n\r\n        if(onClick!==undefined && onClick!==null)\r\n            onClick({value: currentState})\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.setState({\r\n            opened: this.props.opened\r\n        })\r\n    }\r\n\r\n    setStylesToContent(){\r\n        if(this.contentRef.current)\r\n        {\r\n            let targetDimensions = this.targetRef.current.getBoundingClientRect();\r\n            let contentDimensions = this.contentRef.current.getBoundingClientRect();\r\n            const {positions, hideTail, roundBorder} = this.props;\r\n\r\n            let stylesInfo =  getPopoverStyle(positions, targetDimensions, contentDimensions, window.innerWidth, hideTail, roundBorder);\r\n            let styles = stylesInfo.style;\r\n            this.contentRef.current.style.transform = styles.transform;\r\n            this.contentRef.current.style.left = styles.left;\r\n            this.contentRef.current.style.top = styles.top;\r\n            this.contentRef.current.style.visibility = \"visible\";\r\n\r\n\r\n            if(!hideTail && stylesInfo.hasArrow) {\r\n                for (const [key, value] of Object.entries(stylesInfo.arrowStyle))\r\n                    this.contentRef.current.style.setProperty(key, value);\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(){\r\n        if(this.state.opened) {\r\n            this.targetRef.current.appendChild(this.contentRef.current);\r\n            this.setStylesToContent();\r\n        }\r\n        else\r\n        {\r\n            let elToRemove = this.targetRef.current.querySelector(\".popover-content\");\r\n            if(elToRemove !==null)\r\n                elToRemove.remove();\r\n        }\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <style type=\"text/css\">{styles}</style>\r\n                {this.renderContent()}\r\n                {this.renderTarget()}\r\n            </>\r\n        );\r\n    }\r\n};\r\n\r\nPopover.Content = createSubComponent(\"Content\");\r\nPopover.Target = createSubComponent(\"Target\");\r\n\r\nPopover.defaultProps = {\r\n    hideTail: false,\r\n    manageOpened: false,\r\n    opened: false,\r\n    positions: getAllPossibleVariants(),\r\n    roundBorder: true,\r\n}\r\n\r\nPopover.propTypes = {\r\n    hideTail: propTypes.bool,\r\n    manageOpened: propTypes.bool,\r\n    opened: propTypes.bool,\r\n    positionTarget: PropTypes.oneOfType([\r\n        PropTypes.func,\r\n        PropTypes.shape({ current: PropTypes.any })\r\n    ]),\r\n    positions: PropTypes.arrayOf(PropTypes.shape({\r\n        target:PropTypes.string,\r\n        content: PropTypes.string,\r\n    })),\r\n    onClick: propTypes.func,\r\n    roundBorder: propTypes.bool\r\n}\r\n\r\nexport default Popover"],"file":"Popover.js"}