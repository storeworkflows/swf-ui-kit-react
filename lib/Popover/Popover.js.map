{"version":3,"sources":["../../src/Popover/Popover.js"],"names":["Content","Target","Popover","props","targetClicked","bind","state","opened","height","width","targetRef","React","createRef","contentRef","children","hideTail","content","positionTarget","target","targetContent","manageOpened","onClick","currentState","setState","undefined","value","current","targetDimensions","getBoundingClientRect","contentDimensions","position","positions","stylesInfo","window","innerWidth","styles","style","transform","left","top","hasArrow","arrowStyle","forEach","console","log","renderTarget","renderContent","Component","defaultProps","propTypes","bool","element","array","func"],"mappings":"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","sourcesContent":["import * as React from \"react\";\r\nimport propTypes from \"prop-types\";\r\n\r\nimport styles from \"./styles.scss\";\r\nimport findByType from \"../utils/findByType\";\r\nimport {getPopoverStyle} from \"./utils\";\r\n\r\nconst Content = () => null;\r\nconst Target = () => null;\r\n\r\n\r\nclass Popover extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.targetClicked = this.targetClicked.bind(this)\r\n\r\n        this.state = {\r\n            opened: false,\r\n            height: 0,\r\n            width: 0\r\n        }\r\n\r\n        this.targetRef = React.createRef();\r\n        this.contentRef = React.createRef();\r\n    }\r\n\r\n    renderContent() {\r\n        const {children, hideTail} = this.props;\r\n        const content = findByType(children, Content);\r\n\r\n        if (!content)\r\n            return null;\r\n\r\n        return <div className=\"popover-content arrow arrow-up\"\r\n                    ref={this.contentRef}>\r\n                {content.props.children} </div>\r\n    }\r\n\r\n    renderTarget() {\r\n        const {children, positionTarget} = this.props;\r\n        const target = findByType(children, Target);\r\n\r\n        let targetContent = (!target) ? positionTarget : target.props.children ;\r\n\r\n        if (!targetContent)\r\n            return null;\r\n\r\n        return <div id =\"popover-target\"\r\n                    ref={this.targetRef}\r\n                    onClick={ this.targetClicked }>\r\n                {targetContent} </div>\r\n    }\r\n\r\n    targetClicked (){\r\n        const {manageOpened, onClick} = this.props;\r\n        let currentState = this.state.opened;\r\n\r\n        if(!manageOpened) {\r\n            currentState = !currentState\r\n            this.setState({\r\n                opened: currentState\r\n            });\r\n        }\r\n\r\n        if(onClick!==undefined && onClick!==null)\r\n            onClick({value: currentState})\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.setState({\r\n            opened: this.props.opened\r\n        })\r\n    }\r\n\r\n    componentDidUpdate(){\r\n        if(this.contentRef.current)\r\n        {\r\n            let targetDimensions = this.targetRef.current.getBoundingClientRect();\r\n            let contentDimensions = this.contentRef.current.getBoundingClientRect();\r\n            let position = this.props.positions;\r\n\r\n            let stylesInfo =  getPopoverStyle(position, targetDimensions, contentDimensions, window.innerWidth);\r\n            let styles = stylesInfo.style;\r\n            this.contentRef.current.style.transform = styles.transform;\r\n            this.contentRef.current.style.left = styles.left;\r\n            this.contentRef.current.style.top = styles.top;\r\n\r\n            if(!this.props.hideTail && stylesInfo.hasArrow){\r\n                stylesInfo.arrowStyle.forEach((style)=> {\r\n                    console.log(style);\r\n                   // this.contentRef.current.style[style] =\r\n                })\r\n            }\r\n            //console.log(\"styles\", this.contentRef.current.style[]);\r\n        }\r\n    }\r\n\r\n\r\n    render() {\r\n        const {opened} = this.state;\r\n\r\n        return (\r\n            <>\r\n                <style type=\"text/css\">{styles}</style>\r\n                <div className={\"popover-element\"}>\r\n                    {this.renderTarget()}\r\n                    {opened && this.renderContent()}\r\n                </div>\r\n            </>\r\n        );\r\n    }\r\n};\r\n\r\nPopover.Content = Content;\r\nPopover.Target = Target;\r\n\r\nPopover.defaultProps = {\r\n    hideTail: false,\r\n    manageOpened: false,\r\n    opened: false,\r\n    positions: [\r\n        { target: 'bottom-start', content: 'top-start' },\r\n        { target: 'bottom-end', content: 'top-end' },\r\n        { target: 'top-start', content: 'bottom-start' },\r\n        { target: 'top-end', content: 'bottom-end' },\r\n        { target: 'top-end', content: 'top-start' },\r\n        { target: 'bottom-end', content: 'bottom-start' },\r\n        { target: 'top-start', content: 'top-end' },\r\n        { target: 'bottom-start', content: 'bottom-end' }\r\n    ]\r\n}\r\n\r\nPopover.propTypes = {\r\n    hideTail: propTypes.bool,\r\n    manageOpened: propTypes.bool,\r\n    opened: propTypes.bool,\r\n    positionTarget: propTypes.element,\r\n    positions: propTypes.array,\r\n    onClick: propTypes.func\r\n}\r\n\r\nexport default Popover"],"file":"Popover.js"}