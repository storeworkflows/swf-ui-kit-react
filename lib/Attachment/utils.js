"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getIconByFileType = exports.checkFileToUpload = exports.sameContent = exports.getFileExtensions = void 0;

var _constants = require("./constants");

var getFileExtensions = function getFileExtensions(fileName) {
  var splitted = fileName.split('.');
  if (splitted.length > 1) return splitted[splitted.length - 1];
  return "";
};

exports.getFileExtensions = getFileExtensions;

var sameContent = function sameContent(fileType, content) {
  return content.some(function (el) {
    return el === fileType;
  });
};

exports.sameContent = sameContent;

var isMediaType = function isMediaType(fileType, mediaType) {
  var type = fileType.split("/")[0];
  return type === mediaType;
};

var checkFileToUpload = function checkFileToUpload(file, props) {
  var maxAttachmentSize = props.maxAttachmentSize,
      contentType = props.contentType,
      extensions = props.extensions,
      errorMessagesDelay = props.errorMessagesDelay,
      tableSysId = props.tableSysId,
      tableName = props.tableName;
  var isFitSize = maxAttachmentSize ? file.size <= maxAttachmentSize : true;
  var isFitType = contentType ? contentType.includes(file.type) : true;
  var isFitExtensions = extensions ? extensions.includes(getFileExtensions(file.name)) : true;
  var errorIcon = "exclamation-circle";
  var errorMessages = [];
  var delay = errorMessagesDelay;
  if (!isFitType) errorMessages.push({
    content: "Available types: ".concat(contentType.join(', ')),
    icon: errorIcon,
    delay: delay
  });
  if (!isFitSize) errorMessages.push({
    content: "Max file size = ".concat(maxAttachmentSize / 1024, " Kb"),
    icon: errorIcon,
    delay: delay
  });
  if (!isFitExtensions) errorMessages.push({
    content: "Available extensions: ".concat(extensions.join(', ')),
    icon: errorIcon,
    delay: delay
  });
  if (!tableSysId || !tableName) errorMessages.push({
    content: "Can't get access to table",
    icon: errorIcon,
    delay: delay
  });
  return errorMessages;
};

exports.checkFileToUpload = checkFileToUpload;

var getIconByFileType = function getIconByFileType(fileType) {
  var CONTENT_TYPE = _constants.ATTACHMENT.CONTENT_TYPE,
      IMAGE_ICON = _constants.ATTACHMENT.IMAGE_ICON;

  switch (true) {
    case isMediaType(fileType, CONTENT_TYPE.MEDIA_TYPE.IMAGE):
      return IMAGE_ICON.IMAGE;

    case sameContent(fileType, CONTENT_TYPE.WORD):
      return IMAGE_ICON.WORD;

    case sameContent(fileType, CONTENT_TYPE.EXCEL):
      return IMAGE_ICON.EXCEL;

    case sameContent(fileType, CONTENT_TYPE.PDF):
      return IMAGE_ICON.PDF;

    case sameContent(fileType, CONTENT_TYPE.POWER_POINT):
      return IMAGE_ICON.POWER_POINT;

    case sameContent(fileType, CONTENT_TYPE.ARCHIVE):
      return IMAGE_ICON.ARCHIVE;

    case isMediaType(fileType, CONTENT_TYPE.MEDIA_TYPE.AUDIO):
      return IMAGE_ICON.AUDIO;

    case isMediaType(fileType, CONTENT_TYPE.MEDIA_TYPE.VIDEO):
      return IMAGE_ICON.VIDEO;

    default:
      return IMAGE_ICON.DEFAULT;
  }
};

exports.getIconByFileType = getIconByFileType;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9BdHRhY2htZW50L3V0aWxzLmpzIl0sIm5hbWVzIjpbImdldEZpbGVFeHRlbnNpb25zIiwiZmlsZU5hbWUiLCJzcGxpdHRlZCIsInNwbGl0IiwibGVuZ3RoIiwic2FtZUNvbnRlbnQiLCJmaWxlVHlwZSIsImNvbnRlbnQiLCJzb21lIiwiZWwiLCJpc01lZGlhVHlwZSIsIm1lZGlhVHlwZSIsInR5cGUiLCJjaGVja0ZpbGVUb1VwbG9hZCIsImZpbGUiLCJwcm9wcyIsIm1heEF0dGFjaG1lbnRTaXplIiwiY29udGVudFR5cGUiLCJleHRlbnNpb25zIiwiZXJyb3JNZXNzYWdlc0RlbGF5IiwidGFibGVTeXNJZCIsInRhYmxlTmFtZSIsImlzRml0U2l6ZSIsInNpemUiLCJpc0ZpdFR5cGUiLCJpbmNsdWRlcyIsImlzRml0RXh0ZW5zaW9ucyIsIm5hbWUiLCJlcnJvckljb24iLCJlcnJvck1lc3NhZ2VzIiwiZGVsYXkiLCJwdXNoIiwiam9pbiIsImljb24iLCJnZXRJY29uQnlGaWxlVHlwZSIsIkNPTlRFTlRfVFlQRSIsIkFUVEFDSE1FTlQiLCJJTUFHRV9JQ09OIiwiTUVESUFfVFlQRSIsIklNQUdFIiwiV09SRCIsIkVYQ0VMIiwiUERGIiwiUE9XRVJfUE9JTlQiLCJBUkNISVZFIiwiQVVESU8iLCJWSURFTyIsIkRFRkFVTFQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFFTyxJQUFNQSxpQkFBaUIsR0FBRyxTQUFwQkEsaUJBQW9CLENBQUNDLFFBQUQsRUFBYztBQUMzQyxNQUFJQyxRQUFRLEdBQUdELFFBQVEsQ0FBQ0UsS0FBVCxDQUFlLEdBQWYsQ0FBZjtBQUNBLE1BQUdELFFBQVEsQ0FBQ0UsTUFBVCxHQUFnQixDQUFuQixFQUNJLE9BQU9GLFFBQVEsQ0FBQ0EsUUFBUSxDQUFDRSxNQUFULEdBQWdCLENBQWpCLENBQWY7QUFDSixTQUFPLEVBQVA7QUFDSCxDQUxNOzs7O0FBUUEsSUFBTUMsV0FBVyxHQUFHLFNBQWRBLFdBQWMsQ0FB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USxDQUN0QkMsVUFEc0I7O0FBRTNDLFVBQVEsSUFBUjtBQUNJLFNBQU0zQixXQUFXLENBQUNKLFFBQUQsRUFBVzZCLFlBQVksQ0FBQ0csVUFBYixDQUF3QkMsS0FBbkMsQ0FBakI7QUFDSSxhQUFPRixVQUFVLENBQUNFLEtBQWxCOztBQUNKLFNBQU1sQyxXQUFXLENBQUNDLFFBQUQsRUFBVzZCLFlBQVksQ0FBQ0ssSUFBeEIsQ0FBakI7QUFDSSxhQUFPSCxVQUFVLENBQUNHLElBQWxCOztBQUNKLFNBQU1uQyxXQUFXLENBQUNDLFFBQUQsRUFBVzZCLFlBQVksQ0FBQ00sS0FBeEIsQ0FBakI7QUFDSSxhQUFPSixVQUFVLENBQUNJLEtBQWxCOztBQUNKLFNBQUtwQyxXQUFXLENBQUNDLFFBQUQsRUFBVzZCLFlBQVksQ0FBQ08sR0FBeEIsQ0FBaEI7QUFDSSxhQUFPTCxVQUFVLENBQUNLLEdBQWxCOztBQUNKLFNBQU1yQyxXQUFXLENBQUNDLFFBQUQsRUFBVzZCLFlBQVksQ0FBQ1EsV0FBeEIsQ0FBakI7QUFDSSxhQUFPTixVQUFVLENBQUNNLFdBQWxCOztBQUNKLFNBQU10QyxXQUFXLENBQUNDLFFBQUQsRUFBVzZCLFlBQVksQ0FBQ1MsT0FBeEIsQ0FBakI7QUFDSSxhQUFPUCxVQUFVLENBQUNPLE9BQWxCOztBQUNKLFNBQUtsQyxXQUFXLENBQUNKLFFBQUQsRUFBVzZCLFlBQVksQ0FBQ0csVUFBYixDQUF3Qk8sS0FBbkMsQ0FBaEI7QUFDSSxhQUFPUixVQUFVLENBQUNRLEtBQWxCOztBQUNKLFNBQU1uQyxXQUFXLENBQUNKLFFBQUQsRUFBVzZCLFlBQVksQ0FBQ0csVUFBYixDQUF3QlEsS0FBbkMsQ0FBakI7QUFDSSxhQUFPVCxVQUFVLENBQUNTLEtBQWxCOztBQUNKO0FBQVMsYUFBT1QsVUFBVSxDQUFDVSxPQUFsQjtBQWpCYjtBQW1CSCxDQXJCTSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7QVRUQUNITUVOVH0gZnJvbSAnLi9jb25zdGFudHMnXHJcblxyXG5leHBvcnQgY29uc3QgZ2V0RmlsZUV4dGVuc2lvbnMgPSAoZmlsZU5hbWUpID0+IHtcclxuICAgIGxldCBzcGxpdHRlZCA9IGZpbGVOYW1lLnNwbGl0KCcuJyk7XHJcbiAgICBpZihzcGxpdHRlZC5sZW5ndGg+MSlcclxuICAgICAgICByZXR1cm4gc3BsaXR0ZWRbc3BsaXR0ZWQubGVuZ3RoLTFdXHJcbiAgICByZXR1cm4gXCJcIjtcclxufVxyXG5cclxuXHJcbmV4cG9ydCBjb25zdCBzYW1lQ29udGVudCA9IChmaWxlVHlwZSwgY29udGVudCkgPT4ge1xyXG4gICAgcmV0dXJuIGNvbnRlbnQuc29tZShlbD0+IGVsID09PSBmaWxlVHlwZSlcclxufVxyXG5cclxuY29uc3QgaXNNZWRpYVR5cGUgPSAoZmlsZVR5cGUsIG1lZGlhVHlwZSkgPT4ge1xyXG4gICAgbGV0IHR5cGUgPSBmaWxlVHlwZS5zcGxpdChcIi9cIilbMF07XHJcbiAgICByZXR1cm4gdHlwZSA9PT0gbWVkaWFUeXBlO1xyXG59XHJcbmV4cG9ydCBjb25zdCBjaGVja0ZpbGVUb1VwbG9hZCA9IChmaWxlLCBwcm9wcykgPT4ge1xyXG4gICAgY29uc3Qge21heEF0dGFjaG1lbnRTaXplLCBjb250ZW50VHlwZSwgZXh0ZW5zaW9ucywgZXJyb3JNZXNzYWdlc0RlbGF5LCB0YWJsZVN5c0lkLCB0YWJsZU5hbWV9ID0gcHJvcHM7XHJcbiAgICBsZXQgaXNGaXRTaXplID0gbWF4QXR0YWNobWVudFNpemUgPyBmaWxlLnNpemUgPD0gbWF4QXR0YWNobWVudFNpemUgOiB0cnVlO1xyXG4gICAgbGV0IGlzRml0VHlwZSA9IGNvbnRlbnRUeXBlID8gY29udGVudFR5cGUuaW5jbHVkZXMoZmlsZS50eXBlKSA6IHRydWU7XHJcbiAgICBsZXQgaXNGaXRFeHRlbnNpb25zID0gZXh0ZW5zaW9ucyA/IGV4dGVuc2lvbnMuaW5jbHVkZXMoZ2V0RmlsZUV4dGVuc2lvbnMoZmlsZS5uYW1lKSkgOiB0cnVlO1xyXG5cclxuICAgIGxldCBlcnJvckljb24gPSBcImV4Y2xhbWF0aW9uLWNpcmNsZVwiXHJcbiAgICBsZXQgZXJyb3JNZXNzYWdlcyA9IFtdXHJcbiAgICBsZXQgZGVsYXkgPSBlcnJvck1lc3NhZ2VzRGVsYXk7XHJcblxyXG4gICAgaWYgKCFpc0ZpdFR5cGUpXHJcbiAgICAgICAgZXJyb3JNZXNzYWdlcy5wdXNoKHtcclxuICAgICAgICAgICAgY29udGVudDogYEF2YWlsYWJsZSB0eXBlczogJHtjb250ZW50VHlwZS5qb2luKCcsICcpfWAsXHJcbiAgICAgICAgICAgIGljb246IGVycm9ySWNvbixcclxuICAgICAgICAgICAgZGVsYXk6IGRlbGF5XHJcbiAgICAgICAgfSlcclxuICAgIGlmICghaXNGaXRTaXplKVxyXG4gICAgICAgIGVycm9yTWVzc2FnZXMucHVzaCh7XHJcbiAgICAgICAgICAgIGNvbnRlbnQ6IGBNYXggZmlsZSBzaXplID0gJHttYXhBdHRhY2htZW50U2l6ZSAvIDEwMjR9IEtiYCxcclxuICAgICAgICAgICAgaWNvbjogZXJyb3JJY29uLFxyXG4gICAgICAgICAgICBkZWxheTogZGVsYXlcclxuICAgICAgICB9KVxyXG4gICAgaWYgKCFpc0ZpdEV4dGVuc2lvbnMpXHJcbiAgICAgICAgZXJyb3JNZXNzYWdlcy5wdXNoKHtcclxuICAgICAgICAgICAgY29udGVudDogYEF2YWlsYWJsZSBleHRlbnNpb25zOiAke2V4dGVuc2lvbnMuam9pbignLCAnKX1gLFxyXG4gICAgICAgICAgICBpY29uOiBlcnJvckljb24sXHJcbiAgICAgICAgICAgIGRlbGF5OiBkZWxheVxyXG4gICAgICAgIH0pXHJcbiAgICBpZiAoIXRhYmxlU3lzSWQgfHwgIXRhYmxlTmFtZSlcclxuICAgICAgICBlcnJvck1lc3NhZ2VzLnB1c2goe2NvbnRlbnQ6IGBDYW4ndCBnZXQgYWNjZXNzIHRvIHRhYmxlYCwgaWNvbjogZXJyb3JJY29uLCBkZWxheTogZGVsYXl9KVxyXG5cclxuICAgIHJldHVybiBlcnJvck1lc3NhZ2VzO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0SWNvbkJ5RmlsZVR5cGUgPSAoZmlsZVR5cGUpID0+IHtcclxuICAgIGNvbnN0IHtDT05URU5UX1RZUEUsIElNQUdFX0lDT059ID0gQVRUQUNITUVOVDtcclxuICAgIHN3aXRjaCAodHJ1ZSkge1xyXG4gICAgICAgIGNhc2UgKGlzTWVkaWFUeXBlKGZpbGVUeXBlLCBDT05URU5UX1RZUEUuTUVESUFfVFlQRS5JTUFHRSkpIDpcclxuICAgICAgICAgICAgcmV0dXJuIElNQUdFX0lDT04uSU1BR0U7XHJcbiAgICAgICAgY2FzZSAoc2FtZUNvbnRlbnQoZmlsZVR5cGUsIENPTlRFTlRfVFlQRS5XT1JEKSk6XHJcbiAgICAgICAgICAgIHJldHVybiBJTUFHRV9JQ09OLldPUkQ7XHJcbiAgICAgICAgY2FzZSAoc2FtZUNvbnRlbnQoZmlsZVR5cGUsIENPTlRFTlRfVFlQRS5FWENFTCkpOlxyXG4gICAgICAgICAgICByZXR1cm4gSU1BR0VfSUNPTi5FWENFTDtcclxuICAgICAgICBjYXNlKHNhbWVDb250ZW50KGZpbGVUeXBlLCBDT05URU5UX1RZUEUuUERGKSk6XHJcbiAgICAgICAgICAgIHJldHVybiBJTUFHRV9JQ09OLlBERjtcclxuICAgICAgICBjYXNlIChzYW1lQ29udGVudChmaWxlVHlwZSwgQ09OVEVOVF9UWVBFLlBPV0VSX1BPSU5UKSk6XHJcbiAgICAgICAgICAgIHJldHVybiBJTUFHRV9JQ09OLlBPV0VSX1BPSU5UO1xyXG4gICAgICAgIGNhc2UgKHNhbWVDb250ZW50KGZpbGVUeXBlLCBDT05URU5UX1RZUEUuQVJDSElWRSkpOlxyXG4gICAgICAgICAgICByZXR1cm4gSU1BR0VfSUNPTi5BUkNISVZFO1xyXG4gICAgICAgIGNhc2UoaXNNZWRpYVR5cGUoZmlsZVR5cGUsIENPTlRFTlRfVFlQRS5NRURJQV9UWVBFLkFVRElPKSk6XHJcbiAgICAgICAgICAgIHJldHVybiBJTUFHRV9JQ09OLkFVRElPO1xyXG4gICAgICAgIGNhc2UgKGlzTWVkaWFUeXBlKGZpbGVUeXBlLCBDT05URU5UX1RZUEUuTUVESUFfVFlQRS5WSURFTykpOlxyXG4gICAgICAgICAgICByZXR1cm4gSU1BR0VfSUNPTi5WSURFTztcclxuICAgICAgICBkZWZhdWx0OiByZXR1cm4gSU1BR0VfSUNPTi5ERUZBVUxUO1xyXG4gICAgfVxyXG59Il19